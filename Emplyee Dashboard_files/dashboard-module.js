/*!
 * HITACHI VANTARA PROPRIETARY AND CONFIDENTIAL
 *
 * Copyright 2002 - 2017 Hitachi Vantara. All rights reserved.
 *
 * NOTICE: All information including source code contained herein is, and
 * remains the sole property of Hitachi Vantara and its licensors. The intellectual
 * and technical concepts contained herein are proprietary and confidential
 * to, and are trade secrets of Hitachi Vantara and may be covered by U.S. and foreign
 * patents, or patents in process, and are protected by trade secret and
 * copyright laws. The receipt or possession of this source code and/or related
 * information does not convey or imply any rights to reproduce, disclose or
 * distribute its contents, or to manufacture, use, or sell anything that it
 * may describe, in whole or in part. Any reproduction, modification, distribution,
 * or public display of this information without the express written authorization
 * from Hitachi Vantara is strictly prohibited and in violation of applicable laws and
 * international treaties. Access to the source code contained herein is strictly
 * prohibited to anyone except those individuals and entities who have executed
 * confidentiality and non-disclosure agreements or other agreements with Hitachi Vantara,
 * explicitly covering such access.
 */

/*!
 * jQuery JavaScript Library v1.12.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:17Z
 */

/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */

/*!
 * Copyright 2002 - 2017 Webdetails, a Hitachi Vantara company. All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*
  Based on Base.js 1.1a (c) 2006-2010, Dean Edwards
  Updated to pass JSHint and converted into a module by Kenneth Powers
  License: http://www.opensource.org/licenses/mit-license.php
*/

/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

//! moment.js
//! version : 2.11.2
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*!
 * Copyright 2002 - 2018 Webdetails, a Hitachi Vantara company.  All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2017 Webdetails, a Hitachi Vantara company.  All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*! Copyright 2010 Stanford Visualization Group, Mike Bostock, BSD license. */

/*! 793deacae920bf6616ca6389496fafdee68741ec */

/*
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - Neither the name of the author nor the names of contributors may be used to
 *   endorse or promote products derived from this software without specific
 *   prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

/* Copyright Google Inc.
 * Licensed under the Apache Licence Version 2.0
 * Autogenerated at Fri Aug 13 11:26:55 PDT 2010
 * @provides html4
 */

// Copyright (C) 2010 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/*!
 * Copyright 2002 - 2018 Webdetails, a Hitachi Vantara company. All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2018 Webdetails, a Hitachi Vantara company. All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2018 Hitachi Vantara. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*!
 * Copyright 2010 - 2017 Hitachi Vantara. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*!
 * Copyright 2017-2018 Hitachi Vantara. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*!
 * Copyright 2010 - 2018 Hitachi Vantara. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*
 * This program is free software; you can redistribute it and/or modify it under the
 * terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
 * Foundation.
 *
 * You should have received a copy of the GNU Lesser General Public License along with this
 * program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
 * or from the Free Software Foundation, Inc.,
 * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details.
 *
 * Copyright 2014 - 2017 Hitachi Vantara. All rights reserved.
 */

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*! *
*
*  Base64 encode / decode
*  http://www.webtoolkit.info
*  http://www.webtoolkit.info/license
*
**/

/*!
 * Copyright 2018 Webdetails, a Hitachi Vantara company. All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2010 - 2017 Hitachi Vantara.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

function pentahoAction(e,t,n,r,i){var s=getViewActionUrlAndQuery(e,t,n,r),o=s.url,u=s.query;return pentahoPost(o,u,i)}function getViewActionUrl(e,t,n,r){var i=getViewActionUrlAndQuery(e,t,n,r),s=i.url,o=i.query;return s+"?"+o}function getViewActionUrlAndQuery(e,t,n,r){var i=CONTEXT_PATH+"ViewAction",s="wrapper=false&solution="+e+"&path="+t+"&action="+n;if(r){var o;for(o=0;o<r.length;o++)s+="&"+encodeURIComponent(r[o][0])+"="+encodeURIComponent(r[o][1])}var u={};return u.url=i,u.query=s,u}function pentahoService(e,t,n,r){var i=CONTEXT_PATH+"ServiceAction",s="ajax=true&";e&&(s+="component="+e+"&");if(t){var o;for(o=0;o<t.length;o++)s+="&"+encodeURIComponent(t[o][0])+"="+encodeURIComponent(t[o][1])}return pentahoPost(i,s,n,r)}function pentahoGet(e,t,n,r){var i=undefined!=n&&null!=n,s=null,o="text/xml";r&&(o=r);if(window.XMLHttpRequest)s=new XMLHttpRequest,s.overrideMimeType&&s.overrideMimeType(o);else if(window.ActiveXObject)try{s=new ActiveXObject("Msxml2.XMLHTTP")}catch(u){try{s=new ActiveXObject("Microsoft.XMLHTTP")}catch(u){s=null}}if(!s)throw new Error("Cannot create an XMLHTTP instance");return i&&(s.onreadystatechange=function(){pentahoResponse(s,n)}),s.open("GET",e+"?"+t,i),s.send(null),i?null:getResponse(s)}function getUnauthorizedMsg(){return"<web-service><unauthorized/></web-service>"}function getNotFoundMsg(){return"<web-service><not-found/></web-service>"}function pentahoPost(e,t,n,r){var i=undefined!=n&&null!=n,s=null,o="text/xml";r&&(o=r);if(window.XMLHttpRequest)s=new XMLHttpRequest,s.overrideMimeType&&s.overrideMimeType(o);else if(window.ActiveXObject)try{s=new ActiveXObject("Msxml2.XMLHTTP")}catch(u){try{s=new ActiveXObject("Microsoft.XMLHTTP")}catch(u){s=null}}if(!s)throw new Error("Cannot create XMLHTTP instance");return i&&(s.onreadystatechange=function(){pentahoResponse(s,n)}),s.open("POST",e,i),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(t),i?null:getResponse(s)}function pentahoResponse(http_request,func){if(http_request.readyState==COMPLETE)try{var content=getResponse(http_request),debugPath="";if(typeof func=="function")debugPath="function",func(content);else if(typeof func=="object"&&undefined!=func.obj)debugPath="object",func.method.call(func.obj,content);else{if(typeof func!="string")throw new Error("Invalid state in pentahoResponse, unrecognized callback function.");debugPath="string",eval(func+"( content );")}}catch(e){throw typeof console!="undefined"&&console.log("callback function type was "+debugPath),alert("pentaho-ajax.js.pentahoResponse(): "+e),e}}function getResponse(e){switch(e.status){case STATUS_OK:return e.responseText;case STATUS_UNAUTHORIZED:return getUnauthorizedMsg();case STATUS_NOT_FOUND:return getNotFoundMsg();default:return null}}function callSetter(object,name,value){if(trace){var objectName=object?object.type?object.type:""+object:"null",valueName=value?value.type?value.type:""+value:"null";trace.push("callSetter "+name+" in "+objectName+" to "+valueName+"\n")}var method=name.charAt(0).toUpperCase()+name.substring(1),worked=!1,js1="object.add"+method+"(value)",js2="object.set"+method+"(value)";try{eval(js1),worked=!0}catch(e){}if(worked)return;try{eval(js2),worked=!0}catch(e){}worked||(trace&&trace.push("Statement failed: "+name+"\nObject: "+object.type+"\nValue: "+value+"\n"),object.type?alert("Statement failed: "+name+"\nObject: "+object.type+"\nValue: "+value):alert("Statement failed: "+name+"\nObject: "+object+"\nValue: "+value))}function setObjectProperties(e,t,n){var r=n;if(trace){var i=e?e.type?e.type:""+e:"null";trace.push("setObjectProperties on object "+i+"\n")}r=n.properties;for(propName in r){var s=r[propName];s?s.type?callSetter(e,propName,createObject(propName,s)):callSetter(e,propName,s):callSetter(e,propName,s)}}function setArrayProperties(e,t,n){var r=n;if(trace){var i=e?e.type?e.type:""+e:"null";trace.push("setObjectProperties array on object "+i+"\n")}var s;items=n.items;for(s=0;s<items.length;s++){var o=items[s],u=getJsonObjectType(o);if(u=="object"){var a=getJsonObjectName(o),f=createObject(a,o[a]);callSetter(e,a,f)}}}function getJsonObjectType(e){if(!e)return trace&&trace.push("getJsonObjectType: null object type\n"),"null";var t=getJsonObjectName(e);return e[t]&&e[t].type?(trace&&trace.push("getJsonObjectType: "+e[t].type+"\n"),e[t].type):(trace&&trace.push("getJsonObjectType: unknown\n"),"unknown")}function getObject(e){var t=getJsonObjectName(e);return t==null?(trace&&trace.push("getObject: null object name\n"),null):(trace&&trace.push("getObject: "+t+"\n"),createObject(t,e))}function createObject(name,json){jsonDebug&&alert("creating object for node: "+name),trace&&trace.push("createObject for "+name+"\n");try{var char=name.charAt(0),objectName=char.toUpperCase()+name.substring(1),object=eval("new "+objectName+"()");return json["type"]=="object"?setObjectProperties(object,name,json):json["type"]=="array"&&setArrayProperties(object,name,json),object}catch(e){alert("Could not create object of type: "+objectName+"\nMessage: "+e)}return null}function getJsonObjectName(e){if(typeof e!="object")return trace&&trace.push("getJsonObjectName: non-object\n"),null;var t=0;for(x in e)t++;if(t!=1)return trace&&trace.push("getJsonObjectName: too many properties\n"),null;for(name in e)return trace&&trace.push("getJsonObjectName: returning "+name+"\n"),name;return trace&&trace.push("getJsonObjectName: no properties\n"),null}function Dashboard(){this.type="Dashboard",this.title="",this.heading="",this.templateRef="",this.themeRef="",this.documentation=null,this.widgets=new Widgets,this.dashboardParameters=null,this.globalRefreshPeriod=null,this.enableWidgetPrinting=!1,this.setTitle=function(e){this.title=e},this.getTitle=function(){return this.title},this.setHeading=function(e){this.heading=e},this.getHeading=function(){return this.heading},this.setGlobalRefresh=function(e){this.globalRefreshPeriod=e},this.getGlobalRefresh=function(){return this.globalRefreshPeriod},this.setEnableWidgetPrinting=function(e){this.enableWidgetPrinting=e},this.getEnableWidgetPrinting=function(){return this.enableWidgetPrinting},this.setTemplateRef=function(e){this.templateRef=e},this.getTemplateRef=function(){return this.templateRef},this.setThemeRef=function(e){this.themeRef=e},this.getThemeRef=function(){return this.themeRef},this.setDocumentation=function(e){this.documentation=e},this.getDocumentation=function(){return this.documentation},this.addWidget=function(e){this.widgets.addWidget(e)},this.setWidgets=function(e){e==null?this.widgets=new Widgets:this.widgets=e},this.setDashboardParameters=function(e){this.dashboardParameters=e};var e=function(t,n){var r;for(var i in n){r=i;break}for(var s in n[r].properties)if(s&&s!==""&&s!="parentId"&&s!="id"){var o=n[r].properties[s];if(o==null||s=="flex"&&!o)continue;typeof o=="string"&&(o=PentahoDashboardController.xmlEncode(o));var u=t.indexOf("<"+r+' id="'+n[r].properties.id+'"');if(u>=0){var a=t.indexOf(">",u);t.charAt(a-1)=="/"&&a--;var f=t.indexOf(s+'="',u);if(f<a&&f>-1){var l=t.indexOf('"',f+(s.length+2)),c=t.substring(l);t=t.substring(0,f+(s.length+2))+o+c}else{var c=t.substring(a);t=t.substring(0,a)+" "+s+'="'+o+'" '+c}}else t=t.substring(0,t.indexOf("</overlay>"))+'<box id="'+n[r].properties.id+'" '+s+'="'+o+'"'+"/></overlay>"}for(var h=0;h<n[r].items.length;h++){var p=n[r].items[h],d;for(var i in p){d=i;break}t=e(t,p)}return t};this.createOverlay=function(){var t=overlayXml;for(var n=0;n<xulDomJson.window.items.length;n++)t=e(t,xulDomJson.window.items[n]);return t},this.asXml=function(e){var t="<dashboard>\n<title>"+PentahoDashboardController.xmlEncode(this.title)+"</title>\n"+"<heading>"+PentahoDashboardController.xmlEncode(this.heading)+"</heading>\n"+"<enableWidgetPrinting>"+this.getEnableWidgetPrinting()+"</enableWidgetPrinting>\n";this.globalRefreshPeriod&&(t+="<globalRefresh>"+this.globalRefreshPeriod+"</globalRefresh>\n"),this.documentation&&(t+=this.documentation.asXml()),t+="<template-ref>"+this.templateRef+"</template-ref>\n"+"<theme-ref>"+this.themeRef+"</theme-ref>\n"+"<layout>\n"+this.createOverlay()+"\n</layout>\n",this.dashboardParameters&&(t+=this.dashboardParameters.asXml(e));var n=dashboardWidgets.length,r,i,s,o=[],u,a,f,l,c,h,p,d,v,m,g;for(r=0;r<n;r++){i=dashboardWidgets[r],u=i.ignoreFields||[],u=u.concat(["dashboard","_callbacks","_events"]);if(u){a=u.length;for(s=0;s<a;s++){f=u[s],l=i[f];if(!l)continue;o.push({obj:i,field:f,value:l}),delete i[f]}}c=i.parameters;if(c){h=c.length,m={};for(s=0;s<h;s++)p=c[s],d=p[1],v=d===""||d==="NIL"?p[2]||"":e.getParameterValue(d)||"",$.isArray(v)&&(v=v.join("|")),m["parameter"+s]={name:p[0],"var":d,"const":v};i.parameters=m}g=i.outputParameters;if(g){h=g.length,m={};for(s=0;s<h;s++)p=g[s],m["parameter"+s]={name:p[0],enabled:p[1],id:p.length>2?p[2]:p[0]};i.outputParameters=m}t+="<widget><![CDATA[",i.name.indexOf("widget")===0?t+=encodeURIComponent(JSON.stringify([i])):t+=encodeURIComponent("["+serializeToJson(i)+"]"),t+="]]></widget>\n",i.parameters=c,i.outputParameters=g}t+="<widgetJavascript><![CDATA[",t+=encodeURIComponent(serializeToJson(dashboardWidgets)),t+="]]></widgetJavascript>\n",t+="</dashboard>\n";for(r=0;r<o.length;r++)f=o[r],f.obj[f.field]=f.value;return t}}function serializeToJson(e){return JSON.stringify(e)}function DashboardParameters(){this.dashboardParameters=new Array,this.addDashboardParameter=function(e){this.dashboardParameters.push(e)},this.getDashboardParameters=function(){return this.dashboardParameters},this.asXml=function(e){var t="<parameters>\n";for(var n=0;n<this.dashboardParameters.length;n++)t+=this.dashboardParameters[n].asXml(e);return t+="</parameters>\n",t}}function DashboardParameter(){this.type="DashboardParameter",this.name="",this.defaultValue="",this.setName=function(e){this.name=e},this.setDefaultValue=function(e){this.defaultValue=e},this.asXml=function(e){var t="",n=null;for(var r=0;r<e.components.length;r++)if(e.components[r].parameter==this.name){n=e.components[r];break}if(n==null||!n.useFirstValue)if(n&&n.defaultValue)t=n.defaultValue;else{var i=e.getParameterValue(this.name);if(typeof i=="object"&&i.length)for(var r=0;r<i.length;r++)r>0&&(t+="|"),t+=i[r];else t=""+i}var s="<parameter>\n  <name>"+this.name+"</name>\n"+"  <defaultValue>"+PentahoDashboardController.xmlEncode(t)+"</defaultValue>\n"+"</parameter>\n";return s}}function Documentation(){this.type="Documentation",this.author="",this.description="",this.icon="",this.setAuthor=function(e){this.author=e},this.setDescription=function(e){this.description=e},this.setIcon=function(e){this.icon=e},this.asXml=function(){var e="<documentation>\n<author>"+this.author+"</author>\n"+"<description>"+this.description+"</description>\n"+"<icon>"+this.icon+"</icon>\n"+"</documentation>\n";return e}}function Widgets(){this.widgets=new Array,this.addWidget=function(e){this.widgets.push(e)}}function Templates(){this.templates=new Array,this.addTemplate=function(e){this.templates.push(e)},this.getTemplateCount=function(){return this.templates.length},this.getTemplate=function(e){return e<this.getTemplateCount()?this.templates[e]:null}}function Template(){this.name="",this.path="",this.thumbnail="",this.themeType="",this.setName=function(e){this.name=e},this.getName=function(){return this.name},this.setPath=function(e){this.path=e},this.getPath=function(){return this.path},this.setThumbnail=function(e){this.thumbnail=e},this.getThumbnail=function(){return this.thumbnail},this.setThemes=function(e){this.themeType=e},this.getThemes=function(){return this.themeType}}function Themes(){this.themes=new Array,this.addTheme=function(e){this.themes.push(e)},this.setTheme=function(e){this.themes.push(e)},this.getThemeCount=function(){return this.themes.length},this.getTheme=function(e){return e<this.getThemeCount()?this.themes[e]:null}}function Theme(){this.name="",this.path="",this.thumbnail="",this.setName=function(e){this.name=e},this.getName=function(){return this.name},this.setPath=function(e){this.path=e},this.getPath=function(){return this.path},this.setThumbnail=function(e){this.thumbnail=e},this.getThumbnail=function(){return this.thumbnail}}function Grid(){this.type="Grid",this.columns=new Columns,this.rows=new Rows,this.coords=new Coords,this.setColumns=function(e){this.columns=e,alert(e.type)},this.setRows=function(e){this.rows=e},this.getColumns=function(){return this.columns.getColumns()},this.getRows=function(){return this.rows.getRows()}}function Columns(){this.type="Columns",this.columns=new Array,this.setColumn=function(e){this.addColumn(e)},this.addColumn=function(e){this.columns.push(e)},this.getColumns=function(){return this.columns}}function Rows(){this.type="Rows",this.rows=new Array,this.setRow=function(e){this.addRow(e)},this.addRow=function(e){this.rows.push(e)},this.getRows=function(){return this.rows},this.getRow=function(e){return this.rows[e]}}function Row(){this.type="Row",this.height=-1,this.flex=-1,this.children=new Array,this.pixelHeight=-1,this.top=-1,this.getHeight=function(){return this.height},this.getFlex=function(){return this.flex},this.setHeight=function(e){this.height=e},this.setFlex=function(e){this.flex=e},this.getFixedHeight=function(){return this.height!=-1?this.height:0},this.getPixelHeight=function(e,t){return this.flex!=-1?e*this.flex/t:this.height},this.setBox=function(e){this.addBox(e)},this.addBox=function(e){this.children.push(e)},this.setGrid=function(e){this.addGrid(e)},this.addGrid=function(e){this.children.push(e)},this.getChildren=function(){return this.children}}function Column(){this.type="Column",this.width=-1,this.flex=-1,this.pixelWidth=-1,this.top=-1,this.getWidth=function(){return this.width},this.getFlex=function(){return this.flex},this.setWidth=function(e){this.width=e},this.setFlex=function(e){this.flex=e},this.getFixedWidth=function(){return this.width!=-1?this.width:0},this.getPixelWidth=function(e,t){return this.flex!=-1?e*this.flex/t:this.width},this.setBogus=function(e){}}function Box(){this.type="Box",this.id="",this.coords=new Coords,this.offsetTop=0,this.offsetLeft=0,this.offsetBottom=0,this.offsetRight=0,this.boxId="",this.titleId="",this.containerId="",this.setId=function(e){this.id=e},this.setTitleId=function(e){this.titleId=e},this.setContainerId=function(e){this.containerId=e},this.setBoxId=function(e){this.boxId=e},this.setOffsetTop=function(e){this.offsetTop=e},this.setOffsetLeft=function(e){this.offsetLeft=e},this.setOffsetBottom=function(e){this.offsetBottom=e},this.setOffsetRight=function(e){this.offsetRight=e}}function Coords(){this.type="Coords",this.top=-1,this.left=-1,this.width=-1,this.height=-1,this.right=-1,this.bottom=-1}var COMPLETE=4,STATUS_OK=200,STATUS_UNAUTHORIZED=401,STATUS_NOT_FOUND=404;define("dashboards/pentaho-ajax",function(){}),function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}(typeof window!="undefined"?window:this,function(e,t){function y(e){var t=!!e&&"length"in e&&e.length,n=p.type(e);return n==="function"||p.isWindow(e)?!1:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function N(e,t,n){if(p.isFunction(t))return p.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return p.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(T.test(t))return p.filter(t,e,n);t=p.filter(t,e)}return p.grep(e,function(e){return p.inArray(e,t)>-1!==n})}function M(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function D(e){var t={};return p.each(e.match(_)||[],function(e,n){t[n]=!0}),t}function H(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",B),e.removeEventListener("load",B)):(r.detachEvent("onreadystatechange",B),e.detachEvent("onload",B))}function B(){if(r.addEventListener||e.event.type==="load"||r.readyState==="complete")H(),p.ready()}function R(e,t,n){if(n===undefined&&e.nodeType===1){var r="data-"+t.replace(q,"-$1").toLowerCase();n=e.getAttribute(r);if(typeof n=="string"){try{n=n==="true"?!0:n==="false"?!1:n==="null"?null:+n+""===n?+n:I.test(n)?p.parseJSON(n):n}catch(i){}p.data(e,t,n)}else n=undefined}return n}function U(e){var t;for(t in e){if(t==="data"&&p.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function z(e,t,r,i){if(!F(e))return;var s,o,u=p.expando,a=e.nodeType,f=a?p.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===undefined&&typeof t=="string")return;l||(a?l=e[u]=n.pop()||p.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:p.noop});if(typeof t=="object"||typeof t=="function")i?f[l]=p.extend(f[l],t):f[l].data=p.extend(f[l].data,t);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==undefined&&(o[p.camelCase(t)]=r),typeof t=="string"?(s=o[t],s==null&&(s=o[p.camelCase(t)])):s=o,s}function W(e,t,n){if(!F(e))return;var r,i,s=e.nodeType,o=s?p.cache:e,u=s?e[p.expando]:p.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){p.isArray(t)?t=t.concat(p.map(t,p.camelCase)):t in r?t=[t]:(t=p.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!U(r):!p.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!U(o[u]))return}s?p.cleanData([e],!0):c.deleteExpando||o!=o.window?delete o[u]:o[u]=undefined}function K(e,t,n,r){var i,s=1,o=20,u=r?function(){return r.cur()}:function(){return p.css(e,t,"")},a=u(),f=n&&n[3]||(p.cssNumber[t]?"":"px"),l=(p.cssNumber[t]||f!=="px"&&+a)&&V.exec(p.css(e,t));if(l&&l[3]!==f){f=f||l[3],n=n||[],l=+a||1;do s=s||".5",l/=s,p.style(e,t,l+f);while(s!==(s=u()/a)&&s!==1&&--o)}return n&&(l=+l||+a||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=f,r.start=l,r.end=i)),i}function nt(e){var t=tt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function it(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll(t||"*"):undefined;if(!s)for(s=[],n=e.childNodes||e;(r=n[i])!=null;i++)!t||p.nodeName(r,t)?s.push(r):p.merge(s,it(r,t));return t===undefined||t&&p.nodeName(e,t)?p.merge([e],s):s}function st(e,t){var n,r=0;for(;(n=e[r])!=null;r++)p._data(n,"globalEval",!t||p._data(t[r],"globalEval"))}function at(e){G.test(e.type)&&(e.defaultChecked=e.checked)}function ft(e,t,n,r,i){var s,o,u,a,f,l,h,d=e.length,v=nt(t),m=[],g=0;for(;g<d;g++){o=e[g];if(o||o===0)if(p.type(o)==="object")p.merge(m,o.nodeType?[o]:o);else if(!ot.test(o))m.push(t.createTextNode(o));else{a=a||v.appendChild(t.createElement("div")),f=(Y.exec(o)||["",""])[1].toLowerCase(),h=rt[f]||rt._default,a.innerHTML=h[1]+p.htmlPrefilter(o)+h[2],s=h[0];while(s--)a=a.lastChild;!c.leadingWhitespace&&et.test(o)&&m.push(t.createTextNode(et.exec(o)[0]));if(!c.tbody){o=f==="table"&&!ut.test(o)?a.firstChild:h[1]==="<table>"&&!ut.test(o)?a:0,s=o&&o.childNodes.length;while(s--)p.nodeName(l=o.childNodes[s],"tbody")&&!l.childNodes.length&&o.removeChild(l)}p.merge(m,a.childNodes),a.textContent="";while(a.firstChild)a.removeChild(a.firstChild);a=v.lastChild}}a&&v.removeChild(a),c.appendChecked||p.grep(it(m,"input"),at),g=0;while(o=m[g++]){if(r&&p.inArray(o,r)>-1){i&&i.push(o);continue}u=p.contains(o.ownerDocument,o),a=it(v.appendChild(o),"script"),u&&st(a);if(n){s=0;while(o=a[s++])Z.test(o.type||"")&&n.push(o)}}return a=null,v}function vt(){return!0}function mt(){return!1}function gt(){try{return r.activeElement}catch(e){}}function yt(e,t,n,r,i,s){var o,u;if(typeof t=="object"){typeof n!="string"&&(r=r||n,n=undefined);for(u in t)yt(e,u,n,r,t[u],s);return e}r==null&&i==null?(i=n,r=n=undefined):i==null&&(typeof n=="string"?(i=r,r=undefined):(i=r,r=n,n=undefined));if(i===!1)i=mt;else if(!i)return e;return s===1&&(o=i,i=function(e){return p().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=p.guid++)),e.each(function(){p.event.add(this,t,i,r,n)})}function Lt(e,t){return p.nodeName(e,"table")&&p.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function At(e){return e.type=(p.find.attr(e,"type")!==null)+"/"+e.type,e}function Ot(e){var t=Tt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){if(t.nodeType!==1||!p.hasData(e))return;var n,r,i,s=p._data(e),o=p._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)p.event.add(t,n,u[n][r])}o.data&&(o.data=p.extend({},o.data))}function _t(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!c.noCloneEvent&&t[p.expando]){i=p._data(t);for(r in i.events)p.removeEvent(t,r,i.handle);t.removeAttribute(p.expando)}if(n==="script"&&t.text!==e.text)At(t).text=e.text,Ot(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),c.html5Clone&&e.innerHTML&&!p.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&G.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function Dt(e,t,n,r){t=s.apply([],t);var i,o,u,a,f,l,h=0,d=e.length,v=d-1,m=t[0],g=p.isFunction(m);if(g||d>1&&typeof m=="string"&&!c.checkClone&&xt.test(m))return e.each(function(i){var s=e.eq(i);g&&(t[0]=m.call(this,i,s.html())),Dt(s,t,n,r)});if(d){l=ft(t,e[0].ownerDocument,!1,e,r),i=l.firstChild,l.childNodes.length===1&&(l=i);if(i||r){a=p.map(it(l,"script"),At),u=a.length;for(;h<d;h++)o=l,h!==v&&(o=p.clone(o,!0,!0),u&&p.merge(a,it(o,"script"))),n.call(e[h],o,h);if(u){f=a[a.length-1].ownerDocument,p.map(a,Ot);for(h=0;h<u;h++)o=a[h],Z.test(o.type||"")&&!p._data(o,"globalEval")&&p.contains(f,o)&&(o.src?p._evalUrl&&p._evalUrl(o.src):p.globalEval((o.text||o.textContent||o.innerHTML||"").replace(Nt,"")))}l=i=null}}return e}function Pt(e,t,n){var r,i=t?p.filter(t,e):e,s=0;for(;(r=i[s])!=null;s++)!n&&r.nodeType===1&&p.cleanData(it(r)),r.parentNode&&(n&&p.contains(r.ownerDocument,r)&&st(it(r,"script")),r.parentNode.removeChild(r));return e}function jt(e,t){var n=p(t.createElement(e)).appendTo(t.body),r=p.css(n[0],"display");return n.detach(),r}function Ft(e){var t=r,n=Bt[e];if(!n){n=jt(e,t);if(n==="none"||!n)Ht=(Ht||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Ht[0].contentWindow||Ht[0].contentDocument).document,t.write(),t.close(),n=jt(e,t),Ht.detach();Bt[e]=n}return n}function Vt(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function tn(e){if(e in en)return e;var t=e.charAt(0).toUpperCase()+e.slice(1),n=Zt.length;while(n--){e=Zt[n]+t;if(e in en)return e}}function nn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=p._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&J(r)&&(s[o]=p._data(r,"olddisplay",Ft(r.nodeName)))):(i=J(r),(n&&n!=="none"||!i)&&p._data(r,"olddisplay",i?n:p.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function rn(e,t,n){var r=Qt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function sn(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=p.css(e,n+$[s],!0,i)),r?(n==="content"&&(o-=p.css(e,"padding"+$[s],!0,i)),n!=="margin"&&(o-=p.css(e,"border"+$[s]+"Width",!0,i))):(o+=p.css(e,"padding"+$[s],!0,i),n!=="padding"&&(o+=p.css(e,"border"+$[s]+"Width",!0,i)));return o}function on(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=zt(e),o=c.boxSizing&&p.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Wt(e,t,s);if(i<0||i==null)i=e.style[t];if(qt.test(i))return i;r=o&&(c.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+sn(e,t,n||(o?"border":"content"),r,s)+"px"}function un(e,t,n,r,i){return new un.prototype.init(e,t,n,r,i)}function hn(){return e.setTimeout(function(){an=undefined}),an=p.now()}function pn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function dn(e,t,n){var r,i=(gn.tweeners[t]||[]).concat(gn.tweeners["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function vn(e,t,n){var r,i,s,o,u,a,f,l,h=this,d={},v=e.style,m=e.nodeType&&J(e),g=p._data(e,"fxshow");n.queue||(u=p._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,h.always(function(){h.always(function(){u.unqueued--,p.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[v.overflow,v.overflowX,v.overflowY],f=p.css(e,"display"),l=f==="none"?p._data(e,"olddisplay")||Ft(e.nodeName):f,l==="inline"&&p.css(e,"float")==="none"&&(!c.inlineBlockNeedsLayout||Ft(e.nodeName)==="inline"?v.display="inline-block":v.zoom=1)),n.overflow&&(v.overflow="hidden",c.shrinkWrapBlocks()||h.always(function(){v.overflow=n.overflow[0],v.overflowX=n.overflow[1],v.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(ln.exec(i)){delete t[r],s=s||i==="toggle";if(i===(m?"hide":"show")){if(i!=="show"||!g||g[r]===undefined)continue;m=!0}d[r]=g&&g[r]||p.style(e,r)}else f=undefined}if(!p.isEmptyObject(d)){g?"hidden"in g&&(m=g.hidden):g=p._data(e,"fxshow",{}),s&&(g.hidden=!m),m?p(e).show():h.done(function(){p(e).hide()}),h.done(function(){var t;p._removeData(e,"fxshow");for(t in d)p.style(e,t,d[t])});for(r in d)o=dn(m?g[r]:0,r,h),r in g||(g[r]=o.start,m&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}else(f==="none"?Ft(e.nodeName):f)==="inline"&&(v.display=f)}function mn(e,t){var n,r,i,s,o;for(n in e){r=p.camelCase(n),i=t[r],s=e[n],p.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=p.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function gn(e,t,n){var r,i,s=0,o=gn.prefilters.length,u=p.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=an||hn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},n),originalProperties:t,originalOptions:n,startTime:an||hn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=p.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?(u.notifyWith(e,[f,1,0]),u.resolveWith(e,[f,t])):u.rejectWith(e,[f,t]),this}}),l=f.props;mn(l,f.opts.specialEasing);for(;s<o;s++){r=gn.prefilters[s].call(f,e,l,f.opts);if(r)return p.isFunction(r.stop)&&(p._queueHooks(f.elem,f.opts.queue).stop=p.proxy(r.stop,r)),r}return p.map(l,dn,f),p.isFunction(f.opts.start)&&f.opts.start.call(e,f),p.fx.timer(p.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function An(e){return p.attr(e,"class")||""}function Vn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(_)||[];if(p.isFunction(n))while(r=s[i++])r.charAt(0)==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function $n(e,t,n,r){function o(u){var a;return i[u]=!0,p.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===Un;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Jn(e,t){var n,r,i=p.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&p.extend(!0,e,n),e}function Kn(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),i===undefined&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){a.unshift(o);break}if(a[0]in n)s=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){s=o;break}r||(r=o)}s=s||r}if(s)return s!==a[0]&&a.unshift(s),n[s]}function Qn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function Gn(e){return e.style&&e.style.display||p.css(e,"display")}function Yn(e){if(!p.contains(e.ownerDocument||r,e))return!0;while(e&&e.nodeType===1){if(Gn(e)==="none"||e.type==="hidden")return!0;e=e.parentNode}return!1}function ir(e,t,n,r){var i;if(p.isArray(t))p.each(t,function(t,i){n||er.test(e)?r(e,i):ir(e+"["+(typeof i=="object"&&i!=null?t:"")+"]",i,n,r)});else if(!n&&p.type(t)==="object")for(i in t)ir(e+"["+i+"]",t[i],n,r);else r(e,t)}function ar(){try{return new e.XMLHttpRequest}catch(t){}}function fr(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function pr(e){return p.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=[],r=e.document,i=n.slice,s=n.concat,o=n.push,u=n.indexOf,a={},f=a.toString,l=a.hasOwnProperty,c={},h="1.12.4",p=function(e,t){return new p.fn.init(e,t)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,m=/-([\da-z])/gi,g=function(e,t){return t.toUpperCase()};p.fn=p.prototype={jquery:h,constructor:p,selector:"",length:0,toArray:function(){return i.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:i.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return p.each(this,e)},map:function(e){return this.pushStack(p.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[u]||{},u++),typeof o!="object"&&!p.isFunction(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((i=arguments[u])!=null)for(r in i){e=o[r],n=i[r];if(o===n)continue;f&&n&&(p.isPlainObject(n)||(t=p.isArray(n)))?(t?(t=!1,s=e&&p.isArray(e)?e:[]):s=e&&p.isPlainObject(e)?e:{},o[r]=p.extend(f,s,n)):n!==undefined&&(o[r]=n)}return o},p.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return p.type(e)==="function"},isArray:Array.isArray||function(e){return p.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!p.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||p.type(e)!=="object"||e.nodeType||p.isWindow(e))return!1;try{if(e.constructor&&!l.call(e,"constructor")&&!l.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!c.ownFirst)for(t in e)return l.call(e,t);for(t in e);return t===undefined||l.call(e,t)},type:function(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?a[f.call(e)]||"object":typeof e},globalEval:function(t){t&&p.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(v,"ms-").replace(m,g)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(y(e)){n=e.length;for(;r<n;r++)if(t.call(e[r],r,e[r])===!1)break}else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return e==null?"":(e+"").replace(d,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(y(Object(e))?p.merge(n,typeof e=="string"?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(u)return u.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=+t.length,r=0,i=e.length;while(r<n)e[i++]=t[r++];if(n!==n)while(t[r]!==undefined)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length,u=!n;for(;s<o;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,i,o=0,u=[];if(y(e)){r=e.length;for(;o<r;o++)i=t(e[o],o,n),i!=null&&u.push(i)}else for(o in e)i=t(e[o],o,n),i!=null&&u.push(i);return s.apply([],u)},guid:1,proxy:function(e,t){var n,r,s;return typeof t=="string"&&(s=e[t],t=e,e=s),p.isFunction(e)?(n=i.call(arguments,2),r=function(){return e.apply(t||this,n.concat(i.call(arguments)))},r.guid=e.guid=e.guid||p.guid++,r):undefined},now:function(){return+(new Date)},support:c}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()});var b=function(e){function st(e,t,r,i){var s,u,f,l,c,d,g,y,S=t&&t.ownerDocument,x=t?t.nodeType:9;r=r||[];if(typeof e!="string"||!e||x!==1&&x!==9&&x!==11)return r;if(!i){(t?t.ownerDocument||t:E)!==p&&h(t),t=t||p;if(v){if(x!==11&&(d=Y.exec(e)))if(s=d[1]){if(x===9){if(!(f=t.getElementById(s)))return r;if(f.id===s)return r.push(f),r}else if(S&&(f=S.getElementById(s))&&b(t,f)&&f.id===s)return r.push(f),r}else{if(d[2])return D.apply(r,t.getElementsByTagName(e)),r;if((s=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(s)),r}if(n.qsa&&!C[e+" "]&&(!m||!m.test(e))){if(x!==1)S=t,y=e;else if(t.nodeName.toLowerCase()!=="object"){(l=t.getAttribute("id"))?l=l.replace(et,"\\$&"):t.setAttribute("id",l=w),g=o(e),u=g.length,c=$.test(l)?"#"+l:"[id='"+l+"']";while(u--)g[u]=c+" "+mt(g[u]);y=g.join(","),S=Z.test(e)&&dt(t.parentNode)||t}if(y)try{return D.apply(r,S.querySelectorAll(y)),r}catch(T){}finally{l===w&&t.removeAttribute("id")}}}}return a(e.replace(U,"$1"),t,r,i)}function ot(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ut(e){return e[w]=!0,e}function at(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ft(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function lt(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function pt(e){return ut(function(t){return t=+t,ut(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function dt(e){return e&&typeof e.getElementsByTagName!="undefined"&&e}function vt(){}function mt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function gt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=x++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f,l=[S,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){f=t[w]||(t[w]={}),a=f[t.uniqueID]||(f[t.uniqueID]={});if((u=a[r])&&u[0]===S&&u[1]===s)return l[2]=u[2];a[r]=l;if(l[2]=e(t,n,o))return!0}}}function yt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function bt(e,t,n){var r=0,i=t.length;for(;r<i;r++)st(e,t[r],n);return n}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[w]&&(r=Et(r)),i&&!i[w]&&(i=Et(i,s)),ut(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||bt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function St(e){var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=gt(function(e){return e===t},u,!0),c=gt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];for(;a<s;a++)if(n=r.relative[e[a].type])h=[gt(yt(h),n)];else{n=r.filter[e[a].type].apply(null,e[a].matches);if(n[w]){i=++a;for(;i<s;i++)if(r.relative[e[i].type])break;return Et(a>1&&yt(h),a>1&&mt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(U,"$1"),n,a<i&&St(e.slice(a,i)),i<s&&St(e=e.slice(i)),i<s&&mt(e))}h.push(n)}return yt(h)}function xt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,d,m,g=0,y="0",b=s&&[],w=[],E=f,x=s||i&&r.find.TAG("*",l),T=S+=E==null?1:Math.random()||.1,N=x.length;l&&(f=o===p||o||l);for(;y!==N&&(c=x[y])!=null;y++){if(i&&c){d=0,!o&&c.ownerDocument!==p&&(h(c),u=!v);while(m=e[d++])if(m(c,o||p,u)){a.push(c);break}l&&(S=T)}n&&((c=!m&&c)&&g--,s&&b.push(c))}g+=y;if(n&&y!==g){d=0;while(m=t[d++])m(b,w,o,u);if(s){if(g>0)while(y--)!b[y]&&!w[y]&&(w[y]=M.call(a));w=wt(w)}D.apply(a,w),l&&!s&&w.length>0&&g+t.length>1&&st.uniqueSort(a)}return l&&(S=T,f=E),b};return n?ut(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ot(),N=ot(),C=ot(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){var n=0,r=e.length;for(;n<r;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+j+"*\\]",q=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|"+".*"+")\\)|)",R=new RegExp(j+"+","g"),U=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),z=new RegExp("^"+j+"*,"+j+"*"),W=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),X=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),V=new RegExp(q),$=new RegExp("^"+F+"$"),J={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,et=/'|\\/g,tt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),nt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},rt=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(it){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=st.support={},s=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},h=st.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;if(o===p||o.nodeType!==9||!o.documentElement)return p;p=o,d=p.documentElement,v=!s(p),(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=at(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=at(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=G.test(p.getElementsByClassName),n.getById=at(function(e){return d.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!="undefined"&&v){var n=t.getElementById(e);return n?[n]:[]}},r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e);if(n.qsa)return t.querySelectorAll(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!="undefined"&&v)return t.getElementsByClassName(e)},g=[],m=[];if(n.qsa=G.test(p.querySelectorAll))at(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a>"+"<select id='"+w+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),at(function(e){var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")});return(n.matchesSelector=G.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&at(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",q)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=G.test(d.compareDocumentPosition),b=t||G.test(d.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===p||e.ownerDocument===E&&b(E,e)?-1:t===p||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:r&4?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,o=[e],u=[t];if(!i||!s)return e===p?-1:t===p?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return lt(e,t);n=e;while(n=n.parentNode)o.unshift(n);n=t;while(n=n.parentNode)u.unshift(n);while(o[r]===u[r])r++;return r?lt(o[r],u[r]):o[r]===E?-1:u[r]===E?1:0},p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){(e.ownerDocument||e)!==p&&h(e),t=t.replace(X,"='$1']");if(n.matchesSelector&&v&&!C[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},st.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):undefined;return s!==undefined?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,r=[],i=0,s=0;c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k);if(c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=st.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=st.selectors={cacheLength:50,createPseudo:ut,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(tt,nt),e[3]=(e[3]||e[4]||e[5]||"").replace(tt,nt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(tt,nt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i.replace(R," ")+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u,b=!1;if(m){if(s){while(v){h=t;while(h=h[v])if(u?h.nodeName.toLowerCase()===g:h.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){h=m,c=h[w]||(h[w]={}),l=c[h.uniqueID]||(c[h.uniqueID]={}),f=l[e]||[],p=f[0]===S&&f[1],b=p&&f[2],h=p&&m.childNodes[p];while(h=++p&&h&&h[v]||(b=p=0)||d.pop())if(h.nodeType===1&&++b&&h===t){l[e]=[S,p,b];break}}else{y&&(h=t,c=h[w]||(h[w]={}),l=c[h.uniqueID]||(c[h.uniqueID]={}),f=l[e]||[],p=f[0]===S&&f[1],b=p);if(b===!1)while(h=++p&&h&&h[v]||(b=p=0)||d.pop())if((u?h.nodeName.toLowerCase()===g:h.nodeType===1)&&++b){y&&(c=h[w]||(h[w]={}),l=c[h.uniqueID]||(c[h.uniqueID]={}),l[e]=[S,b]);if(h===t)break}}return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ut(function(e){var t=[],n=[],r=u(e.replace(U,"$1"));return r[w]?ut(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:ut(function(e){return function(t){return st(e,t).length>0}}),contains:ut(function(e){return e=e.replace(tt,nt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ut(function(e){return $.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(tt,nt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[n<0?n+t:n]}),even:pt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ht(t);return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,o=st.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=z.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=W.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(U," ")}),u=u.slice(n.length);for(o in r.filter)(i=J[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?st.error(e):N(e,a).slice(0)},u=st.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=St(t[n]),s[w]?r.push(s):i.push(s);s=C(e,xt(i,r)),s.selector=e}return s},a=st.select=function(e,t,i,s){var a,f,l,c,h,p=typeof e=="function"&&e,d=!s&&o(e=p.selector||e);i=i||[];if(d.length===1){f=d[0]=d[0].slice(0);if(f.length>2&&(l=f[0]).type==="ID"&&n.getById&&t.nodeType===9&&v&&r.relative[f[1].type]){t=(r.find.ID(l.matches[0].replace(tt,nt),t)||[])[0];if(!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=J.needsContext.test(e)?0:f.length;while(a--){l=f[a];if(r.relative[c=l.type])break;if(h=r.find[c])if(s=h(l.matches[0].replace(tt,nt),Z.test(f[0].type)&&dt(t.parentNode)||t)){f.splice(a,1),e=s.length&&mt(f);if(!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,!t||Z.test(e)&&dt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=at(function(e){return e.compareDocumentPosition(p.createElement("div"))&1}),at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||ft("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!at(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&ft("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),at(function(e){return e.getAttribute("disabled")==null})||ft(B,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),st}(e);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.uniqueSort=p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var w=function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&e.nodeType!==9)if(e.nodeType===1){if(i&&p(e).is(n))break;r.push(e)}return r},E=function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n},S=p.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;p.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?p.find.matchesSelector(r,e)?[r]:[]:p.find.matches(e,p.grep(t,function(e){return e.nodeType===1}))},p.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(p(e).filter(function(){for(t=0;t<i;t++)if(p.contains(r[t],this))return!0}));for(t=0;t<i;t++)p.find(e,r[t],n);return n=this.pushStack(i>1?p.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(N(this,e||[],!1))},not:function(e){return this.pushStack(N(this,e||[],!0))},is:function(e){return!!N(this,typeof e=="string"&&S.test(e)?p(e):e||[],!1).length}});var C,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,L=p.fn.init=function(e,t,n){var i,s;if(!e)return this;n=n||C;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=k.exec(e);if(i&&(i[1]||!t)){if(i[1]){t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0));if(x.test(i[1])&&p.isPlainObject(t))for(i in t)p.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}s=r.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return C.find(e);this.length=1,this[0]=s}return this.context=r,this.selector=e,this}return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?typeof n.ready!="undefined"?n.ready(e):e(p):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))};L.prototype=p.fn,C=p(r);var A=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(e){var t,n=p(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(p.contains(this,n[t]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o=S.test(e)||typeof e!="string"?p(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&p.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?p.uniqueSort(s):s)},index:function(e){return e?typeof e=="string"?p.inArray(this[0],p(e)):p.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return w(e,"parentNode")},parentsUntil:function(e,t,n){return w(e,"parentNode",n)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return w(e,"nextSibling")},prevAll:function(e){return w(e,"previousSibling")},nextUntil:function(e,t,n){return w(e,"nextSibling",n)},prevUntil:function(e,t,n){return w(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return p.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(n,r){var i=p.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=p.filter(r,i)),this.length>1&&(O[e]||(i=p.uniqueSort(i)),A.test(e)&&(i=i.reverse())),this.pushStack(i)}});var _=/\S+/g;p.Callbacks=function(e){e=typeof e=="string"?D(e):p.extend({},e);var t,n,r,i,s=[],o=[],u=-1,a=function(){i=e.once,r=t=!0;for(;o.length;u=-1){n=o.shift();while(++u<s.length)s[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=s.length,n=!1)}e.memory||(n=!1),t=!1,i&&(n?s=[]:s="")},f={add:function(){return s&&(n&&!t&&(u=s.length-1,o.push(n)),function r(t){p.each(t,function(t,n){p.isFunction(n)?(!e.unique||!f.has(n))&&s.push(n):n&&n.length&&p.type(n)!=="string"&&r(n)})}(arguments),n&&!t&&a()),this},remove:function(){return p.each(arguments,function(e,t){var n;while((n=p.inArray(t,s,n))>-1)s.splice(n,1),n<=u&&u--}),this},has:function(e){return e?p.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=!0,n||f.disable(),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],o.push(n),t||a()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(n){p.each(t,function(t,s){var o=p.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?p.extend(e,r):r}},i={};return r.pipe=r.then,p.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=i.call(arguments),r=n.length,s=r!==1||e&&p.isFunction(e.promise)?r:0,o=s===1?e:p.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?i.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(r>1){a=new Array(r),f=new Array(r),l=new Array(r);for(;t<r;t++)n[t]&&p.isFunction(n[t].promise)?n[t].promise().progress(u(t,f,a)).done(u(t,l,n)).fail(o.reject):--s}return s||o.resolveWith(l,n),o.promise()}});var P;p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){if(e===!0?--p.readyWait:p.isReady)return;p.isReady=!0;if(e!==!0&&--p.readyWait>0)return;P.resolveWith(r,[p]),p.fn.triggerHandler&&(p(r).triggerHandler("ready"),p(r).off("ready"))}}),p.ready.promise=function(t){if(!P){P=p.Deferred();if(r.readyState==="complete"||r.readyState!=="loading"&&!r.documentElement.doScroll)e.setTimeout(p.ready);else if(r.addEventListener)r.addEventListener("DOMContentLoaded",B),e.addEventListener("load",B);else{r.attachEvent("onreadystatechange",B),e.attachEvent("onload",B);var n=!1;try{n=e.frameElement==null&&r.documentElement}catch(i){}n&&n.doScroll&&function s(){if(!p.isReady){try{n.doScroll("left")}catch(t){return e.setTimeout(s,50)}H(),p.ready()}}()}}return P.promise(t)},p.ready.promise();var j;for(j in p(c))break;c.ownFirst=j==="0",c.inlineBlockNeedsLayout=!1,p(function(){var e,t,n,i;n=r.getElementsByTagName("body")[0];if(!n||!n.style)return;t=r.createElement("div"),i=r.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!="undefined"&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",c.inlineBlockNeedsLayout=e=t.offsetWidth===3,e&&(n.style.zoom=1)),n.removeChild(i)}),function(){var e=r.createElement("div");c.deleteExpando=!0;try{delete e.test}catch(t){c.deleteExpando=!1}e=null}();var F=function(e){var t=p.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return n!==1&&n!==9?!1:!t||t!==!0&&e.getAttribute("classid")===t},I=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/([A-Z])/g;p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?p.cache[e[p.expando]]:e[p.expando],!!e&&!U(e)},data:function(e,t,n){return z(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return z(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)}}),p.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length){i=p.data(s);if(s.nodeType===1&&!p._data(s,"parsedAttrs")){n=o.length;while(n--)o[n]&&(r=o[n].name,r.indexOf("data-")===0&&(r=p.camelCase(r.slice(5)),R(s,r,i[r])));p._data(s,"parsedAttrs",!0)}}return i}return typeof e=="object"?this.each(function(){p.data(this,e)}):arguments.length>1?this.each(function(){p.data(this,e,t)}):s?R(s,e,p.data(s,e)):undefined},removeData:function(e){return this.each(function(){p.removeData(this,e)})}}),p.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=p._data(e,t),n&&(!r||p.isArray(n)?r=p._data(e,t,p.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=p.queue(e,t),r=n.length,i=n.shift(),s=p._queueHooks(e,t),o=function(){p.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return p._data(e,n)||p._data(e,n,{empty:p.Callbacks("once memory").add(function(){p._removeData(e,t+"queue"),p._removeData(e,n)})})}}),p.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?p.queue(this[0],e):t===undefined?this:this.each(function(){var n=p.queue(this,e,t);p._queueHooks(this,e),e==="fx"&&n[0]!=="inprogress"&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=p.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};typeof e!="string"&&(t=e,e=undefined),e=e||"fx";while(o--)n=p._data(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}}),function(){var e;c.shrinkWrapBlocks=function(){if(e!=null)return e;e=!1;var t,n,i;n=r.getElementsByTagName("body")[0];if(!n||!n.style)return;return t=r.createElement("div"),i=r.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!="undefined"&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(r.createElement("div")).style.width="5px",e=t.offsetWidth!==3),n.removeChild(i),e}}();var X=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=new RegExp("^(?:([+-])=|)("+X+")([a-z%]*)$","i"),$=["Top","Right","Bottom","Left"],J=function(e,t){return e=t||e,p.css(e,"display")==="none"||!p.contains(e.ownerDocument,e)},Q=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(p.type(n)==="object"){i=!0;for(u in n)Q(e,t,u,n[u],!0,s,o)}else if(r!==undefined){i=!0,p.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(p(e),n)}));if(t)for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}return i?e:f?t.call(e):a?t(e[0],n):s},G=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,et=/^\s+/,tt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";(function(){var e=r.createElement("div"),t=r.createDocumentFragment(),n=r.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c.leadingWhitespace=e.firstChild.nodeType===3,c.tbody=!e.getElementsByTagName("tbody").length,c.htmlSerialize=!!e.getElementsByTagName("link").length,c.html5Clone=r.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",n.type="checkbox",n.checked=!0,t.appendChild(n),c.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=r.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),c.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,c.noCloneEvent=!!e.addEventListener,e[p.expando]=1,c.attributes=!e.getAttribute(p.expando)})();var rt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:c.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td;var ot=/<|&#?\w+;/,ut=/<tbody/i;(function(){var t,n,i=r.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(c[t]=n in e)||(i.setAttribute(n,"t"),c[t]=i.attributes[n].expando===!1);i=null})();var lt=/^(?:input|select|textarea)$/i,ct=/^key/,ht=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,pt=/^(?:focusinfocus|focusoutblur)$/,dt=/^([^.]*)(?:\.(.+)|)/;p.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p._data(e);if(!g)return;n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=p.guid++),(o=g.events)||(o=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof p=="undefined"||!!e&&p.event.triggered===e.type?undefined:p.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(_)||[""],u=t.length;while(u--){s=dt.exec(t[u])||[],d=m=s[1],v=(s[2]||"").split(".").sort();if(!d)continue;f=p.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=p.event.special[d]||{},c=p.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&p.expr.match.needsContext.test(i),namespace:v.join(".")},a);if(!(h=o[d])){h=o[d]=[],h.delegateCount=0;if(!f.setup||f.setup.call(e,r,v,l)===!1)e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l)}f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),p.event.global[d]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p.hasData(e)&&p._data(e);if(!g||!(l=g.events))return;t=(t||"").match(_)||[""],f=t.length;while(f--){u=dt.exec(t[f])||[],d=m=u[1],v=(u[2]||"").split(".").sort();if(!d){for(d in l)p.event.remove(e,d+t[f],n,r,!0);continue}c=p.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,h=l[d]||[],u=u[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||m===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,v,g.handle)===!1)&&p.removeEvent(e,d,g.handle),delete l[d])}p.isEmptyObject(l)&&(delete g.handle,p._removeData(e,"events"))},trigger:function(t,n,i,s){var o,u,a,f,c,h,d,v=[i||r],m=l.call(t,"type")?t.type:t,g=l.call(t,"namespace")?t.namespace.split("."):[];a=h=i=i||r;if(i.nodeType===3||i.nodeType===8)return;if(pt.test(m+p.event.triggered))return;m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,t=t[p.expando]?t:new p.Event(m,typeof t=="object"&&t),t.isTrigger=s?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=i),n=n==null?[t]:p.makeArray(n,[t]),c=p.event.special[m]||{};if(!s&&c.trigger&&c.trigger.apply(i,n)===!1)return;if(!s&&!c.noBubble&&!p.isWindow(i)){f=c.delegateType||m,pt.test(f+m)||(a=a.parentNode);for(;a;a=a.parentNode)v.push(a),h=a;h===(i.ownerDocument||r)&&v.push(h.defaultView||h.parentWindow||e)}d=0;while((a=v[d++])&&!t.isPropagationStopped())t.type=d>1?f:c.bindType||m,o=(p._data(a,"events")||{})[t.type]&&p._data(a,"handle"),o&&o.apply(a,n),o=u&&a[u],o&&o.apply&&F(a)&&(t.result=o.apply(a,n),t.result===!1&&t.preventDefault());t.type=m;if(!s&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(v.pop(),n)===!1)&&F(i)&&u&&i[m]&&!p.isWindow(i)){h=i[u],h&&(i[u]=null),p.event.triggered=m;try{i[m]()}catch(y){}p.event.triggered=undefined,h&&(i[u]=h)}return t.result},dispatch:function(e){e=p.event.fix(e);var t,n,r,s,o,u=[],a=i.call(arguments),f=(p._data(this,"events")||{})[e.type]||[],l=p.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=p.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,n=0;while((o=s.handlers[n++])&&!e.isImmediatePropagationStopped())if(!e.rnamespace||e.rnamespace.test(o.namespace))e.handleObj=o,e.data=o.data,r=((p.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(e.type!=="click"||isNaN(e.button)||e.button<1))for(;a!=this;a=a.parentNode||this)if(a.nodeType===1&&(a.disabled!==!0||e.type!=="click")){r=[];for(n=0;n<u;n++)s=t[n],i=s.selector+" ",r[i]===undefined&&(r[i]=s.needsContext?p(i,this).index(a)>-1:p.find(i,this,null,[a]).length),r[i]&&r.push(s);r.length&&o.push({elem:a,handlers:r})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},fix:function(e){if(e[p.expando])return e;var t,n,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=ht.test(s)?this.mouseHooks:ct.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new p.Event(o),t=i.length;while(t--)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||r),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,s,o=t.button,u=t.fromElement;return e.pageX==null&&t.clientX!=null&&(i=e.target.ownerDocument||r,s=i.documentElement,n=i.body,e.pageX=t.clientX+(s&&s.scrollLeft||n&&n.scrollLeft||0)-(s&&s.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(s&&s.scrollTop||n&&n.scrollTop||0)-(s&&s.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?t.toElement:u),!e.which&&o!==undefined&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==gt()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===gt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(p.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var r=p.extend(new p.Event,n,{type:e,isSimulated:!0});p.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}},p.removeEvent=r.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},p.Event=function(e,t){if(!(this instanceof p.Event))return new p.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===!1?vt:mt):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:mt,isPropagationStopped:mt,isImmediatePropagationStopped:mt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=vt;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=vt;if(!e||this.isSimulated)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=vt,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!p.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),c.submit||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=p.nodeName(t,"input")||p.nodeName(t,"button")?p.prop(t,"form"):undefined;n&&!p._data(n,"submit")&&(p.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),p._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&p.event.simulate("submit",this.parentNode,e))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),c.change||(p.event.special.change={setup:function(){if(lt.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")p.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._justChanged=!0)}),p.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),p.event.simulate("change",this,e)});return!1}p.event.add(this,"beforeactivate._change",function(e){var t=e.target;lt.test(t.nodeName)&&!p._data(t,"change")&&(p.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&p.event.simulate("change",this.parentNode,e)}),p._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!lt.test(this.nodeName)}}),c.focusin||p.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){p.event.simulate(t,e.target,p.event.fix(e))};p.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=p._data(r,t);i||r.addEventListener(e,n,!0),p._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=p._data(r,t)-1;i?p._data(r,t,i):(r.removeEventListener(e,n,!0),p._removeData(r,t))}}}),p.fn.extend({on:function(e,t,n,r){return yt(this,e,t,n,r)},one:function(e,t,n,r){return yt(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,p(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}if(t===!1||typeof t=="function")n=t,t=undefined;return n===!1&&(n=mt),this.each(function(){p.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return p.event.trigger(e,t,n,!0)}});var bt=/ jQuery\d+="(?:null|\d+)"/g,wt=new RegExp("<(?:"+tt+")[\\s/>]","i"),Et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,St=/<script|<style|<link/i,xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/^true\/(.*)/,Nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ct=nt(r),kt=Ct.appendChild(r.createElement("div"));p.extend({htmlPrefilter:function(e){return e.replace(Et,"<$1></$2>")},clone:function(e,t,n){var r,i,s,o,u,a=p.contains(e.ownerDocument,e);c.html5Clone||p.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(s=kt.firstChild));if((!c.noCloneEvent||!c.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!p.isXMLDoc(e)){r=it(s),u=it(e);for(o=0;(i=u[o])!=null;++o)r[o]&&_t(i,r[o])}if(t)if(n){u=u||it(e),r=r||it(s);for(o=0;(i=u[o])!=null;o++)Mt(i,r[o])}else Mt(e,s);return r=it(s,"script"),r.length>0&&st(r,!a&&it(e,"script")),r=u=i=null,s},cleanData:function(e,t){var r,i,s,o,u=0,a=p.expando,f=p.cache,l=c.attributes,h=p.event.special;for(;(r=e[u])!=null;u++)if(t||F(r)){s=r[a],o=s&&f[s];if(o){if(o.events)for(i in o.events)h[i]?p.event.remove(r,i):p.removeEvent(r,i,o.handle);f[s]&&(delete f[s],!l&&typeof r.removeAttribute!="undefined"?r.removeAttribute(a):r[a]=undefined,n.push(s))}}}}),p.fn.extend({domManip:Dt,detach:function(e){return Pt(this,e,!0)},remove:function(e){return Pt(this,e)},text:function(e){return Q(this,function(e){return e===undefined?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(e))},null,e,arguments.length)},append:function(){return Dt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return Dt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Dt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Dt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&p.cleanData(it(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&p.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return Q(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined)return t.nodeType===1?t.innerHTML.replace(bt,""):undefined;if(typeof e=="string"&&!St.test(e)&&(c.htmlSerialize||!wt.test(e))&&(c.leadingWhitespace||!et.test(e))&&!rt[(Y.exec(e)||["",""])[1].toLowerCase()]){e=p.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(p.cleanData(it(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Dt(this,arguments,function(t){var n=this.parentNode;p.inArray(this,e)<0&&(p.cleanData(it(this)),n&&n.replaceChild(t,this))},e)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){var n,r=0,i=[],s=p(e),u=s.length-1;for(;r<=u;r++)n=r===u?this:this.clone(!0),p(s[r])[t](n),o.apply(i,n.get());return this.pushStack(i)}});var Ht,Bt={HTML:"block",BODY:"block"},It=/^margin/,qt=new RegExp("^("+X+")(?!px)[a-z%]+$","i"),Rt=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i},Ut=r.documentElement;(function(){function l(){var l,c,h=r.documentElement;h.appendChild(a),f.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=i=u=!1,n=o=!0,e.getComputedStyle&&(c=e.getComputedStyle(f),t=(c||{}).top!=="1%",u=(c||{}).marginLeft==="2px",i=(c||{width:"4px"}).width==="4px",f.style.marginRight="50%",n=(c||{marginRight:"4px"}).marginRight==="4px",l=f.appendChild(r.createElement("div")),l.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",f.style.width="1px",o=!parseFloat((e.getComputedStyle(l)||{}).marginRight),f.removeChild(l)),f.style.display="none",s=f.getClientRects().length===0,s&&(f.style.display="",f.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f.childNodes[0].style.borderCollapse="separate",l=f.getElementsByTagName("td"),l[0].style.cssText="margin:0;border:0;padding:0;display:none",s=l[0].offsetHeight===0,s&&(l[0].style.display="",l[1].style.display="none",s=l[0].offsetHeight===0)),h.removeChild(a)}var t,n,i,s,o,u,a=r.createElement("div"),f=r.createElement("div");if(!f.style)return;f.style.cssText="float:left;opacity:.5",c.opacity=f.style.opacity==="0.5",c.cssFloat=!!f.style.cssFloat,f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle=f.style.backgroundClip==="content-box",a=r.createElement("div"),a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",f.innerHTML="",a.appendChild(f),c.boxSizing=f.style.boxSizing===""||f.style.MozBoxSizing===""||f.style.WebkitBoxSizing==="",p.extend(c,{reliableHiddenOffsets:function(){return t==null&&l(),s},boxSizingReliable:function(){return t==null&&l(),i},pixelMarginRight:function(){return t==null&&l(),n},pixelPosition:function(){return t==null&&l(),t},reliableMarginRight:function(){return t==null&&l(),o},reliableMarginLeft:function(){return t==null&&l(),u}})})();var zt,Wt,Xt=/^(top|right|bottom|left)$/;e.getComputedStyle?(zt=function(t){var n=t.ownerDocument.defaultView;if(!n||!n.opener)n=e;return n.getComputedStyle(t)},Wt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||zt(e),o=n?n.getPropertyValue(t)||n[t]:undefined,(o===""||o===undefined)&&!p.contains(e.ownerDocument,e)&&(o=p.style(e,t)),n&&!c.pixelMarginRight()&&qt.test(o)&&It.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s),o===undefined?o:o+""}):Ut.currentStyle&&(zt=function(e){return e.currentStyle},Wt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||zt(e),o=n?n[t]:undefined,o==null&&u&&u[t]&&(o=u[t]),qt.test(o)&&!Xt.test(t)&&(r=u.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),u.left=t==="fontSize"?"1em":o,o=u.pixelLeft+"px",u.left=r,s&&(i.left=s)),o===undefined?o:o+""||"auto"});var $t=/alpha\([^)]*\)/i,Jt=/opacity\s*=\s*([^)]*)/i,Kt=/^(none|table(?!-c[ea]).+)/,Qt=new RegExp("^("+X+")(.*)$","i"),Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"},Zt=["Webkit","O","Moz","ms"],en=r.createElement("div").style;p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":c.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,s,o,u=p.camelCase(t),a=e.style;t=p.cssProps[u]||(p.cssProps[u]=tn(u)||u),o=p.cssHooks[t]||p.cssHooks[u];if(n===undefined)return o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t];s=typeof n,s==="string"&&(i=V.exec(n))&&i[1]&&(n=K(e,t,i),s="number");if(n==null||n!==n)return;s==="number"&&(n+=i&&i[3]||(p.cssNumber[u]?"":"px")),!c.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(a[t]="inherit");if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined)try{a[t]=n}catch(f){}},css:function(e,t,n,r){var i,s,o,u=p.camelCase(t);return t=p.cssProps[u]||(p.cssProps[u]=tn(u)||u),o=p.cssHooks[t]||p.cssHooks[u],o&&"get"in o&&(s=o.get(e,!0,n)),s===undefined&&(s=Wt(e,t,r)),s==="normal"&&t in Yt&&(s=Yt[t]),n===""||n?(i=parseFloat(s),n===!0||isFinite(i)?i||0:s):s}}),p.each(["height","width"],function(e,t){p.cssHooks[t]={get:function(e,n,r){if(n)return Kt.test(p.css(e,"display"))&&e.offsetWidth===0?Rt(e,Gt,function(){return on(e,t,r)}):on(e,t,r)},set:function(e,n,r){var i=r&&zt(e);return rn(e,n,r?sn(e,t,r,c.boxSizing&&p.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),c.opacity||(p.cssHooks.opacity={get:function(e,t){return Jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=p.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&p.trim(s.replace($t,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=$t.test(s)?s.replace($t,i):s+" "+i}}),p.cssHooks.marginRight=Vt(c.reliableMarginRight,function(e,t){if(t)return Rt(e,{display:"inline-block"},Wt,[e,"marginRight"])}),p.cssHooks.marginLeft=Vt(c.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Wt(e,"marginLeft"))||(p.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-Rt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(e,t){p.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+$[r]+t]=s[r]||s[r-2]||s[0];return i}},It.test(e)||(p.cssHooks[e+t].set=rn)}),p.fn.extend({css:function(e,t){return Q(this,function(e,t,n){var r,i,s={},o=0;if(p.isArray(t)){r=zt(e),i=t.length;for(;o<i;o++)s[t[o]]=p.css(e,t[o],!1,r);return s}return n!==undefined?p.style(e,t,n):p.css(e,t)},e,t,arguments.length>1)},show:function(){return nn(this,!0)},hide:function(){return nn(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){J(this)?p(this).show():p(this).hide()})}}),p.Tween=un,un.prototype={constructor:un,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||p.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(p.cssNumber[n]?"":"px")},cur:function(){var e=un.propHooks[this.prop];return e&&e.get?e.get(this):un.propHooks._default.get(this)},run:function(e){var t,n=un.propHooks[this.prop];return this.options.duration?this.pos=t=p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):un.propHooks._default.set(this),this}},un.prototype.init.prototype=un.prototype,un.propHooks={_default:{get:function(e){var t;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(t=p.css(e.elem,e.prop,""),!t||t==="auto"?0:t)},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):e.elem.nodeType!==1||e.elem.style[p.cssProps[e.prop]]==null&&!p.cssHooks[e.prop]?e.elem[e.prop]=e.now:p.style(e.elem,e.prop,e.now+e.unit)}}},un.propHooks.scrollTop=un.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},p.fx=un.prototype.init,p.fx.step={};var an,fn,ln=/^(?:toggle|show|hide)$/,cn=/queueHooks$/;p.Animation=p.extend(gn,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return K(n.elem,e,V.exec(t),n),n}]},tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.match(_);var n,r=0,i=e.length;for(;r<i;r++)n=e[r],gn.tweeners[n]=gn.tweeners[n]||[],gn.tweeners[n].unshift(t)},prefilters:[vn],prefilter:function(e,t){t?gn.prefilters.unshift(e):gn.prefilters.push(e)}}),p.speed=function(e,t,n){var r=e&&typeof e=="object"?p.extend({},e):{complete:n||!n&&t||p.isFunction(e)&&e,duration:e,easing:n&&t||t&&!p.isFunction(t)&&t};r.duration=p.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in p.fx.speeds?p.fx.speeds[r.duration]:p.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){p.isFunction(r.old)&&r.old.call(this),r.queue&&p.dequeue(this,r.queue)},r},p.fn.extend({fadeTo:function(e,t,n,r){return this.filter(J).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=p.isEmptyObject(e),s=p.speed(t,n,r),o=function(){var t=gn(this,p.extend({},e),s);(i||p._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return typeof e!="string"&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=e!=null&&e+"queueHooks",s=p.timers,o=p._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&cn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem===this&&(e==null||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&p.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=p._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=p.timers,o=r?r.length:0;n.finish=!0,p.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),p.each(["toggle","show","hide"],function(e,t){var n=p.fn[t];p.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(pn(t,!0),e,r,i)}}),p.each({slideDown:pn("show"),slideUp:pn("hide"),slideToggle:pn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){p.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),p.timers=[],p.fx.tick=function(){var e,t=p.timers,n=0;an=p.now();for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||p.fx.stop(),an=undefined},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){fn||(fn=e.setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){e.clearInterval(fn),fn=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(t,n){return t=p.fx?p.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e,t=r.createElement("input"),n=r.createElement("div"),i=r.createElement("select"),s=i.appendChild(r.createElement("option"));n=r.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",c.getSetAttribute=n.className!=="t",c.style=/top/.test(e.getAttribute("style")),c.hrefNormalized=e.getAttribute("href")==="/a",c.checkOn=!!t.value,c.optSelected=s.selected,c.enctype=!!r.createElement("form").enctype,i.disabled=!0,c.optDisabled=!s.disabled,t=r.createElement("input"),t.setAttribute("value",""),c.input=t.getAttribute("value")==="",t.value="t",t.setAttribute("type","radio"),c.radioValue=t.value==="t"}();var yn=/\r/g,bn=/[\x20\t\r\n\f]+/g;p.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i)return t=p.valHooks[i.type]||p.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,typeof n=="string"?n.replace(yn,""):n==null?"":n);return}return r=p.isFunction(e),this.each(function(n){var i;if(this.nodeType!==1)return;r?i=e.call(this,n,p(this).val()):i=e,i==null?i="":typeof i=="number"?i+="":p.isArray(i)&&(i=p.map(i,function(e){return e==null?"":e+""})),t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined)this.value=i})}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return t!=null?t:p.trim(p.text(e)).replace(bn," ")}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(c.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!p.nodeName(n.parentNode,"optgroup"))){t=p(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=p.makeArray(t),o=i.length;while(o--){r=i[o];if(p.inArray(p.valHooks.option.get(r),s)>-1)try{r.selected=n=!0}catch(u){r.scrollHeight}else r.selected=!1}return n||(e.selectedIndex=-1),i}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){if(p.isArray(t))return e.checked=p.inArray(p(e).val(),t)>-1}},c.checkOn||(p.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var wn,En,Sn=p.expr.attrHandle,xn=/^(?:checked|selected)$/i,Tn=c.getSetAttribute,Nn=c.input;p.fn.extend({attr:function(e,t){return Q(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(s===3||s===8||s===2)return;if(typeof e.getAttribute=="undefined")return p.prop(e,t,n);if(s!==1||!p.isXMLDoc(e))t=t.toLowerCase(),i=p.attrHooks[t]||(p.expr.match.bool.test(t)?En:wn);if(n!==undefined){if(n===null){p.removeAttr(e,t);return}return i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:(e.setAttribute(t,n+""),n)}return i&&"get"in i&&(r=i.get(e,t))!==null?r:(r=p.find.attr(e,t),r==null?undefined:r)},attrHooks:{type:{set:function(e,t){if(!c.radioValue&&t==="radio"&&p.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(_);if(s&&e.nodeType===1)while(n=s[i++])r=p.propFix[n]||n,p.expr.match.bool.test(n)?Nn&&Tn||!xn.test(n)?e[r]=!1:e[p.camelCase("default-"+n)]=e[r]=!1:p.attr(e,n,""),e.removeAttribute(Tn?n:r)}}),En={set:function(e,t,n){return t===!1?p.removeAttr(e,n):Nn&&Tn||!xn.test(n)?e.setAttribute(!Tn&&p.propFix[n]||n,n):e[p.camelCase("default-"+n)]=e[n]=!0,n}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Sn[t]||p.find.attr;Nn&&Tn||!xn.test(t)?Sn[t]=function(e,t,r){var i,s;return r||(s=Sn[t],Sn[t]=i,i=n(e,t,r)!=null?t.toLowerCase():null,Sn[t]=s),i}:Sn[t]=function(e,t,n){if(!n)return e[p.camelCase("default-"+t)]?t.toLowerCase():null}});if(!Nn||!Tn)p.attrHooks.value={set:function(e,t,n){if(!p.nodeName(e,"input"))return wn&&wn.set(e,t,n);e.defaultValue=t}};Tn||(wn={set:function(e,t,n){var r=e.getAttributeNode(n);r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="";if(n==="value"||t===e.getAttribute(n))return t}},Sn.id=Sn.name=Sn.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.value!==""?r.value:null},p.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:wn.set},p.attrHooks.contenteditable={set:function(e,t,n){wn.set(e,t===""?!1:t,n)}},p.each(["width","height"],function(e,t){p.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),c.style||(p.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var Cn=/^(?:input|select|textarea|button|object)$/i,kn=/^(?:a|area)$/i;p.fn.extend({prop:function(e,t){return Q(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return e=p.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(t){}})}}),p.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(s===3||s===8||s===2)return;if(s!==1||!p.isXMLDoc(e))t=p.propFix[t]||t,i=p.propHooks[t];return n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=p.find.attr(e,"tabindex");return t?parseInt(t,10):Cn.test(e.nodeName)||kn.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),c.hrefNormalized||p.each(["href","src"],function(e,t){p.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),c.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this}),c.enctype||(p.propFix.enctype="encoding");var Ln=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,n,r,i,s,o,u,a=0;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,An(this)))});if(typeof e=="string"&&e){t=e.match(_)||[];while(n=this[a++]){i=An(n),r=n.nodeType===1&&(" "+i+" ").replace(Ln," ");if(r){o=0;while(s=t[o++])r.indexOf(" "+s+" ")<0&&(r+=s+" ");u=p.trim(r),i!==u&&p.attr(n,"class",u)}}}return this},removeClass:function(e){var t,n,r,i,s,o,u,a=0;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,An(this)))});if(!arguments.length)return this.attr("class","");if(typeof e=="string"&&e){t=e.match(_)||[];while(n=this[a++]){i=An(n),r=n.nodeType===1&&(" "+i+" ").replace(Ln," ");if(r){o=0;while(s=t[o++])while(r.indexOf(" "+s+" ")>-1)r=r.replace(" "+s+" "," ");u=p.trim(r),i!==u&&p.attr(n,"class",u)}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):p.isFunction(e)?this.each(function(n){p(this).toggleClass(e.call(this,n,An(this),t),t)}):this.each(function(){var t,r,i,s;if(n==="string"){r=0,i=p(this),s=e.match(_)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(e===undefined||n==="boolean")t=An(this),t&&p._data(this,"__className__",t),p.attr(this,"class",t||e===!1?"":p._data(this,"__className__")||"")})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(n.nodeType===1&&(" "+An(n)+" ").replace(Ln," ").indexOf(t)>-1)return!0;return!1}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var On=e.location,Mn=p.now(),_n=/\?/,Dn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;p.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=p.trim(t+"");return i&&!p.trim(i.replace(Dn,function(e,t,i,s){return n&&t&&(r=0),r===0?e:(n=i||t,r+=!s-!i,"")}))?Function("return "+i)():p.error("Invalid JSON: "+t)},p.parseXML=function(t){var n,r;if(!t||typeof t!="string")return null;try{e.DOMParser?(r=new e.DOMParser,n=r.parseFromString(t,"text/xml")):(n=new e.ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=undefined}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+t),n};var Pn=/#.*$/,Hn=/([?&])_=[^&]*/,Bn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,jn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fn=/^(?:GET|HEAD)$/,In=/^\/\//,qn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Rn={},Un={},zn="*/".concat("*"),Wn=On.href,Xn=qn.exec(Wn.toLowerCase())||[];p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Wn,type:"GET",isLocal:jn.test(Xn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jn(Jn(e,p.ajaxSettings),t):Jn(p.ajaxSettings,e)},ajaxPrefilter:Vn(Rn),ajaxTransport:Vn(Un),ajax:function(t,n){function T(t,n,r,i){var l,y,b,E,x,T=n;if(w===2)return;w=2,u&&e.clearTimeout(u),f=undefined,o=i||"",S.readyState=t>0?4:0,l=t>=200&&t<300||t===304,r&&(E=Kn(c,S,r)),E=Qn(c,E,S,l);if(l)c.ifModified&&(x=S.getResponseHeader("Last-Modified"),x&&(p.lastModified[s]=x),x=S.getResponseHeader("etag"),x&&(p.etag[s]=x)),t===204||c.type==="HEAD"?T="nocontent":t===304?T="notmodified":(T=E.state,y=E.data,b=E.error,l=!b);else{b=T;if(t||!T)T="error",t<0&&(t=0)}S.status=t,S.statusText=(n||T)+"",l?v.resolveWith(h,[y,T,S]):v.rejectWith(h,[S,T,b]),S.statusCode(g),g=undefined,a&&d.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?y:b]),m.fireWith(h,[S,T]),a&&(d.trigger("ajaxComplete",[S,c]),--p.active||p.event.trigger("ajaxStop"))}typeof t=="object"&&(n=t,t=undefined),n=n||{};var r,i,s,o,u,a,f,l,c=p.ajaxSetup({},n),h=c.context||c,d=c.context&&(h.nodeType||h.jquery)?p(h):p.event,v=p.Deferred(),m=p.Callbacks("once memory"),g=c.statusCode||{},y={},b={},w=0,E="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(w===2){if(!l){l={};while(t=Bn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return w===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)g[t]=[g[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),T(0,t),this}};v.promise(S).complete=m.add,S.success=S.done,S.error=S.fail,c.url=((t||c.url||Wn)+"").replace(Pn,"").replace(In,Xn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=p.trim(c.dataType||"*").toLowerCase().match(_)||[""],c.crossDomain==null&&(r=qn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===Xn[1]&&r[2]===Xn[2]&&(r[3]||(r[1]==="http:"?"80":"443"))===(Xn[3]||(Xn[1]==="http:"?"80":"443")))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=p.param(c.data,c.traditional)),$n(Rn,c,n,S);if(w===2)return S;a=p.event&&c.global,a&&p.active++===0&&p.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Fn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(_n.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Hn.test(s)?s.replace(Hn,"$1_="+Mn++):s+(_n.test(s)?"&":"?")+"_="+Mn++)),c.ifModified&&(p.lastModified[s]&&S.setRequestHeader("If-Modified-Since",p.lastModified[s]),p.etag[s]&&S.setRequestHeader("If-None-Match",p.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+zn+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)S.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&w!==2){E="abort";for(i in{success:1,error:1,complete:1})S[i](c[i]);f=$n(Un,c,n,S);if(!f)T(-1,"No Transport");else{S.readyState=1,a&&d.trigger("ajaxSend",[S,c]);if(w===2)return S;c.async&&c.timeout>0&&(u=e.setTimeout(function(){S.abort("timeout")},c.timeout));try{w=1,f.send(y,T)}catch(x){if(!(w<2))throw x;T(-1,x)}}return S}return S.abort()},getJSON:function(e,t,n){return p.get(e,t,n,"json")},getScript:function(e,t){return p.get(e,undefined,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,n,r,i){return p.isFunction(n)&&(i=i||r,r=n,n=undefined),p.ajax(p.extend({url:e,type:t,dataType:i,data:n,success:r},p.isPlainObject(e)&&e))}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},p.fn.extend({wrapAll:function(e){if(p.isFunction(e))return this.each(function(t){p(this).wrapAll(e.call(this,t))});if(this[0]){var t=p(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return p.isFunction(e)?this.each(function(t){p(this).wrapInner(e.call(this,t))}):this.each(function(){var t=p(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p.isFunction(e);return this.each(function(n){p(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(e){return c.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:Yn(e)},p.expr.filters.visible=function(e){return!p.expr.filters.hidden(e)};var Zn=/%20/g,er=/\[\]$/,tr=/\r?\n/g,nr=/^(?:submit|button|image|reset|file)$/i,rr=/^(?:input|select|textarea|keygen)/i;p.param=function(e,t){var n,r=[],i=function(e,t){t=p.isFunction(t)?t():t==null?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};t===undefined&&(t=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){i(this.name,this.value)});else for(n in e)ir(n,e[n],t,i);return r.join("&").replace(Zn,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&rr.test(this.nodeName)&&!nr.test(e)&&(this.checked||!G.test(e))}).map(function(e,t){var n=p(this).val();return n==null?null:p.isArray(n)?p.map(n,function(e){return{name:t.name,value:e.replace(tr,"\r\n")}}):{name:t.name,value:n.replace(tr,"\r\n")}}).get()}}),p.ajaxSettings.xhr=e.ActiveXObject!==undefined?function(){return this.isLocal?fr():r.documentMode>8?ar():/^(get|post|head|put|delete|options)$/i.test(this.type)&&ar()||fr()}:ar;var sr=0,or={},ur=p.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in or)or[e](undefined,!0)}),c.cors=!!ur&&"withCredentials"in ur,ur=c.ajax=!!ur,ur&&p.ajaxTransport(function(t){if(!t.crossDomain||c.cors){var n;return{send:function(r,i){var s,o=t.xhr(),u=++sr;o.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),!t.crossDomain&&!r["X-Requested-With"]&&(r["X-Requested-With"]="XMLHttpRequest");for(s in r)r[s]!==undefined&&o.setRequestHeader(s,r[s]+"");o.send(t.hasContent&&t.data||null),n=function(e,r){var s,a,f;if(n&&(r||o.readyState===4)){delete or[u],n=undefined,o.onreadystatechange=p.noop;if(r)o.readyState!==4&&o.abort();else{f={},s=o.status,typeof o.responseText=="string"&&(f.text=o.responseText);try{a=o.statusText}catch(l){a=""}!s&&t.isLocal&&!t.crossDomain?s=f.text?200:404:s===1223&&(s=204)}}f&&i(s,a,f,o.getAllResponseHeaders())},t.async?o.readyState===4?e.setTimeout(n):o.onreadystatechange=or[u]=n:n()},abort:function(){n&&n(undefined,!0)}}}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),p.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=r.head||p("head")[0]||r.documentElement;return{send:function(i,s){t=r.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){if(n||!t.readyState||/loaded|complete/.test(t.readyState))t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||s(200,"success")},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(undefined,!0)}}}});var lr=[],cr=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=lr.pop()||p.expando+"_"+Mn++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(cr.test(t.url)?"url":typeof t.data=="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&cr.test(t.data)&&"data");if(u||t.dataTypes[0]==="jsonp")return i=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(cr,"$1"+i):t.jsonp!==!1&&(t.url+=(_n.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||p.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){s===undefined?p(e).removeProp(i):e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,lr.push(i)),o&&p.isFunction(s)&&s(o[0]),o=s=undefined}),"script"}),p.parseHTML=function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||r;var i=x.exec(e),s=!n&&[];return i?[t.createElement(i[1])]:(i=ft([e],t,s),s&&s.length&&p(s).remove(),p.merge([],i.childNodes))};var hr=p.fn.load;p.fn.load=function(e,t,n){if(typeof e!="string"&&hr)return hr.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>-1&&(r=p.trim(e.slice(u,e.length)),e=e.slice(0,u)),p.isFunction(t)?(n=t,t=undefined):t&&typeof t=="object"&&(i="POST"),o.length>0&&p.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?p("<div>").append(p.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p.expr.filters.animated=function(e){return p.grep(p.timers,function(t){return e===t.elem}).length},p.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=p.css(e,"position"),c=p(e),h={};l==="static"&&(e.style.position="relative"),u=c.offset(),s=p.css(e,"top"),a=p.css(e,"left"),f=(l==="absolute"||l==="fixed")&&p.inArray("auto",[s,a])>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),p.isFunction(t)&&(t=t.call(e,n,p.extend({},u))),t.top!=null&&(h.top=t.top-u.top+o),t.left!=null&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},p.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){p.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(!s)return;return t=s.documentElement,p.contains(t,i)?(typeof i.getBoundingClientRect!="undefined"&&(r=i.getBoundingClientRect()),n=pr(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return p.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(n=e.offset()),n.top+=p.css(e[0],"borderTopWidth",!0),n.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-p.css(r,"marginTop",!0),left:t.left-n.left-p.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&!p.nodeName(e,"html")&&p.css(e,"position")==="static")e=e.offsetParent;return e||Ut})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);p.fn[e]=function(r){return Q(this,function(e,r,i){var s=pr(e);if(i===undefined)return s?t in s?s[t]:s.document.documentElement[r]:e[r];s?s.scrollTo(n?p(s).scrollLeft():i,n?i:p(s).scrollTop()):e[r]=i},e,r,arguments.length,null)}}),p.each(["top","left"],function(e,t){p.cssHooks[t]=Vt(c.pixelPosition,function(e,n){if(n)return n=Wt(e,t),qt.test(n)?p(e).position()[t]+"px":n})}),p.each({Height:"height",Width:"width"},function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){p.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!="boolean"),o=n||(r===!0||i===!0?"margin":"border");return Q(this,function(t,n,r){var i;return p.isWindow(t)?t.document.documentElement["client"+e]:t.nodeType===9?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?p.css(t,n,o):p.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),p.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return p});var dr=e.jQuery,vr=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=vr),t&&e.jQuery===p&&(e.jQuery=dr),p},t||(e.jQuery=e.$=p),p}),define("cdf/lib/jquery",function(e){return function(){var t,n;return t||e.$}}(this)),define("cdf/dashboard/Utf8Encoder",["../lib/jquery"],function(e){var t={encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},decode:function(e){var t="",n=0,r=0,i=0,s=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|i&63),n+=2):(i=e.charCodeAt(n+1),s=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63),n+=3);return t}};return{encode_prepare:function(e){if(e!=null){e=e.replace(/\+/g," ");if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1||navigator.userAgent.toLowerCase().indexOf("opera")!=-1)return t.decode(e)}return e},encode_prepare_arr:function(t){var n=this;if(typeof t=="number")return t;if(e.isArray(t)){var r=new Array(t.length);return e.each(t,function(e,t){r[e]=n.encode_prepare(t)}),r}return n.encode_prepare(t)}}}),function(e,t,n){typeof module!="undefined"?module.exports=n():typeof define!="undefined"&&typeof define.amd=="object"?define("cdf/lib/Base",n):t[e]=n()}("Base",this,function(){var e=function(){};return e.extend=function(t,n){var r=e.prototype.extend;e._prototyping=!0;var i=new this;r.call(i,t),i.base=function(){},delete e._prototyping;var s=i.constructor,o=i.constructor=function(){if(!e._prototyping)if(this._constructing||this.constructor===o)this._constructing=!0,s.apply(this,arguments),delete this._constructing;else if(arguments[0]!==null)return(arguments[0].extend||r).call(arguments[0],i)};return o.ancestor=this,o.extend=this.extend,o.forEach=this.forEach,o.implement=this.implement,o.prototype=i,o.toString=this.toString,o.valueOf=function(e){return e==="object"?o:s.valueOf()},r.call(o,n),typeof o.init=="function"&&o.init(),o},e.prototype={extend:function(t,n){if(arguments.length>1){var r=this[t];if(r&&typeof n=="function"&&(!r.valueOf||r.valueOf()!==n.valueOf())&&/\bbase\b/.test(n)){var i=n.valueOf();n=function(){var t=this.base||e.prototype.base;this.base=r;var n=i.apply(this,arguments);return this.base=t,n},n.valueOf=function(e){return e==="object"?n:i},n.toString=e.toString}this[t]=n}else if(t){var s=e.prototype.extend;!e._prototyping&&typeof this!="function"&&(s=this.extend||s);var o={toSource:null},u=["constructor","toString","valueOf"];for(var a=e._prototyping?0:1;a<u.length;a++){var f=u[a];t[f]!==o[f]&&s.call(this,f,t[f])}for(var l in t)o[l]||s.call(this,l,t[l])}return this}},e=e.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var r in e)this.prototype[r]===undefined&&t.call(n,e[r],r,e)},implement:function(){for(var e=0;e<arguments.length;e++)typeof arguments[e]=="function"?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),e}),define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]===""&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("amd",["module","text"],function(e,t){function i(e,t,n){var r=t.url,i=t.exports,o=t.prescript,u=t.postscript;return e="define("+s(t)+"  var define = undefined;\n"+(o?"  "+o+"\n":"")+e+"\n"+(u?"  "+u+"\n":"")+(i?"  return "+i+";\n":"")+"});",n||(e+="\n//# sourceURL="+r),e}function s(e){var t=e.deps;if(t){var n=[],r=[],i=[];for(var s in t)if(t.hasOwnProperty(s)){var o=t[s];o?(r.push(o),n.push(s)):i.push(s)}for(var u=0;u<i.length;u++)n.push(i[u]);if(n.length)return'["'+n.join('", "')+'"], function('+r.join(", ")+") {\n"}return"function() {\n"}var n=e.config(),r={};return{load:function(e,s,o,u){var a=s.toUrl(e+".js"),f=n.shim&&n.shim[e]||{};f.id=e,f.url=a,t.get(a,function(n){n=i(n,f,u.isBuild),u.isBuild&&(r[e]=n),o.fromText(n)},o.error)},write:function(){}}}),define("cdf/Logger",[],function(){return{loglevels:["debug","log","info","warn","error","exception"],loglevel:"debug",log:function(e,t,n){t=t||"info";if(this.loglevels.indexOf(t)<this.loglevels.indexOf(this.loglevel))return;if(typeof console!="undefined"){console[t]||(t==="exception"?(t="error",e=e.stack||e):t="log");if(n)try{console[t]("%c["+t+"] WD: "+e,n);return}catch(r){}console[t]("["+t+"] WD: "+e)}},debug:function(e){return this.log(e,"debug")},info:function(e){return this.log(e,"info")},warn:function(e){return this.log(e,"warn")},error:function(e){return this.log(e,"error")},exception:function(e){return this.log(e,"exception")}}}),function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define("cdf/lib/moment",t):e.moment=t()}(this,function(){"use strict";function t(){return e.apply(null,arguments)}function n(t){e=t}function r(e){return Object.prototype.toString.call(e)==="[object Array]"}function i(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function s(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,r){return kn(e,t,n,r,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return e._pf==null&&(e._pf=f()),e._pf}function c(e){if(e._isValid==null){var t=l(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return e._isValid}function h(e){var t=a(NaN);return e!=null?u(l(t),e):l(t).userInvalidated=!0,t}function p(e){return e===void 0}function v(e,t){var n,r,i;p(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),p(t._i)||(e._i=t._i),p(t._f)||(e._f=t._f),p(t._l)||(e._l=t._l),p(t._strict)||(e._strict=t._strict),p(t._tzm)||(e._tzm=t._tzm),p(t._isUTC)||(e._isUTC=t._isUTC),p(t._offset)||(e._offset=t._offset),p(t._pf)||(e._pf=l(t)),p(t._locale)||(e._locale=t._locale);if(d.length>0)for(n in d)r=d[n],i=t[r],p(i)||(e[r]=i);return e}function g(e){v(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),m===!1&&(m=!0,t.updateOffset(this),m=!1)}function y(e){return e instanceof g||e!=null&&e._isAMomentObject!=null}function b(e){return e<0?Math.ceil(e):Math.floor(e)}function w(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=b(t)),n}function E(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&w(e[o])!==w(t[o]))&&s++;return s+i}function S(){}function N(e){return e?e.toLowerCase().replace("_","-"):e}function C(e){var t=0,n,r,i,s;while(t<e.length){s=N(e[t]).split("-"),n=s.length,r=N(e[t+1]),r=r?r.split("-"):null;while(n>0){i=k(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&E(s,r,!0)>=n-1)break;n--}t++}return null}function k(e){var t=null;if(!x[e]&&typeof module!="undefined"&&module&&module.exports)try{t=T._abbr,require("./locale/"+e),L(t)}catch(n){}return x[e]}function L(e,t){var n;return e&&(p(t)?n=O(e):n=A(e,t),n&&(T=n)),T._abbr}function A(e,t){return t!==null?(t.abbr=e,x[e]=x[e]||new S,x[e].set(t),L(e),x[e]):(delete x[e],null)}function O(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return T;if(!r(e)){t=k(e);if(t)return t;e=[e]}return C(e)}function _(e,t){var n=e.toLowerCase();M[n]=M[n+"s"]=M[t]=e}function D(e){return typeof e=="string"?M[e]||M[e.toLowerCase()]:undefined}function P(e){var t={},n,r;for(r in e)o(e,r)&&(n=D(r),n&&(t[n]=e[r]));return t}function H(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function B(e,n){return function(r){return r!=null?(F(this,e,r),t.updateOffset(this,n),this):j(this,e)}}function j(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function F(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function I(e,t){var n;if(typeof e=="object")for(n in e)this.set(n,e[n]);else{e=D(e);if(H(this[e]))return this[e](t)}return this}function q(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function X(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(W[e]=i),t&&(W[t[0]]=function(){return q(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function $(e){var t=e.match(R),n,r;for(n=0,r=t.length;n<r;n++)W[t[n]]?t[n]=W[t[n]]:t[n]=V(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function J(e,t){return e.isValid()?(t=K(t,e.localeData()),z[t]=z[t]||$(t),z[t](e)):e.localeData().invalidDate()}function K(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;U.lastIndex=0;while(n>=0&&U.test(e))e=e.replace(U,r),U.lastIndex=0,n-=1;return e}function dt(e,t,n){pt[e]=H(t)?t:function(e,r){return e&&n?n:t}}function vt(e,t){return o(pt,e)?pt[e](t._strict,t._locale):new RegExp(mt(e))}function mt(e){return gt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function gt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function bt(e,t){var n,r=t;typeof e=="string"&&(e=[e]),typeof t=="number"&&(r=function(e,n){n[t]=w(e)});for(n=0;n<e.length;n++)yt[e[n]]=r}function wt(e,t){bt(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function Et(e,t,n){t!=null&&o(yt,e)&&yt[e](t,n._a,n,e)}function Mt(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Pt(e,t){return r(this._months)?this._months[e.month()]:this._months[_t.test(t)?"format":"standalone"][e.month()]}function Bt(e,t){return r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[_t.test(t)?"format":"standalone"][e.month()]}function jt(e,t,n){var r,i,s;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=a([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function Ft(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),Mt(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function It(e){return e!=null?(Ft(this,e),t.updateOffset(this,!0),this):j(this,"Month")}function qt(){return Mt(this.year(),this.month())}function Ut(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Xt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}function Wt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Xt.call(this),e?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}function Xt(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i,s;for(i=0;i<12;i++)s=a([2e3,i]),t.push(this.monthsShort(s,"")),n.push(this.months(s,"")),r.push(this.months(s,"")),r.push(this.monthsShort(s,""));t.sort(e),n.sort(e),r.sort(e);for(i=0;i<12;i++)t[i]=gt(t[i]),n[i]=gt(n[i]),r[i]=gt(r[i]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")$","i")}function Vt(e){var t,n=e._a;return n&&l(e).overflow===-2&&(t=n[xt]<0||n[xt]>11?xt:n[Tt]<1||n[Tt]>Mt(n[St],n[xt])?Tt:n[Nt]<0||n[Nt]>24||n[Nt]===24&&(n[Ct]!==0||n[kt]!==0||n[Lt]!==0)?Nt:n[Ct]<0||n[Ct]>59?Ct:n[kt]<0||n[kt]>59?kt:n[Lt]<0||n[Lt]>999?Lt:-1,l(e)._overflowDayOfYear&&(t<St||t>Tt)&&(t=Tt),l(e)._overflowWeeks&&t===-1&&(t=At),l(e)._overflowWeekday&&t===-1&&(t=Ot),l(e).overflow=t),e}function $t(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function Jt(e,t){var n=!0;return u(function(){return n&&($t(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function Qt(e,t){Kt[e]||($t(t),Kt[e]=!0)}function rn(e){var t,n,r=e._i,i=Gt.exec(r)||Yt.exec(r),s,o,u,a;if(i){l(e).iso=!0;for(t=0,n=en.length;t<n;t++)if(en[t][1].exec(i[1])){o=en[t][0],s=en[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(i[3]){for(t=0,n=tn.length;t<n;t++)if(tn[t][1].exec(i[3])){u=(i[2]||" ")+tn[t][0];break}if(u==null){e._isValid=!1;return}}if(!s&&u!=null){e._isValid=!1;return}if(i[4]){if(!Zt.exec(i[4])){e._isValid=!1;return}a="Z"}e._f=o+(u||"")+(a||""),wn(e)}else e._isValid=!1}function sn(e){var n=nn.exec(e._i);if(n!==null){e._d=new Date(+n[1]);return}rn(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function on(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<100&&e>=0&&isFinite(u.getFullYear())&&u.setFullYear(e),u}function un(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function an(e){return fn(e)?366:365}function fn(e){return e%4===0&&e%100!==0||e%400===0}function cn(){return fn(this.year())}function hn(e,t,n){var r=7+t-n,i=(7+un(e,0,r).getUTCDay()-t)%7;return-i+r-1}function pn(e,t,n,r,i){var s=(7+n-r)%7,o=hn(e,r,i),u=1+7*(t-1)+s+o,a,f;return u<=0?(a=e-1,f=an(a)+u):u>an(e)?(a=e+1,f=u-an(e)):(a=e,f=u),{year:a,dayOfYear:f}}function dn(e,t,n){var r=hn(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,o;return i<1?(o=e.year()-1,s=i+vn(o,t,n)):i>vn(e.year(),t,n)?(s=i-vn(e.year(),t,n),o=e.year()+1):(o=e.year(),s=i),{week:s,year:o}}function vn(e,t,n){var r=hn(e,t,n),i=hn(e+1,t,n);return(an(e)-r+i)/7}function mn(e,t,n){return e!=null?e:t!=null?t:n}function gn(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function yn(e){var t,n,r=[],i,s;if(e._d)return;i=gn(e),e._w&&e._a[Tt]==null&&e._a[xt]==null&&bn(e),e._dayOfYear&&(s=mn(e._a[St],i[St]),e._dayOfYear>an(s)&&(l(e)._overflowDayOfYear=!0),n=un(s,0,e._dayOfYear),e._a[xt]=n.getUTCMonth(),e._a[Tt]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Nt]===24&&e._a[Ct]===0&&e._a[kt]===0&&e._a[Lt]===0&&(e._nextDay=!0,e._a[Nt]=0),e._d=(e._useUTC?un:on).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Nt]=24)}function bn(e){var t,n,r,i,s,o,u,a;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){s=1,o=4,n=mn(t.GG,e._a[St],dn(Ln(),1,4).year),r=mn(t.W,1),i=mn(t.E,1);if(i<1||i>7)a=!0}else{s=e._locale._week.dow,o=e._locale._week.doy,n=mn(t.gg,e._a[St],dn(Ln(),s,o).year),r=mn(t.w,1);if(t.d!=null){i=t.d;if(i<0||i>6)a=!0}else if(t.e!=null){i=t.e+s;if(t.e<0||t.e>6)a=!0}else i=s}r<1||r>vn(n,s,o)?l(e)._overflowWeeks=!0:a!=null?l(e)._overflowWeekday=!0:(u=pn(n,r,i,s,o),e._a[St]=u.year,e._dayOfYear=u.dayOfYear)}function wn(e){if(e._f===t.ISO_8601){rn(e);return}e._a=[],l(e).empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=K(e._f,e._locale).match(R)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(vt(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&l(e).unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),W[o]?(i?l(e).empty=!1:l(e).unusedTokens.push(o),Et(o,i,e)):e._strict&&!i&&l(e).unusedTokens.push(o);l(e).charsLeftOver=a-f,n.length>0&&l(e).unusedInput.push(n),l(e).bigHour===!0&&e._a[Nt]<=12&&e._a[Nt]>0&&(l(e).bigHour=undefined),e._a[Nt]=En(e._locale,e._a[Nt],e._meridiem),yn(e),Vt(e)}function En(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function Sn(e){var t,n,r,i,s;if(e._f.length===0){l(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=v({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],wn(t);if(!c(t))continue;s+=l(t).charsLeftOver,s+=l(t).unusedTokens.length*10,l(t).score=s;if(r==null||s<r)r=s,n=t}u(e,n||t)}function xn(e){if(e._d)return;var t=P(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),yn(e)}function Tn(e){var t=new g(Vt(Nn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function Nn(e){var t=e._i,n=e._f;return e._locale=e._locale||O(e._l),t===null||n===undefined&&t===""?h({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),y(t)?new g(Vt(t)):(r(n)?Sn(e):n?wn(e):i(t)?e._d=t:Cn(e),c(e)||(e._d=null),e))}function Cn(e){var n=e._i;n===undefined?e._d=new Date(t.now()):i(n)?e._d=new Date(+n):typeof n=="string"?sn(e):r(n)?(e._a=s(n.slice(0),function(e){return parseInt(e,10)}),yn(e)):typeof n=="object"?xn(e):typeof n=="number"?e._d=new Date(n):t.createFromInputFallback(e)}function kn(e,t,n,r,i){var s={};return typeof n=="boolean"&&(r=n,n=undefined),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,Tn(s)}function Ln(e,t,n,r){return kn(e,t,n,r,!1)}function Mn(e,t){var n,i;t.length===1&&r(t[0])&&(t=t[0]);if(!t.length)return Ln();n=t[0];for(i=1;i<t.length;++i)if(!t[i].isValid()||t[i][e](n))n=t[i];return n}function _n(){var e=[].slice.call(arguments,0);return Mn("isBefore",e)}function Dn(){var e=[].slice.call(arguments,0);return Mn("isAfter",e)}function Hn(e){var t=P(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*36e5,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=O(),this._bubble()}function Bn(e){return e instanceof Hn}function jn(e,t){X(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+q(~~(e/60),2)+t+q(~~e%60,2)})}function In(e,t){var n=(t||"").match(e)||[],r=n[n.length-1]||[],i=(r+"").match(Fn)||["-",0,0],s=+(i[1]*60)+w(i[2]);return i[0]==="+"?s:-s}function qn(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(y(e)||i(e)?+e:+Ln(e))- +r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):Ln(e).local()}function Rn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function Un(e,n){var r=this._offset||0,i;return this.isValid()?e!=null?(typeof e=="string"?e=In(lt,e):Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=Rn(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?or(this,tr(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Rn(this):e!=null?this:NaN}function zn(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Wn(e){return this.utcOffset(0,e)}function Xn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Rn(this),"m")),this}function Vn(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(In(ft,this._i)),this}function $n(e){return this.isValid()?(e=e?Ln(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Jn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Kn(){if(!p(this._isDSTShifted))return this._isDSTShifted;var e={};v(e,this),e=Nn(e);if(e._a){var t=e._isUTC?a(e._a):Ln(e._a);this._isDSTShifted=this.isValid()&&E(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Qn(){return this.isValid()?!this._isUTC:!1}function Gn(){return this.isValid()?this._isUTC:!1}function Yn(){return this.isValid()?this._isUTC&&this._offset===0:!1}function tr(e,t){var n=e,r=null,i,s,u;return Bn(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=Zn.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:w(r[Tt])*i,h:w(r[Nt])*i,m:w(r[Ct])*i,s:w(r[kt])*i,ms:w(r[Lt])*i}):(r=er.exec(e))?(i=r[1]==="-"?-1:1,n={y:nr(r[2],i),M:nr(r[3],i),d:nr(r[4],i),h:nr(r[5],i),m:nr(r[6],i),s:nr(r[7],i),w:nr(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(u=ir(Ln(n.from),Ln(n.to)),n={},n.ms=u.milliseconds,n.M=u.months),s=new Hn(n),Bn(e)&&o(e,"_locale")&&(s._locale=e._locale),s}function nr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function rr(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function ir(e,t){var n;return!e.isValid()||!t.isValid()?{milliseconds:0,months:0}:(t=qn(t,e),e.isBefore(t)?n=rr(e,t):(n=rr(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n)}function sr(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(Qt(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=tr(n,r),or(this,i,e),this}}function or(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;if(!e.isValid())return;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&F(e,"Date",j(e,"Date")+o*r),u&&Ft(e,j(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function fr(e,t){var n=e||Ln(),r=qn(n,this).startOf("day"),i=this.diff(r,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse",o=t&&(H(t[s])?t[s]():t[s]);return this.format(o||this.localeData().calendar(s,this,Ln(n)))}function lr(){return new g(this)}function cr(e,t){var n=y(e)?e:Ln(e);return!this.isValid()||!n.isValid()?!1:(t=D(p(t)?"millisecond":t),t==="millisecond"?+this>+n:+n<+this.clone().startOf(t))}function hr(e,t){var n=y(e)?e:Ln(e);return!this.isValid()||!n.isValid()?!1:(t=D(p(t)?"millisecond":t),t==="millisecond"?+this<+n:+this.clone().endOf(t)<+n)}function pr(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function dr(e,t){var n=y(e)?e:Ln(e),r;return!this.isValid()||!n.isValid()?!1:(t=D(t||"millisecond"),t==="millisecond"?+this===+n:(r=+n,+this.clone().startOf(t)<=r&&r<=+this.clone().endOf(t)))}function vr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function mr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function gr(e,t,n){var r,i,s,o;return this.isValid()?(r=qn(e,this),r.isValid()?(i=(r.utcOffset()-this.utcOffset())*6e4,t=D(t),t==="year"||t==="month"||t==="quarter"?(o=yr(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:b(o)):NaN):NaN}function yr(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)}function br(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function wr(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?H(Date.prototype.toISOString)?this.toDate().toISOString():J(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):J(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Er(e){var n=J(this,e||t.defaultFormat);return this.localeData().postformat(n)}function Sr(e,t){return this.isValid()&&(y(e)&&e.isValid()||Ln(e).isValid())?tr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function xr(e){return this.from(Ln(),e)}function Tr(e,t){return this.isValid()&&(y(e)&&e.isValid()||Ln(e).isValid())?tr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Nr(e){return this.to(Ln(),e)}function Cr(e){var t;return e===undefined?this._locale._abbr:(t=O(e),t!=null&&(this._locale=t),this)}function Lr(){return this._locale}function Ar(e){e=D(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function Or(e){return e=D(e),e===undefined||e==="millisecond"?this:this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Mr(){return+this._d-(this._offset||0)*6e4}function _r(){return Math.floor(+this/1e3)}function Dr(){return this._offset?new Date(+this):this._d}function Pr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Hr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Br(){return this.isValid()?this.toISOString():"null"}function jr(){return c(this)}function Fr(){return u({},l(this))}function Ir(){return l(this).overflow}function qr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Rr(e,t){X(0,[e,e.length],0,t)}function Ur(e){return Vr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function zr(e){return Vr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Wr(){return vn(this.year(),1,4)}function Xr(){var e=this.localeData()._week;return vn(this.year(),e.dow,e.doy)}function Vr(e,t,n,r,i){var s;return e==null?dn(this,r,i).year:(s=vn(e,r,i),t>s&&(t=s),$r.call(this,e,t,n,r,i))}function $r(e,t,n,r,i){var s=pn(e,t,n,r,i),o=un(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Jr(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function Kr(e){return dn(e,this._week.dow,this._week.doy).week}function Gr(){return this._week.dow}function Yr(){return this._week.doy}function Zr(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function ei(e){var t=dn(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function ni(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function ii(e,t){return r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function oi(e){return this._weekdaysShort[e.day()]}function ai(e){return this._weekdaysMin[e.day()]}function fi(e,t,n){var r,i,s;this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(r=0;r<7;r++){i=Ln([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function li(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=ni(e,this.localeData()),this.add(e-t,"d")):t}function ci(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function hi(e){return this.isValid()?e==null?this.day()||7:this.day(this.day()%7?e:e-7):e!=null?this:NaN}function pi(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function di(){return this.hours()%12||12}function vi(e,t){X(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function mi(e,t){return t._meridiemParse}function gi(e){return(e+"").toLowerCase().charAt(0)==="p"}function bi(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ti(e,t){t[Lt]=w(("0."+e)*1e3)}function Ci(){return this._isUTC?"UTC":""}function ki(){return this._isUTC?"Coordinated Universal Time":""}function Oi(e){return Ln(e*1e3)}function Mi(){return Ln.apply(null,arguments).parseZone()}function Di(e,t,n){var r=this._calendar[e];return H(r)?r.call(t,n):r}function Hi(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function ji(){return this._invalidDate}function qi(e){return this._ordinal.replace("%d",e)}function Ri(e){return e}function zi(e,t,n,r){var i=this._relativeTime[n];return H(i)?i(e,t,n,r):i.replace(/%d/i,e)}function Wi(e,t){var n=this._relativeTime[e>0?"future":"past"];return H(n)?n(t):n.replace(/%s/i,t)}function Xi(e){var t,n;for(n in e)t=e[n],H(t)?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function $i(e,t,n,r){var i=O(),s=a().set(r,t);return i[n](s,e)}function Ji(e,t,n,r,i){typeof e=="number"&&(t=e,e=undefined),e=e||"";if(t!=null)return $i(e,t,n,i);var s,o=[];for(s=0;s<r;s++)o[s]=$i(e,s,n,i);return o}function Ki(e,t){return Ji(e,t,"months",12,"month")}function Qi(e,t){return Ji(e,t,"monthsShort",12,"month")}function Gi(e,t){return Ji(e,t,"weekdays",7,"day")}function Yi(e,t){return Ji(e,t,"weekdaysShort",7,"day")}function Zi(e,t){return Ji(e,t,"weekdaysMin",7,"day")}function ts(){var e=this._data;return this._milliseconds=es(this._milliseconds),this._days=es(this._days),this._months=es(this._months),e.milliseconds=es(e.milliseconds),e.seconds=es(e.seconds),e.minutes=es(e.minutes),e.hours=es(e.hours),e.months=es(e.months),e.years=es(e.years),this}function ns(e,t,n,r){var i=tr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function rs(e,t){return ns(this,e,t,1)}function is(e,t){return ns(this,e,t,-1)}function ss(e){return e<0?Math.floor(e):Math.ceil(e)}function os(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u,a;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=ss(as(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=b(e/1e3),r.seconds=i%60,s=b(i/60),r.minutes=s%60,o=b(s/60),r.hours=o%24,t+=b(o/24),a=b(us(t)),n+=a,t-=ss(as(a)),u=b(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function us(e){return e*4800/146097}function as(e){return e*146097/4800}function fs(e){var t,n,r=this._milliseconds;e=D(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+us(t),e==="month"?n:n/12;t=this._days+Math.round(as(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function ls(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+w(this._months/12)*31536e6}function cs(e){return function(){return this.as(e)}}function ws(e){return e=D(e),this[e+"s"]()}function Es(e){return function(){return this._data[e]}}function As(){return b(this.days()/7)}function _s(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Ds(e,t,n){var r=tr(e).abs(),i=Os(r.as("s")),s=Os(r.as("m")),o=Os(r.as("h")),u=Os(r.as("d")),a=Os(r.as("M")),f=Os(r.as("y")),l=i<Ms.s&&["s",i]||s<=1&&["m"]||s<Ms.m&&["mm",s]||o<=1&&["h"]||o<Ms.h&&["hh",o]||u<=1&&["d"]||u<Ms.d&&["dd",u]||a<=1&&["M"]||a<Ms.M&&["MM",a]||f<=1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,_s.apply(null,l)}function Ps(e,t){return Ms[e]===undefined?!1:t===undefined?Ms[e]:(Ms[e]=t,!0)}function Hs(e){var t=this.localeData(),n=Ds(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function js(){var e=Bs(this._milliseconds)/1e3,t=Bs(this._days),n=Bs(this._months),r,i,s;r=b(e/60),i=b(r/60),e%=60,r%=60,s=b(n/12),n%=12;var o=s,u=n,a=t,f=i,l=r,c=e,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(u?u+"M":"")+(a?a+"D":"")+(f||l||c?"T":"")+(f?f+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var e,d=t.momentProperties=[],m=!1,x={},T,M={},R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,z={},W={},Q=/\d/,G=/\d\d/,Y=/\d{3}/,Z=/\d{4}/,et=/[+-]?\d{6}/,tt=/\d\d?/,nt=/\d\d\d\d?/,rt=/\d\d\d\d\d\d?/,it=/\d{1,3}/,st=/\d{1,4}/,ot=/[+-]?\d{1,6}/,ut=/\d+/,at=/[+-]?\d+/,ft=/Z|[+-]\d\d:?\d\d/gi,lt=/Z|[+-]\d\d(?::?\d\d)?/gi,ct=/[+-]?\d+(\.\d{1,3})?/,ht=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,pt={},yt={},St=0,xt=1,Tt=2,Nt=3,Ct=4,kt=5,Lt=6,At=7,Ot=8;X("M",["MM",2],"Mo",function(){return this.month()+1}),X("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),X("MMMM",0,0,function(e){return this.localeData().months(this,e)}),_("month","M"),dt("M",tt),dt("MM",tt,G),dt("MMM",function(e,t){return t.monthsShortRegex(e)}),dt("MMMM",function(e,t){return t.monthsRegex(e)}),bt(["M","MM"],function(e,t){t[xt]=w(e)-1}),bt(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[xt]=i:l(n).invalidMonth=e});var _t=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Dt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ht="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Rt=ht,zt=ht,Kt={};t.suppressDeprecationWarnings=!1;var Gt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Yt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Zt=/Z|[+-]\d\d(?::?\d\d)?/,en=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],tn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],nn=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=Jt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),X("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),X(0,["YY",2],0,function(){return this.year()%100}),X(0,["YYYY",4],0,"year"),X(0,["YYYYY",5],0,"year"),X(0,["YYYYYY",6,!0],0,"year"),_("year","y"),dt("Y",at),dt("YY",tt,G),dt("YYYY",st,Z),dt("YYYYY",ot,et),dt("YYYYYY",ot,et),bt(["YYYYY","YYYYYY"],St),bt("YYYY",function(e,n){n[St]=e.length===2?t.parseTwoDigitYear(e):w(e)}),bt("YY",function(e,n){n[St]=t.parseTwoDigitYear(e)}),bt("Y",function(e,t){t[St]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var ln=B("FullYear",!1);t.ISO_8601=function(){};var An=Jt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ln.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:h()}),On=Jt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ln.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:h()}),Pn=function(){return Date.now?Date.now():+(new Date)};jn("Z",":"),jn("ZZ",""),dt("Z",lt),dt("ZZ",lt),bt(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=In(lt,e)});var Fn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Zn=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,er=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;tr.fn=Hn.prototype;var ur=sr(1,"add"),ar=sr(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var kr=Jt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});X(0,["gg",2],0,function(){return this.weekYear()%100}),X(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Rr("gggg","weekYear"),Rr("ggggg","weekYear"),Rr("GGGG","isoWeekYear"),Rr("GGGGG","isoWeekYear"),_("weekYear","gg"),_("isoWeekYear","GG"),dt("G",at),dt("g",at),dt("GG",tt,G),dt("gg",tt,G),dt("GGGG",st,Z),dt("gggg",st,Z),dt("GGGGG",ot,et),dt("ggggg",ot,et),wt(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=w(e)}),wt(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),X("Q",0,"Qo","quarter"),_("quarter","Q"),dt("Q",Q),bt("Q",function(e,t){t[xt]=(w(e)-1)*3}),X("w",["ww",2],"wo","week"),X("W",["WW",2],"Wo","isoWeek"),_("week","w"),_("isoWeek","W"),dt("w",tt),dt("ww",tt,G),dt("W",tt),dt("WW",tt,G),wt(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=w(e)});var Qr={dow:0,doy:6};X("D",["DD",2],"Do","date"),_("date","D"),dt("D",tt),dt("DD",tt,G),dt("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),bt(["D","DD"],Tt),bt("Do",function(e,t){t[Tt]=w(e.match(tt)[0],10)});var ti=B("Date",!0);X("d",0,"do","day"),X("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),X("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),X("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),X("e",0,0,"weekday"),X("E",0,0,"isoWeekday"),_("day","d"),_("weekday","e"),_("isoWeekday","E"),dt("d",tt),dt("e",tt),dt("E",tt),dt("dd",ht),dt("ddd",ht),dt("dddd",ht),wt(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:l(n).invalidWeekday=e}),wt(["d","e","E"],function(e,t,n,r){t[r]=w(e)});var ri="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),si="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ui="Su_Mo_Tu_We_Th_Fr_Sa".split("_");X("DDD",["DDDD",3],"DDDo","dayOfYear"),_("dayOfYear","DDD"),dt("DDD",it),dt("DDDD",Y),bt(["DDD","DDDD"],function(e,t,n){n._dayOfYear=w(e)}),X("H",["HH",2],0,"hour"),X("h",["hh",2],0,di),X("hmm",0,0,function(){return""+di.apply(this)+q(this.minutes(),2)}),X("hmmss",0,0,function(){return""+di.apply(this)+q(this.minutes(),2)+q(this.seconds(),2)}),X("Hmm",0,0,function(){return""+this.hours()+q(this.minutes(),2)}),X("Hmmss",0,0,function(){return""+this.hours()+q(this.minutes(),2)+q(this.seconds(),2)}),vi("a",!0),vi("A",!1),_("hour","h"),dt("a",mi),dt("A",mi),dt("H",tt),dt("h",tt),dt("HH",tt,G),dt("hh",tt,G),dt("hmm",nt),dt("hmmss",rt),dt("Hmm",nt),dt("Hmmss",rt),bt(["H","HH"],Nt),bt(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),bt(["h","hh"],function(e,t,n){t[Nt]=w(e),l(n).bigHour=!0}),bt("hmm",function(e,t,n){var r=e.length-2;t[Nt]=w(e.substr(0,r)),t[Ct]=w(e.substr(r)),l(n).bigHour=!0}),bt("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Nt]=w(e.substr(0,r)),t[Ct]=w(e.substr(r,2)),t[kt]=w(e.substr(i)),l(n).bigHour=!0}),bt("Hmm",function(e,t,n){var r=e.length-2;t[Nt]=w(e.substr(0,r)),t[Ct]=w(e.substr(r))}),bt("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Nt]=w(e.substr(0,r)),t[Ct]=w(e.substr(r,2)),t[kt]=w(e.substr(i))});var yi=/[ap]\.?m?\.?/i,wi=B("Hours",!0);X("m",["mm",2],0,"minute"),_("minute","m"),dt("m",tt),dt("mm",tt,G),bt(["m","mm"],Ct);var Ei=B("Minutes",!1);X("s",["ss",2],0,"second"),_("second","s"),dt("s",tt),dt("ss",tt,G),bt(["s","ss"],kt);var Si=B("Seconds",!1);X("S",0,0,function(){return~~(this.millisecond()/100)}),X(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),X(0,["SSS",3],0,"millisecond"),X(0,["SSSS",4],0,function(){return this.millisecond()*10}),X(0,["SSSSS",5],0,function(){return this.millisecond()*100}),X(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),X(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),X(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),X(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),_("millisecond","ms"),dt("S",it,Q),dt("SS",it,G),dt("SSS",it,Y);var xi;for(xi="SSSS";xi.length<=9;xi+="S")dt(xi,ut);for(xi="S";xi.length<=9;xi+="S")bt(xi,Ti);var Ni=B("Milliseconds",!1);X("z",0,0,"zoneAbbr"),X("zz",0,0,"zoneName");var Li=g.prototype;Li.add=ur,Li.calendar=fr,Li.clone=lr,Li.diff=gr,Li.endOf=Or,Li.format=Er,Li.from=Sr,Li.fromNow=xr,Li.to=Tr,Li.toNow=Nr,Li.get=I,Li.invalidAt=Ir,Li.isAfter=cr,Li.isBefore=hr,Li.isBetween=pr,Li.isSame=dr,Li.isSameOrAfter=vr,Li.isSameOrBefore=mr,Li.isValid=jr,Li.lang=kr,Li.locale=Cr,Li.localeData=Lr,Li.max=On,Li.min=An,Li.parsingFlags=Fr,Li.set=I,Li.startOf=Ar,Li.subtract=ar,Li.toArray=Pr,Li.toObject=Hr,Li.toDate=Dr,Li.toISOString=wr,Li.toJSON=Br,Li.toString=br,Li.unix=_r,Li.valueOf=Mr,Li.creationData=qr,Li.year=ln,Li.isLeapYear=cn,Li.weekYear=Ur,Li.isoWeekYear=zr,Li.quarter=Li.quarters=Jr,Li.month=It,Li.daysInMonth=qt,Li.week=Li.weeks=Zr,Li.isoWeek=Li.isoWeeks=ei,Li.weeksInYear=Xr,Li.isoWeeksInYear=Wr,Li.date=ti,Li.day=Li.days=li,Li.weekday=ci,Li.isoWeekday=hi,Li.dayOfYear=pi,Li.hour=Li.hours=wi,Li.minute=Li.minutes=Ei,Li.second=Li.seconds=Si,Li.millisecond=Li.milliseconds=Ni,Li.utcOffset=Un,Li.utc=Wn,Li.local=Xn,Li.parseZone=Vn,Li.hasAlignedHourOffset=$n,Li.isDST=Jn,Li.isDSTShifted=Kn,Li.isLocal=Qn,Li.isUtcOffset=Gn,Li.isUtc=Yn,Li.isUTC=Yn,Li.zoneAbbr=Ci,Li.zoneName=ki,Li.dates=Jt("dates accessor is deprecated. Use date instead.",ti),Li.months=Jt("months accessor is deprecated. Use month instead",It),Li.years=Jt("years accessor is deprecated. Use year instead",ln),Li.zone=Jt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",zn);var Ai=Li,_i={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Pi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Bi="Invalid date",Fi="%d",Ii=/\d{1,2}/,Ui={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vi=S.prototype;Vi._calendar=_i,Vi.calendar=Di,Vi._longDateFormat=Pi,Vi.longDateFormat=Hi,Vi._invalidDate=Bi,Vi.invalidDate=ji,Vi._ordinal=Fi,Vi.ordinal=qi,Vi._ordinalParse=Ii,Vi.preparse=Ri,Vi.postformat=Ri,Vi._relativeTime=Ui,Vi.relativeTime=zi,Vi.pastFuture=Wi,Vi.set=Xi,Vi.months=Pt,Vi._months=Dt,Vi.monthsShort=Bt,Vi._monthsShort=Ht,Vi.monthsParse=jt,Vi._monthsRegex=zt,Vi.monthsRegex=Wt,Vi._monthsShortRegex=Rt,Vi.monthsShortRegex=Ut,Vi.week=Kr,Vi._week=Qr,Vi.firstDayOfYear=Yr,Vi.firstDayOfWeek=Gr,Vi.weekdays=ii,Vi._weekdays=ri,Vi.weekdaysMin=ai,Vi._weekdaysMin=ui,Vi.weekdaysShort=oi,Vi._weekdaysShort=si,Vi.weekdaysParse=fi,Vi.isPM=gi,Vi._meridiemParse=yi,Vi.meridiem=bi,L("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=w(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),t.lang=Jt("moment.lang is deprecated. Use moment.locale instead.",L),t.langData=Jt("moment.langData is deprecated. Use moment.localeData instead.",O);var es=Math.abs,hs=cs("ms"),ps=cs("s"),ds=cs("m"),vs=cs("h"),ms=cs("d"),gs=cs("w"),ys=cs("M"),bs=cs("y"),Ss=Es("milliseconds"),xs=Es("seconds"),Ts=Es("minutes"),Ns=Es("hours"),Cs=Es("days"),ks=Es("months"),Ls=Es("years"),Os=Math.round,Ms={s:45,m:45,h:22,d:26,M:11},Bs=Math.abs,Fs=Hn.prototype;Fs.abs=ts,Fs.add=rs,Fs.subtract=is,Fs.as=fs,Fs.asMilliseconds=hs,Fs.asSeconds=ps,Fs.asMinutes=ds,Fs.asHours=vs,Fs.asDays=ms,Fs.asWeeks=gs,Fs.asMonths=ys,Fs.asYears=bs,Fs.valueOf=ls,Fs._bubble=os,Fs.get=ws,Fs.milliseconds=Ss,Fs.seconds=xs,Fs.minutes=Ts,Fs.hours=Ns,Fs.days=Cs,Fs.weeks=As,Fs.months=ks,Fs.years=Ls,Fs.humanize=Hs,Fs.toISOString=js,Fs.toString=js,Fs.toJSON=js,Fs.locale=Cr,Fs.localeData=Lr,Fs.toIsoString=Jt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",js),Fs.lang=kr,X("X",0,0,"unix"),X("x",0,0,"valueOf"),dt("x",at),dt("X",ct),bt("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),bt("x",function(e,t,n){n._d=new Date(w(e))}),t.version="2.11.2",n(Ln),t.fn=Ai,t.min=_n,t.max=Dn,t.now=Pn,t.utc=a,t.unix=Oi,t.months=Ki,t.isDate=i,t.locale=L,t.invalid=h,t.duration=tr,t.isMoment=y,t.weekdays=Gi,t.parseZone=Mi,t.localeData=O,t.isDuration=Bn,t.monthsShort=Qi,t.weekdaysMin=Zi,t.defineLocale=A,t.weekdaysShort=Yi,t.normalizeUnits=D,t.relativeTimeThreshold=Ps,t.prototype=Ai;var Is=t;return Is}),define("cdf/lib/CCC/def",[],function(){function e(n,r,i){if(n&&!(n instanceof e.QualifiedName)){var s=typeof n;if("object"===s){for(var o in n)t(o,n[o],r);return e}if("array"===s){for(var o in n)t(n[o],r);return e}}return t(n,r,i),r}function t(t,n,r){t=e.qualName(t),r=e.space(t.namespace,r),t.name&&(r[t.name]=n,n instanceof Object&&e.qualNameOf(n,t))}function n(t){e.log=e.logger("[DEF]"),ct&&ct.forEach(function(e){e(t)})}function r(){return e.debug}function i(e,t){e=s(e,t);var n=f("log",e);return n.log=n,n.level=r,pt.forEach(function(t){n[t]=f(dt[t]||t,e)}),n}function s(t,n){return t&&(e.fun.is(t)?t.call(n):t)}function o(t,n,o){var u=function(r){if(e.debug>1){var u=t[n||"log"]=i(o,t);u[r||"log"].apply(u,st.call(arguments,1))}else"error"===r&&a.apply(null,e.array.append([s(o,t)],arguments,1))},f=u.bind("log");return f.log=f,f.level=r,pt.forEach(function(e){f[e]=u.bind(e)}),f}function u(){function e(){}return e.log=e,e.level=r,pt.forEach(function(t){e[t]=e}),e}function a(t,n,r){throw n&&"object"==typeof n&&n.message&&(n=n.message),n=(t?t+": ":"")+e.nullyTo(n,"")+(r?" "+r:""),new Error(n)}function f(t,n){var r,i=console,s=i[t]||i.log;if(s){var o=n?n+": %s":"%s";if(e.fun.is(s))r=s.bind(i,o);else{var u=Function.prototype.apply;r=function(){u.call(s,i,e.array.append([o],arguments))}}}return r}function l(){function e(e){function t(){n=e}return t.toString=c,t}function t(e){if(void 0!==n)throw new Error("Access denied.");var t=(e(),n);return n=void 0,t}var n;return t.safe=e,t.property=h,t}function c(){return"SAFE"}function h(t,n){function r(n,r){return e.setNonEnum(n,t,s.safe(r)),r}function i(e){return s(e[t])}t||(t=vt(n));var s=this;return i.init=r,i.propertyName=t,i}function p(e){var t;e&&(e instanceof Array?(t=e,e=t.join(".")):t=e.split(".")),t&&t.length>1?(this.name=t.pop(),this.namespace=t.join(".")):(this.name=e||null,this.namespace=null)}function d(t,n){var r=n||gt;if(t){var i=t.split("."),s=i.length;if(s){var o,u=0;if(r===e.global){o=i[0];var a=e.getOwn(yt,o);a&&(r=a,u++)}for(;s>u;)o=i[u++],r=r[o]||(r[o]={})}}return r}function v(e){return function(t){return m(t,st.call(arguments,1),e)}}function m(t,n,r){for(var i,s=0,o=n.length;o>s;)if(i=n[s++])i=e.object.as(i.prototype||i),i&&g(t,i,r);return t}function g(e,t,n){for(var r in t)y(e,r,t[r],n)}function y(t,n,r,i){if(void 0!==r){var s,o=e.object.asNative(t[n]);o?(s=e.object.as(r),s?(rt.call(t,n)||(t[n]=o=Object.create(o)),g(o,s,i)):t[n]=r):(s=e.object.asNative(r),s&&(r=(i||Object.create)(s)),t[n]=r)}}function b(t){var n,r;for(n in t)(r=e.object.asNative(t[n]))&&b(t[n]=Object.create(r))}function w(t,n){if(n){var r=t.configure;e.fun.is(r)?r.call(t,n):w.generic(t,n)}return t}function E(t,n){function r(t){var r={};i.push(r);for(var s in t)if(s){var o=t[s];if(void 0===o)continue;var u,a,f,l,c=r,h=s.indexOf("."),p=null;if(h>=0){n?(p=[s.substr(0,h)],s=s.substr(h+1)):(p=s.split("."),s=p.pop()),u=p.length,a=-1;for(;++a<u;)if(f=p[a]){l=c[f];if(void 0===l)c[f]=l={};else if(null===l||!e.object.is(l)||l.constructor!==Object)i.push(r=l={}),a=-1;c=l}}var d=c[s];if(d!==o){if(void 0!==d){if(!S(o)||!S(d))continue;i.push(r=c={});if(p){a=-1;for(;++a<u;)(f=p[a])&&(c=c[f]={})}}c[s]=o}}}if(!t)return[];var i=[];return e.array.each(t,r),i}function S(t){return t&&e.object.is(t)&&!x(t)}function x(e){return e.constructor!==Object&&!(e instanceof Array)}function T(t,n){if(n){var r=n.prototype,i=t.prototype=Object.create(r);e.setNonEnum(i,"constructor",t),"__proto__"in i||e.setNonEnum(i,"__proto__",r)}return t}function N(t,n,r){function i(){var e=r.base;r.base=n;try{return t.apply(this,arguments)}finally{r.base=e}}function s(){var e=L(this),r=e.base;e.base=n;try{return t.apply(this,arguments)}finally{e.base=r}}return t?!n||n===t||!C(t)?t:(k(r),e.fun.wraps(r?i:s,t)):n}function C(e){return Et.test(e)}function k(t){if(t===nt)throw e.error.invalidArgument("proto","Cannot change Object.prototype.");return t}function L(t){k(e.protoOf(t))}function A(t,n){var r=e.fun.as(t[n]);return r===nt[n]?null:r}function O(t,n,r){t=ft(t);var i=e.protoOf(t),s=e.rootProtoOf(t),o=e.get(r,"enumerable",!0);return e.array.each(n,function(n){(n=ft(n))&&(at?e.ownKeys(n).forEach(function(e){H(t,e,at(n,e),i,s,o)}):e.eachOwn(n,function(e,n){D(t,n,e,i,s,o)}))}),e}function M(t,n,r,i){t=ft(t);var s=e.get(i,"enumerable",!0);return D(t,n,r,e.protoOf(t),e.rootProtoOf(t),s)}function _(e){return"base"!==e&&"constructor"!==e}function D(t,n,r,i,s,o){return void 0!==r&&i[n]!==r&&_(n)&&P(t,n,r,s,o),e}function P(t,n,r,i,s){var o;r&&(o=e.fun.as(r))?(r=e.overrides(o,A(t,n),i),s?t[n]=r:e.setNonEnum(t,n,r)):y(t,n,r,e.identity)}function H(t,n,r,i,s,o){var u;if(_(n))if(r.get||r.set){var a=B(i,n);a&&((r.get||a.get)&&(r.get=e.overrides(r.get,a.get,s)),(r.set||a.set)&&(r.set=e.overrides(r.set,a.set,s))),o||(r.enumerable=!1),ut(t,n,r)}else void 0!==(u=r.value)&&P(t,n,u,s,o);return e}function B(t,n){var r;if(n in t)for(;t=e.protoOf(t);)if(r=at(t,n))return r}function j(t,n){this.baseType=n||null;var r=this.constructor;if(r.Ctor)throw e.error.operationInvalid("MetaType already has an associated type constructor.");if(t&&t.Meta)throw e.error.argumentInvalid("TypeCtor","Specified type constructor already has an associated MetaType.");this.external=!!t,this.rootType=n?n.rootType:this,this._init=n?n._init:null,this._post=n?n._post:null;var i=n&&n._mixins;this._mixins=i?i.slice():null,this.steps=void 0,t=this._initConstructor(t||this._createConstructor()),this.Ctor=r.Ctor=t}function F(t){return e.fun.is(t)&&t.meta instanceof j}function I(t,n){e.methods(this,t,n);var r=this.Ctor;return r&&q.call(this,r,t),this}function q(t,n){var r=this.prototype;e.array.each(n,function(n){e.each(ft(n),function(n,i){e.isPropPrivate(i)||(n=r[i],e.fun.is(n)?R(t,i,n):t[i]=n)})})}function R(t,n,r){function i(){var e=this.meta,t=r.apply(e,arguments);return t===e?this:t}t[n]=e.fun.wraps(i,r)}function U(t){var n=e.classOf(this);return n(t,this)}function z(t,n){function r(n,r){if(void 0!==r){var o=n[t];if(null===r)n.___proto&&rt.call(n,t)&&(delete n[t],r=n[t],a&&r!==o&&a(r,o,this,t));else if(r!==o){if(l&&(s=l(r)))throw new e.error.argumentInvalid(t,e.string.is(s)?s:"");f&&(r=i.call(this,n,r,o)),null!=r&&(n[t]=r,a&&a(r,o,this,t))}}return this}function i(n,r,i){var s=f(r);if(null==s){if(!u)return;if(rt.call(n,t)){e.configure(i,r);return}if(!o)return;s=o(r,i)}return s}e.fun.is(n)&&(n={factory:n});var s,o=e.get(n,"factory"),u=e.get(n,"configurable",!!o),a=e.get(n,"change"),f=e.get(n,"cast"),l=e.get(n,"fail");return n=null,r}function W(t,n,r){e.MetaType.apply(this,arguments);var n=this.baseType;n&&(this.fieldsPrivProp=n.constructor===W?e.get(r,"fieldsPrivProp")||Tt:n.fieldsPrivProp)}function X(t,n,r,i){var s,o=e.lazy(t,"__eventz"),u=o[n]||(o[n]={before:[],after:[],count:0});if(e.fun.is(r))s={handler:r,_handler:null,_filter:null};else{if(!(r instanceof Object))throw e.error.argumentInvalid("handler","Invalid type.");s=r;if(!s.handler)throw e.error.argumentRequired("handler.handler");s._filter=null}s._handler=s.handler,u[i?"before":"after"].push(s),u.count++,t._on&&t._on(n,s,!!i)}function V(t,n,r){var i,s,o;if(null!=r)if(e.fun.is(r))o=r;else{if(!(r instanceof Object))throw e.error.argumentInvalid("handler","Invalid type.");o=r.handler}if((i=t.__eventz)&&(s=i[n])&&s.count){var u,a,f,l;if(o){u=s.before,f=Y(u,o),l=0>f;if(l){u=s.after,f=Y(u,o);if(0>f)return}a=u[f],0===--s.count?i[n]=null:(u=u.slice(),u.splice(f,1),s[l?"after":"before"]=u),$(t,n,a,!l)}else{var c=s.before,h=s.after;i[n]=null,f=c.length;for(;f--;)$(t,n,c[f],!0);f=h.length;for(;f--;)$(t,n,h[f],!1)}}}function $(e,t,n,r){e._off&&e._off(t,n,r),n._filter=n._handler=null}function J(t,n,r){var i,s,o,u,a,f;(i=t.__eventz)&&(s=i[n])&&(a=(o=s.before).length,f=(u=s.after).length);if(!f&&!a&&!r)return null;var l=!1,c=!1,h={type:n,phase:null,source:t,result:void 0,cancelable:!1,defaultPrevented:c,preventDefault:function(){l&&(this.defaultPrevented=c=!0)},trigger:function(n,i){if(this.phase)throw e.error.operationInvalid("Event can only be triggered once.");n||(n=t),i||(i=[this]),l=!!this.cancelable;var s;a&&K(n,this,i,o,a,!0);if(!l||!this.defaultPrevented)r&&(this.phase="default",this.result=s=r.apply(n,i)),f&&K(n,this,i,u,f,!1);return this.phase="done",s}};return h}function K(e,t,n,r,i,s){var o,u=-1;t.phase=s?"before":"after";for(;++u<i;)o=r[u],(!o._filter||o._filter.apply(e,n))&&o._handler.apply(e,n)}function Q(t,n,r,i,s,o){if(e.string.is(r))G(t,n,r,i,s,o);else if(e.array.is(r))r.forEach(function(r){if(!e.string.is(r))throw e.error.argumentInvalid("type");G(t,n,r,i,s,o)});else{if(!e.object.is(r))throw e.error.argumentInvalid("type");e.eachOwn(r,function(e,r){G(t,n,r,e,s,o)})}}function G(t,n,r,i,s,o){if(!o&&!i)throw e.error.argumentRequired("handler");e.array.is(i)?i.forEach(function(e){t(n,r,e,s)}):t(n,r,i,s)}function Y(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n].handler===t)return n;return-1}function Z(){for(;this._source.next();){var t=this._selectMany?this._selectMany.call(this._ctx,this._source.item,this._source.index):this._source.item;if(null!=t)return this._manySource=e.query(t),!0}}function et(e,t){return t?(e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))):e}var tt=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),nt=Object.prototype,rt=nt.hasOwnProperty,it=tt?["toString","valueOf"]:null;Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var n in e)rt.call(e,n)&&t.push(n);return it&&it.forEach(function(n){rt.call(e,n)&&t.push(n)}),t}),Array.prototype.some||(Array.prototype.some=function(e){for(var t=Object(this),n=t.length>>>0,r=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)if(i in t&&e.call(r,t[i],i,t))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(e,t){for(var n=this.length,r=new Array(n),i=0;n>i;i++)i in this&&(r[i]=e.call(t,this[i],i,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n=this.length,r=new Array,i=0;n>i;i++)if(i in this){var s=this[i];e.call(t,s,i,this)&&r.push(s)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Object.create||(Object.create=function(){function e(e){t.prototype=e||{};var r=new t;return t.prototype=n,r}var t=function(){},n=t.prototype;return e}()),Function.prototype.bind||(Function.prototype.bind=function(e){return function(t){var n=e.call(arguments,1),r=this;return function(){return r.apply(t,n.concat(e.call(arguments)))}}}(Array.prototype.slice)),this.JSON||(this.JSON={}),this.JSON.stringify||(this.JSON.stringify=function(e){return String(e)});var st=Array.prototype.slice,ot=[],ut=function(){var e=Object.defineProperty;if(e)try{e({},"test",{})}catch(t){return null}return e}(),at=function(){var e=ut&&Object.getOwnPropertyDescriptor;return e&&null===e({value:null},"value").value?e:void 0}(),ft=function(e){return e.prototype||e};e.global=this,e.copyOwn=function(e,t){var n,r;arguments.length>=2?(n=e||{},r=t):(n={},r=e);for(var i in r)rt.call(r,i)&&(n[i]=r[i]);return n},e.copyOwn(e,{get:function(e,t,n){var r;return e&&null!=(r=e[t])?r:n},gets:function(e,t){return t.map(function(t){return e[t]})},getPath:function(t,n,r,i){if(!t)return r;if(null!=n){var s=e.array.is(n)?n:n.split("."),o=s.length;if(o)for(var u=0;o>u;){var a=s[u++],f=t[a];if(null==f){if(!i)return r;f=t[a]=null==r||isNaN(+r)?{}:[]}t=f}}return t},setPath:function(t,n,r){if(t&&null!=n){var i=e.array.is(n)?n:n.split(".");if(i.length){var s=i.pop();t=e.getPath(t,i,s,!0),null!=t&&(t[s]=r)}}return t},propGet:function(e,t){return e=""+e,function(n){return n?n[e]:t}},getOwn:function(e,t,n){var r;return e&&rt.call(e,t)&&null!=(r=e[t])?r:n},hasOwn:function(e,t){return!!e&&rt.call(e,t)},protoOf:Object.getPrototypeOf||function(e){return e.__proto__||e.constructor&&e.constructor.prototype},rootProtoOf:function(t){for(var n=null,r=e.protoOf(t);r&&r!==nt&&r!==n;)r=e.protoOf(n=r);return n},hasOwnProp:rt,set:function(e){for(var t=e||{},n=arguments,r=1,i=n.length-1;i>r;r+=2)t[n[r]]=n[r+1];return t},setDefaults:function(t,n){var r,i=t||{},s=arguments,o=s.length;if(2===o&&e.object.is(n))e.each(n,function(e,t){null==i[t]&&(i[t]=e)});else{o--;for(var u=1;o>u;u+=2)r=s[u],null==i[r]&&(i[r]=s[u+1])}return i},setUDefaults:function(t,n){var r,i=t||{},s=arguments,o=s.length;if(2===o&&e.object.is(n))e.each(n,function(e,t){void 0===i[t]&&(i[t]=e)});else{o--;for(var u=1;o>u;u+=2)r=s[u],void 0===i[r]&&(i[r]=s[u+1])}return i},setNonEnum:function(){if(!ut)return function(e,t,n){return e[t]=n,e};var e={enumerable:!1,configurable:!0,writable:!0,value:void 0};return function(t,n,r){return e.value=r,ut(t,n,e),e.value=null,t}}(),setConst:function(){if(!ut)return function(e,t,n){return e[t]=n,e};var e={enumerable:!1,configurable:!1,writable:!1,value:void 0};return function(t,n,r){return e.value=r,ut(t,n,e),e.value=null,t}}(),eachOwn:function(e,t,n){for(var r in e)rt.call(e,r)&&t.call(n,e[r],r,e);e&&it&&it.forEach(function(r){rt.call(e,r)&&t.call(n,e[r],r,e)})},each:function(e,t,n){for(var r in e)t.call(n,e[r],r,e);e&&it&&it.forEach(function(r){rt.call(e,r)&&t.call(n,e[r],r,e)})},copy:function(t,n){var r,i;return arguments.length>=2?(r=t||{},i=n):(r={},i=t),e.each(i,function(e,t){r[t]=e}),r},copyx:function(t,n,r){var i=e.get(r,"where"),s=e.get(r,"set");return e.each(n,function(e,r){(!i||i(n,r,t))&&(s?s(t,r,e):t[r]=e)}),t},copyProps:function(e,t,n){var r,i;arguments.length>=3?(r=e||{},i=t):(r={},i=e,n=t);if(n){var s=-1,o=n.length;if(i)for(;++s<o;)r[n[s]]=i[n[s]];else for(;++s<o;)r[n[s]]=void 0}return r},keys:function(e){var t=[];for(var n in e)t.push(n);return e&&it&&it.forEach(function(e){t.push(e)}),t},values:function(t){var n=[];return e.each(t,function(e){n.push(e)}),n},uniqueIndex:function(t,n,r){var i={};return e.each(t,function(e,t){n&&(e=n.call(r,e)),null==e||rt.call(i,e)||(i[e]=t)}),i},ownKeys:Object.keys,own:function(e,t,n){var r=Object.keys(e);return r.map(t?function(r){return t.call(n,e[r],r)}:function(t){return e[t]})},make:function(e,t){var n=Object.create(e.prototype);return e.apply(n,t||ot)||n},isPropPrivate:function(e){return!!e&&"_"===e.charAt(0)},whiteList:function(e,t){var n=null;if(e)for(var r=t.length,i=-1;++i<r;){var s=t[i];s in e&&(null==n&&(n={}),n[s]=e[s])}return n}}),e.object={is:function(e){return!!e&&"object"==typeof e},isNative:function(e){return!!e&&e.constructor===Object},as:function(e){return e&&"object"==typeof e?e:null},asNative:function(e){return e&&e.constructor===Object?e:null},lazy:function(e,t,n,r){return e[t]||(e[t]=n?n.call(r,t):{})}},e.lazy=e.object.lazy,e.info=function(t,n){var r;if(t&&n){r=t.__info__;if(arguments.length<2)return r;r||e.setNonEnum(t,"__info__",r={}),e.copyOwn(r,n)}return t},e.info.get=function(t,n,r){return e.get(t&&t.__info__,n,r)},e.copyOwn(e,{bit:{set:function(e,t,n){return n||null==n?e|t:e&~t}}}),e.copyOwn(e,{compare:function(e,t){return e===t?0:e>t?1:-1},compareReverse:function(e,t){return e===t?0:e>t?-1:1},methodCaller:function(e,t){return t?function(){return t[e].apply(t,arguments)}:function(){return this[e].apply(this,arguments)}},identity:function(e){return e},add:function(e,t){return e+t},addPreservingNull:function(e,t){return null==e?t:null==t?e:e+t},negate:function(e){return function(){return!e.apply(this,arguments)}},sqr:function(e){return e*e},noop:function(){},retTrue:function(){return!0},retFalse:function(){return!1},fun:{is:function(e){return"function"==typeof e},as:function(e){return"function"==typeof e?e:null},to:function(t){return"function"==typeof t?t:e.fun.constant(t)},constant:function(e){return function(){return e}},wraps:function(t,n){return t.valueOf=e.fun.constant(n),t},typeFactory:function(t){function n(){return e.make(t,arguments)}return n.of=t,n}}}),e.ascending=e.compare,e.descending=e.compareReverse,e.number={is:function(e){return"number"==typeof e},as:function(e,t){return"number"==typeof e?e:t},to:function(e,t){if(null==e)return t;var n=+e;return isNaN(n)?t:n},toPositive:function(t,n){return t=e.number.to(t),null==t||t>0?t:n},toNonNegative:function(t,n){return t=e.number.to(t),null!=t&&0>t?n:t},toBetween:function(t,n,r,i){var s=e.number.to(t);return null==s?i:Math.max(n,Math.min(r,s))}},e.array={empty:function(e){return!e||!e.length},is:function(e){return e instanceof Array},isLike:function(e){return e&&null!=e.length&&"string"!=typeof e},as:function(e){return e instanceof Array?e:null!=e?[e]:null},to:function(e){return e instanceof Array?e:null!=e?[e]:null},lazy:function(e,t,n,r){return e[t]||(e[t]=n?n.call(r,t):[])},copy:function(e){return st.apply(e,st.call(arguments,1))},each:function(t,n,r){null!=t&&(e.array.is(t)?t.forEach(n,r):n.call(r,t,0))},eachReverse:function(t,n,r){if(null!=t)if(e.array.is(t)){for(var i=t.length;i--;)if(n.call(r,t[i],i)===!1)return!1}else if(n.call(r,t,0)===!1)return!1;return!0},like:e.copyOwn(function(e){return lt.is(e)?e:[e]},{is:function(e){return!!e&&null!=e.length&&"string"!=typeof e},as:function(e){return lt.is(e)?e:null}}),create:function(e,t){var n=e>=0?new Array(e):[];if(void 0!==t)for(var r=0;e>r;r++)n[r]=t;return n},append:function(e,t,n){null==n&&(n=0);for(var r=0,i=t.length,s=e.length;i>r;r++)e[s+r]=t[n+r];return e},appendMany:function(t){var n,r=arguments,i=r.length;if(i>1)for(var s=1;i>s;s++)if(n=e.array.to(r[s]))for(var o=0,u=n.length;u>o;)t.push(n[o++]);return t},prepend:function(e,t,n){null==n&&(n=0);for(var r=0,i=t.length;i>r;r++)e.unshift(t[n+r]);return e},removeAt:function(e,t){return e.splice(t,1)[0]},insertAt:function(e,t,n){return e.splice(t,0,n),e},removeIf:function(e,t,n){for(var r=0,i=e.length;i>r;)t.call(n,e[r],r)?(i--,e.splice(r,1)):r++;return e},binarySearch:function(t,n,r,i){r||(r=e.compare);for(var s=0,o=t.length-1;o>=s;){var u=s+o>>1,a=r(n,i?i(t[u]):t[u]);if(0>a)o=u-1;else{if(!(a>0))return u;s=u+1}}return~s},insert:function(t,n,r){var i=e.array.binarySearch(t,n,r);return 0>i?t.splice(~i,0,n):t[i]!==n&&t.splice(i+1,0,n),i},remove:function(t,n,r){var i=e.array.binarySearch(t,n,r);return i>=0?t.splice(i,1)[0]:void 0}};var lt=e.array.like;lt.to=lt,e.string={is:function(e){return"string"==typeof e},to:function(e,t){return null!=e?String(e):t||""},join:function(e){var t,n,r=arguments,i=r.length;switch(i){case 3:return t=r[1],n=r[2],null!=t&&""!==t?null!=n&&""!==n?""+t+e+(""+n):""+t:null!=n&&""!==n?""+n:"";case 2:return t=r[1],null!=t?""+t:"";case 1:case 0:return""}for(var s=[],o=1;i>o;o++)t=r[o],null!=t&&""!==t&&s.push(""+t);return s.join(e)},padRight:function(e,t,n){e||(e=""),null==n&&(n=" ");var r=~~((t-e.length)/n.length);return r>0?e+(new Array(r+1)).join(n):e}},e.copyOwn(e,{firstUpperCase:function(e){if(e){var t=e.charAt(0),n=t.toUpperCase();t!==n&&(e=n+e.substr(1))}return e},firstLowerCase:function(e){if(e){var t=e.charAt(0),n=t.toLowerCase();t!==n&&(e=n+e.substr(1))}return e},titleFromName:function(t){return e.firstUpperCase(t).replace(/([a-z\d])([A-Z])/g,"$1 $2")},format:function(t,n,r){if(null==t||""===t)return"";var i=n&&e.fun.is(n);return t.replace(/(^|[^{])\{([^{}]+)\}/g,function(e,t,s){var o=n?i?n.call(r,s):n[s]:null;return t+(null==o?"":String(o))})}}),e.copyOwn(e,{nullyTo:function(e,t){return null!=e?e:t}}),e.copyOwn(e,{between:function(e,t,n){return Math.max(t,Math.min(e,n))},nully:function(e){return null==e},notNully:function(e){return null!=e},notUndef:function(e){return void 0!==e},empty:function(e){return null==e||""===e},notEmpty:function(e){return null!=e&&""!==e},truthy:function(e){return!!e},falsy:function(e){return!e}}),e.copyOwn(e,{error:function(e){return e instanceof Error?e:new Error(e)},fail:function(t){throw e.error(t)},assert:function(t,n){throw e.error.assertionFailed(t,n)}}),e.eachOwn({operationInvalid:function(t,n){return e.error(e.string.join(" ","Invalid operation.",e.format(t,n)))},notImplemented:function(){return e.error("Not implemented.")},argumentRequired:function(t){return e.error(e.format("Required argument '{0}'.",[t]))},argumentInvalid:function(t,n,r){return e.error(e.string.join(" ",e.format("Invalid argument '{0}'.",[t]),e.format(n,r)))},assertionFailed:function(t,n){return e.error(e.string.join(" ","Assertion failed.",e.format(t,n)))}},function(t,n){e.error[n]=t,e.fail[n]=function(){throw t.apply(null,arguments)}}),e.debug=0,!function(){if("undefined"!=typeof window&&window.location){var t=function(e){return e&&/\bdebug=true\b/.test(e)?e:null},n=t(window.location.href);if(!n)try{n=t(window.top.location.href)}catch(r){}if(n){var i=/\bdebugLevel=(\d+)/.exec(n);e.debug=i?+i[1]:3}}}(),e.logSeparator="------------------------------------------",e.setDebug=function(t){t=+t,t=isNaN(t)?0:t,t>1&&"undefined"==typeof console&&(t=1);if(!e.log||e.debug!=t)e.debug=t,n(t);return e.debug};var ct=null;e.addOnDebugChanged=function(e){ct||(ct=[]).push(e)};var ht,pt=["info","debug","error","warn","group","groupEnd"],dt={group:"groupCollapsed"};e.logger=function(t,n,r){return e.debug>1?i(t,n):n?o(n,r,t):ht||(ht=u())},e.setDebug(e.debug),e.priv={key:l};var vt=function(t){return"_"+e.nullyTo(t,"safe")+(new Date).getTime()+Math.round(1e3*Math.random())},mt=e.priv.key();e.copyOwn(e,{scope:function(e,t){return e.call(t)},firstDefined:function(e,t,n){var r,i=0,s=e.length;t||(t=[]);for(;s>i;)if(void 0!==(r=e[i++].apply(n,t)))return r},indexedId:function(e,t){return t>0?e+""+(t+1):e},splitIndexedId:function(e){var t=/^(.*?)(\d*)$/.exec(e),n=null;return t[2]&&(n=Number(t[2]),1>=n?n=1:n--),[t[1],n]},parseDistinctIndexArray:function(t,n,r){t=e.array.as(t);if(null==t)return null;null==n&&(n=0),null==r&&(r=1/0);var i=e.query(t).select(function(e){return+e}).where(function(e){return!isNaN(e)&&e>=n&&r>=e}).distinct().array();return i.length?i:null},argumentsTypeBind:function(e,t){var n,r=e.length,i=new Array(r);if(r&&t&&(n=t.length)){var s=0,o=0;do{var u=t[s];if(null==u||typeof u===e[o])i[o]=u,s++;o++}while(r>o&&n>s)}return i},argumentsTypeBound:function(t,n){return function(){var r=e.argumentsTypeBind(t,arguments);return n.apply(this,r)}}}),e.qualName=function(e){return e instanceof p?e:new p(e)},e.QualifiedName=p,p.prototype.toString=function(){return e.string.join(".",this.namespace,this.name)},e.qualNameOf=function(t,n){return arguments.length>1?(t.__qname__=e.qualName(n),t):t.__qname__};var gt=e,yt={},bt=[];e.globalSpace=function(e,t){return yt[e]=t},e.space=function(t,n,r){e.fun.is(n)&&(r=n,n=null),e.string.is(n)&&(n=d(n));var i=d(t,n);if(r){bt.push(gt);try{r(i)}finally{gt=bt.pop()}}return i},e.describe=function(t,n){var r=e.get(n,"maxLevel")||5,i=[];return e.describeRecursive(i,t,r,n),i.join("")},e.describeRecursive=function(t,n,r,i){if(r>0){r--;switch(typeof n){case"undefined":return t.push("undefined");case"object":if(!n)return t.push("null"),!0;if(e.fun.is(n.describe))return n.describe(t,r,i);if(n instanceof Array)t.push("["),n.forEach(function(n,s){s&&t.push(", "),e.describeRecursive(t,n,r,i)||t.pop()}),t.push("]");else if(n instanceof Date)t.push(n.toISOString());else{var s=e.get(i,"ownOnly",!0);if(n===e.global)return t.push("<window>"),!0;if(e.fun.is(n.cloneNode))return t.push("<dom #"+(n.id||n.name||"?")+">"),!0;r>1&&n.constructor!==Object&&(r=1,s=!0),t.push("{");var o=!0;for(var u in n)if(!s||e.hasOwnProp.call(n,u))o||t.push(", "),t.push(u+": "),e.describeRecursive(t,n[u],r,i)?o&&(o=!1):(t.pop(),o||t.pop());if(o){var a=""+n;"[object Object]"!==a&&t.push("{"+a+"}")}t.push("}")}return!0;case"number":return t.push(""+Math.round(1e5*n)/1e5),!0;case"boolean":return t.push(""+n),!0;case"string":return t.push(JSON.stringify(n)),!0;case"function":return e.get(i,"funs",!1)?(t.push(JSON.stringify(n.toString().substr(0,13)+"...")),!0):!1}return t.push("'new ???'"),!0}},e.mixin=v(Object.create),e.copyOwn(e.mixin,{custom:v,inherit:e.mixin,copy:v(e.copy),share:v(e.identity)}),e.create=function(){var t=st.call(arguments),n=!0,r=t.shift();"boolean"==typeof r&&(n=r,r=t.shift());var i;return r?(i=Object.create(r),n&&b(i)):i={},t.length>0&&(t.unshift(i),e.mixin.apply(e,t)),i},e.attached=function(t,n,r){var i=t.__attached__;return arguments.length>2?(void 0!==r&&(i||e.setNonEnum(t,"__attached__",i={}),i[n]=r),t):i&&i[n]},e.attached.is=function(e){return!(!e||e.indexOf("$")<0)};var wt={tryConfigure:1,configure:1,$type:1};e.configure=e.config=w,e.configurable=function(t,n){return e.info(n,{configurable:!!t})},e.copyOwn(w,{generic:function(t,n){return n&&e.array.each(n,function(n){var r;n.constructor===Object?w.setters(t,n):t!==n&&(r=t.tryConfigure)&&e.fun.is(r)&&r.call(t,n)}),t},isPropConfigurable:function(e){return!!e&&"_"!==e.charAt(0)&&!rt.call(wt,e)},setters:function(t,n){return n&&w.expand1(n).forEach(function(n){e.each(n,function(e,n){w.setter(t,n,e)})}),t},setter:function(t,n,r){var i,s,o,u;return void 0!==r&&w.isPropConfigurable(n)&&e.fun.is(i=t[n])&&(s=i.valueOf())&&e.info.get(s,"configurable",(o=s.length)>=1)&&(e.attached.is(n)?e.attached(t,n,r):o?i.call(t,r):(u=i.call(t),(e.object.is(u)||e.fun.is(u))&&w(u,r))),t},expand1:function(e){return E(e,!0)},expand:E}),e.fun.inherit=T,e.overrides=N,e.fun.callsBase=C;var Et=/\.\s*base\b/;e.methods=O,e.method=M,e.abstractMethod=e.fail.notImplemented,e("MetaType",j);var St={Ctor:1,BaseType:1,prototype:1};e.copyOwn(j,{methods:I,add:e.configurable(!1,function(){return I.apply(this,arguments)}),inst:e.configurable(!1,function(){return this.Ctor}),subType:e.configurable(!1,function(t,n,r){var i=this,s=i.Ctor,o=s&&s.meta||e.fail.operationInvalid("MetaType is not yet instantiated.");return e.fun.inherit(t,i),e.copyx(t,i,{where:function(e,t){return rt.call(e,t)&&"_"!==t.charAt(0)&&!rt.call(St,t)}}),t.BaseType=i,new t(null,o,r),n&&e.configure(t,n),t}),extend:e.configurable(!1,function(t,n){function r(){return i.apply(this,arguments)}var i=this;return e.fun.wraps(r,i),i.subType(r,t,n)})}),j.add({closed:function(){return!!this.steps},close:function(){return this.steps||this._closeCore(this.steps=[]),this},_assertOpened:function(){if(this.closed())throw e.error.operationInvalid("MetaType is closed.")},_closeCore:function(e){this._addPostSteps(e),this._addInitSteps(e)},_createConstructor:function(){function e(){for(var e=t;e--;)r[e].apply(this,arguments)===!0&&(e=t)}var t=1,n=this,r=[function(){return r=n.close().steps,t=r.length,!0}];return e},_initConstructor:function(t){var n=this.constructor;return q.call(n,t,n),t.meta=this,this.baseType&&e.fun.inherit(t,this.baseType.close().Ctor),t.MetaType=n,t},_addPostSteps:function(t){e.array.eachReverse(this._mixins,function(e){e._post&&t.push(e._post)}),this._post&&t.push(this._post)},_addInitSteps:function(t){e.array.eachReverse(this._mixins,function(e){e._init&&t.push(e._init)}),this._init&&t.push(this._init)},init:function(t){if(!t)throw e.error.argumentRequired("init");return this._assertOpened(),this._init=e.overrides(t,this._init,this.rootType.Ctor.prototype),this},postInit:function(t){if(!t)throw e.error.argumentRequired("postInit");return this._assertOpened(),this._post=e.overrides(t,this._post,this.rootType.Ctor.prototype),this},type:e.configurable(!0,function(){return this.constructor}),add:e.configurable(!1,function(t,n){return F(t)&&this._mixMetaType(t.meta),e.methods(this.Ctor,t,n),this}),_mixMetaType:function(t){e.array.lazy(this,"_mixins").push(t)},methods:function(t){return e.array.each(t,this.add,this),this},method:e.configurable(!1,function(t,n,r){return e.method(this.Ctor,t,n,r),this}),configure:function(t){return e.configure.generic(this,t),this},extend:e.configurable(!1,function(e,t){var n=this.constructor.extend(null,t).Ctor;return n.configure(e)})});var xt=(new j).close().Ctor.add({override:function(t,n){return D(this,t,n,e.protoOf(this),xt.prototype,!0),this},toString:function(){return"[object "+String(e.qualNameOf(e.classOf(this)))+"]"}},{enumerable:!1});e("Object",xt),e.type=e.argumentsTypeBound(["string","function","object"],function(t,n,r){var i=n?n.MetaType:j,s=i.extend().Ctor;return e(t,s,r)}),e.makeEnum=function(t,n){var r=1,i=0,s={},o=e.get(n,"all"),u=e.get(n,"zero");return t.forEach(function(e){s[e]=r,o&&(i|=r),r<<=1}),u&&(s[u]=0),o&&(s[o]=i),s},e.copyOwn(e,{classify:function(t,n){return e.setNonEnum(t,"_class",n),t},classOf:function(e){return e&&(e._class||e.constructor)||void 0},is:function(e,t){return!!e&&(e._class&&e._class===t||e instanceof(t.of||t))},as:function(t,n,r){return e.is(t,n)?t:r},createIs:function(t){function n(n){return e.is(n,t)}return n},createAs:function(t){function n(n,r){return e.as(n,t,r)}return n},isSubClassOf:function(t,n){return!(!t||!n||t!==n&&!e.is(ft(t),n))}});var Tt=mt.property();e.copyOwn(e,{instance:function(t,n,r,i,s){var o=e.fields(t,r,s);return i&&e.instanceAccessors(t,o,i),t.createChild=U,n&&e.configure(t,n),o},fields:function(t,n,r){var i=e.classOf(t);n&&e.is(n,i)||(n=i.defaults),void 0===r&&(r=Tt);var s=n&&r&&r(n),o=s?Object.create(s):{};return o.___proto=n,r&&r.init(t,o),o},classAccessors:function(t,n,r){var i=ft(t);for(var s in n)i[s]=e.classAccessor(s,n[s],r);return e},classAccessor:function(e,t,n){function r(t){var r=n(this);return arguments.length?i.call(this,r,t):r[e]}var i=z(e,t);return n||(n=Tt),r},instanceAccessors:function(t,n,r){for(var i in r)t[i]=e.instanceAccessor(t,i,r[i],n);return e},instanceAccessor:function(e,t,n,r){function i(n){return arguments.length?s.call(e,r,n):r[t]}var s=z(t,n);return i}}),e.MetaType.subType(W,{methods:{fields:function(t){var n={};for(var r in t)n[r]=e.classAccessor(r,t[r],this.fieldsPrivProp);return this.methods(n)},_addInitSteps:function(t){function n(t){t&&e.configure(this,t)}function r(t,n){e.fields(this,n,i.fieldsPrivProp)}t.push(n),this.base(t);var i=this;t.push(r)}}}),e("FieldsBase",W.Ctor);var Nt=1,Ct={},kt="__def_id__";return e.nextId=function(t){if(t){var n=e.getOwn(Ct,t)||1;return Ct[t]=n+1,n}return Nt++},e.id=function(t){var n=e.getOwn(t,kt);return n||e.setConst(t,kt,n=e.nextId()),n},e.hashKey=function(t){var n=(typeof t).charAt(0);switch(n){case"n":case"b":case"s":return n+":"+t}return n+":"+(t?t:e.id(t))},e("Set",e.Object.extend({init:function(t,n){this.source=t||{},this.count=t?null!=n?n:e.ownKeys(t).length:0},methods:{has:function(e){return rt.call(this.source,e)},add:function(e){var t=this.source;return rt.call(t,e)||(this.count++,t[e]=!0),this},rem:function(e){return rt.call(this.source,e)&&(delete this.source[e],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},members:function(){return e.ownKeys(this.source)}}})),e("Map",e.Object.extend({init:function(t,n){this.source=t||{},this.count=t?null!=n?n:e.ownKeys(t).length:0},methods:{has:function(e){return rt.call(this.source,e)},get:function(e){return rt.call(this.source,e)?this.source[e]:void 0},set:function(e,t){var n=this.source;return rt.call(n,e)||this.count++,n[e]=t,this},rem:function(e){return rt.call(this.source,e)&&(delete this.source[e],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},copy:function(t){e.eachOwn(t.source,function(e,t){this.set(t,e)},this)},values:function(){return e.own(this.source)},keys:function(){return e.ownKeys(this.source)},clone:function(){return new e.Map(e.copy(this.source),this.count)},symmetricDifference:function(t){if(!this.count)return t.clone();if(!t.count)return this.clone();var n={},r=0,i=this.source,s=t.source;return e.eachOwn(i,function(e,t){rt.call(s,t)||(n[t]=e,r++)}),e.eachOwn(s,function(e,t){rt.call(i,t)||(n[t]=e,r++)}),new e.Map(n,r)},intersect:function(t,n){return n||(n=new e.Map),e.eachOwn(this.source,function(e,r){t.has(r)&&n.set(r,e)}),n}}})),e("OrderedMap",e.Object.extend({init:function(t){t instanceof e.OrderedMap?(this._list=t._list.slice(),this._map=e.copy(t._map)):(this._list=[],this._map={})},methods:{has:function(e){return rt.call(this._map,e)},count:function(){return this._list.length},get:function(e){var t=this._map;return rt.call(t,e)?t[e].value:void 0},at:function(e){var t=this._list[e];return t?t.value:void 0},add:function(t,n,r){var i=this._map,s=rt.call(i,t)&&i[t];return s?s.value!==n&&(s.value=n):(s=i[t]={key:t,value:n},null==r?this._list.push(s):e.array.insertAt(this._list,r,s)),this},rem:function(e){var t=this._map,n=rt.call(t,e)&&t[e];if(n){var r=this._list.indexOf(n);this._list.splice(r,1),delete this._map[e]}return this},clear:function(){return this._list.length&&(this._map={},this._list.length=0),this},keys:function(){return e.ownKeys(this._map)},forEach:function(e,t){return this._list.forEach(function(n){e.call(t,n.value,n.key)})}}})),e("EventSource",e.Object.extend({methods:{on:function(e,t){return Q(X,this,e,t,!0),this},before:function(e,t){return Q(X,this,e,t,!0),this},after:function(e,t){return Q(X,this,e,t,!1),this},off:function(e,t){return Q(V,this,e,t,null,!0),this},_acting:function(t,n){if(!t)throw e.error.argumentRequired("type");return J(this,t,n)}}})),e.html={escape:function(t){return e.string.to(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},tag:function(t,n){n=n?e.ownKeys(n).map(function(t){var r=n[t];return e.empty(r)?"":" "+t+'="'+String(r)+'"'}).join(""):"";var r=arguments.length>2?st.call(arguments,2).map(function(t){return null!=t&&(e.fun.is(t)&&(t=t()),t=e.array.is(t)?t.map(e.string.to).join(""):e.string.to(t)),t||""}).join(""):"";return"<"+t+n+">"+r+"</"+t+">"},classes:function(t){t=t?t+"-":"";var n=[];return st.call(arguments,1).forEach(function(r){e.empty(r)||n.push(t+e.css.escapeClass(r))}),n.join(" ")}},e.css={escapeClass:function(e){return(e||"").replace(/\s/g,"_")}},e.type("Query").add({index:-1,item:void 0,next:function(){var e=this,t=e.index;return-2===t?!1:(t++,e._next(t)?(e.index=t,!0):(e._finish(),!1))},_next:e.abstractMethod,_finish:function(){var t=this;t.index>-2&&(t.next=e.retFalse,t.index=-2,delete t.item)},each:function(e,t){for(var n=this;n.next();)if(e.call(t,n.item,n.index)===!1)return!0;return!1},array:function(e){for(var t=e||[],n=this;n.next();)t.push(n.item);return t},sort:function(t,n){t||(t=e.compare);if(n){var r=t;t=function(e,t){return r(n(e),n(t))}}var i=this.array().sort(t);return new e.ArrayLikeQuery(i)},object:function(t){for(var n=e.get(t,"target")||{},r=e.get(t,"name"),i=e.get(t,"value"),s=e.get(t,"context");this.next();){var o=""+(r?r.call(s,this.item,this.index):this.item);n[o]=i?i.call(s,this.item,this.index):this.item}return n},reduce:function(e){var t,n=0;if(arguments.length<2){if(!this.next())throw new TypeError("Length is 0 and no second argument");t=this.item}else t=arguments[1];for(;this.next();)t=e(t,this.item,this.index),++n;return t},count:function(){for(var e=0;this.next();)e++;return e},first:function(e,t,n){for(;this.next();)if(!e||e.call(t,this.item,this.index)){var r=this.item;return this._finish(),r}return n},last:function(e,t,n){for(var r=n;this.next();)(!e||e.call(t,this.item,this.index))&&(r=this.item);return r},any:function(e,t){for(;this.next();)if(!e||e.call(t,this.item,this.index))return this._finish(),!0;return!1},all:function(e,t){for(;this.next();)if(!e.call(t,this.item,this.index))return this._finish(),!1;return!0},min:function(){for(var e=null;this.next();)(null===e||this.item<e)&&(e=this.item);return e},max:function(){for(var e=null;this.next();)(null===e||this.item>e)&&(e=this.item);return e},range:function(){for(var e=null,t=null;this.next();){var n=this.item;null===e?e=t=n:(e>n&&(e=n),n>t&&(t=n))}return null!=e?{min:e,max:t}:null},multipleIndex:function(t,n){var r={};return this.each(function(i){var s=t?t.call(n,i):i;if(null!=s){var o=e.getOwn(r,s)||(r[s]=[]);o.push(i)}}),r},uniqueIndex:function(e,t){var n={};return this.each(function(r){var i=e?e.call(t,r):r;null==i||rt.call(n,i)||(n[i]=r)}),n},select:function(t,n){return new e.SelectQuery(this,t,n)},prop:function(t){return new e.SelectQuery(this,function(e){return e?e[t]:void 0})},selectMany:function(t,n){return new e.SelectManyQuery(this,t,n)},union:function(){var t=e.array.append([this],arguments);return new e.SelectManyQuery(new e.ArrayLikeQuery(t))},where:function(t,n){return t?new e.WhereQuery(this,t,n):this},distinct:function(t,n){return t?new e.DistinctQuery(this,t,n):this},skip:function(t){return new e.SkipQuery(this,t)},take:function(t){return 0>=t?new e.NullQuery:isFinite(t)?new e.TakeQuery(this,t):this},whayl:function(t,n){return new e.WhileQuery(this,t,n)},reverse:function(){return new e.ReverseQuery(this)}}),e.type("NullQuery",e.Query).add({next:e.retFalse}),e.type("AdhocQuery",e.Query).init(function(e){this._next=e}),e.type("ArrayLikeQuery",e.Query).init(function(t){function n(){for(;++i<s;)if(rt.call(t,i))return r.index=i,r.item=t[i],!0;return r._finish(),!1}var r=this;e.array.isLike(t)||(t=[t]),r._list=t,r._count=t.length;var i=-1,s=t.length;r.next=n}).add({count:function(){var e=this._count;return this.index>=0&&(e-=this.index+1),this._finish(),e}}),e.type("RangeQuery",e.Query).init(function(e,t,n){this._index=e,this._count=t,this._step=null==n?1:n}).add({_next:function(e){if(e<this._count)return this.item=this._index,this._index+=this._step,!0},count:function(){var e=this._count;return this.index>=0&&(e-=this.index+1),this._finish(),e}}),e.type("WhereQuery",e.Query).init(function(e,t,n){function r(){for(;e.next();){var r=e.item;if(t.call(n,r,e.index))return i.item=r,i.index=++s,!0}return i._finish(),!1}var i=this,s=-1;i.next=r}),e.type("WhileQuery",e.Query).init(function(e,t,n){function r(){if(e.next()){var r=e.item;if(t.call(n,r,e.index))return i.item=r,i.index=++s,!0}return i._finish(),!1}var i=this,s=-1;i.next=r}),e.type("SelectQuery",e.Query).init(function(e,t,n){function r(){return e.next()?(i.item=t.call(n,e.item,e.index),i.index=++s,!0):(i._finish(),!1)}var i=this,s=-1;i.next=r}),e.type("SelectManyQuery",e.Query).init(function(e,t,n){this._selectMany=t,this._ctx=n,this._source=e,this._manySource=null}).add({_next:function(){for(;;){if(this._manySource){if(this._manySource.next())return this.item=this._manySource.item,!0;this._manySource=null}if(!Z.call(this))break}}}),e.type("DistinctQuery",e.Query).init(function(e,t,n){function r(){for(;e.next();){var r=e.item,u=t?t.call(n,r,e.index):r;if(null!=u&&!rt.call(o,u))return i.item=r,i.index=++s,o[u]=!0}return i._finish(),!1}var i=this,s=-1,o={};i.next=r}),e.type("SkipQuery",e.Query).init(function(e,t){this._source=e,this._skip=t}).add({_next:function(){for(;this._source.next();){if(!(this._skip>0))return this.item=this._source.item,!0;this._skip--}}}),e.type("TakeQuery",e.Query).init(function(e,t){this._source=e,this._take=t}).add({_next:function(){if(this._take>0&&this._source.next())return this._take--,this.item=this._source.item,!0}}),e.type("ReverseQuery",e.Query).init(function(e){this._source=e}).add({_next:function(t){t||(this._source instanceof e.Query&&(this._source=this._source instanceof e.ArrayLikeQuery?this._source._list:this._source.array()),this._count=this._source.length);var n=this._count;if(n>t){for(var r=n-t-1,i=this._source;!rt.call(i,r);){if(--r<0)return!1;this._count--}return this.item=i[r],!0}}}),e.query=function(t){return void 0===t?new e.NullQuery:t instanceof e.Query?t:e.fun.is(t)?new e.AdhocQuery(t):new e.ArrayLikeQuery(t)},e.range=function(t,n,r){return new e.RangeQuery(t,n,r)},e.textTable=function(t){function n(){return s.map(function(e){switch(e){case a:return r(e,"","","","");case f:return i||(i=r(e,"","","",""));case l:return r(e,"","","","")}return r(e,""," ","","")}).join("\n")}function r(t,n,r,i,s){return i+t.map(function(t,n){return e.string.padRight(t||"",u[n],r)}).join(n)+s}var i,s=[],o=" ",u=new Array(t),a=e.array.create(t,""),f=a.slice(),l=a.slice();return n.row=function(){for(var e,r,i=arguments,a=-1,f=new Array(t);++a<t;)e=i[a],r=f[a]=o+(void 0===e?"":String(e))+o,u[a]=Math.max(u[a]||0,r.length);return s.push(f),n},n.rowSep=function(e){return s.push(s.length?e?l:f:a),n},n},e.round10=function(e,t){return t?(e=+e,isNaN(e)||"number"!=typeof t||t%1!==0?0/0:(e=Math.round(et(e,t)),et(e,-t))):Math.round(e)},e.mult10=function(e,t){return t?et(+e,t):e},e.delta=function(e,t){if(e===t)return 0;var n=e-t;return 0>n?-n:n},gt=e.global,e}),define("cdf/lib/CCC/protovis-compat",["require"],function(e){var t="./protovis",n="./protovis-msie",r={load:function(r,i,s,o){if(o.isBuild)i([t],s);else{var u=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,a=function(e,t,n){return t=e.createElement("div"),t.innerHTML='<pvml:shape adj="1" />',n=t.firstChild,n?(n.style.behavior="url(#default#VML)","object"==typeof n.adj):!1}(document);!u&&a?e([n],s):e([t],s)}}};return r}),define("cdf/lib/CCC/protovis",[],function(){function e(e){return e/=255,.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4)}Array.prototype.map||(Array.prototype.map=function(e,t){for(var n=this.length,r=new Array(n),i=0;n>i;i++)i in this&&(r[i]=e.call(t,this[i],i,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n=this.length,r=new Array,i=0;n>i;i++)if(i in this){var s=this[i];e.call(t,s,i,this)&&r.push(s)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(e,t){var n=this.length;if(!n&&1==arguments.length)throw new Error("reduce: empty array, no initial value");var r=0;if(arguments.length<2)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new Error("reduce: no values, no initial value")}for(;n>r;r++)r in this&&(t=e(t,this[r],r,this));return t}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=this.length>>>0,r=!isFinite(t)||0>t?0:t>this.length?this.length:t;n>r;r++)if(this[r]===e)return r;return-1}),Date.now||(Date.now=function(){return+(new Date)}),Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t});var t={};return t.version={major:3,minor:3},t.identity=function(e){return e},t.index=function(){return this.index},t.child=function(){return this.childIndex},t.parent=function(){return this.parent.index},!function(){t.extend=function(e){return Object.create(e.prototype||e)},t.extendType=function(e,n){var r=e.prototype=t.extend(n);return r.constructor=e,e},t.parse=function(e){for(var n,r,i=new RegExp("function\\s*(\\b\\w+)?\\s*\\([^)]*\\)\\s*","mg"),s=0,o="";n=i.exec(e);){var u=n.index+n[0].length;if("{"!=e.charAt(u)){o+=e.substring(s,u)+"{return ",s=u;for(var a=0;a>=0&&u<e.length;u++){var f=e.charAt(u);switch(f){case'"':case"'":for(;++u<e.length&&(r=e.charAt(u))!=f;)"\\"==r&&u++;break;case"[":case"(":a++;break;case"]":case")":a--;break;case";":case",":0==a&&a--}}o+=t.parse(e.substring(s,--u))+";}",s=u}i.lastIndex=u}return o+=e.substring(s),o},t.error=function(e){"undefined"!=typeof console&&console.error?console.error(e):alert(e)},t.listen=function(e,n,r){return r=t.listener(r),"load"===n||"onload"===n?t.listenForPageLoad(r):(e.addEventListener?e.addEventListener(n,r,!1):(e===window&&(e=document.documentElement),e.attachEvent("on"+n,r)),r)},t.unlisten=function(e,t,n){n.$listener&&(n=n.$listener),e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.listenForPageLoad=function(e){"complete"!==document.readyState?document.addEventListener?window.addEventListener("load",e,!1):document.attachEvent&&window.attachEvent("onload",e):e(null)},t.listener=function(e){return e.$listener||(e.$listener=function(n){try{return t.event=n=n&&t.fixEvent(n),e.call(this,n)}catch(r){t.error(r)}finally{delete t.event}})},t.fixEvent=function(e){if(null==e.pageX&&null!=e.clientX){var t=e.target&&e.target.ownerDocument||document,n=t.documentElement,r=t.body;e.pageX=1*e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=1*e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)}return e},t.ancestor=function(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},t.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},t.getWindow=function(e){return null!=e&&e==e.window?e:9===e.nodeType?e.defaultView||e.parentWindow:!1};var e=/\-([a-z])/g;t.hiphen2camel=function(t){return e.test(t)?t.replace(e,function(e,t){return t.toUpperCase()}):t};var n=window.getComputedStyle;t.css=function(e,r){return n?n.call(window,e,null).getPropertyValue(r):e.currentStyle["float"===r?"styleFloat":t.hiphen2camel(r)]},t.cssStyle=function(e){var r;return n?(r=n.call(window,e,null),function(e){return r.getPropertyValue(e)}):(r=e.currentStyle,function(e){return r["float"===e?"styleFloat":t.hiphen2camel(e)]})},t._getElementsByClass=function(e,t){null==t&&(t=document);for(var n=[],r=t.getElementsByTagName("*"),i=r.length,s=new RegExp("(^|\\s)"+e+"(\\s|$)"),o=0,u=0;i>o;o++)s.test(r[o].className)&&(n[u]=r[o],u++);return n},t.getElementsByClassName=function(e,n){return e.getElementsByClassName?e.getElementsByClassName(n):t._getElementsByClass(n,e)},t.elementOffset=function(e){var n=e&&e.ownerDocument;if(n){var r=n.body;if(r!==e){var i;i="undefined"!=typeof e.getBoundingClientRect?e.getBoundingClientRect():{top:0,left:0};var s=t.getWindow(n),o=n.documentElement,u=o.clientTop||r.clientTop||0,a=o.clientLeft||r.clientLeft||0,f=s.pageYOffset||o.scrollTop,l=s.pageXOffset||o.scrollLeft;return{top:i.top+f-u-(e.scrollTop||0),left:i.left+l-a-(e.scrollLeft||0)}}}},t.renderer=function(){var e=document.svgImplementation||"nativesvg";return t.renderer=function(){return e},e};var r=1;t.id=function(){return r++},t.functor=function(e){return"function"==typeof e?e:function(){return e}},t.stringLowerCase=function(e){return String(e).toLowerCase()},t.get=function(e,t,n){var r;return e&&null!=(r=e[t])?r:n};var i=Object.prototype.hasOwnProperty;t.lazyArrayOwn=function(e,t){var n;return e&&i.call(e,t)&&(n=e[t])?n:e[t]=[]},t.parseNumNonNeg=function(e,t){return null!=e&&("string"==typeof e?e=+e:"number"!=typeof e&&(e=null)),null==e||isNaN(e)||0>e?null==t?0:t:e};var s=t.epsilon=1e-6;t.floatLess=function(e,n){return!t.floatEqual(e,n)&&n>e},t.floatLessOrEqual=function(e,n){return n>e||t.floatEqual(e,n)},t.floatGreater=function(e,n){return!t.floatEqual(e,n)&&e>n},t.floatEqual=function(e,t){return Math.abs(t-e)<s},t.floatZero=function(e){return Math.abs(e)<s},t.floatBelongsOpen=function(e,n,r){return t.floatLess(e,n)&&t.floatLess(n,r)},t.floatBelongsClosed=function(e,n,r){return t.floatLessOrEqual(e,n)&&t.floatLessOrEqual(n,r)}}(),t.listen(window,"load",function(){t.$={i:0,x:document.getElementsByTagName("script")},t.$.xlen=t.$.x.length;for(;t.$.i<t.$.xlen;t.$.i++){t.$.s=t.$.x[t.$.i];if("text/javascript+protovis"==t.$.s.type)try{window.eval(t.parse(t.$.s.text))}catch(e){t.error(e)}}delete t.$}),t.Format={},t.Format.re=function(e){return e.replace(/[\\\^\$\*\+\?\[\]\(\)\.\{\}]/g,"\\$&")},t.Format.pad=function(e,t,n){var r=t-String(n).length;return 1>r?n:(new Array(r+1)).join(e)+n},t.Format.date=function(e){function n(t){return e.replace(/%[a-zA-Z0-9]/g,function(e){switch(e){case"%a":return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()];case"%A":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()];case"%h":case"%b":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];case"%B":return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()];case"%c":return t.toLocaleString();case"%C":return r("0",2,Math.floor(t.getFullYear()/100)%100);case"%d":return r("0",2,t.getDate());case"%x":case"%D":return r("0",2,t.getMonth()+1)+"/"+r("0",2,t.getDate())+"/"+r("0",2,t.getFullYear()%100);case"%e":return r(" ",2,t.getDate());case"%H":return r("0",2,t.getHours());case"%I":var n=t.getHours()%12;return n?r("0",2,n):12;case"%m":return r("0",2,t.getMonth()+1);case"%M":return r("0",2,t.getMinutes());case"%n":return"\n";case"%p":return t.getHours()<12?"AM":"PM";case"%T":case"%X":case"%r":var n=t.getHours()%12;return(n?r("0",2,n):12)+":"+r("0",2,t.getMinutes())+":"+r("0",2,t.getSeconds())+" "+(t.getHours()<12?"AM":"PM");case"%R":return r("0",2,t.getHours())+":"+r("0",2,t.getMinutes());case"%S":return r("0",2,t.getSeconds());case"%Q":return r("0",3,t.getMilliseconds());case"%t":return"	";case"%u":var i=t.getDay();return i?i:1;case"%w":return t.getDay();case"%y":return r("0",2,t.getFullYear()%100);case"%Y":return t.getFullYear();case"%%":return"%"}return e})}var r=t.Format.pad;return n.format=n,n.parse=function(n){var r=1970,i=0,s=1,o=0,u=0,a=0,f=[function(){}],l=t.Format.re(e).replace(/%[a-zA-Z0-9]/g,function(e){switch(e){case"%b":return f.push(function(e){i={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[e]}),"([A-Za-z]+)";case"%h":case"%B":return f.push(function(e){i={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11}[e]}),"([A-Za-z]+)";case"%e":case"%d":return f.push(function(e){s=e}),"([0-9]+)";case"%I":case"%H":return f.push(function(e){o=e}),"([0-9]+)";case"%m":return f.push(function(e){i=e-1}),"([0-9]+)";case"%M":return f.push(function(e){u=e}),"([0-9]+)";case"%p":return f.push(function(e){12==o?"am"==e&&(o=0):"pm"==e&&(o=Number(o)+12)}),"(am|pm)";case"%S":return f.push(function(e){a=e}),"([0-9]+)";case"%y":return f.push(function(e){e=Number(e),r=e+(e>=0&&69>e?2e3:e>=69&&100>e?1900:0)}),"([0-9]+)";case"%Y":return f.push(function(e){r=e}),"([0-9]+)";case"%%":return f.push(function(){}),"%"}return e}),c=n.match(l);return c&&c.forEach(function(e,t){f[t](e)}),new Date(r,i,s,o,u,a)},n},t.Format.time=function(e){function n(t){t=Number(t);switch(e){case"short":return t>=31536e6?(t/31536e6).toFixed(1)+" years":t>=6048e5?(t/6048e5).toFixed(1)+" weeks":t>=864e5?(t/864e5).toFixed(1)+" days":t>=36e5?(t/36e5).toFixed(1)+" hours":t>=6e4?(t/6e4).toFixed(1)+" minutes":(t/1e3).toFixed(1)+" seconds";case"long":var n=[],i=t%6e4/1e3>>0,s=t%36e5/6e4>>0;n.push(r("0",2,i));if(t>=36e5){var o=t%864e5/36e5>>0;n.push(r("0",2,s)),t>=864e5?(n.push(r("0",2,o)),n.push(Math.floor(t/864e5).toFixed())):n.push(o.toFixed())}else n.push(s.toFixed());return n.reverse().join(":")}}var r=t.Format.pad;return n.format=n,n.parse=function(t){switch(e){case"short":for(var n,r=/([0-9,.]+)\s*([a-z]+)/g,i=0;n=r.exec(t);){var s=parseFloat(n[0].replace(",","")),o=0;switch(n[2].toLowerCase()){case"year":case"years":o=31536e6;break;case"week":case"weeks":o=6048e5;break;case"day":case"days":o=864e5;break;case"hour":case"hours":o=36e5;break;case"minute":case"minutes":o=6e4;break;case"second":case"seconds":o=1e3}i+=s*o}return i;case"long":var n=t.replace(",","").split(":").reverse(),i=0;return n.length&&(i+=1e3*parseFloat(n[0])),n.length>1&&(i+=6e4*parseFloat(n[1])),n.length>2&&(i+=36e5*parseFloat(n[2])),n.length>3&&(i+=864e5*parseFloat(n[3])),i}},n},t.Format.number=function(){function e(e){1/0>o&&(e=Math.round(e*u)/u);var t=String(Math.abs(e)).split("."),v=t[0];v.length>r&&(v=v.substring(v.length-r)),l&&v.length<n&&(v=(new Array(n-v.length+1)).join(a)+v),v.length>3&&(v=v.replace(/\B(?=(?:\d{3})+(?!\d))/g,h)),!l&&v.length<i&&(v=(new Array(i-v.length+1)).join(a)+v),t[0]=0>e?p+v+d:v;var m=t[1]||"";return m.length>o&&(m=t[1]=m.substr(0,o)),m.length<s&&(t[1]=m+(new Array(s-m.length+1)).join(f)),t.join(c)}var n=0,r=1/0,i=0,s=0,o=0,u=1,a="0",f="0",l=!0,c=".",h=",",p="",d="";return e.format=e,e.parse=function(e){var n=t.Format.re,i=String(e).split(c);1==i.length&&(i[1]=""),i[0].replace(new RegExp("^("+n(a)+")*"),""),i[1].replace(new RegExp("("+n(f)+")*$"),"");var s=i[0].replace(new RegExp(n(h),"g"),"");s.length>r&&(s=s.substring(s.length-r));var l=i[1]?Number("0."+i[1]):0;return 1/0>o&&(l=Math.round(l*u)/u),Math.round(s)+l},e.integerDigits=function(e,t){return arguments.length?(n=Number(e),r=arguments.length>1?Number(t):n,i=n+Math.floor(n/3)*h.length,this):[n,r]},e.fractionDigits=function(e,t){return arguments.length?(s=Number(e),o=arguments.length>1?Number(t):s,u=Math.pow(10,o),this):[s,o]},e.integerPad=function(e){return arguments.length?(a=String(e),l=/\d/.test(a),this):a},e.fractionPad=function(e){return arguments.length?(f=String(e),this):f},e.decimal=function(e){return arguments.length?(c=String(e),this):c},e.group=function(e){return arguments.length?(h=e?String(e):"",i=n+Math.floor(n/3)*h.length,this):h},e.negativeAffix=function(e,t){return arguments.length?(p=String(e||""),d=String(t||""),this):[p,d]},e},!function(){var e;t.Text={},t.Text.createCache=function(){return new n},t.Text.usingCache=function(t,r,i){if(!(t instanceof n))throw new Error("Not a valid cache.");var s=e;e=t;try{return r.call(i)}finally{e=s}},t.Text.measure=function(t,n){t=null==t?"":String(t);var r=e&&e.get(n,t);return r||(r=t?this.measureCore(t,n):{width:0,height:0},e&&e.put(n,t,r)),r},t.Text.measureWidth=function(e,n){return t.Text.measure(e,n).width},t.Text.fontHeight=function(e){return t.Text.measure("M",e).height},t.Text.measureCore=function(){function e(){return r||(r=n())}function n(){var e=document.createElement("div");e.id="pvSVGText_"+(new Date).getTime();var n=e.style;n.position="absolute",n.visibility="hidden",n.width=0,n.height=0,n.left=0,n.top=0,n.lineHeight=1,n.textTransform="none",n.letterSpacing="normal",n.whiteSpace="nowrap";var r=t.SvgScene.create("svg");r.setAttribute("font-size","10px"),r.setAttribute("font-family","sans-serif"),e.appendChild(r);var i=t.SvgScene.create("text");return r.appendChild(i),i.appendChild(document.createTextNode("")),document.body.appendChild(e),i}var r,i="10px sans-serif";return function(n,r){r||(r=null);var s=e();i!==r&&(i=r,t.SvgScene.setStyle(s,{font:r})),s.firstChild.nodeValue=String(n);var o;try{o=s.getBBox()}catch(u){throw"function"==typeof console.error&&console.error("GetBBox failed: ",u),u}return{width:o.width,height:o.height}}}();var n=function(){this._fontsCache={}},r=Object.prototype.hasOwnProperty;n.prototype._getFont=function(e){return e=e||"",r.call(this._fontsCache,e)?this._fontsCache[e]:this._fontsCache[e]={}},n.prototype.get=function(e,t){t=t||"";var n=this._getFont(e);return r.call(n,t)?n[t]:null},n.prototype.put=function(e,t,n){return this._getFont(e)[t||""]=n}}(),t.map=function(e,t){var n={};return t?e.map(function(e,r){return n.index=r,t.call(n,e)}):e.slice()},t.repeat=function(e,n){return 1==arguments.length&&(n=2),t.blend(t.range(n).map(function(){return e}))},t.array=function(e,t){var n=e>=0?new Array(e):[];if(void 0!==t)for(var r=0;e>r;r++)n[r]=t;return n},t.cross=function(e,t){for(var n=[],r=0,i=e.length,s=t.length;i>r;r++)for(var o=0,u=e[r];s>o;o++)n.push([u,t[o]]);return n},t.blend=function(e){return Array.prototype.concat.apply([],e)},t.transpose=function(e){var n=e.length,r=t.max(e,function(e){return e.length});if(r>n){e.length=r;for(var i=n;r>i;i++)e[i]=new Array(n);for(var i=0;n>i;i++)for(var s=i+1;r>s;s++){var o=e[i][s];e[i][s]=e[s][i],e[s][i]=o}}else{for(var i=0;r>i;i++)e[i].length=n;for(var i=0;n>i;i++)for(var s=0;i>s;s++){var o=e[i][s];e[i][s]=e[s][i],e[s][i]=o}}e.length=r;for(var i=0;r>i;i++)e[i].length=n;return e},t.normalize=function(e,n){for(var r=t.map(e,n),i=t.sum(r),s=0;s<r.length;s++)r[s]/=i;return r},t.permute=function(e,n,r){r||(r=t.identity);var i=new Array(n.length),s={};return n.forEach(function(t,n){s.index=t,i[n]=r.call(s,e[t])}),i},t.numerate=function(e,n){n||(n=t.identity);var r={},i={};return e.forEach(function(e,t){i.index=t,r[n.call(i,e)]=t}),r},t.uniq=function(e,n){n||(n=t.identity);var r,i={},s=[],o={};return e.forEach(function(e,t){o.index=t,r=n.call(o,e),r in i||(i[r]=s.push(r))}),s},t.naturalOrder=function(e,t){return t>e?-1:e>t?1:0},t.reverseOrder=function(e,t){return e>t?-1:t>e?1:0},t.search=function(e,n,r){r||(r=t.identity);for(var i=0,s=e.length-1;s>=i;){var o=i+s>>1,u=r(e[o]);if(n>u)i=o+1;else{if(!(u>n))return o;s=o-1}}return-i-1},t.search.index=function(e,n,r){var i=t.search(e,n,r);return 0>i?-i-1:i},t.range=function(e,t,n){1==arguments.length&&(t=e,e=0),void 0==n&&(n=1);if((t-e)/n==1/0)throw new Error("range must be finite");var r,i=[],s=0;t-=1e-10*(t-e);if(0>n)for(;(r=e+n*s++)>t;)i.push(r);else for(;(r=e+n*s++)<t;)i.push(r);return i},t.random=function(e,t,n){return 1==arguments.length&&(t=e,e=0),void 0==n&&(n=1),n?Math.floor(Math.random()*(t-e)/n)*n+e:Math.random()*(t-e)+e},t.sum=function(e,t){var n={};return e.reduce(t?function(e,r,i){return n.index=i,e+t.call(n,r)}:function(e,t){return e+t},0)},t.max=function(e,n){return n==t.index?e.length-1:Math.max.apply(null,n?t.map(e,n):e)},t.max.index=function(e,n){if(!e.length)return-1;if(n==t.index)return e.length-1;n||(n=t.identity);for(var r=0,i=-1/0,s={},o=0;o<e.length;o++){s.index=o;var u=n.call(s,e[o]);u>i&&(i=u,r=o)}return r},t.min=function(e,n){return n==t.index?0:Math.min.apply(null,n?t.map(e,n):e)},t.min.index=function(e,n){if(!e.length)return-1;if(n==t.index)return 0;n||(n=t.identity);for(var r=0,i=1/0,s={},o=0;o<e.length;o++){s.index=o;var u=n.call(s,e[o]);i>u&&(i=u,r=o)}return r},t.mean=function(e,n){return t.sum(e,n)/e.length},t.median=function(e,n){if(n==t.index)return(e.length-1)/2;e=t.map(e,n).sort(t.naturalOrder);if(e.length%2)return e[Math.floor(e.length/2)];var r=e.length/2;return(e[r-1]+e[r])/2},t.variance=function(e,n){if(e.length<1)return 0/0;if(1==e.length)return 0;var r=t.mean(e,n),i=0,s={};n||(n=t.identity);for(var o=0;o<e.length;o++){s.index=o;var u=n.call(s,e[o])-r;i+=u*u}return i},t.deviation=function(e,n){return Math.sqrt(t.variance(e,n)/(e.length-1))},t.log=function(e,t){return Math.log(e)/Math.log(t)},t.logSymmetric=function(e,n){return 0==e?0:0>e?-t.log(-e,n):t.log(e,n)},t.logAdjusted=function(e,n){if(!isFinite(e))return e;var r=0>e;return n>e&&(e+=(n-e)/n),r?-t.log(e,n):t.log(e,n)},t.logFloor=function(e,n){return e>0?Math.pow(n,Math.floor(t.log(e,n))):-Math.pow(n,-Math.floor(-t.log(-e,n)))},t.logCeil=function(e,n){return e>0?Math.pow(n,Math.ceil(t.log(e,n))):-Math.pow(n,-Math.ceil(-t.log(-e,n)))},!function(){var e=Math.PI/180,n=180/Math.PI;t.radians=function(t){return e*t},t.degrees=function(e){return n*e}}(),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t},t.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},t.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},t.dict=function(e,t){for(var n={},r={},i=0;i<e.length;i++)if(i in e){var s=e[i];r.index=i,n[s]=t.call(r,s)}return n},t.hasOwnProp=Object.prototype.hasOwnProperty,t.copyOwn=function(e,n){if(n){var r=t.hasOwnProp;for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e},t.dom=function(e){return new t.Dom(e)},t.Dom=function(e){this.$map=e},t.Dom.prototype.$leaf=function(e){return"object"!=typeof e},t.Dom.prototype.leaf=function(e){return arguments.length?(this.$leaf=e,this):this.$leaf},t.Dom.prototype.root=function(e){function n(e){var i=new t.Dom.Node;for(var s in e){var o=e[s];i.appendChild(r(o)?new t.Dom.Node(o):n(o)).nodeName=s}return i}var r=this.$leaf,i=n(this.$map);return i.nodeName=e,i},t.Dom.prototype.nodes=function(){return this.root().nodes()},t.Dom.Node=function(e){void 0!==e&&(this.nodeValue=e)},t.Dom.Node.prototype.nodeValue=void 0,t.Dom.Node.prototype.childNodes=[],t.Dom.Node.prototype.parentNode=null,t.Dom.Node.prototype.firstChild=null,t.Dom.Node.prototype.lastChild=null,t.Dom.Node.prototype.previousSibling=null,t.Dom.Node.prototype.nextSibling=null,t.Dom.Node.prototype._firstDirtyChildIndex=1/0,t.Dom.Node.prototype._childIndex=-1,t.Dom.Node.prototype.findChildIndex=function(e){if(!e)throw new Error("Argument 'n' required");if(e.parentNode===this){var t=e.childIndex(!0);if(t>-1)return t}throw new Error("child not found")},t.Dom.Node.prototype._childRemoved=function(){},t.Dom.Node.prototype._childAdded=function(){},t.Dom.Node.prototype.removeChild=function(e){var t=this.findChildIndex(e);return this.removeAt(t)},t.Dom.Node.prototype.appendChild=function(e){var n=e.parentNode;n&&n.removeChild(e);var r=this.lastChild;e.parentNode=this,e.previousSibling=r,r?(r.nextSibling=e,e._childIndex=r._childIndex+1):(this.firstChild=e,e._childIndex=0),this.lastChild=e;var i=t.lazyArrayOwn(this,"childNodes").push(e);return this._childAdded(e,i-1),e},t.Dom.Node.prototype.insertBefore=function(e,t){if(!t)return this.appendChild(e);var n=this.findChildIndex(t);return this.insertAt(e,n)},t.Dom.Node.prototype.insertAt=function(e,t){if(null==t)return this.appendChild(e);var n=this.childNodes,r=n.length;if(t===r)return this.appendChild(e);if(0>t||t>r)throw new Error("Index out of range.");var i=e.parentNode;i&&i.removeChild(e);var s=t+1;s<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=s);var o=n[t];e.parentNode=this,e.nextSibling=o,e._childIndex=t;var u=e.previousSibling=o.previousSibling;return o.previousSibling=e,u?u.nextSibling=e:(o===this.lastChild&&(this.lastChild=e),this.firstChild=e),n.splice(t,0,e),this._childAdded(e,t),e},t.Dom.Node.prototype.removeAt=function(e){var t=this.childNodes,n=t.length;if(!(0>e||e>=n)){var r=t[e];t.splice(e,1),n-1>e&&e<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=e);var i=r.previousSibling,s=r.nextSibling;return i?i.nextSibling=s:this.firstChild=s,s?s.previousSibling=i:this.lastChild=i,r.nextSibling=r.previousSibling=r.parentNode=null,this._childRemoved(r,e),r}},t.Dom.Node.prototype.replaceChild=function(e,t){var n=this.findChildIndex(t),r=e.parentNode;r&&r.removeChild(e),e.parentNode=this,e.nextSibling=t.nextSibling,e._childIndex=t._childIndex;var i=e.previousSibling=t.previousSibling;i?i.nextSibling=e:this.firstChild=e;var s=t.nextSibling;return s?s.previousSibling=e:this.lastChild=e,this.childNodes[n]=e,this._childRemoved(t,n),this._childAdded(e,n),t},t.Dom.Node.prototype.childIndex=function(e){var t=this.parentNode;if(t){var n=t._firstDirtyChildIndex;if(1/0>n){var r=t.childNodes;if(!e)return r.indexOf(this);for(var i=r.length;i>n;)r[n]._childIndex=n,n++;t._firstDirtyChildIndex=1/0}return this._childIndex}return-1},t.Dom.Node.prototype.visitBefore=function(e){function t(n,r){e(n,r);for(var i=n.firstChild;i;i=i.nextSibling)t(i,r+1)}t(this,0)},t.Dom.Node.prototype.visitAfter=function(e){function t(n,r){for(var i=n.firstChild;i;i=i.nextSibling)t(i,r+1);e(n,r)}t(this,0)},t.Dom.Node.prototype.sort=function(e){if(this.firstChild){this._firstDirtyChildIndex=1/0;var t=this.childNodes;t.sort(e);var n,r=this.firstChild=t[0];delete r.previousSibling,r._childIndex=0;for(var i=1,s=t.length;s>i;i++)r.sort(e),n=t[i],n._childIndex=i,n.previousSibling=r,r=r.nextSibling=n;this.lastChild=r,delete r.nextSibling,r.sort(e)}return this},t.Dom.Node.prototype.reverse=function(){var e=[];return this.visitAfter(function(t){this._firstDirtyChildIndex=1/0;for(var n;n=t.lastChild;)e.push(t.removeChild(n));if(e.length)for(;n=e.pop();)t.insertBefore(n,t.firstChild)}),this},t.Dom.Node.prototype.nodes=function(){var e=[];return this.visitBefore(function(t){e.push(t)}),e},t.Dom.Node.prototype.toggle=function(e){if(e)return this.toggled?this.visitBefore(function(e){e.toggled&&e.toggle()}):this.visitAfter(function(e){e.toggled||e.toggle()});var t,n=this;if(n.toggled){for(;t=n.toggled.pop();)n.appendChild(t);delete n.toggled}else if(t=n.lastChild){n.toggled=[];do n.toggled.push(n.removeChild(t));while(t=n.lastChild)}},t.nodes=function(e){for(var n=new t.Dom.Node,r=0,i=e.length;i>r;r++)n.appendChild(new t.Dom.Node(e[r]));return n.nodes()},t.tree=function(e){return new t.Tree(e)},t.Tree=function(e){this.array=e},t.Tree.prototype.keys=function(e){return this.k=e,this},t.Tree.prototype.value=function(e){return this.v=e,this},t.Tree.prototype.map=function(){for(var e={},t={},n=0;n<this.array.length;n++){t.index=n;for(var r=this.array[n],i=this.k.call(t,r),s=e,o=0;o<i.length-1;o++)s=s[i[o]]||(s[i[o]]={});s[i[o]]=this.v?this.v.call(t,r):r}return e},t.nest=function(e){return new t.Nest(e)},t.Nest=function(e){this.array=e,this.keys=[]},t.Nest.prototype.key=function(e){return this.keys.push(e),this},t.Nest.prototype.sortKeys=function(e){return this.keys[this.keys.length-1].order=e||t.naturalOrder,this},t.Nest.prototype.sortValues=function(e){return this.order=e||t.naturalOrder,this},t.Nest.prototype.map=function(){for(var e,t={},n=[],r=0;r<this.array.length;r++){var i=this.array[r],s=t;for(e=0;e<this.keys.length-1;e++){var o=this.keys[e](i);s[o]||(s[o]={}),s=s[o]}o=this.keys[e](i);if(!s[o]){var u=[];n.push(u),s[o]=u}s[o].push(i)}if(this.order)for(var e=0;e<n.length;e++)n[e].sort(this.order);return t},t.Nest.prototype.entries=function(){function e(t){var n=[];for(var r in t){var i=t[r];n.push({key:r,values:i instanceof Array?i:e(i)})}return n}function t(e,n){var r=this.keys[n].order;r&&e.sort(function(e,t){return r(e.key,t.key)});if(++n<this.keys.length)for(var i=0;i<e.length;i++)t.call(this,e[i].values,n);return e}return t.call(this,e(this.map()),0)},t.Nest.prototype.rollup=function(e){function t(n){for(var r in n){var i=n[r];i instanceof Array?n[r]=e(i):t(i)}return n}return t(this.map())},t.flatten=function(e){return new t.Flatten(e)},t.Flatten=function(e){this.map=e,this.keys=[]},t.Flatten.prototype.key=function(e,t){return this.keys.push({name:e,value:t}),delete this.$leaf,this},t.Flatten.prototype.leaf=function(e){return this.keys.length=0,this.$leaf=e,this},t.Flatten.prototype.array=function(){function e(t,i){if(s(t))n.push({keys:r.slice(),value:t});else for(var o in t)r.push(o),e(t[o],i+1),r.pop()}function t(e,s){if(s<i.length-1)for(var o in e)r.push(o),t(e[o],s+1),r.pop();else n.push(r.concat(e))}var n=[],r=[],i=this.keys,s=this.$leaf;return s?(e(this.map,0),n):(t(this.map,0),n.map(function(e){for(var t={},n=0;n<i.length;n++){var r=i[n],s=e[n];t[r.name]=r.value?r.value.call(null,s):s}return t}))},t.Transform=function(){},t.Transform.prototype={k:1,x:0,y:0},t.Transform.identity=new t.Transform,t.Transform.prototype.translate=function(e,n){var r=new t.Transform;return r.k=this.k,r.x=this.k*e+this.x,r.y=this.k*n+this.y,r},t.Transform.prototype.scale=function(e){var n=new t.Transform;return n.k=this.k*e,n.x=this.x,n.y=this.y,n},t.Transform.prototype.invert=function(){var e=new t.Transform,n=1/this.k;return e.k=n,e.x=-this.x*n,e.y=-this.y*n,e},t.Transform.prototype.times=function(e){var n=new t.Transform;return n.k=this.k*e.k,n.x=this.k*e.x+this.x,n.y=this.k*e.y+this.y,n},t.Scale=function(){},t.Scale.interpolator=function(e,n){if("number"==typeof e)return function(t){return t*(n-e)+e};var r=e.type&&"solid"!==e.type,i=n.type&&"solid"!==n.type;return r||i?(e=r?e:t.color(e).rgb(),n=i?n:t.color(n).rgb(),function(t){return.5>t?e:n}):(e=t.color(e).rgb(),n=t.color(n).rgb(),function(r){var i=e.a*(1-r)+n.a*r;return 1e-5>i&&(i=0),0==e.a?t.rgb(n.r,n.g,n.b,i):0==n.a?t.rgb(e.r,e.g,e.b,i):t.rgb(Math.round(e.r*(1-r)+n.r*r),Math.round(e.g*(1-r)+n.g*r),Math.round(e.b*(1-r)+n.b*r),i)})},t.Scale.common={by:function(e){function t(){return n(e.apply(this,arguments))}var n=this;for(var r in n)t[r]=n[r];return t},by1:function(e){function t(t){return n(e.call(this,t))}var n=this;for(var r in n)t[r]=n[r];return t},transform:function(e){function t(){return e.call(this,n.apply(n,arguments))}var n=this;for(var r in n)t[r]=n[r];return t}},!function(){function e(e,s,o,u){var a,f=o-s;if(f&&isFinite(f)){var l=t.parseNumNonNeg(t.get(u,"precision",0)),c=t.parseNumNonNeg(t.get(u,"precisionMin",0)),h=t.parseNumNonNeg(t.get(u,"precisionMax",1/0)),p=t.get(u,"roundInside",!0);isFinite(l)||(l=0),isFinite(c)||(c=0),h||(h=1/0);var d=t.get(u,"numberExponentMin"),v=t.get(u,"numberExponentMax");null!=d&&isFinite(d)&&(c=Math.max(c,Math.pow(10,Math.floor(d)))),null!=v&&isFinite(v)&&(h=Math.min(h,5*Math.pow(10,Math.floor(v)))),p&&(c>f&&(c=f),h>f&&(h=f)),c>h&&(h=c),l?l=Math.max(Math.min(l,h),c):c===h&&(l=c);var m,g,y,b,w=0,E=!!l;if(E)m={base:Math.abs(l),mult:1,value:1},m.value=m.base;else{var S=t.parseNumNonNeg(t.get(u,"tickCountMax",1/0));1>S&&(S=1),null==e?e=Math.min(10,S):isFinite(e)?e>S&&(e=S):e=isFinite(S)?S:10,m={base:isFinite(e)?t.logFloor(f/e,10):0,mult:1,value:1},m.value=m.base,c>0&&(g=i(c,!0),m.value<g.value&&(n(m,g),w=-1)),isFinite(h)&&(y=i(h,!1),g&&y.value<=g.value?y=null:y.value<m.value&&(n(m,y),w=1));if(1!==w&&isFinite(e)&&m.mult<10){b=f/m.base;if(b>e){var x=e/b;.15>=x?m.mult=10:m.mult<5&&(.35>=x?m.mult=5:m.mult<2&&.75>=x&&(m.mult=2)),m.mult>1&&(m.value=m.base*m.mult,g&&m.value<g.value?(n(m,g),w=-1):y&&y.value<m.value?(n(m,y),w=1):10===m.mult&&(m.base*=10,m.mult=1))}}}for(var T;;){var N=m.value,C=N*Math[p?"ceil":"floor"](s/N),k=N*Math[p?"floor":"ceil"](o/N);if(T&&(C>k||y&&k-C>y.value)){m=T;break}var L=Math.floor(t.log(N,10)+1e-10);m.decPlaces=Math.max(0,-L),m.ticks=t.range(C,k+N,N);if(E||w>0||m.ticks.length<=S)break;if(T&&T.ticks.length<=m.ticks.length){m=T;break}m=r(T=m)}a=m.ticks,a.step=m.value,a.base=m.base,a.mult=m.mult,a.decPlaces=m.decPlaces,a.format=t.Format.number().fractionDigits(m.decPlaces)}else a=[+s],a.step=a.base=a.mult=1,a.decPlaces=0,a.format=t.Format.number().fractionDigits(0);return a}function n(e,t){return e.base=t.base,e.mult=t.mult,e.value=t.value,e}function r(e){var t=n({},e);switch(t.mult){case 5:t.mult=1,t.base*=10;break;case 2:t.mult=5;break;case 1:t.mult=2}return t.value=t.base*t.mult,t}function i(e,n){0>e&&(e=-e);var r=t.logFloor(e,10),i=e/r;return n?i>5?(i=1,r*=10):i=i>2?5:i>1?2:1:i=i>=5?5:i>=2?2:1,{base:r,mult:i,value:r*i,source:e}}function s(e){return new Date(e)}function o(e,n,r,i,o,a,f){var c,p=r-n;if(p&&isFinite(p)){i=h(t.get(f,"precision"),i);var d=h(t.get(f,"precisionMin"),0),v=h(t.get(f,"precisionMax"),1/0);d>v&&(v=d),i?i=Math.max(Math.min(i,v),d):d===v&&(i=d);var m=t.parseNumNonNeg(t.get(f,"tickCountMax",1/0));2>m&&(m=2),e=Math.min(null==e?5:e,m);for(var g,y={weekStart:a,roundInside:t.get(f,"roundInside",1),alignmentValue:t.get(f,"alignmentValue")},b=u(e,p,i,d,v,y),w=b.fixed,E=b.overflow;;){b.ticks=c=b.comp.ticks(n,r,b.mult,y);if(g&&b.precMax&&c[c.length-1]-c[0]>b.precMax.value){b=g;break}if(w||E>0||b.ticks.length<=m)break;if(g&&g.ticks.length<=b.ticks.length){b=g;break}g=b,b=b.comp.resultAbove(b.mult)}c=b.ticks,c.step=b.value,c.base=b.comp.value,c.mult=b.mult,c.format=l(o)||b.comp.format}else c=[s(n)],c.step=c.base=c.mult=1,c.format=t.Format.date("%x");return c}function u(e,t,n,r,i,s){var o,u,f,l,c=0,h=1,p=!!n;return n?(u=a(n,!1),u.value!==n?o=u.comp.withPrecision(n):(o=u.comp,h=u.mult)):(isFinite(e)?(o=g(t,e),h=o.multiple(t/o.value,s)):(o=v(),h=1),n=o.value*h,r>n&&(f=a(r,!0)),n>i&&(l=a(i,!1)),f&&n<f.value?(o=f.comp,h=f.mult,c=-1):l&&r<l.value&&l.value<n&&(o=l.comp,h=l.mult,c=1)),{comp:o,mult:h,value:o.value*h,source:n,overflow:c,fixed:p,precMin:f,precMax:l}}function a(e,t){return null==e||0>=e||!isFinite(e)?null:(t?v:m)().castValue(e,t)}function f(e,n,r){this.value=e,this.mult=r.mult||1,this.base=1===this.mult?this.value:Math.floor(this.value/this.mult),y.forEach(function(e){null!=r[e]&&(this[e]=r[e])},this),r.floor&&(this.floorLocal=r.floor),this.format=l(r.format),this.first=t.functor(r.first||0),this.prev=n,this.next=null,n&&(n.next=this)}function l(e){return null==e?null:"function"==typeof e?e:t.Format.date(e)}function c(e,t){var n=new Date(e.getFullYear(),e.getMonth(),1),r=t-n.getDay();return r&&(0>r&&(r+=7),n.setDate(n.getDate()+r)),n}function h(e,t){if("string"==typeof e){var n=+e;if(isNaN(n)){if(e){var r=/^(\d*)([a-zA-Z]+)$/.exec(e);r&&(e=p(r[2]),e&&(e*=+r[1]||1))}}else e=n}return("number"!=typeof e||0>e)&&(e=null!=t?t:0),e}function p(e){switch(e){case"year":case"y":return 31536e6;case"month":case"m":return 2592e6;case"week":case"w":return 6048e5;case"day":case"d":return 864e5;case"hour":case"h":return 36e5;case"minute":case"M":return 6e4;case"second":case"s":return 1e3;case"millisecond":case"ms":return 1}}function d(e,t){var n=m();b.push(new f(e,n,t))}function v(){return b[0]}function m(){return b.length?b[b.length-1]:null}function g(e,t){null==t&&(t=1);var n,r=m();do n=r;while(e<t*n.value&&(r=n.prev));return n}t.Scale.quantitative=function(){function n(e){var n=t.search(a,e);return 0>n&&(n=-n-2),n=Math.max(0,Math.min(c.length-1,n)),c[n]((v(e)-f[n])/(f[n+1]-f[n]))}var r,i,u,a=[0,1],f=[0,1],l=[0,1],c=[t.identity],p=Number,d=!1,v=t.identity,m=t.identity,g=null,y=0;return n.transform=function(e,t){return v=function(t){return d?-e(-t):e(t)},m=function(e){return d?-t(-e):t(e)},f=a.map(v),this},n.domain=function(e,n,r){if(arguments.length){var i;return e instanceof Array?(arguments.length<2&&(n=t.identity),arguments.length<3&&(r=n),i=e.length&&n(e[0]),a=e.length?[t.min(e,n),t.max(e,r)]:[]):(i=e,a=Array.prototype.slice.call(arguments).map(Number)),a.length?1==a.length&&(a=[a[0],a[0]]):a=[-1/0,1/0],d=(a[0]||a[a.length-1])<0,f=a.map(v),p=i instanceof Date?s:Number,this}return a.map(p)},n.range=function(){if(arguments.length){l=Array.prototype.slice.call(arguments),l.length?1==l.length&&(l=[l[0],l[0]]):l=[-1/0,1/0],c=[];for(var e=0;e<l.length-1;e++)c.push(t.Scale.interpolator(l[e],l[e+1]));return this}return l},n.invert=function(e){var n=t.search(l,e);return 0>n&&(n=-n-2),n=Math.max(0,Math.min(c.length-1,n)),p(m(f[n]+(e-l[n])/(l[n+1]-l[n])*(f[n+1]-f[n])))},n.ticks=function(t,n){var f=a[0],l=a[a.length-1],c=f>l,h=c?l:f,d=c?f:l;return u=p===s?o(t,h,d,i,r,y,n):e(t,h,d,n),c?u.reverse():u},n.dateTickFormat=function(){return arguments.length?(r=arguments[0],this):r},n.dateTickPrecision=function(){return arguments.length?(i=h(arguments[0],0),this):i},n.dateTickWeekStart=function(e){if(arguments.length){switch((""+e).toLowerCase()){case"0":case"sunday":y=0;break;case"1":case"monday":y=1;break;case"2":case"tuesday":y=2;break;case"3":case"wednesday":y=3;break;case"4":case"thursday":y=4;break;case"5":case"friday":y=5;break;case"6":case"saturday":y=6;break;default:y=0}return this}return y},n.tickFormatter=function(e){return arguments.length?(g=e,this):g},n.tickFormat=function(e,t){var n;if(g){u||(u=[],u.step=u.base=u.mult=1,u.decPlaces=0,u.format=String);var r=p!==Number?u.step:u.decPlaces;n=g.call(u,e,r,null!=t?t:-1)}else n=u?u.format(e):String(e);return n},n.nice=function(){if(2!=a.length)return this;var e=a[0],t=a[a.length-1],n=e>t,r=n?t:e,i=n?e:t,s=i-r;if(!s||!isFinite(s))return this;var o=Math.pow(10,Math.round(Math.log(s)/Math.log(10))-1);return a=[Math.floor(r/o)*o,Math.ceil(i/o)*o],n&&a.reverse(),f=a.map(v),this},t.copyOwn(n,t.Scale.common),n.domain.apply(n,arguments),n};var y=["get","set","multiple","multiples","thresholds","closeds","castValue"];f.prototype.increment=function(e,t){null==t&&(t=1),1!==this.mult&&(t*=this.mult),this.set(e,this.get(e)+t)},f.prototype.get=function(e){return e.getMilliseconds()},f.prototype.set=function(e,t){e.setMilliseconds(t)},f.prototype.floorLocal=function(){},f.prototype.floor=function(e,t){var n=0;1!==this.mult&&(this.floorLocal(e,t),n=this.base);for(var r=this.prev;r;)1===r.mult&&r.value!==n&&r.clear(e,t),r=r.prev},f.prototype.floorMultiple=function(e,n,r){var i=t.get(r,"alignmentValue"),s=null!=i?this.get(i):this.first(e,r),o=this.get(e)-s,u=null;if(o){var a=n*this.mult;if(i){u=new Date(i);for(;e>u;)this.set(u,this.get(u)+a);for(;u>e;)this.set(u,this.get(u)-a);s=this.get(u)}else{var f=Math.floor(o/a)*a;s+=f}}this.set(e,s,u)},f.prototype.clear=function(e,t){this.set(e,this.first(e,t))},f.prototype.multiple=function(e){for(var t=this.multiples,n=this.thresholds,r=this.closeds,i=t.length,s=-1;++s<i;)if(r[s]?e<=n[s]:e<n[s])return t[s];throw new Error("Invalid configuration.")},f.prototype.resultAbove=function(e){return this.castValue(this.value*e+.1,!0)},f.prototype.castValue=function(e,t){var n=this.multiples;if(!n)return this._castValueResult(1,e,1);var r,i=e/this.value,s=n.length;if(t){r=-1;for(;++r<s;)if(i<=n[r])return this._castValueResult(n[r],e,0);return this.next?this.next.castValue(e,t):this._castValueResult(n[s-1],e,1)}r=s;for(;r--;)if(n[r]<=i)return this._castValueResult(n[r],e,0);return this.prev?this.prev.castValue(e,t):this._castValueResult(n[0],e,-1)},f.prototype._castValueResult=function(e,t,n){return{comp:this,mult:e,value:this.value*e,source:t,overflow:n}},f.prototype.withPrecision=function(e){var t=this;return this.value!==e&&(t=new f(e,null,{mult:e,format:this.format})),t},f.prototype.ticks=function(e,n,r,i){var s=[],o=new Date(e);this.floor(o,i),r>1&&this.floorMultiple(o,r,i);if(t.get(i,"roundInside",1)){e!==+o&&this.increment(o,r);do s.push(new Date(o)),this.increment(o,r);while(n>=o)}else{s.push(new Date(o));do this.increment(o,r),s.push(new Date(o));while(n>o)}return s},t.parseDatePrecision=h;var b=[];d(1,{format:"%S.%Qs",multiples:[1,5,25,50,100,250],thresholds:[10,50,100,200,1e3,1/0],closeds:[1,1,1,1,1,1]}),d(1e3,{get:function(e){return e.getSeconds()},set:function(e,t){e.setSeconds(t)},format:"%I:%M:%S",multiples:[1,5,10,15],thresholds:[10,60,90,1/0],closeds:[1,1,1,1]}),d(6e4,{get:function(e){return e.getMinutes()},set:function(e,t){e.setMinutes(t)},format:"%I:%M %p",multiples:[1,5,10,15],thresholds:[10,15,30,1/0],closeds:[1,1,1,1]}),d(36e5,{get:function(e){return e.getHours()},set:function(e,t){e.setHours(t)},format:"%I:%M %p",multiples:[1,3,6],thresholds:[10,20,1/0],closeds:[1,1,1]}),d(864e5,{get:function(e){return e.getDate()},set:function(e,t,n){var r=n?n.getMonth():e.getMonth(),i=n?n.getFullYear():e.getFullYear();e.setFullYear(i,r,t)},format:"%m/%d",first:1,multiples:[1,2,3,5],thresholds:[10,15,30,1/0],closeds:[1,0,0,1]}),d(6048e5,{get:function(e){return e.getDate()},set:function(e,t,n){var r=n?n.getMonth():e.getMonth(),i=n?n.getFullYear():e.getFullYear();e.setFullYear(i,r,t)},mult:7,floor:function(e,n){var r=e.getDay()-t.get(n,"weekStart",0);0!==r&&(0>r&&(r+=7),this.set(e,this.get(e)-r))},first:function(e,n){return this.get(c(e,t.get(n,"weekStart",0)))},format:"%m/%d",multiples:[1,2,3],thresholds:[10,15,1/0],closeds:[1,1,1]}),d(2592e6,{get:function(e){return e.getMonth()},set:function(e,t){e.setMonth(t)},format:"%m/%Y",multiples:[1,2,3],thresholds:[12,24,1/0],closeds:[1,1,1]}),d(31536e6,{get:function(e){return e.getFullYear()},set:function(e,t){e.setFullYear(t)},format:"%Y",multiple:function(e){if(10>=e)return 1;var n=t.logCeil(e/15,10);return 2>e/n?n/=5:5>e/n&&(n/=2),n},castValue:function(e,n){var r,i,s=e/this.value;if(1>s){if(!n)return this.prev?this.prev.castValue(e,n):this._castValueResult(1,e,-1);r=1}else r=t.logFloor(s,10);i=s/r;if(n)i>5?(r*=10,i=1):i=i>2?5:i>1?2:1;else if(i>5)i=5;else if(i>2)i=2;else if(i>1)i=1;else if(1>i)return this.prev?this.prev.castValue(e,n):this._castValueResult(r,e,-1);return this._castValueResult(r*i,e,0)}})}(),t.Scale.linear=function(){var e=t.Scale.quantitative();return e.domain.apply(e,arguments),e},t.Scale.log=function(){var e,n,r=t.Scale.quantitative(1,10),i=function(e){return Math.log(e)/n},s=function(t){return Math.pow(e,t)};return r.ticks=function(){var t=r.domain(),n=t[0]<0,o=Math.floor(n?-i(-t[0]):i(t[0])),u=Math.ceil(n?-i(-t[1]):i(t[1])),a=[];if(n){a.push(-s(-o));for(;o++<u;)for(var f=e-1;f>0;f--)a.push(-s(-o)*f)}else{for(;u>o;o++)for(var f=1;e>f;f++)a.push(s(o)*f);a.push(s(o))}for(o=0;a[o]<t[0];o++);for(u=a.length;a[u-1]>t[1];u--);return a.slice(o,u)},r.tickFormat=function(e){return e.toPrecision(1)},r.nice=function(){var n=r.domain();return r.domain(t.logFloor(n[0],e),t.logCeil(n[1],e))},r.base=function(t){return arguments.length?(e=Number(t),n=Math.log(e),r.transform(i,s),this):e},r.domain.apply(r,arguments),r.base(10)},t.Scale.root=function(){var e=t.Scale.quantitative();return e.power=function(t){if(arguments.length){var n=Number(t),r=1/n;return e.transform(function(e){return Math.pow(e,r)},function(e){return Math.pow(e,n)}),this}return n},e.domain.apply(e,arguments),e.power(2)},t.Scale.ordinal=function(){function e(e){return e in r||(r[e]=n.push(e)-1),i[r[e]%i.length]}var n=[],r={},i=[];return e.domain=function(e,i){if(arguments.length){e=e instanceof Array?arguments.length>1?t.map(e,i):e:Array.prototype.slice.call(arguments),n=[];for(var s={},o=0;o<e.length;o++){var u=e[o];u in s||(s[u]=!0,n.push(u))}return r=t.numerate(n),this}return n},e.range=function(e,n){return arguments.length?(i=e instanceof Array?arguments.length>1?t.map(e,n):e:Array.prototype.slice.call(arguments),"string"==typeof i[0]&&(i=i.map(t.fillStyle)),i.min=i[0],i.max=i[i.length-1],this):i},e.split=function(e,n){var r=n-e,s=this.domain().length,o=0;return 0===r?i=t.array(s,e):s&&(o=(n-e)/s,i=t.range(e+o/2,n,o)),i.min=e,i.max=n,i.step=o,this},e.splitBandedCenter=function(e,t,n){return null==n&&(n=1),this._splitBandedCore(e,t,function(e){var t=e.range/e.count;e.step=t,e.band=t*n,e.offset=t/2})},e.splitBandedCenterAbs=function(e,t,n,r){return this._splitBandedCore(e,t,function(e){var t;null==n||null==r?(t=e.range/e.count,null==n?null==r?(n=t,r=0):(r=Math.min(r,t),n=t-r):(n=Math.min(n,t),r=t-n)):t=n+r,e.step=t,e.band=n,e.offset=t/2})},e._splitBandedCore=function(e,n,r){var s,o={min:e,max:n,range:n-e,count:this.domain().length,offset:0,step:0,band:0};return 0===o.range?(i=t.array(o.count,e),s=0):o.count&&(r(o),s=o.step-o.band,i=t.range(e+o.offset,n,o.step)),i.offset=o.offset,i.step=o.step,i.band=o.band,i.margin=s,i.min=e,i.max=n,this},e.splitBandedFlushCenter=function(e,t,n){return null==n&&(n=1),this._splitBandedCore(e,t,function(e){var t=e.range,r=e.count,i=t*n/r,s=r>1?(t-r*i)/(r-1):0;e.band=i,e.step=s+i,e.offset=i/2})},e.splitFlush=function(e,n){var r=this.domain().length,s=(n-e)/(r-1);return i=1==r?[(e+n)/2]:t.range(e,n+s/2,s),i.min=e,i.max=n,this},e.splitBanded=function(e,n,r){arguments.length<3&&(r=1);if(0>r){var s=this.domain().length,o=-r*s,u=n-e-o,a=u/(s+1);i=t.range(e+a,n,a-r),i.band=-r}else{var f=(n-e)/(this.domain().length+(1-r));i=t.range(e+f*(1-r),n,f),i.band=f*r,i.step=f,i.margin=f-i.band}return i.min=e,i.max=n,this},e.invertIndex=function(e,t){var n=this.domain().length;if(0===n)return-1;var r=this.range(),i=r.max-r.min;if(0===i)return 0;var s=i/n;if(e>=r.max)return n;if(e<r.min)return 0;var o=(e-r.min)/s;return t?o:Math.round(o)},t.copyOwn(e,t.Scale.common),e.domain.apply(e,arguments),e},t.Scale.quantile=function(){function e(e){return o(Math.max(0,Math.min(r,t.search.index(i,e)-1))/r)}var n=-1,r=-1,i=[],s=[],o=t.Scale.linear();return e.quantiles=function(e){if(arguments.length){n=Number(e);if(0>n)i=[s[0]].concat(s),r=s.length-1;else{i=[],i[0]=s[0];for(var t=1;n>=t;t++)i[t]=s[~~(t*(s.length-1)/n)];r=n-1}return this}return i},e.domain=function(r,i){return arguments.length?(s=r instanceof Array?t.map(r,i):Array.prototype.slice.call(arguments),s.sort(t.naturalOrder),e.quantiles(n),this):s},e.range=function(){return arguments.length?(o.range.apply(o,arguments),this):o.range()},t.copyOwn(e,t.Scale.common),e.domain.apply(e,arguments),e},t.histogram=function(e,n){var r=!0;return{bins:function(i){var s=t.map(e,n),o=[];arguments.length||(i=t.Scale.linear(s).ticks());for(var u=0;u<i.length-1;u++){var a=o[u]=[];a.x=i[u],a.dx=i[u+1]-i[u],a.y=0}for(var u=0;u<s.length;u++){var l=t.search.index(i,s[u])-1,a=o[Math.max(0,Math.min(o.length-1,l))];a.y++,a.push(e[u])}if(!r)for(var u=0;u<o.length;u++)o[u].y/=s.length;return o},frequency:function(e){return arguments.length?(r=Boolean(e),this):r}}},!function(){t.Shape=function(){};var e={x:1,y:1};t.Shape.dist2=function(t,n,r){r=r||e;var i=t.x-n.x,s=t.y-n.y,o=i*i,u=s*s;return{cost:o+u,dist2:r.x*o+r.y*u}};var n=Math.PI,r=2*n,i=Math.atan2;t.Shape.normalizeAngle=function(e){return e%=r,t.floatLess(e,0)&&(e+=r),e},t.Shape.atan2Norm=function(e,n){var s=i(e,n);return t.floatLess(s,0)&&(s+=r),s},t.Shape.prototype.hasArea=function(){return!0},t.Shape.prototype.bbox=function(){return this._bbox||(this._bbox=this._calcBBox())},t.Shape.prototype._calcBBox=function(){var e,n,r,i;return this.points().forEach(function(t){var s=t.x,o=t.y;null==e?(e=r=s,n=i=o):(e>s?e=s:s>r&&(r=s),n>o?n=o:o>i&&(i=o))}),null!=e?new t.Shape.Rect(e,n,r-e,i-n):void 0},t.Shape.prototype.containsPoint=function(e,n){if(n){var r;if(!n.y)return r=this.bbox(),t.floatBelongsClosed(r.x,e.x,r.x2);if(!n.x)return r=this.bbox(),t.floatBelongsClosed(r.y,e.y,r.y2)}return this._containsPointCore(e)},t.Shape.prototype._containsPointCore=function(){return!1}}(),!function(){var e=t.Shape.dist2,n=Math.cos,r=Math.sin,i=Math.sqrt;t.vector=function(e,t){return new s(e,t)},t.Vector=function(e,t){this.x=e,this.y=t};var s=t.Shape.Point=t.Vector;t.Vector.prototype=t.extend(t.Shape),t.Vector.prototype.perp=function(){return new s(-this.y,this.x)},t.Vector.prototype.rotate=function(e){var t=n(e),i=r(e);return new s(t*this.x-i*this.y,i*this.x+t*this.y)},t.Vector.prototype.norm=function(){var e=this.length();return this.times(e?1/e:1)},t.Vector.prototype.length=function(){return i(this.x*this.x+this.y*this.y)},t.Vector.prototype.times=function(e){return new s(this.x*e,this.y*e)},t.Vector.prototype.plus=function(e,t){return 1===arguments.length?new s(this.x+e.x,this.y+e.y):new s(this.x+e,this.y+t)},t.Vector.prototype.minus=function(e,t){return 1===arguments.length?new s(this.x-e.x,this.y-e.y):new s(this.x-e,this.y-t)},t.Vector.prototype.dot=function(e,t){return 1==arguments.length?this.x*e.x+this.y*e.y:this.x*e+this.y*t},t.Vector.prototype.hasArea=function(){return!1},t.Vector.prototype.clone=function(){return new s(this.x,this.y)},t.Vector.prototype.apply=function(e){return new s(e.x+e.k*this.x,e.y+e.k*this.y)},t.Vector.prototype.intersectsRect=function(e){return t.floatBelongsClosed(e.x,this.x,e.x2)&&t.floatBelongsClosed(e.y,this.y,e.y2)},t.Vector.prototype._containsPointCore=function(e){return this.x===e.x&&this.y===e.y},t.Vector.prototype.points=function(){return[this]},t.Vector.prototype.edges=function(){return[]},t.Vector.prototype.center=function(){return this},t.Vector.prototype.distance2=function(t,n){return e(this,t,n)}}(),!function(){var e=t.Shape.Point,n=t.Shape.dist2;t.Shape.Line=function(e,t,n,r){this.x=e||0,this.y=t||0,this.x2=n||0,this.y2=r||0};var r=t.Shape.Line;r.prototype=t.extend(t.Shape),r.prototype.hasArea=function(){return!1},r.prototype.clone=function(){return new r(this.x,this.y,this.x2,this.x2)},r.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,i=e.x+e.k*this.x2,s=e.y+e.k*this.y2;return new r(t,n,i,s)},r.prototype.points=function(){return[new e(this.x,this.y),new e(this.x2,this.y2)]},r.prototype.edges=function(){return[this]},r.prototype.center=function(){return new e((this.x+this.x2)/2,(this.y+this.y2)/2)},r.prototype.normal=function(e,t){var n=this.points(),r=n[1].minus(n[0]).perp().norm();if(t){var i=n[0].minus(t);i.dot(r)<0&&(r=r.times(-1))}return r},r.prototype.intersectsRect=function(e){var t,n,r=this.points();n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;var i=e.edges();n=i.length;for(t=0;n>t;t++)if(this.intersectsLine(i[t]))return!0;return!1},r.prototype._containsPointCore=function(e){var n=this.x,r=this.x2,i=this.y,s=this.y2;return t.floatBelongsClosed(n,e.x,r)&&(t.floatEqual(n,r)?t.floatBelongsClosed(Math.min(i,s),e.y,Math.max(i,s)):t.floatZero((s-i)/(r-n)*(e.x-n)+i-e.y))},r.prototype.intersectsLine=function(e){var n=this,r=n.x2-n.x,i=n.y2-n.y,s=e.x2-e.x,o=e.y2-e.y,u=o*r-s*i;if(t.floatZero(u))return!1;var a=n.y-e.y,f=n.x-e.x,l=s*a-o*f,c=r*a-i*f;if(t.floatZero(u))return t.floatZero(l)&&t.floatZero(c);var h=l/u;if(!t.floatBelongsClosed(0,h,1))return!1;var p=c/u;return t.floatBelongsClosed(0,p,1)?!0:!1},r.prototype.distance2=function(e,r){var i=this,s={x:this.x2,y:this.y2},o=n(i,s).cost;if(t.floatZero(o))return n(e,i,r);var u=s.x-i.x,a=s.y-i.y,f=((e.x-i.x)*u+(e.y-i.y)*a)/o;if(t.floatLess(f,0))return n(e,i,r);if(t.floatGreater(f,1))return n(e,s,r);var l={x:i.x+f*u,y:i.y+f*a};return n(e,l,r)}}(),!function(){var e=t.Shape.Point,n=t.Shape.Line;t.Shape.Polygon=function(e){this._points=e||[]};var r=t.Shape.Polygon;r.prototype=t.extend(t.Shape),r.prototype.points=function(){return this._points},r.prototype.clone=function(){return new r(this.points().slice())},r.prototype.apply=function(e){for(var t=this.points(),n=t.length,i=new Array(n),s=0;n>s;s++)i[s]=t[s].apply(e);return new r(i)},r.prototype.intersectsRect=function(e){var t,n,r=this.points();n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;var i=this.edges();n=i.length;for(t=0;n>t;t++)if(i[t].intersectsRect(e))return!0;return!1},r.prototype.edges=function(){var e=this._edges;if(!e){e=this._edges=[];var t=this.points(),r=t.length;if(r){for(var i,s=t[0],o=s,u=1;r>u;u++)i=t[u],e.push(new n(s.x,s.y,i.x,i.y)),s=i;r>2&&e.push(new n(i.x,i.y,o.x,o.y))}}return e},r.prototype.distance2=function(e,n){var r={cost:1/0,dist2:1/0};return this.edges().forEach(function(i){var s=i.distance2(e,n);t.floatLess(s.cost,r.cost)&&(r=s)},this),r},r.prototype.center=function(){for(var t=this.points(),n=0,r=0,i=0,s=t.length;s>i;i++){var o=t[i];n+=o.x,r+=o.y}return new e(n/s,r/s)},r.prototype._containsPointCore=function(e){var t=this.bbox();if(!t._containsPointCore(e))return!1;var r=.01*t.dx,i=new n(t.x-r,e.y,e.x,e.y),s=0,o=this.edges();return o.forEach(function(e){e.intersectsLine(i)&&s++}),1===(1&s)}}(),!function(){var e=t.Shape.Point,n=t.Shape.Line;t.Shape.Rect=function(e,t,n,r){this.x=e||0,this.y=t||0,this.dx=n||0,this.dy=r||0,this.dx<0&&(this.dx=Math.max(0,-this.dx),this.x=this.x-this.dx),this.dy<0&&(this.dy=Math.max(0,-this.dy),this.y=this.y-this.dy),this.x2=this.x+this.dx,this.y2=this.y+this.dy};var r=t.Shape.Rect;r.prototype=t.extend(t.Shape.Polygon),r.prototype.clone=function(){var e=Object.create(r.prototype);return e.x=this.x,e.y=this.y,e.dx=this.dx,e.dy=this.dy,e.x2=this.x2,e.y2=this.y2,e},r.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,i=e.k*this.dx,s=e.k*this.dy;return new r(t,n,i,s)},r.prototype._containsPointCore=function(e){return t.floatBelongsClosed(this.x,e.x,this.x2)&&t.floatBelongsClosed(this.y,e.y,this.y2)},r.prototype.intersectsRect=function(e){return t.floatGreater(this.x2,e.x)&&t.floatLess(this.x,e.x2)&&t.floatGreater(this.y2,e.y)&&t.floatLess(this.y,e.y2)},r.prototype.edges=function(){if(!this._edges){var e=this.x,t=this.y,r=this.x2,i=this.y2;this._edges=[new n(e,t,r,t),new n(r,t,r,i),new n(r,i,e,i),new n(e,i,e,t)]}return this._edges},r.prototype.center=function(){return new e(this.x+this.dx/2,this.y+this.dy/2)},r.prototype.points=function(){var t=this._points;if(!t){var n=this.x,r=this.y,i=this.x2,s=this.y2;t=this._points=[new e(n,r),new e(i,r),new e(i,s),new e(n,s)]}return t},r.prototype._calcBBox=function(){return this}}(),!function(){var e=t.Shape.Point,n=t.Shape.dist2,r=Math.sqrt,i=Math.abs,s=Math.pow;t.Shape.Circle=function(e,t,n){this.x=e||0,this.y=t||0,this.radius=n||0};var o=t.Shape.Circle;o.prototype=t.extend(t.Shape),o.prototype.clone=function(){return new o(this.x,this.y,this.radius)},o.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.radius;return new o(t,n,r)},o.prototype.intersectsRect=function(e){var t=e.dx/2,n=e.dy/2,r=this.radius,o=i(this.x-e.x-t),u=i(this.y-e.y-n);if(o>t+r||u>n+r)return!1;if(t>=o||n>=u)return!0;var a=s(o-t,2)+s(u-n,2);return r*r>=a},o.prototype.intersectLine=function(t,n){var i=t.x2-t.x,s=t.y2-t.y,o=this.x-t.x,u=this.y-t.y,a=i*i+s*s,f=i*o+s*u,l=this.radius,c=o*o+u*u-l*l,h=f/a,p=h*h-c/a;if(!(0>p)){var d=r(p),v=h-d,m=h+d,g=[];return(n||v>=0&&1>=v)&&g.push(new e(t.x+i*v,t.y+s*v)),0!==p&&(n||m>=0&&1>=m)&&g.push(new e(t.x+i*m,t.y+s*m)),g}},o.prototype.points=function(){return[this.center()]},o.prototype.center=function(){return new e(this.x,this.y)},o.prototype.normal=function(e){return e.minus(this.x,this.y).norm()},o.prototype._containsPointCore=function(e){var t=e.x-this.x,n=e.y-this.y,r=this.radius;return r*r>=t*t+n*n},o.prototype.distance2=function(e,t){var r=this.radius,i=e.minus(this).norm().times(r).plus(this),s=n(e,i,t);return s},o.prototype._calcBBox=function(){var e=this.radius,n=2*e;return new t.Shape.Rect(this.x-e,this.y-e,n,n)}}(),!function(){var e=t.Shape.Point,n=t.Shape.dist2,r=t.Shape.normalizeAngle,i=t.Shape.atan2Norm,s=Math.cos,o=Math.sin,u=Math.sqrt,a=Math.PI,f=2*a,l=a/2,c=3*a/2;t.Shape.Arc=function(e,n,i,s,o){this.x=e,this.y=n,this.radius=i,t.floatBelongsClosed(0,o,f)||(o=r(o)),this.startAngle=r(s),this.angleSpan=o,this.endAngle=this.startAngle+this.angleSpan};var h=t.Shape.Arc;h.prototype=t.extend(t.Shape),h.prototype.hasArea=function(){return!1},h.prototype.clone=function(){var e=Object.create(h.prototype),t=this;return e.x=t.x,e.y=t.y,e.radius=t.radius,e.startAngle=t.startAngle,e.angleSpan=t.angleSpan,e.endAngle=t.endAngle,e},h.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.radius;return new h(t,n,r,this.startAngle,this.angleSpan)},h.prototype.containsAngle=function(e,n){t.floatBelongsClosed(0,e,f)||(e=r(e));var i=this.startAngle,s=this.endAngle;return(n?t.floatBelongsOpen(i,e,s):t.floatBelongsClosed(i,e,s))?!0:t.floatLessOrEqual(s,f)?!1:(e+=f,n?t.floatBelongsOpen(i,e,s):t.floatBelongsClosed(i,e,s))},h.prototype._containsPointCore=function(e){var n=e.x-this.x,r=e.y-this.y,s=u(n*n+r*r);return t.floatEqual(s,this.radius)&&this.containsAngle(i(r,n))},h.prototype.intersectsRect=function(e){var t,n=this.points(),r=n.length;for(t=0;r>t;t++)if(n[t].intersectsRect(e))return!0;var i=e.edges();r=i.length;for(t=0;r>t;t++)if(this.intersectLine(i[t]))return!0;return!1};var p=t.Shape.Circle.prototype.intersectLine;h.prototype.intersectLine=function(e,t){var n=p.call(this,e,t);if(n){n=n.filter(function(e){return this._containsPointCore(e)},this);if(n.length)return n}},h.prototype.points=function(){function t(t){n.containsAngle(t,!0)&&p.push(new e(r+u*s(t),i+u*o(t)))}var n=this,r=n.x,i=n.y,u=n.radius,f=n.startAngle,h=n.endAngle,p=[new e(r+u*s(f),i+u*o(f)),new e(r+u*s(h),i+u*o(h))];return t(0),t(l),t(a),t(c),p},h.prototype.center=function(){var t=this.x,n=this.y,r=this.radius,i=(this.startAngle+this.endAngle)/2;return new e(t+r*s(i),n+r*o(i))},h.prototype.normal=function(e,t){var n=e.minus(this.x,this.y).norm();if(t){var r=this.center().minus(t);r.dot(n)<0&&(n=n.times(-1))}return n},h.prototype.distance2=function(r,u){var a=r.x-this.x,f=r.y-this.y,l=i(f,a);if(this.containsAngle(l)){var c=new e(this.x+this.radius*s(l),this.y+this.radius*o(l));return n(r,c,u)}var h=this.points(),p=n(r,h[0],u),d=n(r,h[1],u);return t.floatLess(p.cost,d.cost)?p:d}}(),!function(){var e=t.Shape.Arc,n=t.Shape.Line,r=t.Shape.Point,i=Math.cos,s=Math.sin,o=Math.sqrt,u=Math.PI,a=2*u,f=u/2,l=3*u/2,c=t.Shape.atan2Norm,h=t.Shape.normalizeAngle;t.Shape.Wedge=function(e,n,r,i,s,o){this.x=e,this.y=n,this.innerRadius=r,this.outerRadius=i,t.floatBelongsClosed(0,o,a)||(o=h(o)),this.startAngle=h(s),this.angleSpan=o,this.endAngle=this.startAngle+o};var p=t.Shape.Wedge;p.prototype=t.extend(t.Shape),p.prototype.clone=function(){return new p(this.x,this.y,this.innerRadius,this.outerRadius,this.startAngle,this.angleSpan)},p.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.innerRadius,i=e.k*this.outerRadius;return new p(t,n,r,i,this.startAngle,this.angleSpan)},p.prototype.containsAngle=e.prototype.containsAngle,p.prototype._containsPointCore=function(e){var n=e.x-this.x,r=e.y-this.y,i=o(n*n+r*r);return t.floatBelongsClosed(this.innerRadius,i,this.outerRadius)&&this.containsAngle(c(r,n))},p.prototype.intersectsRect=function(e){var t,n,r,i;r=this.points(),n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;r=e.points(),n=r.length;for(t=0;n>t;t++)if(this._containsPointCore(r[t]))return!0;i=this.edges(),n=i.length;for(t=0;n>t;t++)if(i[t].intersectsRect(e))return!0;return!1},p.prototype.points=function(){return this._points||this.edges(),this._points},p.prototype.edges=function(){function o(e){a.containsAngle(e,!0)&&L.push(new r(d+y*i(e),v+y*s(e)))}var a=this,c=a._edges;if(!c){var h,p,d=a.x,v=a.y,m=a.innerRadius,g=t.floatGreater(m,0),y=a.outerRadius,b=a.startAngle,w=a.endAngle,E=a.angleSpan,S=i(b),x=s(b),T=i(w),N=s(w);g?(h=new r(d+m*S,v+m*x),p=new r(d+m*T,v+m*N)):h=p=new r(d,v);var C=new r(d+y*S,v+y*x),k=new r(d+y*T,v+y*N);c=a._edges=[],g&&c.push(new e(d,v,m,b,E)),c.push(new n(h.x,h.y,C.x,C.y),new e(d,v,y,b,E),new n(p.x,p.y,k.x,k.y));var L=a._points=[h,C,k];g&&L.push(p),o(0),o(f),o(u),o(l)}return c},p.prototype.distance2=function(e,n){var r={cost:1/0,dist2:1/0};return this.edges().forEach(function(i){var s=i.distance2(e,n);t.floatLess(s.cost,r.cost)&&(r=s)}),r},p.prototype.center=function(){var e=(this.startAngle+this.endAngle)/2,t=(this.innerRadius+this.outerRadius)/2;return new r(this.x+t*i(e),this.y+t*s(e))}}(),!function(){var e=Math.round,n=function(t){var n=parseFloat(t);return"%"==t[t.length-1]?e(2.55*n):n},r=/([a-z]+)\((.*)\)/i,i=function(e){if("#"===e.charAt(0)){var i,s,o;return 4===e.length?(i=e.charAt(1),i+=i,s=e.charAt(2),s+=s,o=e.charAt(3),o+=o):7===e.length&&(i=e.substring(1,3),s=e.substring(3,5),o=e.substring(5,7)),t.rgb(parseInt(i,16),parseInt(s,16),parseInt(o,16),1)}var u=r.exec(e);if(u){var a=u[2].split(","),f=1;switch(u[1]){case"hsla":case"rgba":f=parseFloat(a[3]);if(!f)return t.Color.transparent}switch(u[1]){case"hsla":case"hsl":var l=parseFloat(a[0]),c=parseFloat(a[1])/100,h=parseFloat(a[2])/100;return(new t.Color.Hsl(l,c,h,f)).rgb();case"rgba":case"rgb":var i=n(a[0]),s=n(a[1]),o=n(a[2]);return t.rgb(i,s,o,f)}}return new t.Color(e,1)},s={};t.color=function(e){if(e.rgb)return e.rgb();var n=t.Color.names[e];return n||(n=s[e]||(s[e]=i(e))),n}}(),t.Color=function(e,t){this.color=e,this.opacity=t,this.key="solid "+e+" alpha("+t+")"},t.Color.prototype.hsl=function(){return this.rgb().hsl()},t.Color.prototype.brighter=function(e){return this.rgb().brighter(e)},t.Color.prototype.darker=function(e){return this.rgb().darker(e)},t.Color.prototype.relativeLuminance=function(t){var n=this.alphaBlend(t);return.2126*e(n.r)+.7152*e(n.g)+.0722*e(n.b)},t.Color.prototype.alphaBlend=function(e){var n=this.rgb(),r=n.a;if(1===r)return this;e=e?t.color(e).alphaBlend():t.Color.names.white,e=e.rgb();var i=1-r;return t.rgb(r*n.r+i*e.r,r*n.g+i*e.g,r*n.b+i*e.b,1)},t.Color.prototype.rgbDecimal=function(e){var t=this.alphaBlend(e);return t.r<<16|t.g<<8|t.b},t.Color.prototype.isDark=function(){return this.rgbDecimal()<8388607.5},t.Color.prototype.contrastRatioTo=function(e){var t=e.alphaBlend(),n=this.alphaBlend(t),r=t.relativeLuminance(),i=n.relativeLuminance();return(Math.max(r,i)+.05)/(Math.min(r,i)+.05)},t.rgb=function(e,n,r,i){return new t.Color.Rgb(e,n,r,4==arguments.length?i:1)},t.Color.Rgb=function(e,n,r,i){t.Color.call(this,i?"rgb("+e+","+n+","+r+")":"none",i),this.r=e,this.g=n,this.b=r,this.a=i},t.Color.Rgb.prototype=t.extend(t.Color),t.Color.Rgb.prototype.red=function(e){return t.rgb(e,this.g,this.b,this.a)},t.Color.Rgb.prototype.green=function(e){return t.rgb(this.r,e,this.b,this.a)},t.Color.Rgb.prototype.blue=function(e){return t.rgb(this.r,this.g,e,this.a)},t.Color.Rgb.prototype.alpha=function(e){return t.rgb(this.r,this.g,this.b,e)},t.Color.Rgb.prototype.rgb=function(){return this},t.Color.Rgb.prototype.brighter=function(e){e=Math.pow(.7,null!=e?e:1);var n=this.r,r=this.g,i=this.b,s=30;return!n&&!r&&!i?t.rgb(s,s,s,this.a):(n&&s>n&&(n=s),r&&s>r&&(r=s),i&&s>i&&(i=s),t.rgb(Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(r/e)),Math.min(255,Math.floor(i/e)),this.a))},t.Color.Rgb.prototype.darker=function(e){return e=Math.pow(.7,null!=e?e:1),t.rgb(Math.max(0,Math.floor(e*this.r)),Math.max(0,Math.floor(e*this.g)),Math.max(0,Math.floor(e*this.b)),this.a)},t.Color.Rgb.prototype.hsl=function(){var e,n,r=this.r/255,i=this.g/255,s=this.b/255,o=Math.max(r,i,s),u=Math.min(r,i,s),a=(o+u)/2;if(o===u)e=n=0;else{var f=o-u;n=a>.5?f/(2-o-u):f/(o+u);switch(o){case r:e=(i-s)/f+(s>i?6:0);break;case i:e=(s-r)/f+2;break;case s:e=(r-i)/f+4}e/=6}return t.hsl(360*e,n,a,this.a)},t.Color.Rgb.prototype.complementary=function(){return this.hsl().complementary().rgb()},t.hsl=function(e,n,r,i){return new t.Color.Hsl(e,n,r,4==arguments.length?i:1)},t.Color.Hsl=function(e,n,r,i){t.Color.call(this,"hsl("+e+","+100*n+"%,"+100*r+"%)",i),this.h=e,this.s=n,this.l=r,this.a=i},t.Color.Hsl.prototype=t.extend(t.Color),t.Color.Hsl.prototype.hsl=function(){return this},t.Color.Hsl.prototype.hue=function(e){return t.hsl(e,this.s,this.l,this.a)},t.Color.Hsl.prototype.saturation=function(e){return t.hsl(this.h,e,this.l,this.a)},t.Color.Hsl.prototype.lightness=function(e){return t.hsl(this.h,this.s,e,this.a)},t.Color.Hsl.prototype.alpha=function(e){return t.hsl(this.h,this.s,this.l,e)},t.Color.Hsl.prototype.complementary=function(){return t.hsl((this.h+180)%360,1-this.s,1-this.l,this.a)},t.Color.Hsl.prototype.rgb=function(){function e(e){return e>360?e-=360:0>e&&(e+=360),60>e?u+(o-u)*e/60:180>e?o:240>e?u+(o-u)*(240-e)/60:u}function n(t){return Math.round(255*e(t))}var r=this.h,i=this.s,s=this.l;r%=360,0>r&&(r+=360),i=Math.max(0,Math.min(i,1)),s=Math.max(0,Math.min(s,1));var o=.5>=s?s*(1+i):s+i-s*i,u=2*s-o;return t.rgb(n(r+120),n(r),n(r-120),this.a)},t.Color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:t.Color.transparent=t.rgb(0,0,0,0)},!function(){var e=t.Color.names;e.none=e.transparent;for(var n in e)e[n]=t.color(e[n])}(),t.colors=function(){var e=t.Scale.ordinal();return e.range.apply(e,arguments),e},t.Colors={},t.Colors.category10=function(){var e=t.colors("#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf");return e.domain.apply(e,arguments),e},t.Colors.category20=function(){var e=t.colors("#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5");return e.domain.apply(e,arguments),e},t.Colors.category19=function(){var e=t.colors("#9c9ede","#7375b5","#4a5584","#cedb9c","#b5cf6b","#8ca252","#637939","#e7cb94","#e7ba52","#bd9e39","#8c6d31","#e7969c","#d6616b","#ad494a","#843c39","#de9ed6","#ce6dbd","#a55194","#7b4173");return e.domain.apply(e,arguments),e},!function(){function e(e){var n=r(e);if(!n.length)return null;var s,o,a,f=Math.PI,l=n[0];0===l.indexOf("to ")?(o=/^to\s+(?:((top|bottom)(?:\s+(left|right))?)|((left|right)(?:\\s+(top|bottom))?))$/.exec(l),o&&(o[1]?(s=o[2],o[3]&&(s+=" "+o[3])):(s=o[5],o[6]&&(s=o[6]+" "+s)),f=t.radians(u[s]),n.shift())):(a=parseFloat(l),isNaN(a)||(f=a,/^.*?deg$/.test(l)&&(f=t.radians(f)),n.shift()));var c=i(n);switch(c.length){case 0:return null;case 1:return new t.FillStyle.Solid(c[0].color,1)}return new t.FillStyle.LinearGradient(f,c,e)}function n(e){var n=r(e);if(!n.length)return null;var s=i(n);switch(s.length){case 0:return null;case 1:return new t.FillStyle.Solid(s[0].color,1)}return new t.FillStyle.RadialGradient(50,50,s,e)}function r(e){var t={},n=0;e=e.replace(/\b\w+?\(.*?\)/g,function(e){var r="__color"+n++;return t[r]=e,r});var r=e.split(/\s*,\s*/);return r.length?(n&&r.forEach(function(e,n){t.hasOwnProperty(e)&&(r[n]=t[e])}),r):null}function i(e){function n(e){var t=o.length;if(t){for(var n=s,r=(e-n)/(t+1),i=0;t>i;i++)n+=r,o[i].offset=n;o.length=0}}for(var r=[],i=1/0,s=-1/0,o=[],u=0,a=e.length;a>u;){var f=e[u++],l=/^(.+?)\s*([+\-]?[e\.\d]+%)?$/i.exec(f);if(l){var c={color:t.color(l[1])},h=parseFloat(l[2]);isNaN(h)&&(r.length?u===a&&(h=Math.max(s,100)):h=0),r.push(c),isNaN(h)?o.push(c):(c.offset=h,n(h),h>s?s=h:s>h&&(h=s),i>h&&(i=h))}}if(r.length>=2&&(0>i||s>100)){var p=[],d=[];r.forEach(function(e){p.push(e.offset),d.push(e.color)});var v=t.scale.linear().domain(p).range(d);if(0>i){for(;r.length&&r[0].offset<=0;)r.shift();r.unshift({offset:0,color:v(0)})}if(s>100){for(;r.length&&r[r.length-1].offset>=100;)r.pop();r.push({offset:100,color:v(100)})}}return r}t.fillStyle=function(e){if(e.type)return e;var t=e.key||e,n=s[t];return n=n?n.clone():s[t]=o(e),n};var s={},o=function(r){if(r.rgb)return new t.FillStyle.Solid(r.color,r.opacity);var i=/^\s*([a-z\-]+)\(\s*(.*?)\s*\)\s*$/.exec(r);if(i)switch(i[1]){case"linear-gradient":return e(i[2]);case"radial-gradient":return n(i[2])}return new t.FillStyle.Solid(t.color(r))},u={top:0,"top right":45,right:90,"bottom right":135,bottom:180,"bottom left":225,left:270,"top left":315},a=t.FillStyle=function(e){this.type=e,this.key=e};t.extendType(a,new t.Color("none",1)),a.prototype.rgb=function(){var e=t.color(this.color);return this.opacity!==e.opacity&&(e=e.alpha(this.opacity)),e},a.prototype.alphaBlend=function(e){return this.rgb().alphaBlend(e)},a.prototype.rgbDecimal=function(e){return this.rgb().rgbDecimal(e)},a.prototype.isDark=function(){return this.rgb().isDark()};var f=t.FillStyle.Solid=function(e,t){a.call(this,"solid"),e.rgb?(this.color=e.color,this.opacity=e.opacity):(this.color=e,this.opacity=t),this.key+=" "+this.color+" alpha("+this.opacity+")"};t.extendType(f,a),f.prototype.alpha=function(e){return new f(this.color,e)},f.prototype.brighter=function(e){return new f(this.rgb().brighter(e))},f.prototype.darker=function(e){return new f(this.rgb().darker(e))},f.prototype.complementary=function(){return new f(this.rgb().complementary())},f.prototype.clone=function(){var e=t.extend(f);return e.type=this.type,e.key=this.key,e.color=this.color,e.opacity=this.opacity,e},t.FillStyle.transparent=new f(t.Color.transparent);var l=0,c=t.FillStyle.Gradient=function(e,t){a.call(this,e),this.id=++l,this.stops=t,t.length&&(this.color=t[0].color.color),this.key+=" stops("+t.map(function(e){var t=e.color;return t.color+" alpha("+t.opacity+") at("+e.offset+")"}).join(", ")+")"};t.extendType(c,a),c.prototype.rgb=function(){return this.stops.length?this.stops[0].color:void 0},c.prototype.alpha=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.alpha(e)}}))},c.prototype.darker=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.darker(e)}}))},c.prototype.brighter=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.brighter(e)}}))},c.prototype.complementary=function(){return this._cloneWithStops(this.stops.map(function(e){return{offset:e.offset,color:e.color.complementary()}}))},c.prototype.alphaBlend=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.alphaBlend(e)}}))},c.prototype.clone=function(){var e=this.constructor,n=t.extend(e);n.constructor=e,n.id=++l,n.type=this.type,n.key=this.key;var r=this.stops;return n.stops=r,r.length&&(n.color=r[0].color.color),this._initClone(n),n};var h=t.FillStyle.LinearGradient=function(e,t){c.call(this,"lineargradient",t),this.angle=e,this.key+=" angle("+e+")"};t.extendType(h,c),h.prototype._cloneWithStops=function(e){return new h(this.angle,e)},h.prototype._initClone=function(e){e.angle=this.angle};var p=t.FillStyle.RadialGradient=function(e,t,n){c.call(this,"radialgradient",n),this.cx=e,this.cy=t,this.key+=" center("+e+","+t+")"};t.extendType(p,c),p.prototype._cloneWithStops=function(e){return new p(this.cx,this.cy,e)},p.prototype._initClone=function(e){e.cx=this.cx,e.cy=this.cy}}(),t.ramp=function(){var e=t.Scale.linear();return e.range.apply(e,arguments),e},t.Scene=t.SvgScene={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml",scale:1,events:["DOMMouseScroll","mousewheel","mousedown","mouseup","mouseover","mouseout","mousemove","click","dblclick","contextmenu"],mousePositionEventSet:{mousedown:1,mouseup:1,mouseover:1,mouseout:1,mousemove:1,click:1,dblclick:1,contextmenu:1},implicit:{svg:{"shape-rendering":"auto","pointer-events":"painted",x:0,y:0,dy:0,"text-anchor":"start",transform:"translate(0,0)",fill:"none","fill-opacity":1,stroke:"none","stroke-opacity":1,"stroke-width":1.5,"stroke-linejoin":"miter","stroke-linecap":"butt","stroke-miterlimit":8,"stroke-dasharray":"none"},css:{font:"10px sans-serif"}}},t.SvgScene.updateAll=function(e){if(e.length&&e[0].reverse&&"line"!==e.type&&"area"!==e.type){for(var t=Object.create(e),n=0,r=e.length-1;r>=0;n++,r--)t[n]=e[r];e=t}this.removeSiblings(this[e.type](e))},t.SvgScene.create=function(e){return document.createElementNS(this.svg,e)},t.SvgScene.expect=function(e,t,n,r,i,s){var o;e&&(o=e.tagName,"defs"===o?(e=e.nextSibling,e&&(o=e.tagName)):"a"===o&&(e=e.firstChild));if(e){if(o!==t){var u=this.create(t);e.parentNode.replaceChild(u,e),e=u}}else e=this.create(t);return i&&this.setAttributes(e,i),s&&this.setStyle(e,s),e},t.SvgScene.setAttributes=function(e,t){var n=this.implicit.svg,r=e.__attributes__;r===t&&(r=null);for(var i in t){var s=t[i];r&&s===r[i]||(null==s||s==n[i]?e.removeAttribute(i):e.setAttribute(i,s))}e.__attributes__=t},t.SvgScene.setStyle=function(e,t){var n=this.implicit.css,r=e.__style__;r===t&&(r=null);for(var i in t){var s=t[i];r&&s===r[i]||(null==s||s==n[i]?e.style.removeProperty(i):e.style[i]=s)}e.__style__=t},t.SvgScene.append=function(e,t,n){return e.$scene={scenes:t,index:n},e=this.title(e,t[n]),e.parentNode||t.$g.appendChild(e),e.nextSibling},t.SvgScene.title=function(e,t){var n=e.parentNode;n&&"a"!=n.tagName&&(n=null);if(t.title){n||(n=this.create("a"),n.setAttributeNS(this.xlink,"xlink:href",""),e.parentNode&&e.parentNode.replaceChild(n,e),n.appendChild(e)),n.setAttributeNS(this.xlink,"xlink:title",t.title);for(var r=null,i=e.firstChild;null!=i;i=i.nextSibling)if("title"==i.nodeName){r=i;break}return r?r.removeChild(r.firstChild):(r=this.create("title"),e.appendChild(r)),r.appendChild(document.createTextNode(t.title)),n}return n&&n.parentNode.replaceChild(e,n),e},t.SvgScene.dispatch=t.listener(function(e){var n=e.target.$scene;if(n){var r=e.type;switch(r){case"DOMMouseScroll":r="mousewheel",e.wheel=-480*e.detail;break;case"mousewheel":e.wheel=(window.opera?12:1)*e.wheelDelta}t.Mark.dispatch(r,n.scenes,n.index,e)&&(e.preventDefault(),e.stopPropagation())}}),t.SvgScene.removeSiblings=function(e){for(;e;){var t=e.nextSibling;"defs"!==e.nodeName&&e.parentNode.removeChild(e),e=t}},t.SvgScene.undefined=function(){},!function(){var e={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},n={shortdash:[3,1],shortdot:[1,1],shortdashdot:[3,1,1,1],shortdashdotdot:[3,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};t.SvgScene.isStandardDashStyle=function(e){return n.hasOwnProperty(e)},t.SvgScene.translateDashStyleAlias=function(t){return e.hasOwnProperty(t)?e[t]:t},t.SvgScene.parseDasharray=function(e){var t=e.strokeDasharray;if(t&&"none"!==t){t=this.translateDashStyleAlias(t);var r=n[t];t=r?r:t.split(/[\s,]+/);var i=e.lineWidth,s=e.lineCap||"butt",o="butt"===s;t=t.map(function(e,t){return e=+e,o||(t%2?e++:e-=1),0>=e&&(e=.001),e*i/this.scale},this).join(" ")}else t=null;return t}}(),!function(){var e=/^url\(#/,n=1,r=Math.PI/2,i=r/2,s=Math.SQRT2/2,o=Math.abs,u=Math.sin,a=Math.cos,f=function(e){return o(e)<=1e-12?0:e};t.SvgScene.addFillStyleDefinition=function(t,r){if(r.type&&"solid"!==r.type&&!e.test(r.color)){var i=t.mark.root,s=i.__fillStyleMap__||(i.__fillStyleMap__={}),o=r.key,u=s[o];if(!u){u=s[o]="__pvGradient"+n++;var a=l.call(this,t,r,u);i.scene.$defs.appendChild(a)}r.color="url(#"+u+")"}};var l=function(e,t,n){var l="lineargradient"===t.type,c=this.create(l?"linearGradient":"radialGradient");c.setAttribute("id",n);if(l){var h=t.angle-r,p=o(h%r)-i,d=o(s*a(p)),v=d*a(h),m=d*u(h);c.setAttribute("x1",f(.5-v)),c.setAttribute("y1",f(.5-m)),c.setAttribute("x2",f(.5+v)),c.setAttribute("y2",f(.5+m))}for(var g=t.stops,y=g.length,b=0;y>b;b++){var w=g[b],E=c.appendChild(this.create("stop")),S=w.color;E.setAttribute("offset",w.offset+"%"),E.setAttribute("stop-color",S.color),E.setAttribute("stop-opacity",S.opacity+"")}return c}}(),t.SvgScene.pathBasis=function(){function e(e,t,n,r,i){return{x:e[0]*t.left+e[1]*n.left+e[2]*r.left+e[3]*i.left,y:e[0]*t.top+e[1]*n.top+e[2]*r.top+e[3]*i.top}}var t=[[1/6,2/3,1/6,0],[0,2/3,1/3,0],[0,1/3,2/3,0],[0,1/6,2/3,1/6]],n=function(n,r,i,s){var o=e(t[1],n,r,i,s),u=e(t[2],n,r,i,s),a=e(t[3],n,r,i,s);return"C"+o.x+","+o.y+","+u.x+","+u.y+","+a.x+","+a.y};return n.segment=function(n,r,i,s){var o=e(t[0],n,r,i,s),u=e(t[1],n,r,i,s),a=e(t[2],n,r,i,s),f=e(t[3],n,r,i,s);return["M"+o.x+","+o.y,"C"+u.x+","+u.y+","+a.x+","+a.y+","+f.x+","+f.y]},n}(),t.SvgScene.curveBasis=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;if(2>=r)return"";var i="",s=e[t],o=s,u=s,a=e[t+1];i+=this.pathBasis(s,o,u,a);for(var f=t+2;n>=f;f++)s=o,o=u,u=a,a=e[f],i+=this.pathBasis(s,o,u,a);return i+=this.pathBasis(o,u,a,a),i+=this.pathBasis(u,a,a,a),i},t.SvgScene.curveBasisSegments=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;if(2>=r)return"";var i=[],s=e[t],o=s,u=s,a=e[t+1],f=this.pathBasis.segment(s,o,u,a);s=o,o=u,u=a,a=e[t+2],f[1]+=this.pathBasis(s,o,u,a),i.push(f);for(var l=t+3;n>=l;l++)s=o,o=u,u=a,a=e[l],i.push(this.pathBasis.segment(s,o,u,a));var c=this.pathBasis.segment(o,u,a,a);return c[1]+=this.pathBasis(u,a,a,a),i.push(c),i},t.SvgScene.curveHermite=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;var s=t.length;if(1>s||i!==s&&i!==s+2)return"";var o=i!==s,u="",a=e[n],f=e[n+1],l=t[0],c=l,h=n+1;o&&(u+="Q"+(f.left-2*l.x/3)+","+(f.top-2*l.y/3)+","+f.left+","+f.top,a=e[n+1],h=n+2);if(s>1){c=t[1],f=e[h],h++,u+="C"+(a.left+l.x)+","+(a.top+l.y)+","+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top;for(var p=2;s>p;p++,h++)f=e[h],c=t[p],u+="S"+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top}if(o){var d=e[h];u+="Q"+(f.left+2*c.x/3)+","+(f.top+2*c.y/3)+","+d.left+","+d.top}return u},t.SvgScene.curveHermiteSegments=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;var s=t.length;if(1>s||i!==s&&i!==s+2)return[];var o=i!==s,u=[],a=e[n],f=a,l=t[0],c=l,h=n+1;o&&(f=e[n+1],u.push(["M"+a.left+","+a.top,"Q"+(f.left-2*c.x/3)+","+(f.top-2*c.y/3)+","+f.left+","+f.top]),h=n+2);for(var p=1;s>p;p++,h++)a=f,l=c,f=e[h],c=t[p],u.push(["M"+a.left+","+a.top,"C"+(a.left+l.x)+","+(a.top+l.y)+","+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top]);if(o){var d=e[h];u.push(["M"+f.left+","+f.top,"Q"+(f.left+2*c.x/3)+","+(f.top+2*c.y/3)+","+d.left+","+d.top])}return u},t.SvgScene.cardinalTangents=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;for(var s=[],o=(1-t)/2,u=e[n],a=e[n+1],f=e[n+2],l=n+3;r>=l;l++)s.push({x:o*(f.left-u.left),y:o*(f.top-u.top)}),u=a,a=f,f=e[l];return s.push({x:o*(f.left-u.left),y:o*(f.top-u.top)}),s},t.SvgScene.curveCardinal=function(e,t,n,r){var i;return null==n?(i=e.length,n=0,r=i-1):i=r-n+1,2>=i?"":this.curveHermite(e,this.cardinalTangents(e,t,n,r),n,r)},t.SvgScene.curveCardinalSegments=function(e,t,n,r){var i;return null==n?(i=e.length,n=0,r=i-1):i=r-n+1,2>=i?"":this.curveHermiteSegments(e,this.cardinalTangents(e,t,n,r),n,r)},t.SvgScene.monotoneTangents=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;var i,s=[],o=[],u=[],a=[],f=0;for(f=0;r-1>f;f++){i=t+f;var l=e[i+1].left-e[i].left;o[f]=Math.abs(l)<=1e-12?0:(e[i+1].top-e[i].top)/l}u[0]=o[0],a[0]=e[t+1].left-e[t].left;for(f=1,i=t+f;r-1>f;f++,i++)u[f]=(o[f-1]+o[f])/2,a[f]=(e[i+1].left-e[i-1].left)/2;u[f]=o[f-1],a[f]=e[i].left-e[i-1].left;for(f=0;r-1>f;f++)0==o[f]&&(u[f]=0,u[f+1]=0);for(f=0;r-1>f;f++)if(!(Math.abs(u[f])<1e-5||Math.abs(u[f+1])<1e-5)){var c=u[f]/o[f],h=u[f+1]/o[f],p=c*c+h*h;if(p>9){var d=3/Math.sqrt(p);u[f]=d*c*o[f],u[f+1]=d*h*o[f]}}for(var v,m=0;r>m;m++)v=1+u[m]*u[m],s.push({x:a[m]/3/v,y:u[m]*a[m]/3/v});return s},t.SvgScene.curveMonotone=function(e,t,n){var r;return null==t?(r=e.length,t=0,n=r-1):r=n-t+1,2>=r?"":this.curveHermite(e,this.monotoneTangents(e,t,n),t,n)},t.SvgScene.curveMonotoneSegments=function(e,t,n){var r;return null==t?(r=e.length,t=0,n=r-1):r=n-t+1,2>=r?"":this.curveHermiteSegments(e,this.monotoneTangents(e,t,n),t,n)},t.SvgScene.area=function(e){var t=e.$g.firstChild,n=e.length;if(!n)return t;var r=e[0];return"smart"===r.segmented?this.areaSegmentedSmart(t,e):r.segmented?this.areaSegmentedFull(t,e):this.areaFixed(t,e,0,n-1,!0)},t.SvgScene.areaFixed=function(e,t,n,r,i){var s=r-n+1;if(1===s)return this.lineAreaDotAlone(e,t,n);var o=t[n];if(!o.visible)return e;var u=o.fillStyle,a=o.strokeStyle;if(!u.opacity&&!a.opacity)return e;this.addFillStyleDefinition(t,u),this.addFillStyleDefinition(t,a);var f=!1,l=!1,c=!1,h=!1,p=!1;switch(o.interpolate){case"basis":f=!0;break;case"cardinal":l=!0;break;case"monotone":c=!0;break;case"step-after":h=!0;break;case"step-before":p=!0}for(var d,v,m=f||l||c,g=[],y=n;r>=y;y++){d=t[y];if(d.width||d.height){for(var b=y+1;r>=b;b++){v=t[b];if(!v.width&&!v.height)break}y>n&&!h&&y--,r>=b&&!p&&b++;var w=m&&b-y>2?this.areaPathCurve:this.areaPathStraight;g.push(w.call(this,t,y,b-1,o)),y=b-1}}if(!g.length)return e;var E=a.opacity;return e=this.expect(e,"path",t,n,{"shape-rendering":o.antialias?null:"crispEdges","pointer-events":i?o.events:"none",cursor:o.cursor,d:"M"+g.join("ZM")+"Z",fill:u.color,"fill-opacity":u.opacity||null,stroke:a.color,"stroke-opacity":E||null,"stroke-width":E?o.lineWidth/this.scale:null,"stroke-linecap":o.lineCap,"stroke-linejoin":o.lineJoin,"stroke-miterlimit":o.strokeMiterLimit,"stroke-dasharray":E?this.parseDasharray(o):null}),o.svg&&this.setAttributes(e,o.svg),o.css&&this.setStyle(e,o.css),this.append(e,t,n)},t.SvgScene.areaSegmentedSmart=function(e,t){return this.eachLineAreaSegment(e,t,function(e,t,n,r){var i=this.areaSegmentPaths(t,n,r),s=i.top,o=i.bottom,u=n,a={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(e,t,a,function(e,t,n,r,i,a){var f=t[n],l=f.fillStyle,c=f.strokeStyle;this.addFillStyleDefinition(t,l),this.addFillStyleDefinition(t,c);if(n===r)return this.lineAreaDotAlone(e,t,n);var h=this.areaJoinPaths(s,o,n-u,r-u-1),p=c.opacity,d={"shape-rendering":f.antialias?null:"crispEdges","pointer-events":a,cursor:f.cursor,d:h,fill:l.color,"fill-opacity":l.opacity||null,stroke:c.color,"stroke-opacity":p||null,"stroke-width":p?f.lineWidth/this.scale:null,"stroke-linecap":f.lineCap,"stroke-linejoin":f.lineJoin,"stroke-miterlimit":f.strokeMiterLimit,"stroke-dasharray":p?this.parseDasharray(f):null};return e=this.expect(e,"path",t,n,d,f.css),this.append(e,t,n)})})},t.SvgScene.areaSegmentPaths=function(e,t,n){return this.areaSegmentCurvePaths(e,t,n)||this.areaSegmentStraightPaths(e,t,n)},t.SvgScene.areaSegmentCurvePaths=function(e,t,n){var r=n-t+1,i=e[t],s="basis"===i.interpolate,o=!s&&"cardinal"===i.interpolate;if(s||o||"monotone"==i.interpolate){for(var u=[],a=[],f=0;r>f;f++){var l=e[t+f],c=e[n-f];u.push(l),a.push({left:c.left+c.width,top:c.top+c.height})}var h,p;s?(h=this.curveBasisSegments(u),p=this.curveBasisSegments(a)):o?(h=this.curveCardinalSegments(u,i.tension),p=this.curveCardinalSegments(a,i.tension)):(h=this.curveMonotoneSegments(u),p=this.curveMonotoneSegments(a));if(h||h.length)return{from:t,top:h,bottom:p}}},t.SvgScene.areaSegmentStraightPaths=function(e,t,n){for(var r=[],i=[],s=n,o=t;s>t;t++,n--){var u=e[t],a=e[n],f=["M"+u.left+","+u.top],l=["M"+(a.left+a.width)+","+(a.top+a.height)],c=e[t+1],h=e[n-1];switch(u.interpolate){case"step-before":f.push("V"+c.top+"H"+c.left);break;case"step-after":f.push("H"+c.left+"V"+c.top);break;default:f.push("L"+c.left+","+c.top)}l.push("L"+(h.left+h.width)+","+(h.top+h.height)),r.push(f),i.push(l)}return{from:o,top:r,bottom:i}},t.SvgScene.areaJoinPaths=function(e,t,n,r){for(var i="",s="",o=e.length,u=n,a=o-1-r;r>=u;u++,a++){var f,l,c=e[u],h=t[a];u===n?(f=c.join(""),l="L"+h[0].substr(1)+h[1]):(f=c[1],l=h[1]),i+=f,s+=l}return i+s+"Z"},t.SvgScene.areaSegmentedFull=function(e,t){var n,r,i=t.length,s=this.areaSegmentCurvePaths(t,0,i-1);s&&(n=s.top,r=s.bottom);for(var o=(t[0],0);i-1>o;o++){var u=t[o],a=t[o+1];if(u.visible&&a.visible){var f=u.fillStyle,l=u.strokeStyle;if(f.opacity||l.opacity){var c;if(n){var h=n[o].join(""),p="L"+r[i-o-2].join("").substr(1);c=h+p+"Z"}else{var d=u,v=a;switch(u.interpolate){case"step-before":d=a;break;case"step-after":v=u}c="M"+u.left+","+d.top+"L"+a.left+","+v.top+"L"+(a.left+a.width)+","+(v.top+v.height)+"L"+(u.left+u.width)+","+(d.top+d.height)+"Z"}var m={"shape-rendering":u.antialias?null:"crispEdges","pointer-events":u.events,cursor:u.cursor,d:c,fill:f.color,"fill-opacity":f.opacity||null,stroke:l.color,"stroke-opacity":l.opacity||null,"stroke-width":l.opacity?u.lineWidth/this.scale:null};e=this.expect(e,"path",t,o,m),u.svg&&this.setAttributes(e,u.svg),u.css&&this.setStyle(e,u.css),e=this.append(e,t,o)}}}return e},t.SvgScene.areaPathStraight=function(e,t,n,r){for(var i=[],s=[],o=n;o>=t;t++,n--){var u=e[t],a=e[n],f=u.left+","+u.top,l=a.left+a.width+","+(a.top+a.height);if(o>t){var c=e[t+1],h=e[n-1];switch(r.interpolate){case"step-before":f+="V"+c.top,l+="H"+(h.left+h.width);break;case"step-after":f+="H"+c.left,l+="V"+(h.top+h.height)}}i.push(f),s.push(l)}return i.concat(s).join("L")},t.SvgScene.areaPathCurve=function(e,t,n,r){for(var i,s,o=[],u=[],a=n;a>=t;t++,n--){var f=e[n];o.push(e[t]),u.push({left:f.left+f.width,top:f.top+f.height})}switch(r.interpolate){case"basis":i=this.curveBasis(o),s=this.curveBasis(u);break;case"cardinal":i=this.curveCardinal(o,r.tension),s=this.curveCardinal(u,r.tension);break;default:i=this.curveMonotone(o),s=this.curveMonotone(u)}return o[0].left+","+o[0].top+i+"L"+u[0].left+","+u[0].top+s},t.SvgScene.minBarWidth=1,t.SvgScene.minBarHeight=1,t.SvgScene.minBarLineWidth=.2,t.SvgScene.bar=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(!(!r.visible||Math.abs(r.width)<=1e-10||Math.abs(r.height)<=1e-10)){r.width<this.minBarWidth&&(r.width=this.minBarWidth),r.height<this.minBarHeight&&(r.height=this.minBarHeight);var i=r.fillStyle,s=r.strokeStyle;if(i.opacity||s.opacity){this.addFillStyleDefinition(e,i),this.addFillStyleDefinition(e,s);var o;s.opacity?(o=r.lineWidth,o=1e-10>o?0:Math.max(this.minBarLineWidth,o/this.scale)):o=null,t=this.expect(t,"rect",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:i.color,"fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":s.opacity||null,"stroke-width":o,"stroke-linecap":r.lineCap,"stroke-dasharray":s.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},t.SvgScene.dot=function(e){for(var n=e.$g.firstChild,r=0,i=e.length;i>r;r++){var s=e[r];if(s.visible){var o=s.fillStyle,u=o.opacity,a=s.strokeStyle,f=a.opacity;if(u||f){this.addFillStyleDefinition(e,o),this.addFillStyleDefinition(e,a);var l={"shape-rendering":s.antialias?null:"crispEdges","pointer-events":s.events,cursor:s.cursor,fill:o.color,"fill-opacity":u||null,stroke:a.color,"stroke-opacity":f||null,"stroke-width":f?s.lineWidth/this.scale:null,"stroke-linecap":s.lineCap,"stroke-dasharray":f?this.parseDasharray(s):null},c=s.shape||"circle",h=s.aspectRatio,p=s.shapeAngle,d=null;if("circle"!==c&&this.hasSymbol(c)){var v=s.shapeRadius,m=v,g=v;if(h>0&&1!==h){var y=1/Math.sqrt(h),b=h*y;m*=b,g*=y}l.d=this.renderSymbol(c,s,m,g),c="path",d="translate("+s.left+","+s.top+") ",p&&(d+="rotate("+t.degrees(p)+") ")}else 1===h?(c="circle",l.cx=s.left,l.cy=s.top,l.r=s.shapeRadius):(c="ellipse",l.cx=l.cy=0,d="translate("+s.left+","+s.top+") ",p&&(d+="rotate("+t.degrees(p)+") "),l.rx=s._width/2,l.ry=s._height/2);d&&(l.transform=d),n=this.expect(n,c,e,r,l),s.svg&&this.setAttributes(n,s.svg),s.css&&this.setStyle(n,s.css),n=this.append(n,e,r)}}}return n},!function(e){var n={};e.registerSymbol=function(t,r){return n[t.toLowerCase()]=r,e},e.renderSymbol=function(t,r,i,s){return n[t].call(e,r,t,i,s)},e.hasSymbol=function(e){return n.hasOwnProperty(e)},e.symbols=function(){return t.keys(n)};var r=2/Math.sqrt(3);e.registerSymbol("circle",function(){throw new Error("Not implemented as a symbol")}).registerSymbol("cross",function(e,t,n,r){var i=(e.shapeRadius,-n),s=-r;return"M"+i+","+s+"L"+n+","+r+"M"+n+","+s+"L"+i+","+r}).registerSymbol("triangle",function(e,t,n,i){var s=i,o=n*r,u=-i,a=-o;return"M0,"+s+"L"+o+","+u+" "+a+","+u+"Z"}).registerSymbol("diamond",function(e,t,n,r){var i=n*Math.SQRT2,s=r*Math.SQRT2,o=-i,u=-s;return"M0,"+u+"L"+i+",0 0,"+s+" "+o+",0Z"}).registerSymbol("square",function(e,t,n,r){var i=-n,s=-r;return"M"+i+","+s+"L"+n+","+s+" "+n+","+r+" "+i+","+r+"Z"}).registerSymbol("tick",function(e,t,n,r){var i=-r*r;return"M0,0L0,"+i}).registerSymbol("bar",function(e,t,n,r){var i=r*r/2;return"M0,"+i+"L0,"+ -i})}(t.SvgScene),t.SvgScene.image=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){t=this.fill(t,e,n);if(r.image){t=this.expect(t,"foreignObject",e,n,{cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css);var i=t.firstChild||t.appendChild(document.createElementNS(this.xhtml,"canvas"));i.$scene={scenes:e,index:n},i.style.width=r.width,i.style.height=r.height,i.width=r.imageWidth,i.height=r.imageHeight,i.getContext("2d").putImageData(r.image,0,0)}else t=this.expect(t,"image",e,n,{preserveAspectRatio:"none",cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t.setAttributeNS(this.xlink,"xlink:href",r.url);t=this.append(t,e,n),t=this.stroke(t,e,n)}}return t},t.SvgScene.label=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.textStyle;if(i.opacity&&r.text){var s=0,o=0,u=0,a="start";switch(r.textBaseline){case"middle":u=".35em";break;case"top":u=".71em",o=r.textMargin;break;case"bottom":o="-"+r.textMargin}switch(r.textAlign){case"right":a="end",s="-"+r.textMargin;break;case"center":a="middle";break;case"left":s=r.textMargin}t=this.expect(t,"text",e,n,{"pointer-events":r.events,cursor:r.cursor,x:s,y:o,dy:u,transform:"translate("+r.left+","+r.top+")"+(r.textAngle?" rotate("+180*r.textAngle/Math.PI+")":"")+(1!=this.scale?" scale("+1/this.scale+")":""),fill:i.color,"fill-opacity":i.opacity||null,"text-anchor":a},{font:r.font,"text-shadow":r.textShadow,"text-decoration":r.textDecoration}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t.firstChild?t.firstChild.nodeValue=r.text:t.appendChild(document.createTextNode(r.text)),t=this.append(t,e,n)}}}return t},t.SvgScene.line=function(e){var t=e.$g.firstChild,n=e.length;if(!n)return t;var r=e[0];return"smart"===r.segmented?this.lineSegmentedSmart(t,e):2>n?t:r.segmented?this.lineSegmentedFull(t,e):this.lineFixed(t,e)},t.SvgScene.lineFixed=function(e,t){var n=t.length;if(1===n)return this.lineAreaDotAlone(e,t,0);var r=t[0];if(!r.visible)return e;var i=r.fillStyle,s=r.strokeStyle;if(!i.opacity&&!s.opacity)return e;this.addFillStyleDefinition(t,i),this.addFillStyleDefinition(t,s);var o="M"+r.left+","+r.top,u=n>2;if(u)switch(r.interpolate){case"basis":o+=this.curveBasis(t);break;case"cardinal":o+=this.curveCardinal(t,r.tension);break;case"monotone":o+=this.curveMonotone(t);break;default:u=!1}if(!u)for(var a=1;n>a;a++)o+=this.lineSegmentPath(t[a-1],t[a]);var f=s.opacity,l={"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,d:o,fill:i.color,"fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":f||null,"stroke-width":f?r.lineWidth/this.scale:null,"stroke-linecap":r.lineCap,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-dasharray":f?this.parseDasharray(r):null};return e=this.expect(e,"path",t,0,l,r.css),r.svg&&this.setAttributes(e,r.svg),this.append(e,t,0)},t.SvgScene.lineSegmentedSmart=function(e,t){return this.eachLineAreaSegment(e,t,function(e,t,n,r){var i=this.lineSegmentPaths(t,n,r),s=n,o={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(e,t,o,function(e,t,n,r,o,u){var a=t[n],f=a.fillStyle;this.addFillStyleDefinition(t,f);var l=a.strokeStyle;this.addFillStyleDefinition(t,l);if(n===r)return this.lineAreaDotAlone(e,t,n);var c=this.lineJoinPaths(i,n-s,r-s-1),h=l.opacity,p={"shape-rendering":a.antialias?null:"crispEdges","pointer-events":u,cursor:a.cursor,d:c,fill:f.color,"fill-opacity":f.opacity||null,stroke:l.color,"stroke-opacity":h||null,"stroke-width":h?a.lineWidth/this.scale:null,"stroke-linecap":a.lineCap,"stroke-linejoin":a.lineJoin,"stroke-miterlimit":a.strokeMiterLimit,"stroke-dasharray":h?this.parseDasharray(a):null};return e=this.expect(e,"path",t,n,p,a.css),this.append(e,t,n)})})},t.SvgScene.lineSegmentedFull=function(e,n){var r,i=n[0];switch(i.interpolate){case"basis":r=this.curveBasisSegments(n);break;case"cardinal":r=this.curveCardinalSegments(n,i.tension);break;case"monotone":r=this.curveMonotoneSegments(n)}for(var s=0,o=n.length-1;o>s;s++){var u=n[s],a=n[s+1];if(u.visible&&a.visible){var f=u.strokeStyle,l=t.FillStyle.transparent;if(f.opacity){var c;"linear"==u.interpolate&&"miter"==u.lineJoin?(l=f,f=t.FillStyle.transparent,c=this.pathJoin(n[s-1],u,a,n[s+2])):c=r?r[s].join(""):"M"+u.left+","+u.top+this.lineSegmentPath(u,a),e=this.expect(e,"path",n,s,{"shape-rendering":u.antialias?null:"crispEdges","pointer-events":u.events,cursor:u.cursor,d:c,fill:l.color,"fill-opacity":l.opacity||null,stroke:f.color,"stroke-opacity":f.opacity||null,"stroke-width":f.opacity?u.lineWidth/this.scale:null,"stroke-linejoin":u.lineJoin}),u.svg&&this.setAttributes(e,u.svg),u.css&&this.setStyle(e,u.css),e=this.append(e,n,s)}}}return e},t.SvgScene.lineSegmentPath=function(e,t){var n=1;switch(e.interpolate){case"polar-reverse":n=0;case"polar":var r=t.left-e.left,i=t.top-e.top,s=1-e.eccentricity,o=Math.sqrt(r*r+i*i)/(2*s);if(0>=s||s>1)break;return"A"+o+","+o+" 0 0,"+n+" "+t.left+","+t.top;case"step-before":return"V"+t.top+"H"+t.left;case"step-after":return"H"+t.left+"V"+t.top}return"L"+t.left+","+t.top},t.SvgScene.lineSegmentPaths=function(e,t,n){var r,i=e[t];switch(i.interpolate){case"basis":r=this.curveBasisSegments(e,t,n);break;case"cardinal":r=this.curveCardinalSegments(e,i.tension,t,n);break;case"monotone":r=this.curveMonotoneSegments(e,t,n)}if(!r||!r.length){r=[];for(var s=t+1;n>=s;s++){var o=e[s-1],u=e[s];r.push(["M"+o.left+","+o.top,this.lineSegmentPath(o,u)])}}return r},t.strokeMiterLimit=4,t.SvgScene.pathJoin=function(e,n,r,i){var s,o,u,a=[],f=n.lineWidth/this.scale,l=t.vector(n.left,n.top),c=t.vector(r.left,r.top),h=c.minus(l),p=h.perp().norm(),d=p.times(f/2),v=l.plus(d),m=l.minus(d),g=c.plus(d),y=c.minus(d);if(e&&e.visible){var b=t.vector(e.left,e.top),w=l.minus(b),E=w.perp().norm(),S=E.plus(p).norm(),x=this.lineIntersect(l,S,v,h),T=this.lineIntersect(l,S,m,h);u=x.minus(T).length();var N=e.lineWidth/this.scale,C=(f+N)/2;o=u/C,s=n.strokeMiterLimit||t.strokeMiterLimit;if(s>=o)a.push(T,x);else{var k=h.times(-1),L=w.norm().plus(k.norm()).norm(),A=l.plus(L.times(C/2));L.dot(p)>=0?a.push(T,A,v):a.push(m,A,x)}}else a.push(m,v);if(i&&i.visible){var O=t.vector(i.left,i.top),M=O.minus(c),_=M.perp().norm(),D=_.plus(p).norm(),P=this.lineIntersect(c,D,g,h),H=this.lineIntersect(c,D,y,h);u=P.minus(H).length();var B=i.lineWidth/this.scale,j=(B+f)/2;o=u/j,s=r.strokeMiterLimit||t.strokeMiterLimit;if(s>=o)a.push(P,H);else{var F=M.times(-1),I=h.norm().plus(F.norm()).norm(),q=c.plus(I.times(j/2));I.dot(p)>=0?a.push(g,q,H):a.push(P,q,y)}}else a.push(g,y);var R=a.shift();return"M"+R.x+","+R.y+"L"+a.map(function(e){return e.x+","+e.y}).join(" ")},t.SvgScene.lineIntersect=function(e,t,n,r){return e.plus(t.times(n.minus(e).dot(r.perp())/t.dot(r.perp())))},t.SvgScene.lineJoinPaths=function(e,t,n){for(var r=e[t].join(""),i=t+1;n>=i;i++)r+=e[i][1];return r},t.SvgScene.lineAreaDotAlone=function(e){return e},t.Scene.eventsToNumber={"":0,none:0,painted:1,all:2},t.Scene.numberToEvents=["none","painted","all"],t.SvgScene.eachLineAreaSegment=function(e,n,r,i){"function"==typeof r&&(i=r,r=null);var s,o,u,a=t.get(r,"breakOnKeyChange",!1),f=t.get(r,"from")||0,l=t.get(r,"to",n.length-1);a&&(o=[],u=[]);for(var c=f;l>=c;){var h=n[c];if(this.isSceneVisible(h)){s=this.eventsToNumber[h.events]||0,a&&this.lineAreaSceneKey(h,o);for(var p,d=c;;){var v=d+1;if(v>l){p=v;break}var m=n[v];if(!this.isSceneVisible(m)){p=v+1;break}s=Math.max(s,this.eventsToNumber[m.events]||0),d=v;if(a){this.lineAreaSceneKey(m,u);if(!this.equalSceneKeys(o,u)){p=d;break}}}e=i.call(this,e,n,c,d,r,this.numberToEvents[s]),c=p}else c++}return e},t.SvgScene.lineAreaSceneKey=function(e,t){return t[0]=e.fillStyle.key,t[1]=e.strokeStyle.key,t[2]=e.lineWidth,t[3]=e.strokeDasharray||"none",t[4]=e.interpolate,t},t.SvgScene.isSceneVisible=function(e){return e.visible&&(e.fillStyle.opacity>0||e.strokeStyle.opacity>0)},t.SvgScene.equalSceneKeys=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]!==t[n])return!1;return!0},t.SvgScene.panel=function(e){for(var t=e.$g,n=t&&t.firstChild,r=0,i=e.length;i>r;r++){var s=e[r];if(s.visible){if(!e.parent){var o=s.canvas;this.applyCanvasStyle(o),t&&t.parentNode!==o&&(t=o.firstChild,n=t&&t.firstChild),t?n&&"defs"===n.tagName&&(n=n.nextSibling):(t=this.createRootPanelElement(),n=null,this.initRootPanelElement(t,e.mark),o.appendChild(t),e.$defs=t.appendChild(this.create("defs")),e.$g=t),t.setAttribute("width",s.width+s.left+s.right),t.setAttribute("height",s.height+s.top+s.bottom)}var u=null;if("hidden"===s.overflow){var a=this.addPanelClipPath(t,n,e,r,s);u=a.g,e.$g=t=u,n=a.next}n=this.fill(n,e,r);var f=this.scale,l=s.transform,c=s.left+l.x,h=s.top+l.y;this.scale*=l.k;if(s.children.length)for(var p={transform:"translate("+c+","+h+")"+(1!=l.k?" scale("+l.k+")":"")},d=this.getSortedChildScenes(e,r),v=0,m=d.length;m>v;v++){var g=d[v];g.$g=n=this.expect(n,"g",e,r,p),this.updateAll(g),n.parentNode||t.appendChild(n),n=n.nextSibling}this.scale=f,n=this.stroke(n,e,r),u&&(e.$g=t=u.parentNode,n=u.nextSibling)}}return n},t.SvgScene.applyCanvasStyle=function(e){e.style.display="inline-block"},t.SvgScene.createRootPanelElement=function(){return this.create("svg")},t.SvgScene.initRootPanelElement=function(e,t){e.setAttribute("font-size","10px"),e.setAttribute("font-family","sans-serif"),e.setAttribute("fill","none"),e.setAttribute("stroke","none"),e.setAttribute("stroke-width",1.5),this.disableElementSelection(e),this.listenRootPanelElement(e,t)},t.SvgScene.listenRootPanelElement=function(e,t){for(var n=0,r=this.events,i=r.length;i>n;n++)e.addEventListener(r[n],this.dispatch,!1),t._registerBoundEvent(e,r[n],this.dispatch,!1)},t.SvgScene.disableElementSelection=function(e){e.setAttribute("style","-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"),"undefined"!=typeof e.onselectstart&&(e.setAttribute("unselectable","on"),e.onselectstart=function(){return!1})},t.SvgScene.addPanelClipPath=function(e,n,r,i,s){var o=t.id().toString(36),u=this.expect(n,"g",r,i,{"clip-path":"url(#"+o+")"}),a=this.expect(u.firstChild,"clipPath",r,i,{id:o}),f=a.firstChild||a.appendChild(this.create("rect"));return f.setAttribute("x",s.left),f.setAttribute("y",s.top),f.setAttribute("width",s.width),f.setAttribute("height",s.height),a.parentNode||u.appendChild(a),u.parentNode||e.appendChild(u),{g:u,next:a.nextSibling}},t.SvgScene.getSortedChildScenes=function(e,t){var n=e[t].children;return e.mark._zOrderChildCount&&(n=n.slice(0),n.sort(function(e,t){var n=e.mark._zOrder-t.mark._zOrder;return 0===n&&(n=e.childIndex-t.childIndex),n})),n},t.SvgScene.fill=function(e,t,n){var r=t[n],i=r.fillStyle;if(i.opacity||"all"==r.events)this.addFillStyleDefinition(t,i),e=this.expect(e,"rect",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height,fill:i.color,"fill-opacity":i.opacity,stroke:null}),e=this.append(e,t,n);return e},t.SvgScene.stroke=function(e,t,n){var r=t[n],i=r.strokeStyle;if(i.opacity||"all"==r.events)e=this.expect(e,"rect",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":"all"==r.events?"stroke":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:null,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":r.lineWidth/this.scale,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),e=this.append(e,t,n);return e},t.SvgScene.minRuleLineWidth=1,t.SvgScene.rule=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.strokeStyle;if(i.opacity){var s=r.lineWidth;s=1e-10>s?0:Math.max(this.minRuleLineWidth,s/this.scale),t=this.expect(t,"line",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x1:r.left,y1:r.top,x2:r.left+r.width,y2:r.top+r.height,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":s,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},t.SvgScene.wedge=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.fillStyle,s=r.strokeStyle;if(i.opacity||s.opacity){var o,u=r.innerRadius,a=r.outerRadius,f=Math.abs(r.angle);if(f>=2*Math.PI)o=u?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+ -a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+ -u+"A"+u+","+u+" 0 1,1 0,"+u+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+ -a+"A"+a+","+a+" 0 1,1 0,"+a+"Z";else{var l=Math.min(r.startAngle,r.endAngle),c=Math.max(r.startAngle,r.endAngle),h=Math.cos(l),p=Math.cos(c),d=Math.sin(l),v=Math.sin(c);o=u?"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+(f<Math.PI?"0":"1")+",1 "+a*p+","+a*v+"L"+u*p+","+u*v+"A"+u+","+u+" 0 "+(f<Math.PI?"0":"1")+",0 "+u*h+","+u*d+"Z":"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+(f<Math.PI?"0":"1")+",1 "+a*p+","+a*v+"L0,0Z"}this.addFillStyleDefinition(e,i),this.addFillStyleDefinition(e,s),t=this.expect(t,"path",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,transform:"translate("+r.left+","+r.top+")",d:o,fill:i.color,"fill-rule":"evenodd","fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":s.opacity||null,"stroke-width":s.opacity?r.lineWidth/this.scale:null,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-linecap":r.lineCap,"stroke-dasharray":s.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},t.Mark=function(){this.$properties=[],this.$propertiesMap={},this.$handlers={}},t.Mark.prototype.properties={},t.Mark.cast={},t.Mark.prototype.property=function(e,n){return this.hasOwnProperty("properties")||(this.properties=t.extend(this.properties)),this.properties[e]=!0,t.Mark.prototype.propertyMethod(e,!1,t.Mark.cast[e]=n),this},t.Mark.prototype.localProperty=function(e,n){this.hasOwnProperty("properties")||(this.properties=t.extend(this.properties)),this.properties[e]=!0;var r=t.Mark.cast[e];return n&&(t.Mark.cast[e]=r=n),this.propertyMethod(e,!1,r),this},t.Mark.prototype.def=function(e,t){return this.propertyMethod(e,!0),this[e](arguments.length>1?t:null)},t.Mark.prototype.propertyMethod=function(e,n,r){r||(r=t.Mark.cast[e]),this[e]=function(i,s){if(n&&this.scene){var o=this.scene.defs;if(arguments.length)return o[e]={id:null==i?0:t.id(),value:null!=i&&r?r(i):i},this;var u=o[e];return u?u.value:null}if(arguments.length)return this.setPropertyValue(e,i,n,r,!1,s),this;var a=this.instance();return t.propBuildMark===this&&1!==t.propBuilt[e]?(t.propBuilt[e]=1,a[e]=this.evalProperty(this.binds.properties[e])):a[e]}},t.Mark.funPropertyCaller=function(e,n){function r(){var t=e.apply(this,i);return null!=t?n(t):t}var i=t.Mark.stack;return r},t.Mark.prototype.setPropertyValue=function(e,n,r,i,s,o){var u=!r<<1|"function"==typeof n;1&u&&i?n=t.Mark.funPropertyCaller(n,i):null!=n&&i&&(n=i(n));var a=this.$propertiesMap,f=this.$properties,l={name:e,id:t.id(),value:n,type:u,tag:o,proto:null,root:null,_proto:null};l.root=l;var c=a[e];a[e]=l;if(c)for(var h=0,p=f.length;p>h;h++)if(f[h]===c){f.splice(h,1);break}return f.push(l),s&&c&&3===u&&(l.proto=c,l.root=c.root),l},t.Mark.prototype.intercept=function(e,n,r){return this.setPropertyValue(e,n,!1,t.get(r,"noCast")?null:t.Mark.cast[e],!0,t.get(r,"tag")),this},t.Mark.prototype.propertyValue=function(e,t){var n=this.$propertiesMap[e];if(n)return n.value;if(t){if(this.proto){var r=this.proto._propertyValueRecursive(e);if(void 0!==r)return r}return this.defaults._propertyValueRecursive(e)}},t.Mark.prototype._propertyValueRecursive=function(e){var t=this.$propertiesMap[e];return t?t.value:this.proto?this.proto._propertyValueRecursive(e):void 0},t.Mark.stack=[],t.Mark.prototype.property("data").property("visible",Boolean).property("css",Object).property("svg",Object).property("left",Number).property("right",Number).property("top",Number).property("bottom",Number).property("cursor",String).property("title",String).property("reverse",Boolean).property("antialias",Boolean).property("events",t.stringLowerCase).property("id",String),t.Mark.prototype.childIndex=-1,t.Mark.prototype.index=-1,t.Mark.prototype.scale=1,t.Mark.prototype._zOrder=0,t.Mark.prototype.defaults=(new t.Mark).data(function(e){return[e]}).visible(!0).antialias(!0).events("painted"),t.Mark.prototype.extend=function(e){return this.proto=e,this.target=e.target,this},t.Mark.prototype.add=function(e){return this.parent.add(e).extend(this)},t.Mark.prototype.zOrder=function(e){if(!arguments.length)return this._zOrder;e=+e||0;if(this._zOrder!==e){var t=this.parent;t&&0!==this._zOrder&&t._zOrderChildCount--,this._zOrder=e,t&&0!==this._zOrder&&t._zOrderChildCount++}return this},t.Mark.prototype.anchor=function(e){return(new t.Anchor(this)).name(e||"center").data(function(){return this.scene.target.map(function(e){return e.data})}).visible(function(){return this.scene.target[this.index].visible}).id(function(){return this.scene.target[this.index].id}).left(function(){var e=this.scene.target[this.index],t=e.width||0;switch(this.name()){case"bottom":case"top":case"center":return e.left+t/2;case"left":return null}return e.left+t}).top(function(){var e=this.scene.target[this.index],t=e.height||0;switch(this.name()){case"left":case"right":case"center":return e.top+t/2;case"top":return null}return e.top+t}).right(function(){var e=this.scene.target[this.index];return"left"==this.name()?e.right+(e.width||0):null}).bottom(function(){var e=this.scene.target[this.index];return"top"==this.name()?e.bottom+(e.height||0):null}).textAlign(function(){switch(this.name()){case"bottom":case"top":case"center":return"center";case"right":return"right"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"top"}return"bottom"})},t.Mark.prototype.anchorTarget=function(){return this.target},t.Mark.prototype.margin=function(e){return this.left(e).right(e).top(e).bottom(e)},t.Mark.prototype.instance=function(e){var t=this.scene||this.parent.instance(-1).children[this.childIndex],n=null==e||this.hasOwnProperty("index")?this.index:e;return t[0>n?t.length-1:n]},t.Mark.prototype.instances=function(e){for(var n,r=this,i=[];!(n=r.scene);)i.push({index:e.parentIndex,childIndex:r.childIndex}),e=e.parent,r=r.parent;for(var s=i.length;s--;){var o=i[s];n=n[o.index].children[o.childIndex]}if(this.hasOwnProperty("index")){var u=t.extend(n[this.index]);return u.right=u.top=u.left=u.bottom=0,[u]}return n},t.Mark.prototype.first=function(){return this.scene[0]},t.Mark.prototype.last=function(){return this.scene[this.scene.length-1]},t.Mark.prototype.sibling=function(){return 0==this.index?null:this.scene[this.index-1]},t.Mark.prototype.cousin=function(){var e=this.parent,t=e&&e.sibling();return t&&t.children?t.children[this.childIndex][this.index]:null},t.Mark.prototype._renderId=0,t.Mark.prototype.renderId=function(){return this.root._renderId},t.Mark.prototype.render=function(){var e=this.root;!this.parent||e.scene?(e._renderId++,this.renderCore()):e.render()},t.Mark.prototype.renderCore=function(){function e(e,r,s){e.scale=s;if(a>r){var o=r>=i.length;o&&i.unshift(null);if(e.hasOwnProperty("index"))n(e,r,s,o);else{for(var u=0,f=e.scene.length;f>u;u++)e.index=u,n(e,r,s,o);delete e.index}o&&i.shift()}else e.build(),t.Scene.scale=s,t.Scene.updateAll(e.scene);delete e.scale}function n(t,n,r,s){var u,a=t.scene[t.index];if(a.visible){var f=t.children,l=a.children,c=o[n],h=f[c];h.scene||c++;for(u=0;c>u;u++)f[u].scene=l[u];s&&(i[0]=a.data),e(h,n+1,r*a.transform.k);for(u=0;c>u;u++)f[u].scene=void 0}}for(var r=this.parent,i=t.Mark.stack,s=i.length,o=[],u=this;u.parent;u=u.parent)o.unshift(u.childIndex);var a=o.length;this.bind();for(;r&&!r.hasOwnProperty("index");)r=r.parent;try{this.context(r?r.scene:void 0,r?r.index:-1,function(){e(this.root,0,1)})}catch(f){throw i.length>s&&(i.length=s),f}},t.Mark.prototype.bind=function(){function e(e){do for(var t=e.$properties,u=t.length;u--;){var a=t[u],f=a.name,l=r[f];if(l){var c=i[f];3===c.type&&(c._proto=a,c=i[f]=a.root,c._proto=null)}else{r[f]=a,i[f]=a.root,a.root._proto=null;switch(f){case"data":n=a;break;case"visible":case"id":s.push(a);break;default:o[a.type].push(a)}}}while(e=e.proto)}var n,r={},i={},s=[],o=[[],[],[],[]];e(this),e(this.defaults);var u=o[0],a=o[1].reverse(),f=o[2];o[3].reverse();var l=this;do for(var c in l.properties)c in r||f.push(r[c]={name:c,type:2,value:null});while(l=l.proto);var h;if(u.length||a.length){h=u.concat(a);for(var p=0,d=h.length;d>p;p++)this.propertyMethod(h[p].name,!0)}else h=[];this.binds={properties:r,data:n,defs:h,required:s,optional:t.blend(o)}},t.Mark.prototype.build=function(){var e=t.Mark.stack,n=this.scene;if(!n){n=this.scene=[],n.mark=this,n.type=this.type,n.childIndex=this.childIndex;var r=this.parent;r&&(n.parent=r.scene,n.parentIndex=r.index)}this.target&&(n.target=this.target.instances(n));var i=this.binds.defs;if(i.length)for(var s=n.defs||(n.defs={}),o=0,u=i.length;u>o;o++){var a=i[o],f=s[a.name];(!f||a.id>f.id)&&(s[a.name]={id:0,value:1&a.type?a.value.apply(this,e):a.value})}var l=this.evalProperty(this.binds.data),c=l.length;n.length=c;if(c){var h=t.Mark.prototype;e.unshift(null);var p=t.propBuildMark,d=t.propBuilt;t.propBuildMark=this;try{for(var o=0;c>o;o++){h.index=this.index=o,t.propBuilt={};var v=n[o];v?v._state&&delete v._state:v=n[o]={},v.data=e[0]=l[o],this.preBuildInstance(v),this.buildInstance(v)}}finally{h.index=-1,delete this.index,e.shift(),t.propBuildMark=p,t.propBuilt=d}}return this},t.Mark.prototype.instanceState=function(e){return e||(e=this.instance()),e?e._state||(e._state={}):null},t.Mark.prototype.preBuildInstance=function(){},t.Mark.prototype.buildInstance=function(e){this.buildProperties(e,this.binds.required),e.visible&&(this.buildProperties(e,this.binds.optional),this.buildImplied(e))},!function(){var e,n=t.Mark.stack,r=[function(e){return this.scene.defs[e.name].value},null,function(e){return e.value},function(t){return e=t.proto||t._proto,t.value.apply(this,n)}];r[1]=r[0],t.Mark.prototype.buildProperties=function(n,i){var s=t.propBuilt,o=!s;o&&(t.propBuildMark=this,t.propBuilt=s={});for(var u=e,a=0,f=i.length;f>a;a++){var l=i[a],c=l.name;c in s||(s[c]=1,n[c]=r[l.type].call(this,l))}e=u,o&&(t.propBuildMark=t.propBuilt=null)},t.Mark.prototype.evalProperty=function(t){var n=e,i=r[t.type].call(this,t);return e=n,i},t.Mark.prototype.evalInPropertyContext=function(t,r){var i=e;e=r;var s=t.apply(this,n);return e=i,s},t.Mark.prototype.delegate=function(t,n){if(e&&(!n||e.tag===n)){var r=this.evalProperty(e);if(void 0!==r)return r}return t},t.Mark.prototype.delegateExcept=function(t,n){if(e&&(!n||e.tag!==n)){var r=this.evalProperty(e);if(void 0!==r)return r}return t},t.Mark.prototype.hasDelegate=function(t){return!(!e||t&&e.tag!==t)}}(),t.Mark.prototype.buildImplied=function(e){var n,r,i=e.left,s=e.right,o=e.top,u=e.bottom,a=this.properties,f=a.width?e.width:0,l=a.height?e.height:0;if(null==f||null==s||null==i){n=this.parent&&this.parent.instance(),r=!0;var c=n?n.width:f+i+s;null==f?f=c-(s=s||0)-(i=i||0):null==s?null==i?i=s=(c-f)/2:s=c-f-i:i=c-f-s}if(null==l||null==u||null==o){r||(n=this.parent&&this.parent.instance());var h=n?n.height:l+o+u;null==l?l=h-(o=o||0)-(u=u||0):null==u?u=null==o?o=(h-l)/2:h-l-o:o=h-l-u}e.left=i,e.right=s,e.top=o,e.bottom=u,a.width&&(e.width=f),a.height&&(e.height=l),a.textStyle&&!e.textStyle&&(e.textStyle=t.FillStyle.transparent),a.fillStyle&&!e.fillStyle&&(e.fillStyle=t.FillStyle.transparent),a.strokeStyle&&!e.strokeStyle&&(e.strokeStyle=t.FillStyle.transparent)},t.Mark.prototype.mouse=function(){var e=this.root.canvas(),n=t.event,r=n&&n.pageX||0,i=n&&n.pageY||0,s=t.elementOffset(e);if(s){var o=t.cssStyle(e);r-=s.left+parseFloat(o("padding-left")||0),i-=s.top+parseFloat(o("padding-top")||0)}var u=t.Transform.identity,a=this.properties.transform?this:this.parent,f=[];do f.push(a);while(a=a.parent);for(;a=f.pop();){var l=a.instance();u=u.translate(l.left,l.top).times(l.transform)}return u=u.invert(),t.vector(r*u.k+u.x,i*u.k+u.y)},t.Mark.prototype.event=function(e,n){n=t.functor(n);var r=this.$handlers[e];return r?r instanceof Array?r.push(n):r=[r,n]:r=n,this.$hasHandlers=!0,this.$handlers[e]=r,this},t.Mark.prototype.context=function(e,n,r){function i(e,n){t.Mark.scene=e,o.index=n;if(e){var r,i=e.mark,s=i,a=[];do{a.push(s),u.push(e[n].data),s.index=n,s.scene=e;if(s=s.parent)n=e.parentIndex,e=e.parent}while(s);var f=1;r=a.length-1;if(r>0)do s=a[r--],s.scale=f,f*=s.scene[s.index].transform.k;while(r);i.scale=f;var l,c=i.children;if(c&&(l=c.length)>0){var h=i.scene[i.index];f*=h.transform.k;var p=h.children;r=l;for(;r--;)s=c[r],s.scene=p[r],s.scale=f}}}function s(e){if(e){var t,n=e.mark,r=n.children;if(r)for(var i=r.length;i--;)t=r[i],t.scene=void 0,t.scale=1;t=n;var s,o=0;do{o++,delete t.index;if(s=t.parent)t.scene=void 0,t.scale=1}while(t=s);o&&(u.length-=o)}}var o=t.Mark.prototype,u=t.Mark.stack,a=t.Mark.scene,f=o.index;if(e&&e===a&&n===f)try{r.apply(this,u)}catch(l){throw t.error(l),l}finally{t.Mark.scene=a,o.index=f}else{s(a,f),i(e,n);try{r.apply(this,u)}catch(l){throw t.error(l),l}finally{s(e,n),i(a,f)}}},t.Mark.prototype.getEventHandler=function(e,t,n,r){var i=this.$handlers[e];return i?[i,t,n,r]:this.getParentEventHandler(e,t,n,r)},t.Mark.prototype.getParentEventHandler=function(e,t,n,r){var i=t.parent;return i?i.mark.getEventHandler(e,i,t.parentIndex,r):void 0},t.Mark.dispatch=function(e,t,n,r){var i=t.mark.root;if(i.$transition)return!0;var s,o=i.$interceptors&&i.$interceptors[e];if(o)for(var u=0,a=o.length;a>u;u++){s=o[u](e,r);if(s)break;if(s===!1)return!0}if(!s){s=t.mark.getEventHandler(e,t,n,r);if(!s)return!1}return this.handle.apply(this,s)},t.Mark.handle=function(e,n,r,i){var s=n.mark;return s.context(n,r,function(){var n,r,o,u=t.Mark.stack.concat(i);if(e instanceof Array){var a;for(n=0,r=e.length;r>n;n++)o=e[n].apply(s,u),o&&o.render&&(a||(a=[])).push(o);if(a)for(n=0,r=a.length;r>n;n++)a[n].render()}else o=e.apply(s,u),o&&o.render&&o.render()}),!0},t.Mark.prototype.addEventInterceptor=function(e,t,n){var r=this.root;if(r){var i=r.$interceptors||(r.$interceptors={}),s=i[e]||(i[e]=[]);n?s.unshift(t):s.push(t)}},t.Mark.prototype.eachInstance=function(e,n){function r(t,i,o){var a=t.length;if(a>0){var f,l=i===u;l||(f=s[i]);for(var c=0;a>c;c++){var h=t[c];if(h.visible)if(i===u)e.call(n,t,c,o);else{var p=h.children[f];if(p){var d=o.times(h.transform).translate(h.left,h.top);r(p,i+1,d)}}}}}for(var i=this,s=[];i.parent;)s.unshift(i.childIndex),i=i.parent;var o=i.scene;if(o){var u=s.length;r(o,0,t.Transform.identity)}},t.Mark.prototype.toScreenTransform=function(){var e=t.Transform.identity;this instanceof t.Panel&&(e=e.translate(this.left(),this.top()).times(this.transform()));var n=this.parent;if(n)do e=e.translate(n.left(),n.top()).times(n.transform());while(n=n.parent);return e},t.Mark.prototype.transition=function(){return new t.Transition(this)},t.Mark.prototype.on=function(e){return this["$"+e]=new t.Transient(this)},t.Mark.prototype.getShape=function(e,t,n){var r=e[t];if(!r.visible)return null;null==n&&(n=0);var i="_shape_inset_"+n;return r[i]||(r[i]=this.getShapeCore(e,t,n))},t.Mark.prototype.getShapeCore=function(e,n,r){var i=e[n],s=i.left,o=i.top,u=i.width,a=i.height;if(r>0&&1>=r){var f=r*u,l=r*a;s+=f,o+=l,u-=2*f,a-=2*l}return new t.Shape.Rect(s,o,u,a)},t.Mark.prototype.pointingRadiusMax=function(e){return arguments.length?(e=+e,this._pointingRadiusMax=isNaN(e)||0>e?0:e,this):this._pointingRadiusMax},t.Mark.prototype._pointingRadiusMax=1/0,t.Anchor=function(e){t.Mark.call(this),this.target=e,this.parent=e.parent},t.Anchor.prototype=t.extend(t.Mark).property("name",String),t.Anchor.prototype.extend=function(e){return this.proto=e,this},t.Area=function(){t.Mark.call(this)},t.Area.castSegmented=function(e){if(!e)return"";e=String(e).toLowerCase();switch(e){case"smart":case"full":break;default:e="full"}return e},t.Area.prototype=t.extend(t.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("lineJoin",t.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",t.stringLowerCase).property("strokeDasharray",t.stringLowerCase).property("strokeStyle",t.fillStyle).property("fillStyle",t.fillStyle).property("segmented",t.Area.castSegmented).property("interpolate",t.stringLowerCase).property("tension",Number),t.Area.prototype.type="area",t.Area.prototype.defaults=(new t.Area).extend(t.Mark.prototype.defaults).lineWidth(1.5).fillStyle(t.Colors.category20().by(t.parent)).interpolate("linear").tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),t.Area.prototype.buildImplied=function(e){null==e.height&&(e.height=0),null==e.width&&(e.width=0),t.Mark.prototype.buildImplied.call(this,e)},t.Area.fixed={lineWidth:1,lineJoin:1,strokeMiterLimit:1,lineCap:1,strokeStyle:1,strokeDasharray:1,fillStyle:1,segmented:1,interpolate:1,tension:1},t.Area.prototype.bind=function(){t.Mark.prototype.bind.call(this);for(var e=this.binds,n=e.required,r=e.optional,i=0,s=r.length;s>i;i++){var o=r[i];o.fixed=o.name in t.Area.fixed,"segmented"==o.name&&(n.push(o),r.splice(i,1),i--,s--)}this.binds.$required=n,this.binds.$optional=r},t.Area.prototype.buildInstance=function(e){function n(e){return!e.fixed||(i.push(e),!1)}var r=this.binds;if(this.index){var i=r.fixed;i||(i=r.fixed=[],r.required=r.required.filter(n),this.scene[0].segmented||(r.optional=r.optional.filter(n)));var s=i.length;if(s)for(var o=this.scene[0],u=0;s>u;u++){var a=i[u].name;e[a]=o[a]}}else r.required=r.$required,r.optional=r.$optional,r.fixed=null;t.Mark.prototype.buildInstance.call(this,e)},t.Area.prototype.anchor=function(e){return t.Mark.prototype.anchor.call(this,e).interpolate(function(){return this.scene.target[this.index].interpolate}).eccentricity(function(){return this.scene.target[this.index].eccentricity}).tension(function(){return this.scene.target[this.index].tension})},t.Area.prototype.getEventHandler=function(e,n,r,i){var s=n[r],o=1===t.Scene.mousePositionEventSet[e]&&(!s.segmented||"smart"===s.segmented);if(!o)return t.Mark.prototype.getEventHandler.call(this,e,n,r,i);var u,a="mousemove"===e?this.$handlers.mouseover:null,f=this.$handlers[e],l=f||a;return l&&(u=this.getNearestInstanceToMouse(n,r),a&&!this.filterMouseMove(n,u)&&(a=null,l=f)),l?(f&&a&&(l=[].concat(f,a)),[l,n,u,i]):this.getParentEventHandler(e,n,r,i)},t.Area.prototype.filterMouseMove=function(e,t){var n=this._mouseOverScene;if(!n||n!==e||this._mouseOverIndex!==t)return this._mouseOverScene=e,this._mouseOverIndex=t,!0},t.Area.prototype.getNearestInstanceToMouse=function(e,t){for(var n=this.mouse(),r=1/0,i=null,s=t,o=e.length;o>s;s++){var u=this.getShape(e,s);if(u){if(u.containsPoint(n))return s;var a=u.distance2(n).dist2;r>a&&(r=a,i=s)}}return null!=i?i:t},t.Area.prototype.getShapeCore=function(e,n){var r=e[n],i=r.width||0,s=r.height||0,o=r.left,u=r.top,a=n+1<e.length?e[n+1]:null;if(!a||!a.visible)return new t.Shape.Line(o,u,o+i,u+s);var f=a.left,l=a.top,c=a.height||0,h=a.width||0;return new t.Shape.Polygon([new t.Vector(o,u),new t.Vector(f,l),new t.Vector(f+h,l+c),new t.Vector(o+i,u+s)])},t.Bar=function(){t.Mark.call(this)},t.Bar.prototype=t.extend(t.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",t.fillStyle).property("fillStyle",t.fillStyle).property("lineCap",t.stringLowerCase).property("strokeDasharray",t.stringLowerCase),t.Bar.prototype.type="bar",t.Bar.prototype.defaults=(new t.Bar).extend(t.Mark.prototype.defaults).lineWidth(1.5).fillStyle(t.Colors.category20().by(t.parent)).lineCap("butt").strokeDasharray("none"),t.Dot=function(){t.Mark.call(this)},t.Dot.prototype=t.extend(t.Mark).property("shape",t.stringLowerCase).property("shapeAngle",Number).property("shapeRadius",Number).property("shapeSize",Number).property("aspectRatio",Number).property("lineWidth",Number).property("strokeStyle",t.fillStyle).property("lineCap",t.stringLowerCase).property("strokeDasharray",t.stringLowerCase).property("fillStyle",t.fillStyle),t.Dot.prototype.type="dot",t.Dot.prototype.defaults=(new t.Dot).extend(t.Mark.prototype.defaults).shape("circle").aspectRatio(1).lineWidth(1.5).strokeStyle(t.Colors.category10().by(t.parent)).lineCap("butt").strokeDasharray("none"),t.Dot.prototype.anchor=function(e){return t.Mark.prototype.anchor.call(this,e).left(function(){var e=this.scene.target[this.index];switch(this.name()){case"bottom":case"top":case"center":return e.left;case"left":return null}return e.left+e._width/2}).right(function(){var e=this.scene.target[this.index];return"left"==this.name()?e.right+e._width/2:null}).top(function(){var e=this.scene.target[this.index];switch(this.name()){case"left":case"right":case"center":return e.top;case"top":return null}return e.top+e._height/2}).bottom(function(){var e=this.scene.target[this.index];return"top"==this.name()?e.bottom+e._height/2:null}).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"bottom":return"top"}return"bottom"})},t.Dot.prototype.buildImplied=function(e){var n=e.shapeRadius,r=e.shapeSize,i=e.aspectRatio||1;null==n?null==r?(r=e.shapeSize=20.25,n=e.shapeRadius=4.5):n=e.shapeRadius=Math.sqrt(r):null==r&&(r=e.shapeSize=n*n);var s,o;1===i||0>i?s=o=2*n:(s=2*n/Math.sqrt(i),o=i*s),e._height=s,e._width=o,t.Mark.prototype.buildImplied.call(this,e)},t.Dot.prototype.width=function(){return this.instance()._width},t.Dot.prototype.height=function(){return this.instance()._height},t.Dot.prototype.getShapeCore=function(e,n){var r=e[n],i=r._width,s=r._height,o=r.left,u=r.top;switch(r.shape){case"diamond":i*=Math.SQRT2,s*=Math.SQRT2;case"square":case"cross":return new t.Shape.Rect(o-s/2,u-i/2,s,i)}return new t.Shape.Circle(o,u,r.shapeRadius)},t.Label=function(){t.Mark.call(this)},t.Label.prototype=t.extend(t.Mark).property("text",String).property("font",String).property("textAngle",Number).property("textStyle",t.color).property("textAlign",t.stringLowerCase).property("textBaseline",t.stringLowerCase).property("textMargin",Number).property("textDecoration",String).property("textShadow",String),t.Label.prototype.type="label",t.Label.prototype.defaults=(new t.Label).extend(t.Mark.prototype.defaults).events("none").text(t.identity).font("10px sans-serif").textAngle(0).textStyle("black").textAlign("left").textBaseline("bottom").textMargin(3),t.Label.prototype.getShapeCore=function(e,n,r){var i=e[n],s=t.Text.measure(i.text,i.font),o=i.left,u=i.top,a=s.width,f=s.height;if(r>0&&1>=r){var l=r*a,c=r*f;o+=l,u+=c,a-=2*l,f-=2*c}return t.Label.getPolygon(a,f,i.textAlign,i.textBaseline,i.textAngle,i.textMargin).apply(t.Transform.identity.translate(o,u))},t.Label.getPolygon=function(e,n,r,i,s,o){var u,a;switch(i){case"middle":a=n/2;break;case"top":a=o+n;break;case"bottom":a=-o}switch(r){case"right":u=-o-e;break;case"center":u=-e/2;break;case"left":u=o}var f=new t.Vector(u,a),l=f.plus(e,0),c=l.plus(0,-n),h=f.plus(0,-n);return 0!==s&&(f=f.rotate(s),l=l.rotate(s),h=h.rotate(s),c=c.rotate(s)),new t.Shape.Polygon([f,l,c,h])},t.Line=function(){t.Mark.call(this)},t.Line.prototype=t.extend(t.Mark).property("lineWidth",Number).property("lineJoin",t.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",t.stringLowerCase).property("strokeStyle",t.fillStyle).property("strokeDasharray",t.stringLowerCase).property("fillStyle",t.fillStyle).property("segmented",t.Area.castSegmented).property("interpolate",t.stringLowerCase).property("eccentricity",Number).property("tension",Number),t.Line.prototype.type="line",t.Line.prototype.defaults=(new t.Line).extend(t.Mark.prototype.defaults).lineWidth(1.5).strokeStyle(t.Colors.category10().by(t.parent)).interpolate("linear").eccentricity(0).tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),t.Line.prototype.bind=t.Area.prototype.bind,t.Line.prototype.buildInstance=t.Area.prototype.buildInstance,t.Line.prototype.getEventHandler=t.Area.prototype.getEventHandler,t.Line.prototype.getNearestInstanceToMouse=t.Area.prototype.getNearestInstanceToMouse,t.Line.prototype.filterMouseMove=t.Area.prototype.filterMouseMove,t.Line.prototype.anchor=function(e){return t.Area.prototype.anchor.call(this,e).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center";case"right":return"left"}}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"bottom";case"bottom":return"top"}})},t.Line.prototype.getShapeCore=function(e,n){var r=e[n],i=n+1<e.length?e[n+1]:null;return null!=i&&i.visible?new t.Shape.Line(r.left,r.top,i.left,i.top):new t.Shape.Point(r.left,r.top)},t.Rule=function(){t.Mark.call(this)},t.Rule.prototype=t.extend(t.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",t.fillStyle).property("lineCap",t.stringLowerCase).property("strokeDasharray",t.stringLowerCase),t.Rule.prototype.type="rule",t.Rule.prototype.defaults=(new t.Rule).extend(t.Mark.prototype.defaults).lineWidth(1).strokeStyle("black").antialias(!1).lineCap("butt").strokeDasharray("none"),t.Rule.prototype.anchor=t.Line.prototype.anchor,t.Rule.prototype.buildImplied=function(e){var n=e.left,r=e.right;e.top,e.bottom,null!=e.width||null==n&&null==r||null!=r&&null!=n?e.height=0:e.width=0,t.Mark.prototype.buildImplied.call(this,e)},t.Rule.prototype.getShapeCore=function(e,n){var r=e[n];return new t.Shape.Line(r.left,r.top,r.left+r.width,r.top+r.height)},t.Panel=function(){t.Bar.call(this),this.children=[],this.root=this,this.$dom=t.$&&t.$.s},t.Panel.prototype=t.extend(t.Bar).property("transform").property("overflow",t.stringLowerCase).property("canvas",function(e){return"string"==typeof e?document.getElementById(e):e}),t.Panel.prototype.type="panel",t.Panel.prototype.isPointingBarrier=!1,t.Panel.prototype._zOrderChildCount=0,t.Panel.prototype.defaults=(new t.Panel).extend(t.Bar.prototype.defaults).fillStyle(null).overflow("visible"),t.Panel.prototype.anchor=function(e){var n=t.Bar.prototype.anchor.call(this,e);return n.parent=this,n},t.Panel.prototype.add=function(e){var t=new e;t.parent=this,t.root=this.root,t.childIndex=this.children.length,this.children.push(t);var n=+t._zOrder||0;return 0!==n&&this._zOrderChildCount++,t},t.Panel.prototype.bind=function(){t.Mark.prototype.bind.call(this);for(var e=this.children,n=0,r=e.length;r>n;n++)e[n].bind()},t.Panel.prototype.buildInstance=function(e){t.Bar.prototype.buildInstance.call(this,e);if(e.visible){var n=this.scale*e.transform.k;t.Mark.prototype.index=-1;for(var r,i=this.children,s=e.children||(e.children=[]),o=0,u=i.length;u>o;o++)r=i[o],r.scene=s[o],r.scale=n,r.build();o=u;for(;o--;)r=i[o],s[o]=r.scene,delete r.scene,delete r.scale;s.length=u}},t.Panel.prototype.buildImplied=function(e){this.parent||this._buildRootInstanceImplied(e)?(e.transform||(e.transform=t.Transform.identity),t.Mark.prototype.buildImplied.call(this,e)):e.visible=!1},t.Panel.prototype._buildRootInstanceImplied=function(e){var t=e.canvas;if(t){if(!this._rootInstanceStealCanvas(e,t))return!1;this._rootInstanceInitCanvas(e,t)}else e.canvas=this._rootInstanceGetInlineCanvas(e);return!0},t.Panel.prototype._rootInstanceStealCanvas=function(e,n){var r=n.$panel;if(r!==this){if(r){if(this.$lastCreateId)return!1;r._disposeRootPanel(),this._updateCreateId(n)}n.$panel=this,t.removeChildren(n)}else this._updateCreateId(n);return!0},t.Panel.prototype._registerBoundEvent=function(e,t,n,r){if(e.removeEventListener){var i=this._boundEvents||(this._boundEvents=[]);i.push([e,t,n,r])}},t.Panel.prototype.dispose=function(){var e=this.root,t=e.scene;e._disposeRootPanel();var n=t?e.canvas():null;e.canvas(null),n&&(n.$panel=null),e.binds=null,t&&(t.$defs=null,t.$g=null,e.scene=null)},t.Panel.prototype._disposeRootPanel=function(){var e=this.$transition;e&&e.stop();var t=this._boundEvents;if(t){this._boundEvents=null;for(var n=0,r=t.length;r>n;n++){var i=t[n];i[0].removeEventListener(i[1],i[2],i[3])}}},t.Panel.prototype._rootInstanceInitCanvas=function(e,n){var r,i,s;null==e.width&&(s=t.cssStyle(n),r=parseFloat(s("width")||0),e.width=r-e.left-e.right),null==e.height&&(s||(s=t.cssStyle(n)),i=parseFloat(s("height")||0),e.height=i-e.top-e.bottom),s=null},t.Panel.prototype._rootInstanceGetInlineCanvas=function(){var e,t=this.$canvas||(this.$canvas=[]);if(!(e=t[this.index])){e=t[this.index]=document.createElement("span");if(this.$dom)this.$dom.parentNode.insertBefore(e,this.$dom);else{for(var n=document.body;n.lastChild&&n.lastChild.tagName;)n=n.lastChild;n!=document.body&&(n=n.parentNode),n.appendChild(e)}}return e},t.Panel.prototype._updateCreateId=function(e){this.$lastCreateId=e.$pvCreateId=(e.$pvCreateId||0)+1},t.Image=function(){t.Bar.call(this)},t.Image.prototype=t.extend(t.Bar).property("url",String).property("imageWidth",Number).property("imageHeight",Number),t.Image.prototype.type="image",t.Image.prototype.defaults=(new t.Image).extend(t.Bar.prototype.defaults).fillStyle(null),t.Image.prototype.image=function(e){return this.$image=function(){var n=e.apply(this,arguments);return null==n?t.Color.transparent:"string"==typeof n?t.color(n):n},this},t.Image.prototype.bind=function(){t.Bar.prototype.bind.call(this);var e=this.binds,n=this;do e.image=n.$image;while(!e.image&&(n=n.proto))},t.Image.prototype.buildImplied=function(e){t.Bar.prototype.buildImplied.call(this,e);if(e.visible){null==e.imageWidth&&(e.imageWidth=e.width),null==e.imageHeight&&(e.imageHeight=e.height);if(null==e.url&&this.binds.image){var n,r=this.$canvas||(this.$canvas=document.createElement("canvas")),i=r.getContext("2d"),s=e.imageWidth,o=e.imageHeight,u=t.Mark.stack;r.width=s,r.height=o,n=(e.image=i.createImageData(s,o)).data,u.unshift(null,null);for(var a=0,f=0;o>a;a++){u[1]=a;for(var l=0;s>l;l++){u[0]=l;var c=this.binds.image.apply(this,u);n[f++]=c.r,n[f++]=c.g,n[f++]=c.b,n[f++]=255*c.a}}u.splice(0,2)}}},t.Wedge=function(){t.Mark.call(this)},t.Wedge.prototype=t.extend(t.Mark).property("startAngle",Number).property("endAngle",Number).property("angle",Number).property("innerRadius",Number).property("outerRadius",Number).property("lineWidth",Number).property("strokeStyle",t.fillStyle).property("lineJoin",t.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",t.stringLowerCase).property("strokeDasharray",t.stringLowerCase).property("fillStyle",t.fillStyle),t.Wedge.prototype.type="wedge",t.Wedge.prototype.defaults=(new t.Wedge).extend(t.Mark.prototype.defaults).startAngle(function(){var e=this.sibling();return e?e.endAngle:-Math.PI/2}).innerRadius(0).lineWidth(1.5).strokeStyle(null).fillStyle(t.Colors.category20().by(t.index)).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),t.Wedge.prototype.midRadius=function(){return(this.innerRadius()+this.outerRadius())/2},t.Wedge.prototype.midAngle=function(){return(this.startAngle()+this.endAngle())/2},t.Wedge.prototype.anchor=function(e){function n(e){return e.innerRadius||e.angle<2*Math.PI}function r(e){return(e.innerRadius+e.outerRadius)/2}function i(e){return(e.startAngle+e.endAngle)/2}return t.Mark.prototype.anchor.call(this,e).left(function(){var e=this.scene.target[this.index];if(n(e))switch(this.name()){case"outer":return e.left+e.outerRadius*Math.cos(i(e));case"inner":return e.left+e.innerRadius*Math.cos(i(e));case"start":return e.left+r(e)*Math.cos(e.startAngle);case"center":return e.left+r(e)*Math.cos(i(e));case"end":return e.left+r(e)*Math.cos(e.endAngle)}return e.left}).top(function(){var e=this.scene.target[this.index];if(n(e))switch(this.name()){case"outer":return e.top+e.outerRadius*Math.sin(i(e));case"inner":return e.top+e.innerRadius*Math.sin(i(e));case"start":return e.top+r(e)*Math.sin(e.startAngle);case"center":return e.top+r(e)*Math.sin(i(e));case"end":return e.top+r(e)*Math.sin(e.endAngle)}return e.top}).textAlign(function(){var e=this.scene.target[this.index];if(n(e))switch(this.name()){case"outer":return t.Wedge.upright(i(e))?"right":"left";case"inner":return t.Wedge.upright(i(e))?"left":"right"}return"center"}).textBaseline(function(){var e=this.scene.target[this.index];if(n(e))switch(this.name()){case"start":return t.Wedge.upright(e.startAngle)?"top":"bottom";case"end":return t.Wedge.upright(e.endAngle)?"bottom":"top"}return"middle"}).textAngle(function(){var e=this.scene.target[this.index],r=0;if(n(e))switch(this.name()){case"center":case"inner":case"outer":r=i(e);break;case"start":r=e.startAngle;break;case"end":r=e.endAngle}return t.Wedge.upright(r)?r:r+Math.PI})},t.Wedge.upright=function(e){return e%=2*Math.PI,e=0>e?2*Math.PI+e:e,e<Math.PI/2||e>=3*Math.PI/2},t.Wedge.prototype.buildImplied=function(e){null==e.angle?e.angle=e.endAngle-e.startAngle:null==e.endAngle&&(e.endAngle=e.startAngle+e.angle),t.Mark.prototype.buildImplied.call(this,e)},t.Wedge.prototype.getShapeCore=function(e,n){var r=e[n];return new t.Shape.Wedge(r.left,r.top,r.innerRadius,r.outerRadius,r.startAngle,r.angle)},t.Ease=function(){function e(e){return function(t){return 1-e(1-t)}}function n(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function r(e){return function(t){return 0>t?0:t>1?1:Math.pow(t,e)}}function i(e){return 1-Math.cos(e*Math.PI/2)}function s(e){return e?Math.pow(2,10*(e-1))-.001:0}function o(e){return-(Math.sqrt(1-e*e)-1)}function u(e,t){var n;return t||(t=.45),!e||1>e?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(r){return 0>=r||r>=1?r:-(e*Math.pow(2,10*--r)*Math.sin(2*(r-n)*Math.PI/t))}}function a(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function f(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}var l=r(2),c=r(3),h=u(),p=a(),d={linear:t.identity,"quad-in":l,"quad-out":e(l),"quad-in-out":n(l),"quad-out-in":n(e(l)),"cubic-in":c,"cubic-out":e(c),"cubic-in-out":n(c),"cubic-out-in":n(e(c)),"sin-in":i,"sin-out":e(i),"sin-in-out":n(i),"sin-out-in":n(e(i)),"exp-in":s,"exp-out":e(s),"exp-in-out":n(s),"exp-out-in":n(e(s)),"circle-in":o,"circle-out":e(o),"circle-in-out":n(o),"circle-out-in":n(e(o)),"elastic-in":h,"elastic-out":e(h),"elastic-in-out":n(h),"elastic-out-in":n(e(h)),"back-in":p,"back-out":e(p),"back-in-out":n(p),"back-out-in":n(e(p)),"bounce-in":f,"bounce-out":e(f),"bounce-in-out":n(f),"bounce-out-in":n(e(f))};return t.ease=function(e){return d[e]},{reverse:e,reflect:n,linear:function(){return t.identity},sin:function(){return i},exp:function(){return s},circle:function(){return o},elastic:u,back:a,bounce:f,poly:r}}(),t.Transient=function(e){t.Mark.call(this),this.fillStyle(null).strokeStyle(null).textStyle(null),this.on=function(t){return e.on(t)}},t.Transient.prototype=t.extend(t.Mark),!function(){function e(e){for(var t={},n=e.length;n--;){var r=e[n],i=r.id;i&&(t[i]=r)}return t}function n(e,n,r,i){var s;if(n in u){var o=t.Scale.interpolator(r[n],i[n]);s=function(e){r[n]=o(e)}}else s=function(e){e>.5&&(r[n]=i[n])};s.next=e.head,e.head=s}function r(e,t,r){for(var i in t)"children"!==i&&t[i]!=r[i]&&n(e,i,t,r);var o=t.children;if(o)for(var u=r.children,a=0,f=o.length;f>a;a++)s(e,o[a],u[a])}function i(e,t,n,r){var i,s=Object.create(e[t]),o=e.mark,u=o.root.scene;r.target&&(i=r.target[r.length])&&(e=Object.create(e),e.target=Object.create(r.target),e.target[t]=i),n||(n=a);var f=n.$properties,l=n.$propertiesMap;return f=o.binds.optional.filter(function(e){return!(e.name in l)}).concat(f),o.context(e,t,function(){this.buildProperties(s,f),this.buildImplied(s)}),o.root.scene=u,s}function s(t,n,s){for(var o,u,a=n.mark,f=e(n),l=e(s),c=0,h=n.length;h>c;c++){o=n[c],u=o.id?l[o.id]:s[c],o.index=c;if(o.visible){if(!u||!u.visible){var p=i(n,c,a.$exit,s);o.transition=u?2:(s.push(p),1),u=p}r(t,o,u)}}c=0,h=s.length;for(;h>c;c++){u=s[c],o=u.id?f[u.id]:n[c];if((!o||!o.visible)&&u.visible){var d=i(s,c,a.$enter,n);o?n[o.index]=d:n.push(d),r(t,d,u)}}}function o(e){for(var t=0,n=0;t<e.length;t++){var r=e[t];1!=r.transition&&(e[n++]=r,2==r.transition&&(r.visible=!1),r.children&&r.children.forEach(o))}e.length=n}var u={top:1,left:1,right:1,bottom:1,width:1,height:1,innerRadius:1,outerRadius:1,radius:1,shapeRadius:1,shapeSize:1,startAngle:1,endAngle:1,angle:1,fillStyle:1,strokeStyle:1,lineWidth:1,eccentricity:1,tension:1,textAngle:1,textStyle:1,textMargin:1},a=new t.Transient;t.Transition=function(e){function n(t){var n=e.root.$transition===a;n&&(e.root.$transition=null),null!=r&&(clearInterval(r),r=null),n&&c(e.scene);if(i){var s=i;i=null,s(t)}return t}var r,i,u,a=this,f=t.ease("cubic-in-out"),l=250,c=function(e){u||(u=!0,o(e))};a.ease=function(e){return arguments.length?(f="function"==typeof e?e:t.ease(e),a):f},a.duration=function(e){return arguments.length?(l=Number(e),a):l},a.start=function(o){if(e.parent)throw new Error("Animated partial rendering is not supported.");i=o;var u=e.root;if(u.$transition)try{u.$transition.stop()}catch(h){return n(!1)}var p,d;u.$transition=a,u._renderId++;var v=e.scene;e.scene=null;var m=t.Mark.prototype.index;try{e.bind(),e.build();var g=e.scene;e.scene=v,t.Mark.prototype.index=m,d=Date.now(),p={},s(p,v,g)}catch(h){return t.Mark.prototype.index=m,n(!1)}if(!p.head)return n(!0);var y=function(){var r=Math.max(0,Math.min(1,(Date.now()-d)/l)),i=f(r),s=p.head;do s(i);while(s=s.next);1===r?(c(e.scene),t.Scene.updateAll(v),n(!0)):t.Scene.updateAll(v)};r=setInterval(function(){try{y()}catch(e){n(!1)}},24)},a.stop=function(){n(!0)}}}(),t.simulation=function(e){return new t.Simulation(e)},t.Simulation=function(e){for(var t=0;t<e.length;t++)this.particle(e[t])},t.Simulation.prototype.particle=function(e){return e.next=this.particles,isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y),isNaN(e.fx)&&(e.fx=0),isNaN(e.fy)&&(e.fy=0),this.particles=e,this},t.Simulation.prototype.force=function(e){return e.next=this.forces,this.forces=e,this},t.Simulation.prototype.constraint=function(e){return e.next=this.constraints,this.constraints=e,this},t.Simulation.prototype.stabilize=function(e){var n;arguments.length||(e=3);for(var r=0;e>r;r++){var i=new t.Quadtree(this.particles);for(n=this.constraints;n;n=n.next)n.apply(this.particles,i)}for(var s=this.particles;s;s=s.next)s.px=s.x,s.py=s.y;return this},t.Simulation.prototype.step=function(){var e,n,r;for(e=this.particles;e;e=e.next){var i=e.px,s=e.py;e.px=e.x,e.py=e.y,e.x+=e.vx=e.x-i+e.fx,e.y+=e.vy=e.y-s+e.fy}var o=new t.Quadtree(this.particles);for(r=this.constraints;r;r=r.next)r.apply(this.particles,o);for(e=this.particles;e;e=e.next)e.fx=e.fy=0;for(n=this.forces;n;n=n.next)n.apply(this.particles,o)},t.Quadtree=function(e){function n(e,t,n,i,s,o){if(!isNaN(t.x)&&!isNaN(t.y))if(e.leaf)if(e.p)if(Math.abs(e.p.x-t.x)+Math.abs(e.p.y-t.y)<.01)r(e,t,n,i,s,o);else{var u=e.p;e.p=null,r(e,u,n,i,s,o),r(e,t,n,i,s,o)}else e.p=t;else r(e,t,n,i,s,o)}function r(e,r,i,s,o,u){var a=.5*(i+o),f=.5*(s+u),l=r.x>=a,c=r.y>=f;e.leaf=!1;switch((c<<1)+l){case 0:e=e.c1||(e.c1=new t.Quadtree.Node);break;case 1:e=e.c2||(e.c2=new t.Quadtree.Node);break;case 2:e=e.c3||(e.c3=new t.Quadtree.Node);break;case 3:e=e.c4||(e.c4=new t.Quadtree.Node)}l?i=a:o=a,c?s=f:u=f,n(e,r,i,s,o,u)}var i,s=Number.POSITIVE_INFINITY,o=s,u=Number.NEGATIVE_INFINITY,a=u;for(i=e;i;i=i.next)i.x<s&&(s=i.x),i.y<o&&(o=i.y),i.x>u&&(u=i.x),i.y>a&&(a=i.y);var f=u-s,l=a-o;f>l?a=o+f:u=s+l,this.xMin=s,this.yMin=o,this.xMax=u,this.yMax=a,this.root=new t.Quadtree.Node;for(i=e;i;i=i.next)n(this.root,i,s,o,u,a)},t.Quadtree.Node=function(){this.leaf=!0,this.c1=null,this.c2=null,this.c3=null,this.c4=null,this.p=null},t.Force={},t.Force.charge=function(e){function t(n){function r(e){t(e),n.cn+=e.cn,i+=e.cn*e.cx,s+=e.cn*e.cy}var i=0,s=0;n.cn=0,n.leaf||(n.c1&&r(n.c1),n.c2&&r(n.c2),n.c3&&r(n.c3),n.c4&&r(n.c4)),n.p&&(n.cn+=e,i+=e*n.p.x,s+=e*n.p.y),n.cx=i/n.cn,n.cy=s/n.cn}function n(t,r,s,a,f,l){var c=t.cx-r.x,h=t.cy-r.y,p=1/Math.sqrt(c*c+h*h);if(t.leaf&&t.p!=r||u>(f-s)*p){if(o>p)return;p>i&&(p=i);var d=t.cn*p*p*p,v=c*d,m=h*d;r.fx+=v,r.fy+=m}else if(!t.leaf){var g=.5*(s+f),y=.5*(a+l);t.c1&&n(t.c1,r,s,a,g,y),t.c2&&n(t.c2,r,g,a,f,y),t.c3&&n(t.c3,r,s,y,g,l),t.c4&&n(t.c4,r,g,y,f,l);if(o>p)return;p>i&&(p=i);if(t.p&&t.p!=r){var d=e*p*p*p,v=c*d,m=h*d;r.fx+=v,r.fy+=m}}}var r=2,i=1/r,s=500,o=1/s,u=.9,a={};return arguments.length||(e=-40),a.constant=function(t){return arguments.length?(e=Number(t),a):e},a.domain=function(e,t){return arguments.length?(r=Number(e),i=1/r,s=Number(t),o=1/s,a):[r,s]},a.theta=function(e){return arguments.length?(u=Number(e),a):u},a.apply=function(e,r){t(r.root);for(var i=e;i;i=i.next)n(r.root,i,r.xMin,r.yMin,r.xMax,r.yMax)},a},t.Force.drag=function(e){var t={};return arguments.length||(e=.1),t.constant=function(n){return arguments.length?(e=n,t):e},t.apply=function(t){if(e)for(var n=t;n;n=n.next)n.fx-=e*n.vx,n.fy-=e*n.vy},t},t.Force.spring=function(e){var t,n,r=.1,i=20,s={};return arguments.length||(e=.1),s.links=function(e){return arguments.length?(t=e,n=e.map(function(e){return 1/Math.sqrt(Math.max(e.sourceNode.linkDegree,e.targetNode.linkDegree))}),s):t},s.constant=function(t){return arguments.length?(e=Number(t),s):e},s.damping=function(e){return arguments.length?(r=Number(e),s):r},s.length=function(e){return arguments.length?(i=Number(e),s):i},s.apply=function(){for(var s=0;s<t.length;s++){var o=t[s].sourceNode,u=t[s].targetNode,a=o.x-u.x,f=o.y-u.y,c=Math.sqrt(a*a+f*f),h=c?1/c:1,p=e*n[s],v=r*n[s],m=(p*(c-i)+v*(a*(o.vx-u.vx)+f*(o.vy-u.vy))*h)*h,g=-m*(c?a:.01*(.5-Math.random())),y=-m*(c?f:.01*(.5-Math.random()));o.fx+=g,o.fy+=y,u.fx-=g,u.fy-=y}},s},t.Constraint={},t.Constraint.collision=function(e){function t(u,a,f,l,c,h){if(!u.leaf){var p=.5*(f+c),d=.5*(l+h),v=d>i,m=o>d,g=p>r,y=s>p;v&&(u.c1&&g&&t(u.c1,a,f,l,p,d),u.c2&&y&&t(u.c2,a,p,l,c,d)),m&&(u.c3&&g&&t(u.c3,a,f,d,p,h),u.c4&&y&&t(u.c4,a,p,d,c,h))}if(u.p&&u.p!=a){var b=a.x-u.p.x,w=a.y-u.p.y,E=Math.sqrt(b*b+w*w),S=n+e(u.p);if(S>E){var x=(E-S)/E*.5;b*=x,w*=x,a.x-=b,a.y-=w,u.p.x+=b,u.p.y+=w}}}var n,r,i,s,o,u=1,a={};return arguments.length||(n=10),a.repeat=function(e){return arguments.length?(u=Number(e),a):u},a.apply=function(a,f){var l,c,h=-1/0;for(l=a;l;l=l.next)c=e(l),c>h&&(h=c);for(var p=0;u>p;p++)for(l=a;l;l=l.next)c=(n=e(l))+h,r=l.x-c,s=l.x+c,i=l.y-c,o=l.y+c,t(f.root,l,f.xMin,f.yMin,f.xMax,f.yMax)},a},t.Constraint.position=function(e){var t=1,n={};return arguments.length||(e=function(e){return e.fix}),n.alpha=function(e){return arguments.length?(t=Number(e),n):t},n.apply=function(n){for(var r=n;r;r=r.next){var i=e(r);i&&(r.x+=(i.x-r.x)*t,r.y+=(i.y-r.y)*t,r.fx=r.fy=r.vx=r.vy=0)}},n},t.Constraint.bound=function(){var e,t,n={};return n.x=function(t,n){return arguments.length?(e={min:Math.min(t,n),max:Math.max(t,n)},this):e},n.y=function(e,n){return arguments.length?(t={min:Math.min(e,n),max:Math.max(e,n)},this):t},n.apply=function(n){if(e)for(var r=n;r;r=r.next)r.x=r.x<e.min?e.min:r.x>e.max?e.max:r.x;if(t)for(var r=n;r;r=r.next)r.y=r.y<t.min?t.min:r.y>t.max?t.max:r.y},n},t.Layout=function(){t.Panel.call(this)},t.Layout.prototype=t.extend(t.Panel),t.Layout.prototype.property=t.Mark.prototype.localProperty,t.Layout.Network=function(){t.Layout.call(this);var e=this;this.$id=t.id(),(this.node=(new t.Mark).data(function(){return e.nodes()}).strokeStyle("#1f77b4").fillStyle("#fff").left(function(e){return e.x}).top(function(e){return e.y})).parent=this,this.link=(new t.Mark).extend(this.node).data(function(e){return[e.sourceNode,e.targetNode]}).fillStyle(null).lineWidth(function(e,t){return 1.5*t.linkValue}).strokeStyle("rgba(0,0,0,.2)"),this.link.add=function(n){return e.add(t.Panel).data(function(){return e.links()}).add(n).extend(this)},(this.label=(new t.Mark).extend(this.node).textMargin(7).textBaseline("middle").text(function(e){return e.nodeName||e.nodeValue}).textAngle(function(e){var n=e.midAngle;return t.Wedge.upright(n)?n:n+Math.PI}).textAlign(function(e){return t.Wedge.upright(e.midAngle)?"left":"right"})).parent=this},t.Layout.Network.prototype=t.extend(t.Layout).property("nodes",function(e){return e.map(function(e,t){return"object"!=typeof e&&(e={nodeValue:e}),e.index=t,e})}).property("links",function(e){return e.map(function(e){return isNaN(e.linkValue)&&(e.linkValue=isNaN(e.value)?1:e.value),e})}),t.Layout.Network.prototype.reset=function(){return this.$id=t.id(),this},t.Layout.Network.prototype.buildProperties=function(e,n){(e.$id||0)<this.$id&&t.Layout.prototype.buildProperties.call(this,e,n)},t.Layout.Network.prototype.buildImplied=function(e){t.Layout.prototype.buildImplied.call(this,e);if(e.$id>=this.$id)return!0;e.$id=this.$id,e.nodes.forEach(function(e){e.linkDegree=0}),e.links.forEach(function(t){var n=t.linkValue;(t.sourceNode||(t.sourceNode=e.nodes[t.source])).linkDegree+=n,(t.targetNode||(t.targetNode=e.nodes[t.target])).linkDegree+=n})},t.Layout.Hierarchy=function(){t.Layout.Network.call(this),this.link.strokeStyle("#ccc")},t.Layout.Hierarchy.prototype=t.extend(t.Layout.Network),t.Layout.Hierarchy.prototype.buildImplied=function(e){e.links||(e.links=t.Layout.Hierarchy.links.call(this)),t.Layout.Network.prototype.buildImplied.call(this,e)},t.Layout.Hierarchy.links=function(){return this.nodes().filter(function(e){return e.parentNode}).map(function(e){return{sourceNode:e,targetNode:e.parentNode,linkValue:1}})},t.Layout.Hierarchy.NodeLink={buildImplied:function(e){function t(e){return e.parentNode?e.depth*(c-l)+l:0}function n(e){return e.parentNode?2*(e.breadth-.25)*Math.PI:0}function r(e){switch(o){case"left":return e.depth*a;case"right":return a-e.depth*a;case"top":return e.breadth*a;case"bottom":return a-e.breadth*a;case"radial":return a/2+t(e)*Math.cos(e.midAngle)}}function i(e){switch(o){case"left":return e.breadth*f;case"right":return f-e.breadth*f;case"top":return e.depth*f;case"bottom":return f-e.depth*f;case"radial":return f/2+t(e)*Math.sin(e.midAngle)}}var s=e.nodes,o=e.orient,u=/^(top|bottom)$/.test(o),a=e.width,f=e.height;if("radial"==o){var l=e.innerRadius,c=e.outerRadius;null==l&&(l=0),null==c&&(c=Math.min(a,f)/2)}for(var h=0;h<s.length;h++){var p=s[h];p.midAngle="radial"==o?n(p):u?Math.PI/2:0,p.x=r(p),p.y=i(p),p.firstChild&&(p.midAngle+=Math.PI)}}},t.Layout.Hierarchy.Fill={constructor:function(){this.node.strokeStyle("#fff").fillStyle("#ccc").width(function(e){return e.dx}).height(function(e){return e.dy}).innerRadius(function(e){return e.innerRadius}).outerRadius(function(e){return e.outerRadius}).startAngle(function(e){return e.startAngle}).angle(function(e){return e.angle}),this.label.textAlign("center").left(function(e){return e.x+e.dx/2}).top(function(e){return e.y+e.dy/2}),delete this.link},buildImplied:function(e){function t(e,t){return(e+t)/(1+t)}function n(e){switch(c){case"left":return t(e.minDepth,v)*p;case"right":return(1-t(e.maxDepth,v))*p;case"top":return e.minBreadth*p;case"bottom":return(1-e.maxBreadth)*p;case"radial":return p/2}}function r(e){switch(c){case"left":return e.minBreadth*d;case"right":return(1-e.maxBreadth)*d;case"top":return t(e.minDepth,v)*d;case"bottom":return(1-t(e.maxDepth,v))*d;case"radial":return d/2}}function i(e){switch(c){case"left":case"right":return(e.maxDepth-e.minDepth)/(1+v)*p;case"top":case"bottom":return(e.maxBreadth-e.minBreadth)*p;case"radial":return e.parentNode?(e.innerRadius+e.outerRadius)*Math.cos(e.midAngle):0}}function s(e){switch(c){case"left":case"right":return(e.maxBreadth-e.minBreadth)*d;case"top":case"bottom":return(e.maxDepth-e.minDepth)/(1+v)*d;case"radial":return e.parentNode?(e.innerRadius+e.outerRadius)*Math.sin(e.midAngle):0}}function o(e){return Math.max(0,t(e.minDepth,v/2))*(g-m)+m}function u(e){return t(e.maxDepth,v/2)*(g-m)+m}function a(e){return 2*(e.parentNode?e.minBreadth-.25:0)*Math.PI}function f(e){return 2*(e.parentNode?e.maxBreadth-e.minBreadth:1)*Math.PI}var l=e.nodes,c=e.orient,h=/^(top|bottom)$/.test(c),p=e.width,d=e.height,v=-l[0].minDepth;if("radial"==c){var m=e.innerRadius,g=e.outerRadius;null==m&&(m=0),m&&(v*=2),null==g&&(g=Math.min(p,d)/2)}for(var y=0;y<l.length;y++){var b=l[y];b.x=n(b),b.y=r(b),"radial"==c?(b.innerRadius=o(b),b.outerRadius=u(b),b.startAngle=a(b),b.angle=f(b),b.midAngle=b.startAngle+b.angle/2):b.midAngle=h?-Math.PI/2:0,b.dx=i(b),b.dy=s(b)}}},t.Layout.Grid=function(){t.Layout.call(this);var e=this;(this.cell=(new t.Mark).data(function(){return e.scene[e.index].$grid}).width(function(){return e.width()/e.cols()}).height(function(){return e.height()/e.rows()}).left(function(){return this.width()*(this.index%e.cols())}).top(function(){return this.height()*Math.floor(this.index/e.cols())})).parent=this},t.Layout.Grid.prototype=t.extend(t.Layout).property("rows").property("cols"),t.Layout.Grid.prototype.defaults=(new t.Layout.Grid).extend(t.Layout.prototype.defaults).rows(1).cols(1),t.Layout.Grid.prototype.buildImplied=function(e){t.Layout.prototype.buildImplied.call(this,e);var n=e.rows,r=e.cols;"object"==typeof r&&(n=t.transpose(r)),"object"==typeof n?(e.$grid=t.blend(n),e.rows=n.length,e.cols=n[0]?n[0].length:0):e.$grid=t.repeat([e.data],n*r)},t.Layout.Stack=function(){function e(e){return function(){return s[e](this.parent.index,this.index)}}t.Layout.call(this);var n,r=this,i=function(){return null},s={t:i,l:i,r:i,b:i,w:i,h:i},o=r.buildImplied;this.buildImplied=function(e){o.call(this,e);var r,u=e.layers,a=u.length,f=e.orient,l=/^(top|bottom)\b/.test(f),c=this.parent[l?"height":"width"](),h=[],p=[],d=[],v=t.Mark.stack,m={parent:{parent:this}};v.unshift(null),n=[];for(var g=0;a>g;g++){d[g]=[],p[g]=[],m.parent.index=g,v[0]=u[g],n[g]=this.$values.apply(m.parent,v),g||(r=n[g].length),v.unshift(null);for(var y=0;r>y;y++)v[0]=n[g][y],m.index=y,g||(h[y]=this.$x.apply(m,v)),d[g][y]=this.$y.apply(m,v);v.shift()}v.shift();var b;switch(e.order){case"inside-out":for(var w=d.map(function(e){return t.max.index(e)}),E=t.range(a).sort(function(e,t){return w[e]-w[t]}),S=d.map(function(e){return t.sum(e)}),x=0,T=0,N=[],C=[],g=0;a>g;g++){var y=E[g];T>x?(x+=S[y],N.push(y)):(T+=S[y],C.push(y))}b=C.reverse().concat(N);break;case"reverse":b=t.range(a-1,-1,-1);break;default:b=t.range(a)}switch(e.offset){case"silohouette":for(var y=0;r>y;y++){for(var m=0,g=0;a>g;g++)m+=d[g][y];p[b[0]][y]=(c-m)/2}break;case"wiggle":for(var m=0,g=0;a>g;g++)m+=d[g][0];p[b[0]][0]=m=(c-m)/2;for(var y=1;r>y;y++){for(var k=0,L=0,A=h[y]-h[y-1],g=0;a>g;g++)k+=d[g][y];for(var g=0;a>g;g++){for(var O=(d[b[g]][y]-d[b[g]][y-1])/(2*A),M=0;g>M;M++)O+=(d[b[M]][y]-d[b[M]][y-1])/A;L+=O*d[b[g]][y]}p[b[0]][y]=m-=k?L/k*A:0}break;case"expand":for(var y=0;r>y;y++){p[b[0]][y]=0;for(var M=0,g=0;a>g;g++)M+=d[g][y];if(M){M=c/M;for(var g=0;a>g;g++)d[g][y]*=M}else{M=c/a;for(var g=0;a>g;g++)d[g][y]=M}}break;default:for(var y=0;r>y;y++)p[b[0]][y]=0}for(var y=0;r>y;y++)for(var m=p[b[0]][y],g=1;a>g;g++)m+=d[b[g-1]][y],p[b[g]][y]=m;var g=f.indexOf("-"),_=l?"h":"w",D=0>g?l?"l":"b":f.charAt(g+1),P=f.charAt(0);for(var H in s)s[H]=i;s[D]=function(e,t){return h[t]},s[P]=function(e,t){return p[e][t]},s[_]=function(e,t){return d[e][t]}},this.layer=(new t.Mark).data(function(){return n[this.parent.index]}).top(e("t")).left(e("l")).right(e("r")).bottom(e("b")).width(e("w")).height(e("h")),this.layer.add=function(e){return r.add(t.Panel).data(function(){return r.layers()}).add(e).extend(this)}},t.Layout.Stack.prototype=t.extend(t.Layout).property("orient",String).property("offset",String).property("order",String).property("layers"),t.Layout.Stack.prototype.defaults=(new t.Layout.Stack).extend(t.Layout.prototype.defaults).orient("bottom-left").offset("zero").layers([[]]),t.Layout.Stack.prototype.$x=t.Layout.Stack.prototype.$y=function(){return 0},t.Layout.Stack.prototype.x=function(e){return this.$x=t.functor(e),this},t.Layout.Stack.prototype.y=function(e){return this.$y=t.functor(e),this},t.Layout.Stack.prototype.$values=t.identity,t.Layout.Stack.prototype.values=function(e){return this.$values=t.functor(e),this},t.Layout.Band=function(){function e(e){return function(){return n[e](this.index,this.parent.index)}}t.Layout.call(this);var n,r,i=this,s=i.buildImplied,o=(new t.Mark).data(function(){return r[this.parent.index]}).top(e("t")).left(e("l")).right(e("r")).bottom(e("b")).width(e("w")).height(e("h")).antialias(e("antialias"));this.buildImplied=function(e){s.call(this,e),n=Object.create(t.Layout.Band.$baseItemProps),r=[];var i=e.layers,o=i.length;if(o>0){var u=e.orient,a=/^(top|bottom)\b/.test(u),f=this.parent[a?"height":"width"](),l=this._readData(i,r,e),c=l.length;"reverse"===e.bandOrder&&l.reverse();if("reverse"===e.order){r.reverse();for(var h=0;c>h;h++)l[h].items.reverse()}switch(e.layout){case"grouped":this._calcGrouped(l,o,f,e);break;case"stacked":this._calcStacked(l,o,f,e)}for(var p=e.hZero||0,d="stacked"===e.layout,v=0;c>v;v++)for(var m=l[v],g=d?Math.max(0,m.vertiMargin)/2:0,y=0;o>y;y++){var b=m.items[y];b.zero&&(b.h=p,b.y-=g+p/2)}this._bindItemProps(l,n,u,a)}};var u=this.item={end:this,add:function(e){return i.add(t.Panel).data(function(){return i.layers()}).add(e).extend(o)},order:function(e){return i.order(e),this},w:function(e){return i.$iw=t.functor(e),this},h:function(e){return i.$ih=t.functor(e),this},horizontalRatio:function(e){return i.$ihorizRatio=t.functor(e),this},verticalMargin:function(e){return i.$ivertiMargin=t.functor(e),this}},a=this.band={end:this,w:function(e){return i.$bw=t.functor(e),this},x:function(e){return i.$bx=t.functor(e),this},order:function(e){return i.bandOrder(e),this},differentialControl:function(e){return i.$bDiffControl=t.functor(e),this}};this.band.item=u,this.item.band=a},t.Layout.Band.$baseItemProps=function(){var e=function(){return null};return{t:e,l:e,r:e,b:e,w:e,h:e}}(),t.Layout.Band.prototype=t.extend(t.Layout).property("orient",String).property("layout",String).property("layers").property("yZero",Number).property("hZero",Number).property("verticalMode",String).property("horizontalMode",String).property("order",String).property("bandOrder",String),t.Layout.Band.prototype.defaults=(new t.Layout.Band).extend(t.Layout.prototype.defaults).orient("bottom-left").layout("grouped").yZero(0).hZero(1.5).layers([[]]),t.Layout.Band.prototype.$bx=t.Layout.Band.prototype.$bw=t.Layout.Band.prototype.$bDiffControl=t.Layout.Band.prototype.$iw=t.Layout.Band.prototype.$ih=t.Layout.Band.prototype.$ivertiMargin=t.functor(0),t.Layout.Band.prototype.$ihorizRatio=t.functor(.9),t.Layout.Band.prototype.$values=t.identity,t.Layout.Band.prototype.values=function(e){return this.$values=t.functor(e),this},t.Layout.prototype._readData=function(e,n,r){var i,s=e.length,o=[],u=t.Mark.stack,a=r.hZero,f={parent:{parent:this}};u.unshift(null);for(var l=0;s>l;l++){f.parent.index=l,u[0]=e[l];var c=n[l]=this.$values.apply(f.parent,u);l||(i=c.length),u.unshift(null);for(var h=0;i>h;h++){u[0]=c[h],f.index=h;var p=o[h];p||(p=o[h]={horizRatio:this.$ihorizRatio.apply(f,u),vertiMargin:this.$ivertiMargin.apply(f,u),w:this.$bw.apply(f,u),x:this.$bx.apply(f,u),diffControl:this.$bDiffControl?this.$bDiffControl.apply(f,u):0,items:[]});var d=this.$ih.apply(f,u),v=null!=d?Math.abs(d):d;p.items[l]={y:r.yZero||0,x:0,w:this.$iw.apply(f,u),h:v,zero:null!=v&&a>=v,dir:0>d?-1:1}}u.shift()}return u.shift(),o},t.Layout.Band.prototype._normalizeBands=function(e,t,n,r){var i,s=e.length;if("expand"===r.verticalMode)for(var o=0;s>o;o++){i=e[o].items;for(var u=null,a=0,f=0;t>f;f++){var l=i[f];l.dir=1;var c=l.h;null!=c&&(a++,u+=c)}if(a)if(u)for(var h=n/u,f=0;t>f;f++){var c=i[f].h;null!=c&&(i[f].h=c*h,i[f].zero=i[f].h<=r.hZero)}else if(0==u)for(var f=0;t>f;f++)i[f].h=0;else for(var p=n/a,f=0;t>f;f++){var c=i[f].h;null!=c&&(i[f].h=p)}}return i},t.Layout.Band.prototype._calcGrouped=function(e,t,n,r){for(var i=this._normalizeBands(e,t,n,r),s=0,o=e.length;o>s;s++){for(var u=e[s],i=u.items,a=u.w,f=u.horizRatio,l=0,c=0;t>c;c++)l+=i[c].w;1===t?f=1:f>0&&1>=f||(f=1);if(null==a)a=u.w=l/f;else if("expand"===r.horizontalMode){var h=f*a;if(l)for(var p=h/l,c=0;t>c;c++)i[c].w*=p;else for(var d=h/t,c=0;t>c;c++)i[c].w=d;l=h}for(var v=l/f,m=u.x-v/2,g=t>1?(v-l)/(t-1):0,c=0;t>c;c++){var y=i[c];y.x=m,m+=y.w+g,y.dir<0&&(y.y-=y.h)}}},t.Layout.Band.prototype._calcStacked=function(e,t,n,r){for(var i=this._normalizeBands(e,t,n,r),s=r.yZero,o=s,u=0,a=e.length;a>u;u++){var f=e[u],l=f.x,c=f.diffControl,h=0>c,p=Math.max(0,f.vertiMargin);i=f.items;var d=this._layoutItemsOfDir(1,h,i,p,l,o),v=null;d.existsOtherDir&&(v=this._layoutItemsOfDir(-1,h,i,p,l,o));if(c){if(1===Math.abs(c)){var m=o;o=d.yOffset,v&&(o-=m-v.yOffset)}}else o=s}},t.Layout.Band.prototype._layoutItemsOfDir=function(e,t,n,r,i,s){for(var o=!1,u=r/2,a=t?-e:e,f=t,l=0,c=n.length;c>l;l+=1){var h=n[f?c-l-1:l];if(h.dir===e){var p=h.h||0;a>0?(h.y=s+u,s+=p):(h.y=s-(p-u),s-=p);var d=p-r;h.h=d>0?d:0,h.x=i-h.w/2}else o=!0}return{existsOtherDir:o,yOffset:s}},t.Layout.Band.prototype._bindItemProps=function(e,t,n,r){var i=n.indexOf("-"),s=r?"h":"w",o=r?"w":"h",u=0>i?r?"l":"b":n.charAt(i+1),a=n.charAt(0);t[u]=function(t,n){return e[t].items[n].x},t[a]=function(t,n){return e[t].items[n].y},t[o]=function(t,n){return e[t].items[n].w},t[s]=function(t,n){return e[t].items[n].h||0},t.antialias=function(t,n){return e[t].items[n].zero}},t.Layout.Treemap=function(){t.Layout.Hierarchy.call(this),this.node.strokeStyle("#fff").fillStyle("rgba(31, 119, 180, .25)").width(function(e){return e.dx}).height(function(e){return e.dy}),this.label.visible(function(e){return!e.firstChild}).left(function(e){return e.x+e.dx/2}).top(function(e){return e.y+e.dy/2}).textAlign("center").textAngle(function(e){return e.dx>e.dy?0:-Math.PI/2}),(this.leaf=(new t.Mark).extend(this.node).fillStyle(null).strokeStyle(null).visible(function(e){return!e.firstChild})).parent=this,delete this.link},t.Layout.Treemap.prototype=t.extend(t.Layout.Hierarchy).property("round",Boolean).property("mode",String).property("order",String),t.Layout.Treemap.prototype.defaults=(new t.Layout.Treemap).extend(t.Layout.Hierarchy.prototype.defaults).mode("squarify").order("ascending"),t.Layout.Treemap.prototype.$size=function(e){return Number(e.nodeValue)},t.Layout.Treemap.prototype.$padLeft=t.Layout.Treemap.prototype.$padRight=t.Layout.Treemap.prototype.$padBottom=t.Layout.Treemap.prototype.$padTop=function(){return 0},t.Layout.Treemap.prototype.size=function(e){return this.$size=t.functor(e),this},t.Layout.Treemap.prototype.padding=function(e){return e=t.functor(e),this.paddingLeft(e).paddingRight(e).paddingTop(e).paddingBottom(e)},t.Layout.Treemap.prototype.paddingLeft=function(e){return arguments.length?(this.$padLeft=t.functor(e),this):this.$padLeft},t.Layout.Treemap.prototype.paddingRight=function(e){return arguments.length?(this.$padRight=t.functor(e),this):this.$padRight},t.Layout.Treemap.prototype.paddingBottom=function(e){return arguments.length?(this.$padBottom=t.functor(e),this):this.$padBottom},t.Layout.Treemap.prototype.paddingTop=function(e){return arguments.length?(this.$padTop=t.functor(e),this):this.$padTop},t.Layout.Treemap.prototype.buildImplied=function(e){function n(e,t,n,r,i,s,o){for(var u=0,a=0;u<e.length;u++){var f=e[u];n?(f.x=r+a,f.y=i,a+=f.dx=l(s*f.size/t),f.dy=o):(f.x=r,f.y=i+a,f.dx=s,a+=f.dy=l(o*f.size/t))}f&&(n?f.dx+=s-a:f.dy+=o-a)}function r(e,t){for(var n=-1/0,r=1/0,i=0,s=0;s<e.length;s++){var o=e[s].size;r>o&&(r=o),o>n&&(n=o),i+=o}return i*=i,t*=t,Math.max(t*n/i,i/(t*r))}function i(e,i){function s(e){var r=h==m,i=t.sum(e,f),s=m?l(i/m):0;return n(e,i,r,u,a,r?h:s,r?s:p),r?(a+=s,p-=s):(u+=s,h-=s),m=Math.min(h,p),r}var o=e.parentNode,u=e.x,a=e.y,h=e.dx,p=e.dy;o&&(u+=o.paddingLeft,a+=o.paddingTop,h+=-o.paddingLeft-o.paddingRight,p+=-o.paddingTop-o.paddingBottom);if("squarify"==c){var d=[],v=1/0,m=Math.min(h,p),g=h*p/e.size;if(!(e.size<=0)){e.visitBefore(function(e){e.size*=g});for(var y=e.childNodes.slice();y.length;){var b=y[y.length-1];if(b.size){d.push(b);var g=r(d,m);v>=g?(y.pop(),v=g):(d.pop(),s(d),d.length=0,v=1/0)}else y.pop()}if(s(d))for(var i=0;i<d.length;i++)d[i].dy+=p;else for(var i=0;i<d.length;i++)d[i].dx+=h}}else n(e.childNodes,e.size,"slice"==c?!0:"dice"==c?!1:1&i,u,a,h,p)}if(!t.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var s=this,o=e.nodes,u=o[0],a=t.Mark.stack,f=function(e){return e.size},l=e.round?Math.round:Number,c=e.mode;a.unshift(null);try{u.visitAfter(function(e,n){e.depth=n,e.x=e.y=e.dx=e.dy=0,a[0]=e,e.firstChild?(e.size=t.sum(e.childNodes,f),e.paddingRight=+s.$padRight.apply(s,a)||0,e.paddingLeft=+s.$padLeft.apply(s,a)||0,e.paddingBottom=+s.$padBottom.apply(s,a)||0,e.paddingTop=+s.$padTop.apply(s,a)||0):e.size=s.$size.apply(s,a)})}finally{a.shift()}switch(e.order){case"ascending":u.sort(function(e,t){return e.size-t.size});break;case"descending":u.sort(function(e,t){return t.size-e.size});break;case"reverse":u.reverse()}u.x=0,u.y=0,u.dx=e.width,u.dy=e.height,u.visitBefore(i)}},t.Layout.Tree=function(){t.Layout.Hierarchy.call(this)},t.Layout.Tree.prototype=t.extend(t.Layout.Hierarchy).property("group",Number).property("breadth",Number).property("depth",Number).property("orient",String),t.Layout.Tree.prototype.defaults=(new t.Layout.Tree).extend(t.Layout.Hierarchy.prototype.defaults).group(1).breadth(15).depth(60).orient("top"),t.Layout.Tree.prototype.buildImplied=function(e){function n(e){var t,r,s;if(e.firstChild){t=e.firstChild,r=e.lastChild,s=t;for(var o=t;o;o=o.nextSibling)n(o),s=i(o,s);a(e);var u=.5*(t.prelim+r.prelim);(t=e.previousSibling)?(e.prelim=t.prelim+l(e.depth,!0),e.mod=e.prelim-u):e.prelim=u}else(t=e.previousSibling)&&(e.prelim=t.prelim+l(e.depth,!0))}function r(e,t,n){e.breadth=e.prelim+t,t+=e.mod;for(var i=e.firstChild;i;i=i.nextSibling)r(i,t,n)}function i(e,t){var n=e.previousSibling;if(n){for(var r=e,i=e,a=n,c=e.parentNode.firstChild,h=r.mod,p=i.mod,d=a.mod,v=c.mod,m=o(a),g=s(r);m&&g;){a=m,r=g,c=s(c),i=o(i),i.ancestor=e;var y=a.prelim+d-(r.prelim+h)+l(a.depth,!1);y>0&&(u(f(a,e,t),e,y),h+=y,p+=y),d+=a.mod,h+=r.mod,v+=c.mod,p+=i.mod,m=o(a),g=s(r)}m&&!o(i)&&(i.thread=m,i.mod+=d-p),g&&!s(c)&&(c.thread=g,c.mod+=h-v,t=e)}return t}function s(e){return e.firstChild||e.thread}function o(e){return e.lastChild||e.thread}function u(e,t,n){var r=t.number-e.number;t.change-=n/r,t.shift+=n,e.change+=n/r,t.prelim+=n,t.mod+=n}function a(e){for(var t=0,n=0,r=e.lastChild;r;r=r.previousSibling)r.prelim+=t,r.mod+=t,n+=r.change,t+=r.shift+n}function f(e,t,n){return e.ancestor.parentNode==t.parentNode?e.ancestor:n}function l(e,t){return(t?1:y+1)/("radial"==v?e:1)}function c(e){return"radial"==v?e.breadth/m:0}function h(e){switch(v){case"left":return e.depth;case"right":return b-e.depth;case"top":case"bottom":return e.breadth+b/2;case"radial":return b/2+e.depth*Math.cos(c(e))}}function p(e){switch(v){case"left":case"right":return e.breadth+w/2;case"top":return e.depth;case"bottom":return w-e.depth;case"radial":return w/2+e.depth*Math.sin(c(e))}}if(!t.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var d=e.nodes,v=e.orient,m=e.depth,g=e.breadth,y=e.group,b=e.width,w=e.height,E=d[0];E.visitAfter(function(e,t){e.ancestor=e,e.prelim=0,e.mod=0,e.change=0,e.shift=0,e.number=e.previousSibling?e.previousSibling.number+1:0,e.depth=t}),n(E),r(E,-E.prelim,0),E.visitAfter(function(e){e.breadth*=g,e.depth*=m,e.midAngle=c(e),e.x=h(e),e.y=p(e),e.firstChild&&(e.midAngle+=Math.PI),delete e.breadth,delete e.depth,delete e.ancestor,delete e.prelim,delete e.mod,delete e.change,delete e.shift,delete e.number,delete e.thread})}},t.Layout.Indent=function(){t.Layout.Hierarchy.call(this),this.link.interpolate("step-after")},t.Layout.Indent.prototype=t.extend(t.Layout.Hierarchy).property("depth",Number).property("breadth",Number),t.Layout.Indent.prototype.defaults=(new t.Layout.Indent).extend(t.Layout.Hierarchy.prototype.defaults).depth(15).breadth(15),t.Layout.Indent.prototype.buildImplied=function(e){function n(e,t,r){e.x=o+r++*s,e.y=u+t++*i,e.midAngle=0;for(var a=e.firstChild;a;a=a.nextSibling)t=n(a,t,r);return t}if(!t.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var r=e.nodes,i=e.breadth,s=e.depth,o=0,u=0;n(r[0],1,1)}},t.Layout.Pack=function(){t.Layout.Hierarchy.call(this),this.node.shapeRadius(function(e){return e.radius}).strokeStyle("rgb(31, 119, 180)").fillStyle("rgba(31, 119, 180, .25)"),this.label.textAlign("center"),delete this.link},t.Layout.Pack.prototype=t.extend(t.Layout.Hierarchy).property("spacing",Number).property("order",String),t.Layout.Pack.prototype.defaults=(new t.Layout.Pack).extend(t.Layout.Hierarchy.prototype.defaults).spacing(1).order("ascending"),t.Layout.Pack.prototype.$radius=function(){return 1},t.Layout.Pack.prototype.size=function(e){return this.$radius="function"==typeof e?function(){return Math.sqrt(e.apply(this,arguments))}:(e=Math.sqrt(e),function(){return e}),this},t.Layout.Pack.prototype.buildImplied=function(e){function n(e){var n=t.Mark.stack;n.unshift(null);for(var r=0,i=e.length;i>r;r++){var s=e[r];s.firstChild||(s.radius=u.$radius.apply(u,(n[0]=s,n)))}n.shift()}function r(t){for(var n=[],s=t.firstChild;s;s=s.nextSibling)s.firstChild&&(s.radius=r(s)),s.n=s.p=s,n.push(s);switch(e.order){case"ascending":n.sort(function(e,t){return e.radius-t.radius});break;case"descending":n.sort(function(e,t){return t.radius-e.radius});break;case"reverse":n.reverse()}return i(n)}function i(t){function n(e){h=Math.min(e.x-e.radius,h),p=Math.max(e.x+e.radius,p),d=Math.min(e.y-e.radius,d),v=Math.max(e.y+e.radius,v)}function r(e,t){var n=e.n;e.n=t,t.p=e,t.n=n,n.p=t}function i(e,t){e.n=t,t.p=e}function o(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.radius+t.radius;return i*i-n*n-r*r>.001}var u,a,f,l,c,h=1/0,p=-1/0,d=1/0,v=-1/0;u=t[0],u.x=-u.radius,u.y=0,n(u);if(t.length>1){a=t[1],a.x=a.radius,a.y=0,n(a);if(t.length>2){f=t[2],s(u,a,f),n(f),r(u,f),u.p=f,r(f,a),a=u.n;for(var m=3;m<t.length;m++){s(u,a,f=t[m]);var g=0,y=1,b=1;for(l=a.n;l!=a;l=l.n,y++)if(o(l,f)){g=1;break}if(1==g)for(c=u.p;c!=l.p;c=c.p,b++)if(o(c,f)){y>b&&(g=-1,l=c);break}0==g?(r(u,f),a=f,n(f)):g>0?(i(u,l),a=l,m--):0>g&&(i(l,a),u=l,m--)}}}for(var w=(h+p)/2,E=(d+v)/2,S=0,m=0;m<t.length;m++){var x=t[m];x.x-=w,x.y-=E,S=Math.max(S,x.radius+Math.sqrt(x.x*x.x+x.y*x.y))}return S+e.spacing}function s(e,t,n){var r=t.radius+n.radius,i=e.radius+n.radius,s=t.x-e.x,o=t.y-e.y,u=Math.sqrt(s*s+o*o),a=(i*i+u*u-r*r)/(2*i*u),f=Math.acos(a),l=a*i,c=Math.sin(f)*i;s/=u,o/=u,n.x=e.x+l*s+c*o,n.y=e.y+l*o-c*s}function o(e,t,n,r){for(var i=e.firstChild;i;i=i.nextSibling)i.x+=e.x,i.y+=e.y,o(i,t,n,r);e.x=t+r*e.x,e.y=n+r*e.y,e.radius*=r}if(!t.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var u=this,a=e.nodes,f=a[0];n(a),f.x=0,f.y=0,f.radius=r(f);var l=this.width(),c=this.height(),h=1/Math.max(2*f.radius/l,2*f.radius/c);o(f,l/2,c/2,h)}},t.Layout.Force=function(){t.Layout.Network.call(this),this.link.lineWidth(function(e,t){return 1.5*Math.sqrt(t.linkValue)}),this.label.textAlign("center")},t.Layout.Force.prototype=t.extend(t.Layout.Network).property("bound",Boolean).property("iterations",Number).property("dragConstant",Number).property("chargeConstant",Number).property("chargeMinDistance",Number).property("chargeMaxDistance",Number).property("chargeTheta",Number).property("springConstant",Number).property("springDamping",Number).property("springLength",Number),t.Layout.Force.prototype.defaults=(new t.Layout.Force).extend(t.Layout.Network.prototype.defaults).dragConstant(.1).chargeConstant(-40).chargeMinDistance(2).chargeMaxDistance(500).chargeTheta(.9).springConstant(.1).springDamping(.3).springLength(20),t.Layout.Force.prototype.buildImplied=function(e){function n(e){return e.fix?1:e.vx*e.vx+e.vy*e.vy}if(t.Layout.Network.prototype.buildImplied.call(this,e)){var r=e.$force;r&&(r.next=this.binds.$force,this.binds.$force=r)}else{for(var i,s=this,o=e.nodes,u=e.links,a=e.iterations,f=e.width,l=e.height,c=0;c<o.length;c++)i=o[c],isNaN(i.x)&&(i.x=f/2+40*Math.random()-20),isNaN(i.y)&&(i.y=l/2+40*Math.random()-20);var h=t.simulation(o);h.force(t.Force.drag(e.dragConstant)),h.force(t.Force.charge(e.chargeConstant).domain(e.chargeMinDistance,e.chargeMaxDistance).theta(e.chargeTheta)),h.force(t.Force.spring(e.springConstant).damping(e.springDamping).length(e.springLength).links(u)),h.constraint(t.Constraint.position()),e.bound&&h.constraint(t.Constraint.bound().x(6,f-6).y(6,l-6));if(null==a)h.step(),h.step(),e.$force=this.binds.$force={next:this.binds.$force,nodes:o,min:1e-4*(u.length+1),sim:h},this.$timer||(this.$timer=setInterval(function(){for(var e=!1,r=s.binds.$force;r;r=r.next)t.max(r.nodes,n)>r.min&&(r.sim.step(),e=!0);e&&s.render()},42));else for(var c=0;a>c;c++)h.step()}},t.Layout.Cluster=function(){t.Layout.Hierarchy.call(this);var e,n=this.buildImplied;this.buildImplied=function(t){n.call(this,t),e=/^(top|bottom)$/.test(t.orient)?"step-before":/^(left|right)$/.test(t.orient)?"step-after":"linear"},this.link.interpolate(function(){return e})},t.Layout.Cluster.prototype=t.extend(t.Layout.Hierarchy).property("group",Number).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),t.Layout.Cluster.prototype.defaults=(new t.Layout.Cluster).extend(t.Layout.Hierarchy.prototype.defaults).group(0).orient("top"),t.Layout.Cluster.prototype.buildImplied=function(e){if(!t.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var n,r,i=e.nodes[0],s=e.group,o=0,u=.5-s/2,a=void 0;i.visitAfter(function(e){e.firstChild?e.depth=1+t.max(e.childNodes,function(e){return e.depth}):(s&&a!=e.parentNode&&(a=e.parentNode,o+=s),o++,e.depth=0)}),n=1/o,r=1/i.depth;var a=void 0;i.visitAfter(function(e){e.firstChild?e.breadth=t.mean(e.childNodes,function(e){return e.breadth}):(s&&a!=e.parentNode&&(a=e.parentNode,u+=s),e.breadth=n*u++),e.depth=1-e.depth*r}),i.visitAfter(function(e){e.minBreadth=e.firstChild?e.firstChild.minBreadth:e.breadth-n/2,e.maxBreadth=e.firstChild?e.lastChild.maxBreadth:e.breadth+n/2}),i.visitBefore(function(e){e.minDepth=e.parentNode?e.parentNode.maxDepth:0,e.maxDepth=e.parentNode?e.depth+i.depth:e.minDepth+2*i.depth}),i.minDepth=-r,t.Layout.Hierarchy.NodeLink.buildImplied.call(this,e)}},t.Layout.Cluster.Fill=function(){t.Layout.Cluster.call(this),t.Layout.Hierarchy.Fill.constructor.call(this)},t.Layout.Cluster.Fill.prototype=t.extend(t.Layout.Cluster),t.Layout.Cluster.Fill.prototype.buildImplied=function(e){t.Layout.Cluster.prototype.buildImplied.call(this,e)||t.Layout.Hierarchy.Fill.buildImplied.call(this,e)},t.Layout.Partition=function(){t.Layout.Hierarchy.call(this)},t.Layout.Partition.prototype=t.extend(t.Layout.Hierarchy).property("order",String).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),t.Layout.Partition.prototype.defaults=(new t.Layout.Partition).extend(t.Layout.Hierarchy.prototype.defaults).orient("top"),t.Layout.Partition.prototype.$size=function(){return 1},t.Layout.Partition.prototype.size=function(e){return this.$size=e,this},t.Layout.Partition.prototype.buildImplied=function(e){if(!t.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var n=this,r=e.nodes[0],i=t.Mark.stack,s=0;i.unshift(null),r.visitAfter(function(e,r){r>s&&(s=r),e.size=e.firstChild?t.sum(e.childNodes,function(e){return e.size}):n.$size.apply(n,(i[0]=e,i))}),i.shift();switch(e.order){case"ascending":r.sort(function(e,t){return e.size-t.size});break;case"descending":r.sort(function(e,t){return t.size-e.size})}r.minBreadth=0,r.breadth=.5,r.maxBreadth=1,r.visitBefore(function(e){for(var t=e.minBreadth,n=e.maxBreadth-t,r=e.firstChild;r;r=r.nextSibling)r.minBreadth=t,t+=r.size/e.size*n,r.maxBreadth=t,r.breadth=(t+r.minBreadth)/2}),r.visitAfter(function(e,t){e.minDepth=(t-1)/s,e.maxDepth=e.depth=t/s}),t.Layout.Hierarchy.NodeLink.buildImplied.call(this,e)}},t.Layout.Partition.Fill=function(){t.Layout.Partition.call(this),t.Layout.Hierarchy.Fill.constructor.call(this)},t.Layout.Partition.Fill.prototype=t.extend(t.Layout.Partition),t.Layout.Partition.Fill.prototype.buildImplied=function(e){t.Layout.Partition.prototype.buildImplied.call(this,e)||t.Layout.Hierarchy.Fill.buildImplied.call(this,e)},t.Layout.Arc=function(){t.Layout.Network.call(this);var e,n,r,i=this.buildImplied;this.buildImplied=function(t){i.call(this,t),n=t.directed,e="radial"==t.orient?"linear":"polar",r="right"==t.orient||"top"==t.orient},this.link.data(function(e){var t=e.sourceNode,i=e.targetNode;return r!=(n||t.breadth<i.breadth)?[t,i]:[i,t]}).interpolate(function(){return e})},t.Layout.Arc.prototype=t.extend(t.Layout.Network).property("orient",String).property("directed",Boolean),t.Layout.Arc.prototype.defaults=(new t.Layout.Arc).extend(t.Layout.Network.prototype.defaults).orient("bottom"),t.Layout.Arc.prototype.sort=function(e){return this.$sort=e,this},t.Layout.Arc.prototype.buildImplied=function(e){function n(e){switch(o){case"top":return-Math.PI/2;case"bottom":return Math.PI/2;case"left":return Math.PI;case"right":return 0;case"radial":return 2*(e-.25)*Math.PI}}function r(e){switch(o){case"top":case"bottom":return e*f;case"left":return 0;case"right":return f;case"radial":return f/2+c*Math.cos(n(e))}}function i(e){switch(o){case"top":return 0;case"bottom":return l;case"left":case"right":return e*l;case"radial":return l/2+c*Math.sin(n(e))}}if(!t.Layout.Network.prototype.buildImplied.call(this,e)){var s=e.nodes,o=e.orient,u=this.$sort,a=t.range(s.length),f=e.width,l=e.height,c=Math.min(f,l)/2;u&&a.sort(function(e,t){return u(s[e],s[t])});for(var h=0;h<s.length;h++){var p=s[a[h]],d=p.breadth=(h+.5)/s.length;p.x=r(d),p.y=i(d),p.midAngle=n(d)}}},t.Layout.Horizon=function(){t.Layout.call(this);var e,n,r,i,s,o,u=this,a=this.buildImplied;this.buildImplied=function(u){a.call(this,u),e=u.bands,n=u.mode,r=Math.round(("color"==n?.5:1)*u.height),i=u.backgroundStyle,s=t.ramp(i,u.negativeStyle).domain(0,e),o=t.ramp(i,u.positiveStyle).domain(0,e)};var e=(new t.Panel).data(function(){return t.range(2*e)}).overflow("hidden").height(function(){return r}).top(function(e){return"color"==n?(1&e)*r:0}).fillStyle(function(e){return e?null:i});this.band=(new t.Mark).top(function(e,t){return"mirror"==n&&1&t?(t+1>>1)*r:null}).bottom(function(e,t){return"mirror"==n?1&t?null:(t+1>>1)*-r:(1&t||-1)*(t+1>>1)*r}).fillStyle(function(e,t){return(1&t?s:o)((t>>1)+1)}),this.band.add=function(n){return u.add(t.Panel).extend(e).add(n).extend(this)}},t.Layout.Horizon.prototype=t.extend(t.Layout).property("bands",Number).property("mode",String).property("backgroundStyle",t.fillStyle).property("positiveStyle",t.fillStyle).property("negativeStyle",t.fillStyle),t.Layout.Horizon.prototype.defaults=(new t.Layout.Horizon).extend(t.Layout.prototype.defaults).bands(2).mode("offset").backgroundStyle("white").positiveStyle("#1f77b4").negativeStyle("#d62728"),t.Layout.Rollup=function(){t.Layout.Network.call(this);var e,n,r=this,i=r.buildImplied;this.buildImplied=function(t){i.call(this,t),e=t.$rollup.nodes,n=t.$rollup.links},this.node.data(function(){return e}).shapeSize(function(e){return 20*e.nodes.length}),this.link.interpolate("polar").eccentricity(.8),this.link.add=function(e){return r.add(t.Panel).data(function(){return n}).add(e).extend(this)}},t.Layout.Rollup.prototype=t.extend(t.Layout.Network).property("directed",Boolean),t.Layout.Rollup.prototype.x=function(e){return this.$x=t.functor(e),this},t.Layout.Rollup.prototype.y=function(e){return this.$y=t.functor(e),this},t.Layout.Rollup.prototype.buildImplied=function(e){function n(e){return u[e]+","+a[e]}if(!t.Layout.Network.prototype.buildImplied.call(this,e)){var r=e.nodes,i=e.links,s=e.directed,o=r.length,u=[],a=[],f=0,l={},c={},h=t.Mark.stack,p={parent:this};h.unshift(null);for(var d=0;o>d;d++)p.index=d,h[0]=r[d],u[d]=this.$x.apply(p,h),a[d]=this.$y.apply(p,h);h.shift();for(var d=0;d<r.length;d++){var v=n(d),m=l[v];m||(m=l[v]=Object.create(r[d]),m.index=f++,m.x=u[d],m.y=a[d],m.nodes=[]),m.nodes.push(r[d])}for(var d=0;d<i.length;d++){var g=i[d].sourceNode,y=i[d].targetNode,b=l[n(g.index)],w=l[n(y.index)],E=!s&&b.index>w.index,S=E?w.index+","+b.index:b.index+","+w.index,x=c[S];x||(x=c[S]={sourceNode:b,targetNode:w,linkValue:0,links:[]}),x.links.push(i[d]),x.linkValue+=i[d].linkValue}e.$rollup={nodes:t.values(l),links:t.values(c)}}},t.Layout.Matrix=function(){t.Layout.Network.call(this);var e,n,r,i,s,o=this,u=o.buildImplied;this.buildImplied=function(t){u.call(this,t),e=t.nodes.length,n=t.width/e,r=t.height/e,i=t.$matrix.labels,s=t.$matrix.pairs},this.link.data(function(){return s}).left(function(){return n*(this.index%e)}).top(function(){return r*Math.floor(this.index/e)}).width(function(){return n}).height(function(){return r}).lineWidth(1.5).strokeStyle("#fff").fillStyle(function(e){return e.linkValue?"#555":"#eee"}).parent=this,delete this.link.add,this.label.data(function(){return i}).left(function(){return 1&this.index?n*((this.index>>1)+.5):0}).top(function(){return 1&this.index?0:r*((this.index>>1)+.5)}).textMargin(4).textAlign(function(){return 1&this.index?"left":"right"}).textAngle(function(){return 1&this.index?-Math.PI/2:0}),delete this.node},t.Layout.Matrix.prototype=t.extend(t.Layout.Network).property("directed",Boolean),t.Layout.Matrix.prototype.sort=function(e){return this.$sort=e,this},t.Layout.Matrix.prototype.buildImplied=function(e){if(!t.Layout.Network.prototype.buildImplied.call(this,e)){var n=e.nodes,r=e.links,i=this.$sort,s=n.length,o=t.range(s),u=[],a=[],f={};e.$matrix={labels:u,pairs:a},i&&o.sort(function(e,t){return i(n[e],n[t])});for(var l=0;s>l;l++)for(var c=0;s>c;c++){var h=o[l],p=o[c],d={row:l,col:c,sourceNode:n[h],targetNode:n[p],linkValue:0};a.push(f[h+"."+p]=d)}for(var l=0;s>l;l++){var h=o[l];u.push(n[h],n[h])}for(var l=0;l<r.length;l++){var v=r[l],m=v.sourceNode.index,g=v.targetNode.index,y=v.linkValue;f[m+"."+g].linkValue+=y,e.directed||(f[g+"."+m].linkValue+=y)}}},t.Layout.Bullet=function(){t.Layout.call(this);var e,n,r,i,s,o=this,u=o.buildImplied,a=o.x=t.Scale.linear();this.buildImplied=function(o){u.call(this,s=o),e=o.orient,n=/^left|right$/.test(e),r=t.ramp("#bbb","#eee").domain(0,Math.max(1,s.ranges.length-1)),i=t.ramp("steelblue","lightsteelblue").domain(0,Math.max(1,s.measures.length-1))},(this.range=new t.Mark).data(function(){return s.ranges}).reverse(!0).left(function(){return"left"==e?0:null}).top(function(){return"top"==e?0:null}).right(function(){return"right"==e?0:null}).bottom(function(){return"bottom"==e?0:null}).width(function(e){return n?a(e):null}).height(function(e){return n?null:a(e)}).fillStyle(function(){return r(this.index)}).antialias(!1).parent=o,(this.measure=new t.Mark).extend(this.range).data(function(){return s.measures}).left(function(){return"left"==e?0:n?null:this.parent.width()/3.25}).top(function(){return"top"==e?0:n?this.parent.height()/3.25:null}).right(function(){return"right"==e?0:n?null:this.parent.width()/3.25}).bottom(function(){return"bottom"==e?0:n?this.parent.height()/3.25:null}).fillStyle(function(){return i(this.index)}).parent=o,(this.marker=new t.Mark).data(function(){return s.markers}).left(function(t){return"left"==e?a(t):n?null:this.parent.width()/2}).top(function(t){return"top"==e?a(t):n?this.parent.height()/2:null}).right(function(t){return"right"==e?a(t):null}).bottom(function(t){return"bottom"==e?a(t):null}).strokeStyle("black").shape("bar").shapeAngle(function(){return n?0:Math.PI/2}).parent=o,(this.tick=new t.Mark).data(function(){return a.ticks(7)}).left(function(t){return"left"==e?a(t):null}).top(function(t){return"top"==e?a(t):null}).right(function(t){return"right"==e?a(t):n?null:-6}).bottom(function(t){return"bottom"==e?a(t):n?-8:null}).height(function(){return n?6:null}).width(function(){return n?null:6}).parent=o},t.Layout.Bullet.prototype=t.extend(t.Layout).property("orient",String).property("ranges").property("markers").property("measures").property("minimum").property("maximum"),t.Layout.Bullet.prototype.defaults=(new t.Layout.Bullet).extend(t.Layout.prototype.defaults).orient("left").ranges([]).markers([]).measures([]),t.Layout.Bullet.prototype._originIsZero=!0,t.Layout.Bullet.prototype.originIsZero=function(e){return arguments.length?this._originIsZero=!!e:this._originIsZero},t.Layout.Bullet.prototype.buildImplied=function(e){t.Layout.prototype.buildImplied.call(this,e);var n,r=this.parent[/^left|right$/.test(e.orient)?"width":"height"](),i=e.maximum,s=e.minimum,o=1e-10;null==i?(n=[].concat(e.ranges,e.markers,e.measures),i=t.max(n)):i=+i,null==s?(n||(n=[].concat(e.ranges,e.markers,e.measures)),s=t.min(n),s=.95*s):s=+s,(s>i||o>i-s)&&(s=Math.abs(i)<o?-0.1:.99*i),this._originIsZero&&s*i>0&&(s>0?s=0:i=0),e.minimum=s,e.maximum=i,this.x.domain(s,i).range(0,r)},t.Behavior={},t.Behavior.dragBase=function(e){function n(n){c||(c=!0,this.addEventInterceptor("click",u,!0));if(!a){var o=this.root.scene.$g;a=[[o,"mousemove",t.listen(o,"mousemove",r)],[o,"mouseup",t.listen(o,"mouseup",i)],[document,"mousemove",t.listen(document,"mousemove",r)],[document,"mouseup",t.listen(document,"mouseup",i)]]}var p=arguments[arguments.length-1];f=p.target,l=!1,p.stopPropagation();var d=this.mouse(),v=this.scene,m=this.index;h=v[m].drag={phase:"start",m:d,m1:d,m2:null,d:n,scene:v,index:m},p=s(p,h),e.dragstart.call(this,p);var g=h.m;g!==d&&(d.x=g.x,d.y=g.y)}function r(t){if(h){h.phase="move",t.stopPropagation(),t=s(t,h);var n=h.scene;n.mark.context(n,h.index,function(){var n=h.m2||h.m1,r=this.mouse();if(!(n&&r.distance2(n).dist2<=2)){h.m=h.m2=r,e.drag.call(this,t);var i=h.m;i!==r&&(r.x=i.x,r.y=i.y)}})}}function i(n){if(h){h.phase="end";var r=h.m2,i=r&&h.m1.distance2(r).dist2>.1;h.canceled=!i,l=i&&f===n.target,l||(f=null),n.stopPropagation(),n=s(n,h),a&&(a.forEach(function(e){t.unlisten.apply(t,e)}),a=null);var o=h.scene,u=h.index;try{o.mark.context(o,u,function(){e.dragend.call(this,n)})}finally{h=null,delete o[u].drag}}}function s(e,t){try{return e.drag=t,e}catch(n){}var r={};for(var i in e){var s=e[i];r[i]="function"!=typeof s?s:o(s,e)}return r._sourceEvent=e,r}function o(e,t){return function(){return e.apply(t,arguments)}}function u(e,t){if(l&&f===t.target)return l=!1,f=null,!1}var a,f,l,c,h;return e.autoRender=!0,e.positionConstraint=null,e.bound=function(e,t){return Math.max(h.min[t],Math.min(h.max[t],e))},n.autoRender=function(t){return arguments.length?(e.autoRender=!!t,n):e.autoRender},n.positionConstraint=function(t){return arguments.length?(e.positionConstraint=t,n):e.positionConstraint},n},t.Behavior.drag=function(){var e,n=null,r=1,i=1,s={dragstart:function(n){var r=n.drag;r.type="drag";var i=r.d,o=t.vector(i.x,i.y);i.fix=o,i.drag=r,e=o.minus(r.m1);var u=this.parent;r.max={x:u.width()-(i.dx||0),y:u.height()-(i.dy||0)},r.min={x:0,y:0},s.autoRender&&this.render(),t.Mark.dispatch("dragstart",r.scene,r.index,n)},drag:function(n){var o=n.drag,u=o.m2,a=o.d;o.m=e.plus(u);var f=s.positionConstraint;f&&f(o);var l=o.m;r&&(a.x=a.fix.x=s.bound(l.x,"x")),i&&(a.y=a.fix.y=s.bound(l.y,"y")),s.autoRender&&this.render(),t.Mark.dispatch("drag",o.scene,o.index,n)},dragend:function(n){var r=n.drag,i=r.d;i.fix=null,e=null,s.autoRender&&this.render();try{t.Mark.dispatch("dragend",r.scene,r.index,n)}finally{delete i.drag}}},o=t.Behavior.dragBase(s);return o.collapse=function(e){if(arguments.length){n=String(e);switch(n){case"y":r=1,i=0;break;case"x":r=0,i=1;break;default:r=1,i=1}return o}return n},o},t.Behavior.point=function(e){function n(e,t){if(e.visible)for(var n=e.children.length-1;n>=0;n--)if(r(e.children[n],t))return!0}function r(e,t){var r,o,u,a=e.mark,f="panel"===a.type;if(a.$handlers.point){var l,c=(f&&a.parent||a).mouse(),h=a._pointingRadiusMax,p=h*h;o=e.length;for(;o--;)if((l=i(e,o))&&s(e,o,c,t,l,p)){r=!0;break}}if(f){a.scene=e,u=!!a.isPointingBarrier&&!!a.parent;try{o=e.length;for(;o--;){a.index=o;if((!u||a.getShape(e,o).containsPoint(a.parent.mouse()))&&n(e[o],t))return!0}}finally{delete a.scene,delete a.index}}return r}function i(e,t){var n=e[t];if(!n.visible)return 0;if(!h)return 1;var r=e.mark.properties;if(!r.fillStyle&&!r.strokeStyle)return 1;var i=n.fillStyle?n.fillStyle.opacity:0,s=n.strokeStyle?n.strokeStyle.opacity:0,o=Math.max(i,s);return.02>o?0:o>.98?1:.5}function s(e,n,r,i,s,o){function u(){if(v&&0>=o)return-1;a=f.distance2(r,d);if(v&&t.floatLess(o,a.cost))return-2;if(g&&!p&&t.floatLess(m,a.dist2))return-3;if(h===i.hasArea){if(p<i.inside)return-4;if(p>i.inside)return 1}else{if(c){if(!p&&i.inside)return-5;if(p&&!i.inside)return 2}if(h||2!==i.inside){if(h&&2===p){if(2===i.inside)return-7;if(0===i.inside&&t.floatLess(3,i.cost))return 4}}else{if(2===p)return 3;if(0===p&&t.floatLess(3,a.cost))return-6}}if(!c||!p){if(t.floatLess(i.dist2,a.dist2))return-8;if(t.floatLess(a.dist2,i.dist2))return 5}return c&&t.floatLess(a.cost,i.cost)?6:-9}var a,f=e.mark.getShape(e,n),h=f.hasArea(),p=f.containsPoint(r,d)?!c||f.containsPoint(r)?2:1:0,v=isFinite(o)&&2>p,y=u();l&&function(){if(-3>y||y>0){var t=e&&e.mark;console.log("POINT "+(y>0?"choose":"skip")+" ("+y+") "+(t?t.type+" "+n:"none")+" in="+p+" d2="+(a&&a.dist2)+" cost="+(a&&a.cost)+" opaq="+(1===s))}}();if(y>0){i.hasArea=h,i.inside=p,i.dist2=a.dist2,i.cost=a.cost,i.scenes=e,i.index=n,i.shape=f;if(h&&2===p&&1===s)return!0}}function o(){var e=t.event;l&&console.log("POINT MOUSE MOVE BEG");try{var r={cost:1/0,dist2:1/0,inside:0,hasArea:!1,x:e.pageX||0,y:e.pageY||0};if(f&&y&&t.Shape.dist2(r,f).cost<y)return;n(this.scene[this.index],r),r.inside||isFinite(r.cost)||(r=null),e.pointFrom=f,e.pointTo=r;if(f){if(r&&f.scenes==r.scenes&&f.index==r.index)return;e.isPointSwitch=!!r,t.Mark.dispatch("unpoint",f.scenes,f.index,e)}f=r,r&&(t.Mark.dispatch("point",r.scenes,r.index,e),v||("panel"===this.type?(v=this,this.event("mouseout",function(){u.call(this.scene.$g)}),p&&v.addEventInterceptor("click",a)):t.listen(this.root.canvas(),"mouseout",u)))}finally{l&&console.log("POINT MOUSE MOVE END")}}function u(){var e=t.event;f&&!t.ancestor(this,e.relatedTarget)&&(t.Mark.dispatch("unpoint",f.scenes,f.index,e),f=null)}function a(e,t){if(f){var n=f.scenes,r=n.mark.$handlers[e];if(r)return[r,n,f.index,t]}}"object"!=typeof e&&(e={radius:e});var f,l=0,c=null,h=!!t.get(e,"painted",!1),p=!!t.get(e,"stealClick",!1),d={x:1,y:1},v=null,m=function(){var n=t.parseNumNonNeg(t.get(e,"radius"),30);return n*n}(),g=isFinite(m),y=function(){var n=t.parseNumNonNeg(t.get(e,"radiusHyst"),0);return isFinite(n)||(n=4),n*n}();return o.collapse=function(e){if(arguments.length){c=String(e);switch(c){case"y":d.x=1,d.y=0;break;case"x":d.x=0,d.y=1;break;default:d.x=1,d.y=1,c=null}return o}return c},e&&null!=e.collapse&&o.collapse(e.collapse),e=null,o},t.Behavior.select=function(){var e=null,n=1,r=1,i=!1,s={dragstart:function(e){var o=e.drag;o.type="select",o.dxmin=0,o.dymin=0;var u=o.d;u.drag=o,o.max={x:this.width(),y:this.height()},o.min={x:0,y:0};var a=s.positionConstraint;a&&(o.m=o.m.clone(),a(o));var f=o.m;n&&(u.x=s.bound(f.x,"x"),i||(u.dx=Math.max(0,o.dxmin))),r&&(u.y=s.bound(f.y,"y"),i||(u.dy=Math.max(0,o.dymin))),t.Mark.dispatch("selectstart",o.scene,o.index,e)},drag:function(e){var o=e.drag,u=o.m1,a=o.d;o.max.x=this.width(),o.max.y=this.height();var f=s.positionConstraint;f&&(o.m=o.m.clone(),f(o));var l=o.m;if(n){var c=Math.min(u.x,l.x);c=s.bound(c,"x"),a.x=c;if(!i){var h=Math.max(l.x,u.x);h=s.bound(h,"x"),a.dx=Math.max(0,o.dxmin,h-c)}}if(r){var p=Math.min(u.y,l.y);p=s.bound(p,"y"),a.y=p;if(!i){var d=Math.max(l.y,u.y);d=s.bound(d,"y"),a.dy=Math.max(0,o.dymin,d-p)}}s.autoRender&&this.render(),t.Mark.dispatch("select",o.scene,o.index,e)},dragend:function(e){var n=e.drag;try{t.Mark.dispatch("selectend",n.scene,n.index,e)}finally{var r=n.d;delete r.drag}}},o=t.Behavior.dragBase(s);return o.collapse=function(t){if(arguments.length){e=String(t);switch(e){case"y":n=1,r=0;break;case"x":n=0,r=1;break;default:n=1,r=1}return o}return e},o.preserveLength=function(e){return arguments.length?(i=!!e,o):i},o},t.Behavior.resize=function(e){var n=!1,r="left"===e||"right"===e,i={dragstart:function(n){var r=n.drag;r.type="resize";var i=r.m1,s=r.d;s.drag=r;switch(e){case"left":i.x=s.x+s.dx;break;case"right":i.x=s.x;break;case"top":i.y=s.y+s.dy;break;case"bottom":i.y=s.y}var o=this.parent;r.max={x:o.width(),y:o.height()},r.min={x:0,y:0},t.Mark.dispatch("resizestart",r.scene,r.index,n)},drag:function(e){var s=e.drag,o=s.m1,u=i.positionConstraint;u&&(s.m=s.m.clone(),u(s));var a=s.m,f=s.d;if(!n||r){var l=Math.min(o.x,a.x),c=Math.max(a.x,o.x);l=i.bound(l,"x"),c=i.bound(c,"x"),f.x=l,f.dx=c-l}if(!n||!r){var h=Math.min(o.y,a.y),p=Math.max(a.y,o.y);h=i.bound(h,"y"),p=i.bound(p,"y"),f.y=h,f.dy=p-h}i.autoRender&&this.render(),t.Mark.dispatch("resize",s.scene,s.index,e)},dragend:function(e){var n=e.drag;n.max=null;try{t.Mark.dispatch("resizeend",n.scene,n.index,e)}finally{var r=n.d;delete r.drag}}},s=t.Behavior.dragBase(i);return s.preserveOrtho=function(e){return arguments.length?(n=!!e,s):n},s},t.Behavior.pan=function(){function e(){s=this.index,i=this.scene,u=t.vector(t.event.pageX,t.event.pageY),o=this.transform(),a=1/(o.k*this.scale),f&&(f={x:(1-o.k)*this.width(),y:(1-o.k)*this.height()})}function n(e){i&&(i.mark.context(i,s,function(){var e=(t.event.pageX-u.x)*a,n=(t.event.pageY-u.y)*a,r=o.translate(e,n);f&&(r.x=Math.max(f.x,Math.min(0,r.x)),r.y=Math.max(f.y,Math.min(0,r.y))),this.transform(r).render()}),t.Mark.dispatch("pan",i,s,e))}function r(){i=null}var i,s,o,u,a,f;return e.bound=function(e){return arguments.length?(f=Boolean(e),this):Boolean(f)},t.listen(window,"mousemove",n),t.listen(window,"mouseup",r),e},t.Behavior.zoom=function(e){function n(n){var i=this.mouse(),s=t.event.wheel*e,o=this.transform().translate(i.x,i.y).scale(0>s?1e3/(1e3-s):(1e3+s)/1e3).translate(-i.x,-i.y);r&&(o.k=Math.max(1,o.k),o.x=Math.max((1-o.k)*this.width(),Math.min(0,o.x)),o.y=Math.max((1-o.k)*this.height(),Math.min(0,o.y))),this.transform(o).render(),t.Mark.dispatch("zoom",this.scene,this.index,n)}var r;return arguments.length||(e=1/48),n.bound=function(e){return arguments.length?(r=Boolean(e),this):Boolean(r)},n},t.Geo=function(){},t.Geo.projections={mercator:{project:function(e){return{x:e.lng/180,y:e.lat>85?1:e.lat<-85?-1:Math.log(Math.tan(Math.PI/4+t.radians(e.lat)/2))/Math.PI}},invert:function(e){return{lng:180*e.x,lat:t.degrees(2*Math.atan(Math.exp(e.y*Math.PI))-Math.PI/2)}}},"gall-peters":{project:function(e){return{x:e.lng/180,y:Math.sin(t.radians(e.lat))}},invert:function(e){return{lng:180*e.x,lat:t.degrees(Math.asin(e.y))}}},sinusoidal:{project:function(e){return{x:t.radians(e.lng)*Math.cos(t.radians(e.lat))/Math.PI,y:e.lat/90}},invert:function(e){return{lng:t.degrees(e.x*Math.PI/Math.cos(e.y*Math.PI/2)),lat:90*e.y}}},aitoff:{project:function(e){var n=t.radians(e.lng),r=t.radians(e.lat),i=Math.acos(Math.cos(r)*Math.cos(n/2));return{x:2*(i?Math.cos(r)*Math.sin(n/2)*i/Math.sin(i):0)/Math.PI,y:2*(i?Math.sin(r)*i/Math.sin(i):0)/Math.PI}},invert:function(e){var n=e.x*Math.PI/2,r=e.y*Math.PI/2;return{lng:t.degrees(n/Math.cos(r)),lat:t.degrees(r)}}},hammer:{project:function(e){var n=t.radians(e.lng),r=t.radians(e.lat),i=Math.sqrt(1+Math.cos(r)*Math.cos(n/2));return{x:2*Math.SQRT2*Math.cos(r)*Math.sin(n/2)/i/3,y:Math.SQRT2*Math.sin(r)/i/1.5}},invert:function(e){var n=3*e.x,r=1.5*e.y,i=Math.sqrt(1-n*n/16-r*r/4);return{lng:t.degrees(2*Math.atan2(i*n,2*(2*i*i-1))),lat:t.degrees(Math.asin(i*r))}}},identity:{project:function(e){return{x:e.lng/180,y:e.lat/90}},invert:function(e){return{lng:180*e.x,lat:90*e.y}}}},t.Geo.scale=function(e){function n(e){if(!s||e.lng!=s.lng||e.lat!=s.lat){s=e;var t=r(e);o={x:c(t.x),y:h(t.y)}}return o}function r(e){var t={lng:e.lng-p.lng,lat:e.lat};return l.project(t)}function i(e){var t=l.invert(e);return t.lng+=p.lng,t}var s,o,u={x:0,y:0},a={x:1,y:1},f=[],l=t.Geo.projections.identity,c=t.Scale.linear(-1,1).range(0,1),h=t.Scale.linear(-1,1).range(1,0),p={lng:0,lat:0};return n.x=function(e){return n(e).x},n.y=function(e){return n(e).y},n.ticks={lng:function(e){var n,r;if(f.length>1){var i=t.Scale.linear();void 0==e&&(e=10),n=i.domain(f,function(e){return e.lat}).ticks(e),r=i.domain(f,function(e){return e.lng}).ticks(e)}else n=t.range(-80,81,10),r=t.range(-180,181,10);return r.map(function(e){return n.map(function(t){return{lat:t,lng:e}})})},lat:function(e){return t.transpose(n.ticks.lng(e))}},n.invert=function(e){return i({x:c.invert(e.x),y:h.invert(e.y)})},n.domain=function(e,n){if(arguments.length){f=e instanceof Array?arguments.length>1?t.map(e,n):e:Array.prototype.slice.call(arguments);if(f.length>1){var i=f.map(function(e){return e.lng}),o=f.map(function(e){return e.lat});p={lng:(t.max(i)+t.min(i))/2,lat:(t.max(o)+t.min(o))/2};var u=f.map(r);c.domain(u,function(e){return e.x}),h.domain(u,function(e){return e.y})}else p={lng:0,lat:0},c.domain(-1,1),h.domain(-1,1);return s=null,this}return f},n.range=function(e,t){return arguments.length?("object"==typeof e?(u={x:Number(e.x),y:Number(e.y)},a={x:Number(t.x),y:Number(t.y)}):(u={x:0,y:0},a={x:Number(e),y:Number(t)}),c.range(u.x,a.x),h.range(a.y,u.y),s=null,this):[u,a]},n.projection=function(e){return arguments.length?(l="string"==typeof e?t.Geo.projections[e]||t.Geo.projections.identity:e,this.domain(f)):e},t.copyOwn(n,t.Scale.common),arguments.length&&n.projection(e),n},t}),define("cdf/lib/CCC/cdo",["./def","./protovis-compat!"],function(e,t){function n(e,t){var n=e&&e.length;if(n){for(var r=0;n>r;r++){var i=e[r];t&&(i[t]=null),i.dispose()}e.length=0}}function r(e,t,n,r,i){n[r]=e;var s=e[t]||(e[t]=[]);null==i||i>=s.length?s.push(n):s.splice(i,0,n)}function i(t,n,r,i){var s,o=t[n];o&&(s=o.indexOf(r))>=0&&e.array.removeAt(o,s),r[i]=null}function s(e){return e.toISOString()}function o(e,t){return e.id-t.id}function u(e,t){return t.id-e.id}function a(){delete this.isSelected}function f(e){return e.isNull||e.isSelected}function l(e){return e.isSelected===!0}function c(e){return e.isSelected===!1}function h(e){return e.isVisible===!0}function p(e){return e.isVisible===!1}function d(e){return e.isNull===!0}function v(e){return e.isNull===!1}function m(t,n,r,i,s){var o;if(this.owner===this)o=new kt.Atom(this,r,i,t,n),s&&(o.isVirtual=!0);else{var u=this.parent||this.linkParent;o=u._atomsByKey[n]||m.call(u,t,n,r,i,s)}return e.array.insert(this._atoms,o,this._atomComparer),x.call(this),this._atomsByKey[n]=o,o}function g(t){var n=t.key,r=this,i=!r._lazyInit;if(t.dimension===r)return r.owner===r||e.assert("Should be an owner dimension"),n||t!==r._virtualNullAtom?i?x.call(this):this._sumCache=null:t=r.intern(null),t;if(i){var s=r._atomsByKey[n];if(s){if(s!==t)throw e.error.operationInvalid("Atom is from a different root data.");return x.call(r),t}if(r.owner===r)throw e.error.operationInvalid("Atom is from a different root data.")}return g.call(r.parent||r.linkParent,t),i?(r._atomsByKey[n]=t,n?e.array.insert(r._atoms,t,r._atomComparer):(r._nullAtom=t,r._atoms.unshift(t)),x.call(r)):this._sumCache=null,t}function y(t){var n=e.get(t,"visible"),r=e.get(t,"selected");return(null==n?null:!!n)+":"+(null==r?null:!!r)}function b(e){var t=this._nullAtom;return t||(this.owner===this?this.data._atomsBase[this.name]=t=new kt.Atom(this,null,e,null,""):t=b.call(this.parent||this.linkParent,e),this._atomsByKey[""]=this._nullAtom=t,this._atoms.unshift(t)),t}function w(){return this.owner===this||e.assert("Can only create atoms on an owner dimension."),this._virtualNullAtom||(this._virtualNullAtom=new kt.Atom(this,null,"",null,""),this.data._atomsBase[this.name]=this._virtualNullAtom),this._virtualNullAtom}function E(){this.owner===this||e.assert("Can only unintern atoms of an owner dimension.");var t=this._atoms;if(t){for(var n=this._atomsByKey,r=0,i=t.length;i>r;){var s=t[r];if(s.visited)delete s.visited,r++;else if(s!==this._virtualNullAtom){t.splice(r,1),i--;var o=s.key;delete n[o],o||(delete this._nullAtom,this.data._atomsBase[this.name]=this._virtualNullAtom)}}x.call(this)}}function S(){var t=this._atoms;if(t){for(var n,r=this._atomsByKey,i=0,s=t.length;s>i;){var o=t[i];if(o.isVirtual){t.splice(i,1),s--,n=!0;var u=o.key||e.assert("Cannot be the null or virtual null atom.");delete r[u]}else i++}n&&x.call(this)}}function x(){this._atomVisibleDatumsCount=this._sumCache=this._visibleAtoms=this._visibleIndexes=null}function T(e){r(this,"childNodes",e,"parent"),e.owner=this.owner}function N(e){r(this,"_linkChildren",e,"linkParent"),e.owner=this.owner}function C(e,t){var n;if(!this._disposed&&(n=this._atomVisibleDatumsCount)){var r=e.atoms[this.name],i=r.key,s=n[i];n[i]=(s||0)+(t?1:-1),this._visibleAtoms=this._sumCache=this._visibleIndexes=null}}function k(){var e=this._atomVisibleDatumsCount;return e||(e={},this.data.datums(null,{visible:!0}).each(function(t){var n=t.atoms[this.name],r=n.key;e[r]=(e[r]||0)+1},this),this._atomVisibleDatumsCount=e),e}function L(e){var t=[];return this._atoms.forEach(function(n,r){this.isVisible(n)===e&&t.push(r)},this),t}function A(t){return e.query(this._atoms).where(function(e){return this.isVisible(e)===t},this).array()}function O(t,n){this.insertAt(t,n),e.lazy(this,"_childrenByKey")[t.key]=t}function M(e,t){r(this,"_linkChildren",e,"linkParent",t)}function _(e){i(this,"_linkChildren",e,"linkParent")}function D(){n(this.childNodes,"parent"),this._childrenByKey=null,n(this._linkChildren,"linkParent"),this._groupByCache=null,this._sumAbsCache=null}function P(){this.isOwner()||e.fail("Can only be called on the owner data.")}function H(t,n){!t.isNull||e.assert("Null datums do not notify selected changes"),n?this._selectedNotNullDatums.set(t.id,t):this._selectedNotNullDatums.rem(t.id),this._sumAbsCache=null}function B(t,n){var r=t.id,i=this,s=e.hasOwnProp;if(s.call(i._datumsById,r)){!t.isNull||e.assert("Null datums do not notify visible changes"),n?i._visibleNotNullDatums.set(r,t):i._visibleNotNullDatums.rem(r),i._sumAbsCache=null;for(var o=i._dimensionsList,u=0,a=o.length;a>u;)C.call(o[u++],t,n);o=i.childNodes,u=0,a=o.length;for(;a>u;)B.call(o[u++],t,n);o=i._linkChildren;if(o&&(a=o.length)){u=0;for(;a>u;)B.call(o[u++],t,n)}}}function j(e){for(var t,n=[e];t=e.parent||e.linkParent;)n.unshift(e=t);return n}function F(e,t){for(var n,r=0,i=Math.min(e.length,t.length),s=null;i>r&&(n=e[r])===t[r];)s=n,r++;return s}function I(t,n){function r(t){if(t){var n=t.key;if(!e.hasOwnProp.call(s,n)){null!==f&&e.hasOwnProp.call(f,n)&&(t=f[n]);var r=t.id;i.push(t),s[n]=t,o[r]=t,null!==h&&h.push(t),t.isNull||(t.isSelected&&c.set(r,t),t.isVisible&&l.set(r,t))}}}if(!t)throw e.error.argumentRequired("setDatums");var i,s,o,u=this._datums.length>0,a=!!e.get(n,"isAdditive"),f=null,l=this._visibleNotNullDatums,c=this._selectedNotNullDatums;u&&!a?(D.call(this),f=this._datumsByKey,this._datums=i=[],this._datumsById=o={},this._datumsByKey=s={},l.clear(),c&&c.clear()):(i=this._datums,s=this._datumsByKey,o=this._datumsById,u&&(this._sumAbsCache=null));var h=null,p=!!this._linkChildren&&this._linkChildren.length>0;p&&u&&a&&(h=[]);if(e.array.is(t))for(var d=0,v=t.length;v>d;)r.call(this,t[d++]);else{if(!(t instanceof e.Query))throw e.error.argumentInvalid("setDatums","Argument is of invalid type.");t.each(r,this)}this.select&&this.select(i).forEach(function(e){U.call(this,e),null!==h&&h.splice(h.indexOf(e),1)},this),q.call(this),p&&this._onDatumsAdded(h||i)}function q(){for(var e=-1,t=this._datums,n=t.length;++e<n;)R.call(this,t[e],!1,!0);var r=this._dimensionsList;e=-1,n=r.length;for(;++e<n;)E.call(r[e])}function R(e,t,n){var r=this._dimensionsList;r||(t=!1);if(t||n){var i,s,o,u=e.atoms,a=0;if(r){i=r.length;for(;i>a;)o=r[a++],s=u[o.name],s&&(t&&g.call(o,s),n&&(s.visited=!0))}else{var f=this.type.dimensionsNames();i=f.length;for(;i>a;)s=u[f[a++]],s&&(s.visited=!0)}}}function U(e){var t=this._datums,n=this._selectedNotNullDatums,r=e.id;t.splice(t.indexOf(e),1),delete this._datumsById[r],delete this._datumsByKey[e.key],n&&e.isSelected&&n.rem(r),e.isVisible&&this._visibleNotNullDatums.rem(r)}function z(t){function n(t){if(null!=t){"object"==typeof t||e.fail.invalidArgument("datumFilter");var n={},i=!1;for(var s in t){var o=t[s],u=this.dimensions(s).getDistinctAtoms(null!==o?e.array.as(o):[null]);u.length&&(i=!0,n[s]=u)}i&&r.push(n)}}var r=[];return t=e.array.as(t),t&&t.forEach(n,this),r}function W(t,n){var r=e.get(n,"visible"),i=e.get(n,"isNull"),s=e.get(n,"selected"),o=e.get(n,"where");return null!=r&&(t=t.where(r?h:p)),null!=i&&(t=t.where(i?d:v)),null!=s&&(t=t.where(s?l:c)),o&&(t=t.where(o)),t}function X(t,n){var r=e.get(n,"visible"),i=e.get(n,"isNull"),s=e.get(n,"selected"),o=e.get(n,"where"),u=[];null!=r&&u.unshift(r?h:p),null!=i&&u.unshift(i?d:v),null!=s&&u.unshift(s?l:c),o&&u.unshift(o),t&&u.unshift(V(t));var a=u.length;if(a){if(1===a)return u[0];var f=function(e){for(var t=a;t;)if(!u[--t](e))return!1;return!0};return f}return null}function V(e){function t(t){for(var i=t.atoms,s=0;r>s;s++)if(n(i,e[s]))return!0;return!1}function n(e,t){for(var n in t)if(t[n].indexOf(e[n])<0)return!1;return!0}var r=e.length;return t}function $(t,n){var r=e.array.as(e.get(n,"orderBy")),i=e.create(n||{},{orderBy:null}),s=e.query(t).selectMany(function(e,t){return r&&(i.orderBy=r[t]),J.call(this,e,i)},this);return s.distinct(e.propGet("id"))}function J(t,n){var r=n.orderBy;if(r){if(r.indexOf("|")>=0)throw e.error.argumentInvalid("keyArgs.orderBy","Multi-dimension order by is not supported.")}else r=Object.keys(t).sort().join(",");var i=this.groupBy(r,n),s=i.treeHeight,o=[];return e.query(function(){var n;if(this._data){if(this._datumsQuery){this._data||e.assert("Must have a current data"),o.length||e.assert("Must have a parent data"),!this._dimAtomsOrQuery||e.assert();if(this._datumsQuery.next())return this.item=this._datumsQuery.item,1;this._datumsQuery=null,n=o.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery}}else this._data=i,this._dimAtomsOrQuery=e.query(t[i.groupingLevelSpec.dimensions[0].name]);this._dimAtomsOrQuery||e.assert("Invalid programmer"),this._data||e.assert("Must have a current data");for(var r=o.length;;){for(;this._dimAtomsOrQuery.next();){var u=this._dimAtomsOrQuery.item,a=this._data.child(u.key);if(a&&(s-1>r||a._datums.length)){o.push({data:this._data,dimAtomsOrQuery:this._dimAtomsOrQuery}),this._data=a;if(!(s-1>r))return this._dimAtomsOrQuery=null,this._datumsQuery=e.query(a._datums),this._datumsQuery.next(),this.item=this._datumsQuery.item,1;this._dimAtomsOrQuery=e.query(t[a.groupingLevelSpec.dimensions[0].name]),r++}}if(!r)return 0;n=o.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery,r--}return 0})}function K(t,n,r){return e.string.is(t)||e.fail.argumentInvalid("groupLevelText","Invalid grouping specification."),e.query(t.split(/\s*\|\s*/)).where(e.truthy).select(function(t){var i=_t.exec(t)||e.fail.argumentInvalid("groupLevelText","Invalid grouping level syntax '{0}'.",[t]),s=i[1],o=(i[2]||"").toLowerCase(),u="desc"===o,a=new kt.GroupingDimensionSpec(s,u);return n&&a.bindComplexType(n,r),a})}function Q(t,n){function r(){var r={},s=e.query(i.source).select(function(e){n(e,r);var t=r.series;return null!=t&&null!=t.v&&(t=t.v),t||null}).distinct().array();return i._createPlot2SeriesKeySet(t,s)}var i=this;this._dataPartGet(r)}function G(t){return e.string.is(t)?!!this.mask(t):e.is(t,Bt)?!!this.mask(t.mask()).style(t.style()):void 0}function Y(e){e||(e="");var t="_"+e,n=jt[t];return n||(Ft===Bt.cacheLimit&&(jt={},Ft=0),jt[t]=n=Z(e),Ft++),n}function Z(e){function t(e,t){return null==e?o?o(t):"":(e=+e,isNaN(e)||!isFinite(e)?"":r?0===e?s?s(t):r(t,e,null,!1):e>0?r(t,e,s,!1):i?i(t,-e,s||r):r(t,-e,s,!0):String(e))}function n(){var t,n,u,a=et(e);a.forEach(tt),t=a.length,r=o=i=s=null;if(t){r=ot(u=a[0]);if(t>1){n=a[1],i=ot(n.empty?u:n);if(t>2){n=a[2],s=it(n.empty?u:n);if(t>3){n=a[3],o=st(n.empty?u:n);if(t>4)throw new Error("Invalid mask. More than 4 sections.")}}}}}var r,i,s,o;return n(),t}function et(e){var t=[];if(e){var n,r,i,s,o=-1,u=e.length,a="",f=1,l=1,c=0,h=0,p=function(e){f=0,i.list.push(e)},d=function(e){f=0,a+=e},v=function(){a&&(b(),p({type:0,text:a}),a="")},m=function(e){v(),p(e)},g=function(){v(),!c&&h&&p({type:2}),i.digits=s,s=0,l=0,i=r.fractional},y=function(){r&&(!f||!t.length)&&(l?g():v(),i.digits=s,t.push(r)),f=l=1,h=s=c=0,r={empty:0,scale:0,groupOn:0,scientific:0,abbreviationOn:0,integer:{list:[],digits:0},fractional:{list:[],digits:0}},i=r.integer},b=function(){"A"===a?(a="",m({type:6})):"C"===a?(a="",m({type:4})):"AC"===a?(a="",m({type:6}),m({type:4})):"CA"===a&&(a="",m({type:4}),m({type:6}))},w=function(){var t,i=o+1,s=!1,a=0;if(u>i){t=e.charAt(i);if("-"===t||"+"===t){s="+"===t;if(!(++i<u))return 0;t=e.charAt(i)}for(;"0"===t&&++a&&++i<u&&(t=e.charAt(i)););if(a)return o=i-1,m({type:5,text:n,digits:a,positive:s}),r.scientific=1,1}return 0};y();for(;++o<u;){n=e.charAt(o);if("0"===n)m({type:1}),c=1,s++;else if("#"===n)m({type:2}),c=1,s++;else if(","===n)l&&m({type:3});else if("."===n)l&&(h=1,g());else if(""===n)m({type:4});else if("C"===n&&"Currency"===e.substring(o,o+8))m({type:4}),o+=7;else if("A"===n&&"Abbreviation"===e.substring(o,o+12))m({type:6}),o+=11;else if(";"===n){y();if(o+1>=u||";"===e.charAt(o+1))o++,t.push({empty:1})}else if("\\"===n)o++,u>o&&d(e.charAt(o));else if('"'===n){o++;var E=e.indexOf(n,o);0>E&&(E=u),d(e.substring(o,E)),o=E}else if(" "===n)m({type:7});else if("e"!==n&&"E"!==n||!w())"%"===n?r.scale+=2:""===n?r.scale+=3:""===n&&(r.scale+=4),d(n)}y()}return t}function tt(e){e.empty||(nt(e,!0),nt(e,!1))}function nt(e,t){function n(e){a[s](e)}for(var r,i,s=t?"push":"unshift",o=e[t?"integer":"fractional"],u=o.list,a=o.list=[],f=o.digits-1,l=0,c=0,h=u.length,p=t?0:h,d=t?function(){return h>p?u[p++]:null}:function(){return p>0?u[--p]:null};r=d();)switch(i=r.type){case 0:n(ft(r.text));break;case 1:case 2:c&&2===i&&(i=1),n(lt(t,f,1===i,!l)),f--,l=1,c||1!==i||(c=1);break;case 3:rt(u,p,h)?l&&(e.groupOn=1):e.scale-=3;break;case 4:n(vt);break;case 5:n(ht(e,r));break;case 6:e.abbreviationOn=1,n(mt);break;case 7:n(ft(" "))}!t&&o.digits&&a.unshift(ct(c))}function rt(e,t,n){for(;n>t;){var r=e[t++].type;if(1===r||2===r)return 1}return 0}function it(e){function t(t){return ut(e,t,0,!1)}return t}function st(e){function t(t){return ut(e,t,"",!1)}return t}function ot(t){function n(n,r,i,s){var o,u,a=r,f=0,l=t.scale;if(t.abbreviationOn)for(var c=n.abbreviations.length,h=c;h>0;h--){var p=3*h;if(Math.pow(10,p)<=r){l-=p,u=h-1;break}}return t.scientific&&(o=Math.floor(Math.log(r)/Math.LN10),f=l+o-t.integer.digits+1,l-=f),l&&(r=e.mult10(r,l)),r=e.round10(r,t.fractional.digits),!r&&i?i(n,a):ut(t,n,r,s,f,u)}return n}function ut(e,t,n,r,i,s){var o=""+n,u=o.indexOf("."),a=0>u?o:o.substr(0,u),f=0>u?"":o.substr(u+1);"0"===a&&(a=""),i||(i=0);var l=[];return r&&l.push(t.negativeSign),a=a.split(""),f=f.split(""),t.group&&e.groupOn&&at(t,a),e.integer.list.forEach(function(e){l.push(e(t,a,i,s))}),e.fractional.list.forEach(function(e){l.push(e(t,f,i,s))}),l.join("")}function at(e,t){for(var n,r=e.group,i=function(){t[s-a-1]+=r},s=t.length,o=e.groupSizes,u=o.length,a=0,f=-1;++f<u;){a+=n=o[f];if(!(s>a))return;i()}for(;(a+=n)<s;)i()}function ft(e){function t(){return e}return t}function lt(e,t,n,r){function i(t){return t[e?"integerPad":"fractionPad"]}function s(e,n){var i=n.length;if(i>t){var s=i-1-t;return r?n.slice(0,s+1).join(""):n[s]}return u?u(e):""}function o(e,n){return t<n.length?n[t]:u?u(e):""}var u=n?i:null;return e?s:o}function ct(e){return e?pt:dt}function ht(e,t){function n(e,n,r){var i=0>r?e.negativeSign:t.positive?"+":"",s=""+Math.abs(r),o=t.digits-s.length;return o>0&&(s=(new Array(o+1)).join("0")+s),t.text+i+s}return n}function pt(e){return e.decimal}function dt(e,t){return t.length?e.decimal:""}function vt(e){return e.currency}function mt(e,t,n,r){return null!=r?e.abbreviations[r]:void 0}function gt(t){return e.string.is(t)?!!this.mask(t):e.is(t,It)?!!this.mask(t.mask()):void 0}function yt(n){return n?t.Format.createFormatter(t.Format.date(n)):e.string.to}function bt(t){return e.is(t,qt)?!!this.formatter(t.formatter()):e.fun.is(t)?!!this.formatter(t):void 0}function wt(e){return null!=e?String(e):""}function Et(t){function n(n){return e.is(n,t)||e.is(n,qt)?n:null}function r(n,r){var i=e.fun.is(n)?qt:t;return i(n,r)}return{cast:n,factory:r}}function St(t){switch(e.classOf(t)){case Ut:return!!this.number(t.number()).percent(t.percent()).date(t.date()).any(t.any());case Bt:return!!this.number(t);case It:return!!this.date(t);case qt:return!!this.any(t)}if(e.string.is(t)){var n=Xt(t);if(n)return!!e.configure(this,n)}}function xt(t,n){t=Nt(t);var r=e.getOwn(zt,t);return r?e.configure(r,n):(r=zt[t]=Ut(n),r.languageCode=t),r}function Tt(e){var t=/^([a-z]{2,8})(?:[-_]([a-z]{2}|\d{3}))?$/i,n=t.exec(e);if(!n)return null;var r=n[1]?n[1].toLowerCase():"",i=n[2]?n[2].toLowerCase():"";return{code:r+(i?"-"+i:""),primary:r,region:i}}function Nt(e){return e?e.toLowerCase():""}function Ct(t,n){t=Nt(t);var r=e.getOwn(zt,t);if(r)return r;if(!n)return null;var i=Tt(t);if(i){if(i.code!==t&&(r=e.getOwn(zt,i.code)))return r;if(i.region&&(r=e.getOwn(zt,i.primary)))return r}return e.getOwn(zt,Rt,null)}var kt=e.globalSpace("cdo",{});e.type("cdo.DimensionType").init(function(n,r,i){this.complexType=n,this.name=r,this.label=e.get(i,"label")||e.titleFromName(r);var o=e.splitIndexedId(r);this.group=o[0],this.groupLevel=e.nullyTo(o[1],0),this.label.indexOf("{")>=0&&(this.label=e.format(this.label,[this.groupLevel+1])),this.isHidden=!!e.get(i,"isHidden");var u=e.get(i,"valueType")||null,a=kt.DimensionType.valueTypeName(u),f=e.getOwn(kt.DimensionType.cast,a,null);this.valueType=u,this.valueTypeName=a,this.cast=f;var l=this.valueType===Number,c=!l&&this.valueType===Date;this.isDiscreteValueType=!l&&!c,this.isDiscrete=e.get(i,"isDiscrete");if(null==this.isDiscrete)this.isDiscrete=this.isDiscreteValueType;else{this.isDiscrete=!!this.isDiscrete;if(!this.isDiscrete&&this.isDiscreteValueType)throw e.error.argumentInvalid("isDiscrete","The only supported continuous value types are Number and Date.")}this._converter=e.get(i,"converter")||null;if(!this._converter){var h=e.get(i,"rawFormat");if(h)switch(this.valueType){case Date:this._converter=t.Format.createParser(t.Format.date(h))}}this._key=e.get(i,"key")||null,null===this._key&&c&&(this._key=s),this.setComparer(i&&i.comparer);var p,d=e.get(i,"formatter"),v=e.get(i,"formatProto"),m=l?"number":c?"date":"any";d?p=kt.format(e.set({},m,d),v):this.isDiscreteValueType?p=Ut(null,v):(p=e.get(i,"format"),!p&&!l&&(p=e.get(i,"rawFormat"),p&&(p=p.replace(/-/g,"/"))),p?e.is(p,Ut)||((e.string.is(p)||e.fun.is(p)&&!e.classOf(p))&&(p=e.set({},m,p)),p=Ut(p,v)):p=Ut(null,v),d=p[m]()),this._formatter=d||null,this._format=p||null,this.isKey=Boolean(e.get(i,"isKey"))}).add({isCalculated:!1,compare:function(e,t){return null==e?null==t?0:-1:null==t?1:this._comparer.call(null,e,t)},comparer:function(e){var t=this;return t.isComparable?e?t._rc||(t._rc=function(e,n){return t.compare(n,e)}):t._dc||(t._dc=function(e,n){return t.compare(e,n)}):null},setComparer:function(t){if(void 0===t||!t&&!this.isDiscrete)switch(this.valueType){case Number:case Date:t=e.compare}this._comparer=t||null,this.isComparable=null!=this._comparer,this._rc=this._dc=this._rac=this._dac=null},atomComparer:function(e){return e?this._rac||(this._rac=this._createReverseAtomComparer()):this._dac||(this._dac=this._createDirectAtomComparer())},_toDiscrete:function(){this.isDiscrete=!0},_toCalculated:function(){this.isCalculated=!0},_createReverseAtomComparer:function(){function e(e,n){return e===n?0:t.compare(n.value,e.value)}if(!this.isComparable)return u;var t=this;return e},_createDirectAtomComparer:function(){function e(e,n){return e===n?0:t.compare(e.value,n.value)}if(!this.isComparable)return o;var t=this;return e},format:function(){return this._format},formatter:function(){return this._formatter},converter:function(){return this._converter}}),kt.DimensionType.cast={Date:function(e){return e instanceof Date?e:new Date(e)},Number:function(e){return e=Number(e),isNaN(e)?null:e},String:String,Boolean:Boolean,Object:Object,Any:null},kt.DimensionType.dimensionGroupName=function(e){return e.replace(/^(.*?)(\d*)$/,"$1")},kt.DimensionType.valueTypeName=function(t){if(null==t)return"Any";switch(t){case Boolean:return"Boolean";case Number:return"Number";case String:return"String";case Object:return"Object";case Date:return"Date";default:throw e.error.argumentInvalid("valueType","Invalid valueType function: '{0}'.",[t])}},e.type("cdo.ComplexType").init(function(t,n){this._dims={},this._dimsList=[],this._dimsNames=[],this._calculations=[],this._calculatedDimNames={},this._dimsIndexByName=null,this._dimsByGroup={},this._dimsNamesByGroup={},this.format=Ut(null,e.get(n,"formatProto")),this.nullNumberAtom=new kt.NumberAtom(this,null);if(t)for(var r in t)this.addDimension(r,t[r])}).add({describe:function(){var t=e.textTable(2).rowSep().row("Dimension","Properties").rowSep();return this._dimsList.forEach(function(e){var n=[];n.push('"'+e.label+'"'),n.push(e.valueTypeName),e.isComparable&&n.push("comparable"),e.isDiscrete||n.push("continuous"),e.isHidden&&n.push("hidden"),t.row(e.name,n.join(", "))}),t.rowSep(!0),"COMPLEX TYPE INFORMATION\n"+t()+"\n"},dimensions:function(t,n){if(null==t)return this._dims;var r=e.getOwn(this._dims,t,null);if(!r&&e.get(n,"assertExists",!0))throw e.error.argumentInvalid("name","Undefined dimension '{0}'",[t]);return r},filterExtensionDimensionNames:function(t){return t.filter(function(t){return!!e.hasOwn(this,t)},this._dims)},dimensionsList:function(){return this._dimsList},calculatedDimensionsList:function(){return this._calcDimsList},dimensionsNames:function(){return this._dimsNames},groupDimensions:function(t,n){var r=e.getOwn(this._dimsByGroup,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.operationInvalid("There is no dimension type group with name '{0}'.",[t]);return r},groupDimensionsNames:function(t,n){var r=e.getOwn(this._dimsNamesByGroup,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.operationInvalid("There is no dimension type group with name '{0}'.",[t]);return r},addDimension:function(t,n){t||e.fail.argumentRequired("name"),!e.hasOwn(this._dims,t)||e.fail.operationInvalid("A dimension type with name '{0}' is already defined.",[t]);var r=new kt.DimensionType(this,t,n);this._dims[t]=r,this._dimsIndexByName=null;var i,s=r.group;if(s){var o,u=e.getOwn(this._dimsByGroup,s);u?o=this._dimsNamesByGroup[s]:(u=this._dimsByGroup[s]=[],o=this._dimsNamesByGroup[s]=[]),i=e.array.insert(o,t,e.compare),i=~i,e.array.insertAt(u,i,r)}var a,f=this._dimsList.length;if(s){i=r.groupLevel;for(var l=0;f>l;l++){var c=this._dimsList[l];if(c.group===s){if(c.groupLevel>i){a=l;break}a=l+1}}null==a&&(a=f)}else a=f;return e.array.insertAt(this._dimsList,a,r),e.array.insertAt(this._dimsNames,a,t),r._calculate&&(a=e.array.binarySearch(this._calcDimsList,r._calculationOrder,e.compare,function(e){return e._calculationOrder}),a>=0?a++:a=~a,e.array.insertAt(this._calcDimsList,a,r)),r},addCalculation:function(t){t||e.fail.argumentRequired("calcSpec");var n=t.calculation||e.fail.argumentRequired("calculations[i].calculation"),r=t.names;r=e.string.is(r)?r.split(/\s*\,\s*/):e.array.as(r);if(r&&r.length){var i=this._calculatedDimNames;r.forEach(function(t){if(t){t=t.replace(/^\s*(.+?)\s*$/,"$1"),!e.hasOwn(i,t)||e.fail.argumentInvalid("calculations[i].names","Dimension name '{0}' is already being calculated.",[t]);var n=this._dims[t]||e.fail.argumentInvalid("calculations[i].names","Undefined dimension with name '{0}'' ",[t]);i[t]=!0,n._toCalculated()}},this)}this._calculations.push(n)},isCalculated:function(t){return e.hasOwn(this._calculatedDimNames,t)},_calculate:function(e){var t=this._calculations,n=t.length;if(n){for(var r={},i=0;n>i;i++){var s=t[i];s(e,r)}return r}},sortDimensionNames:function(t,n){var r=this._dimsIndexByName;return r||(r=e.query(this._dimsList).object({name:function(e){return e.name},value:function(e,t){return t}}),this._dimsIndexByName=r),t.sort(function(t,i){return e.compare(r[n?n(t):t],r[n?n(i):i])}),t}}),e.type("cdo.ComplexTypeProject").init(function(e){this._dims={},this._dimList=[],this._dimGroupsDims={},this._dimGroupSpecs=e||{},this._calcList=[]}).add({_ensureDim:function(t,n){t||e.fail.argumentInvalid("name","Invalid dimension name '{0}'.",[t]);var r=e.getOwn(this._dims,t);if(r)n&&e.setUDefaults(r.spec,n);else{r=this._dims[t]=this._createDim(t,n),this._dimList.push(r);var i=e.array.lazy(this._dimGroupsDims,r.groupName);e.array.insert(i,t,e.compare)}return r},hasDim:function(t){return e.hasOwn(this._dims,t)},setDim:function(t,n){var r=this._ensureDim(t).spec;return n&&e.copy(r,n),this},setDimDefaults:function(t,n){return e.setUDefaults(this._ensureDim(t).spec,n),this},_createDim:function(t,n){var r=kt.DimensionType.dimensionGroupName(t),i=this._dimGroupSpecs[r];return i&&(n=e.create(i,n)),{name:t,groupName:r,spec:n||{}}},readDim:function(t,n){var r=this._ensureDim(t,n);if(r.isRead)throw e.error.operationInvalid("Dimension '{0}' already is the target of a reader.",[t]);if(r.isCalc)throw e.error.operationInvalid("Dimension '{0}' is being calculated, so it cannot be the target of a reader.",[t]);r.isRead=!0},calcDim:function(t,n){var r=this._ensureDim(t,n);if(r.isCalc)throw e.error.operationInvalid("Dimension '{0}' already is being calculated.",[t]);if(r.isRead)throw e.error.operationInvalid("Dimension '{0}' is the target of a reader, so it cannot be calculated.",[t]);r.isCalc=!0},isReadOrCalc:function(t){if(t){var n=e.getOwn(this._dims,t);if(n)return n.isRead||n.isCalc}return!1},groupDimensionsNames:function(e){return this._dimGroupsDims[e]},setCalc:function(t){t||e.fail.argumentRequired("calculations[i]"),t.calculation||e.fail.argumentRequired("calculations[i].calculation");var n=t.names;n=e.string.is(n)?n.split(/\s*\,\s*/):e.array.as(n),n&&n.length&&n.forEach(this.calcDim,this),this._calcList.push(t)},configureComplexType:function(e,t){this._dimList.forEach(function(n){var r=n.name,i=n.spec;i=this._extendSpec(r,i,t),e.addDimension(r,i)},this),this._calcList.forEach(function(t){e.addCalculation(t)})},_extendSpec:function(t,n,r){var i=kt.DimensionType.dimensionGroupName(t);n||(n={});switch(i){case"category":var s=e.get(r,"isCategoryTimeSeries",!1);s&&void 0===n.valueType&&(n.valueType=Date);break;case"value":void 0===n.valueType&&(n.valueType=Number)}return void 0!==n.converter||n.valueType!==Date||n.rawFormat||(n.rawFormat=e.get(r,"timeSeriesFormat")),n.formatProto=e.get(r,"formatProto"),n}}),e.type("cdo.Atom").init(function(t,n,r,i,s){this.dimension=t,this.id=null==n?-e.nextId():e.nextId(),this.value=n,this._label=null==r?null:r,void 0!==i&&(this.rawValue=i),this.key=s}).add({isVirtual:!1,rawValue:void 0,get label(){var e=this._label;return null===e&&(this._label=e=this.dimension.format(this.value,this.rawValue)),e},set label(t){this._label=e.string.to(t)},get labelPercent(){var e=this.dimension.type.format().percent();return e(this.value)},toString:function(){var e=this.label;return null!=e?e:(e=this.value,null!=e?""+e:"")}}),e.type("cdo.NumberAtom").init(function(t,n,r){this.complexType=t,this.id=e.nextId(),this.value=null==n?null:n,this._label=null==r?null:r,this.key=null==n?"":n.toString()}).add({dimension:null,get key(){return""+this.value},get rawValue(){return this.value},get label(){var e=this._label;return null===e&&(this._label=e=this.complexType.format.number()(this.value,this.rawValue)),e},set label(t){this._label=e.string.to(t)},get labelPercent(){return this.complexType.format.percent()(this.value)}});var Lt=1;e.type("cdo.Complex").init(function(t,n,r,i,s,o){this.id=Lt++,i||(i=null);var u;t?(u=t.owner,null===i&&(i=t.atoms)):u=this,this.owner=u,this.atoms=i?Object.create(i):{};var a=!!r;r||(r=u.type._dimsNames);if(n){var f,l=this.atoms,c=u._dimensions,h=function(t){var r=n[t],s=c[t];if(void 0===s){if(!a)throw e.error.operationInvalid("Extension atom values require dimension names to be specified.");if(!(r instanceof kt.Atom))throw e.error.operationInvalid("Extension atom values must be cdo.Atom instances.");l[t]=r}else r=s.intern(r),null==r.value||null!==i&&r===i[t]||(l[t]=r)};if(a)for(var p=-1,d=r.length;++p<d;)h(r[p]);else for(f in n)h(f);if(o){n=u.type._calculate(this);for(f in n)e.hasOwnProp.call(l,f)||h(f)}}this._initValueKeyLabel(r,s)}).add({labelSep:" ~ ",keySep:"~",value:null,label:null,rawValue:void 0,_initValueKeyLabel:function(e,t){var n,r=e.length;if(0===r)this.key="",this.value=null,t&&(this.label="");else if(1===r)n=this.atoms[e[0]],this.key=this._getAtomKey(n),this.value=n.value,this.rawValue=n.rawValue,t&&(this.label=n.label);else{for(var i,s,o,u="",a=this.owner.keySep,f=this.owner.labelSep,l=this.atoms,c="",h=-1;++h<r;)n=l[e[h]],0===h?i=n.key:i+=a+n.key,s=this._getAtomKey(n),null!==s&&(0===h?u=s:u+=a+s),t&&""!==(o=n.label)&&(""===c?c=o:c+=f+o);this.value=this.rawValue=i,this.key=u,t&&(this.label=c)}},_getAtomKey:function(e){return e.key},getSpecifiedAtom:function(e){return this.atoms[e]},ensureLabel:function(){var t=this.label;if(null==t){t="";var n=this.owner.labelSep;e.eachOwn(this.atoms,function(e){var r=e.label;r&&(t?t+=n+r:t=r)}),this.label=t}return t},view:function(e){return new kt.ComplexView(this,e)},toString:function(){var t=[""+e.qualNameOf(this.constructor)];return null!=this.index&&t.push("#"+this.index),this.owner.type.dimensionsNames().forEach(function(n){t.push(n+": "+e.describe(this.atoms[n].value))},this),t.join(" ")},rightTrimKeySep:function(e){return e&&kt.Complex.rightTrimKeySep(e,this.owner.keySep)},absKeyTrimmed:function(){return this.rightTrimKeySep(this.absKey)},keyTrimmed:function(){return this.rightTrimKeySep(this.key)}}),kt.Complex.rightTrimKeySep=function(e,t){if(e&&t)for(var n,r=t.length;e.lastIndexOf(t)===(n=e.length-r)&&n>=0;)e=e.substr(0,n);return e},kt.Complex.values=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].value})},kt.Complex.compositeKey=function(e,t){for(var n="",r=t.length,i=e.owner.keySep,s=e.atoms,o=0;r>o;o++){var u=s[t[o]].key;o?n+=i+u:n=u}return n},kt.Complex.labels=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].label})};var At=e.propGet("id");e.type("cdo.ComplexView",kt.Complex).init(function(e,t){this.source=e,this.viewDimNames=t,this.base(e,e.atoms,t,e.owner.atoms,!0)}).add({values:function(){return kt.Complex.values(this,this.viewDimNames)},labels:function(){return kt.Complex.labels(this,this.viewDimNames)}}),e.type("cdo.Datum",kt.Complex).init(function(e,t,n){this.base(e,t,n,null,!1,!0),this.key||(this.key=this.id)}).add({isSelected:!1,isVisible:!0,isNull:!1,isVirtual:!1,isTrend:!1,trend:null,isInterpolated:!1,interpolation:null,_getAtomKey:function(e){return e.dimension.isKey?e.key:null},setSelected:function(e){if(this.isNull)return!1;e=null==e||!!e;var t=this.isSelected!==e;return t&&(e?this.isSelected=!0:delete this.isSelected,H.call(this.owner,this,e)),t},toggleSelected:function(){return this.setSelected(!this.isSelected)},setVisible:function(e){if(this.isNull)return!1;e=null==e||!!e;var t=this.isVisible!==e;return t&&(this.isVisible=e,B.call(this.owner,this,e)),t},toggleVisible:function(){return this.setVisible(!this.isVisible)}});var Ot=kt.Datum.isSelected=e.propGet("isSelected");kt.Datum.isSelectedT=l,kt.Datum.isSelectedF=c,kt.Datum.isVisibleT=h,kt.Datum.isVisibleF=p,kt.Datum.isNullT=d,kt.Datum.isNullF=v,e.type("cdo.TrendDatum",kt.Datum).init(function(e,t,n,r){this.base(e,t,n),this.trend=r}).add({isVirtual:!0,isTrend:!0}),e.type("cdo.InterpolationDatum",kt.Datum).init(function(e,t,n,r,i){this.base(e,t,n),this.interpolation=r,this.interpDimName=i}).add({isVirtual:!0,isInterpolated:!0});var Mt={abs:!0};e.type("cdo.Dimension").init(function(t,n){this.data=t,this.type=n,this.root=this,this.owner=this;var r=n.name;this.name=r,this._atomComparer=n.atomComparer(),this._atomsByKey={},this.isKey=n.isKey;if(t.isOwner())this._atoms=[],this._lazyInit=null,w.call(this);else{var i,s=t.parent;s?(i=s._dimensions[r],T.call(i,this),this.root=t.parent.root):(s=t.linkParent,s||e.assert("Data must have a linkParent"),i=s._dimensions[r],N.call(i,this)),this._nullAtom=this.owner._nullAtom,this._lazyInit=function(){this._lazyInit=null;for(var t=this.data._datums,n=t.length,s=this._atomsByKey,o=0;n>o;o++){var u=t[o].atoms[r];s[u.key]=u}this._atoms=i.atoms().filter(function(t){return e.hasOwnProp.call(s,t.key)})}}}).add({parent:null,linkParent:null,_linkChildren:null,_atomsByKey:null,_atomVisibleDatumsCount:null,_disposed:!1,_nullAtom:null,_virtualNullAtom:null,_visibleAtoms:null,_visibleIndexes:null,_atomComparer:null,_atoms:null,_sumCache:null,count:function(){return null!==this._lazyInit&&this._lazyInit(),this._atoms.length},isVisible:function(t){return null!==this._lazyInit&&this._lazyInit(),e.hasOwn(this._atomsByKey,t.key)||e.assert("Atom must exist in this dimension."),k.call(this)[t.key]>0},atoms:function(t){null!==this._lazyInit&&this._lazyInit();var n=e.get(t,"visible");return null==n?this._atoms:(n=!!n,this._visibleAtoms||(this._visibleAtoms={}),this._visibleAtoms[n]||(this._visibleAtoms[n]=A.call(this,n)))},indexes:function(n){null!==this._lazyInit&&this._lazyInit();var r=e.get(n,"visible");return null==r?t.range(0,this._atoms.length):(r=!!r,this._visibleIndexes||(this._visibleIndexes={}),this._visibleIndexes[r]||(this._visibleIndexes[r]=L.call(this,r)))},atom:function(e){if(null==e||""===e)return this._nullAtom;if(e instanceof kt.Atom)return e;null!==this._lazyInit&&this._lazyInit();var t=this.type._key,n=t?t.call(null,e):e;return this._atomsByKey[n]||null},getDistinctAtoms:function(e){var t,n,r,i=[],s=e?e.length:0;if(s){r={};for(var o=0;s>o;o++)(t=this.atom(e[o]))&&!r[n="\0"+t.key]&&(r[n]=t,i.push(t))}return i},extent:function(t){var n,r=this.atoms(t),i=r.length;if(!i)return void 0;var s=this._nullAtom&&null==r[0].value?1:0,o=i-s;if(o>0){var u=r[s],a=r[i-1];if(u!==a&&e.get(t,"abs",!1)){var f=u.value<0?-1:1,l=a.value<0?-1:1;if(f===l)0>l&&(n=a,a=u,u=n);else if(o>2){a.value<-u.value&&(a=u);var c=e.array.binarySearch(r,0,this.type.comparer(),function(e){return e.value});if(0>c){c=~c;var h=r[c-1],p=r[c];u=-h.value<p.value?h:p}else u=r[c]}else a.value<-u.value&&(n=a,a=u,u=n)}return{min:u,max:a}}return void 0},min:function(e){var t=this.atoms(e),n=t.length;if(!n)return void 0;var r=this._nullAtom&&null==t[0].value?1:0;return n>r?t[r]:void 0},max:function(e){var t=this.atoms(e),n=t.length;return n&&null!=t[n-1].value?t[n-1]:void 0},sumAbs:function(e){return this.sumAbsAtom(e).value},value:function(e){return this.valueAtom(e).value},valueAbs:function(e){return this.valueAbsAtom(e).value},sum:function(e){return this.sumAtom(e).value},sumAtom:function(t){var n=!!e.get(t,"abs",!1),r=e.get(t,"zeroIfNone",!0),i=y(t)+":"+n,s=e.getOwn(this._sumCache,i);if(void 0===s){var o=this.name,u=this.data.datums(null,t).reduce(function(e,t){var r=t.atoms[o].value;return null===r?e:(n&&0>r&&(r=-r),null!=e?e+r:r)},null);(this._sumCache||(this._sumCache={}))[i]=s=this.read(u)}return r&&null===s.value?this.read(0):s},sumAbsAtom:function(t){return t=t?e.create(t,Mt):Mt,this.sumAtom(t)},valueAtom:function(e){return this.sumAtom(e)},valueAbsAtom:function(e){var t=this.valueAtom(e);return t.value<0?this.read(-t.value):t},percent:function(e,t){var n=e instanceof kt.Atom?e.value:e;if(!n)return 0;var r=this.sumAbs(t);return r?Math.abs(n)/r:0},valuePercent:function(e){var t=this.valueAbs(e);if(!t)return 0;var n=this.data.parent;if(!n)return 1;var r=n.dimensionsSumAbs(this.name,e);return t/r},percentOverParent:function(e){return this.valuePercent(e)},format:function(t,n){return e.string.to(this.type._formatter?this.type._formatter.call(null,t,n):t)},intern:function(e,t){return this._read(e,!0,t)},read:function(e){return this._read(e,!1)},_read:function(t,n,r){var i,s;if(null==t||""===t)return this._nullAtom||(n?b.call(this):this.owner._virtualNullAtom);if("object"==typeof t){if(t instanceof kt.Atom){if(t.dimension!==this)throw e.error.operationInvalid("Atom is of a different dimension.");return t}if("v"in t){s=t.f;if(null==(t=t.v)||""===t)return this._nullAtom||(n?b.call(this,s):this.owner._virtualNullAtom)}}var o,u=this.type;if(r||null===(o=u._converter))i=t;else if(null==(i=o(t))||""===i)return this._nullAtom||(n?b.call(this):this.owner._virtualNullAtom);if(null===(o=u.cast)||null!=(i=o(i))&&""!==i){var a=""+(null!==(o=u._key)?o(i):i);if(0===a.length)throw e.error.operationInvalid("Only a null value can have an empty key.");var f;return n?(null!==this._lazyInit&&this._lazyInit(),void 0!==(f=this._atomsByKey[a])?(n&&!r&&f.isVirtual&&delete f.isVirtual,f):m.call(this,t,a,i,s,r)):void 0!==(f=this.owner._atomsByKey[a])?f:new kt.Atom(this,i,s,t,a)}return this._nullAtom||(n?b.call(this):this.owner._virtualNullAtom)},dispose:function(){var e,t=this;t._disposed||(n(t.childNodes,"parent"),n(t._linkChildren,"linkParent"),(e=t.parent)&&i(e,"childNodes",t,"parent"),(e=t.linkParent)&&i(e,"_linkChildren",t,"linkParent"),x.call(t),t._lazyInit=t._atoms=t._nullAtom=t._virtualNullAtom=null,t._disposed=!0)}}),e.type("cdo.Data",kt.Complex).init(function(n){if(null==n)throw e.error.argumentRequired("keyArgs");this._visibleNotNullDatums=new e.Map;var r,i,s,o,u,a,f=null,l=null,c=this.parent=n.parent||null;if(c)this.root=c.root,this.depth=c.depth+1,this.type=c.type,r=c.owner,f=n.datums||e.fail.argumentRequired("datums"),l=n.atoms||e.fail.argumentRequired("atoms"),o=n.atomsDimNames||e.fail.argumentRequired("atomsDimNames"),s=c.atoms,a=n.extensionDatums||c.extensionDatums,i=Object.create(c.atomsIsSet),o.forEach(function(e){i[e]=!0});else{this.root=this,o=[];var h=n.linkParent||null;h?(r=h.owner,this.type=r.type,f=n.datums||e.fail.argumentRequired("datums"),this._leafs=[],s=n.atomsBase||h.atoms,i=n.atomsBaseIsSet||Object.create(h.atomsIsSet),a=n.extensionDatums||h.extensionDatums,u=e.get(n,"index",null),M.call(h,this,u)):(r=this,this.type=n.type||e.fail.argumentRequired("type"),s={},i={},n.labelSep&&(this.labelSep=n.labelSep),n.keySep&&(this.keySep=n.keySep),this._selectedNotNullDatums=new e.Map)}this.owner=r,this._datums=[],this._datumsById={},this._datumsByKey={},null!==f&&this._addDatumsLocal(f),this._atomsBase=s,this.atomsIsSet=i,this.extensionDatums=a||null,this._dimensions={},this._dimensionsList=[],this.type.dimensionsList().forEach(this._initDimension,this),this.base(r,l,o,s,!0),t.Dom.Node.call(this),c?(u=e.get(n,"index",null),O.call(c,this,u),this.absKey=c.absKey?e.string.join(r.keySep,c.absKey,this.key):this.key,this.absLabel=c.absLabel?e.string.join(r.labelSep,c.absLabel,this.label):this.label):(this.absKey=this.key,this.absLabel=this.label)}).add(t.Dom.Node).add({parent:null,linkParent:null,_dimensions:null,_dimensionsList:null,_freeDimensionNames:null,_linkChildren:null,_leafs:null,_childrenByKey:null,_visibleNotNullDatums:null,_selectedNotNullDatums:null,_groupByCache:null,_sumAbsCache:null,treeHeight:null,_datums:null,_datumsById:null,_datumsByKey:null,depth:0,label:"",absLabel:"",_disposed:!1,_isFlattenGroup:!1,_isDegenerateFlattenGroup:!1,_initDimension:function(e){var t=new kt.Dimension(this,e);this._dimensions[e.name]=t,this._dimensionsList.push(t)},dimensions:function(t,n){if(null==t)return this._dimensions;var r=e.getOwn(this._dimensions,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.argumentInvalid("name","Undefined dimension '{0}'.",[t]);return r},dimensionsList:function(){return this._dimensionsList},getSpecifiedAtom:function(e){return this.atomsIsSet[e]===!0?this.atoms[e]:null},freeDimensionsNames:function(){var e=this._freeDimensionNames;return e||(this._freeDimensionNames=e=this.type.dimensionsNames().filter(function(e){var t=this.atoms[e];return!(t instanceof kt.Atom)||null==t.value},this)),e},isOwner:function(){return this.owner===this},children:function(){var t=this.childNodes;return t.length>0?e.query(t):e.query()},child:function(t){return e.getOwn(this._childrenByKey,t,null)},childCount:function(){return this.childNodes.length},contains:function(t){return e.hasOwn(this._datumsById,t.id)},datumByKey:function(t){return e.getOwn(this._datumsByKey,t,null)},leafs:function(){return e.query(this._leafs)},count:function(){return this._datums.length},firstDatum:function(){return this._datums.length>0?this._datums[0]:null},firstAtoms:function(){return(this.firstDatum()||this).atoms},singleDatum:function(){var e=this._datums;return 1===e.length?e[0]:null},dispose:function(){var e=this;if(!e._disposed){D.call(e);var t;(t=e._selectedNotNullDatums)&&t.clear(),e._visibleNotNullDatums.clear(),t=e._dimensionsList;for(var n=0,r=t.length;r>n;n++)t[n].dispose();e._dimensions=null,e._dimensionsList=null;if(t=e.parent)t.removeChild(e),e.parent=null;(t=e.linkParent)&&_.call(t,e),e._disposed=!0}},disposeChildren:function(){D.call(this)}}),kt.Data.add({selectedCount:function(){return this.isOwner()?this._selectedNotNullDatums.count:this.datums(null,{selected:!0}).count()},selectedDatums:function(){return this.isOwner()?this._selectedNotNullDatums.values():this.datums(null,{selected:!0}).array()},selectedDatumMap:function(){if(this.isOwner())return this._selectedNotNullDatums.clone();var t=this.datums(null,{selected:!0}).object({name:e.propGet("id")});return new e.Set(t)},visibleCount:function(){return this._visibleNotNullDatums.count},replaceSelected:function(t){e.array.is(t)||(t=t.array());var n=e.query(t).where(Ot).object({name:At}),r=this.owner.clearSelected(function(t){return!e.hasOwn(n,t.id)});return r|=kt.Data.setSelected(t,!0),r},clearSelected:function(e){if(this.owner!==this)return this.owner.clearSelected(e);if(!this._selectedNotNullDatums.count)return!1;var t;return e?(t=!1,this._selectedNotNullDatums.values().filter(e).forEach(function(e){t=!0,a.call(e),this._selectedNotNullDatums.rem(e.id)},this)):(t=!0,this._selectedNotNullDatums.values().forEach(function(e){a.call(e)}),this._selectedNotNullDatums.clear()),t}}),kt.Data.setSelected=function(t,n){var r=0;return t&&e.query(t).each(function(e){r|=e.setSelected(n)}),!!r},kt.Data.toggleSelected=function(t,n){e.array.isLike(t)||(t=e.query(t).array());var r=e.query(t),i=n?r.any(Ot):r.all(f);return this.setSelected(t,!i)},kt.Data.setVisible=function(t,n){var r=0;return t&&e.query(t).each(function(e){r|=e.setVisible(n)}),!!r},kt.Data.toggleVisible=function(t){e.array.isLike(t)||(t=e.query(t).array());var n=e.query(t).all(e.propGet("isVisible"));return kt.Data.setVisible(t,!n)},kt.Data.add({select:null,load:function(t,n){P.call(this);var r=e.get(n,"where"),i=e.get(n,"isNull"),s=e.get(n,"isAdditive",!1),o=e.query(t).select(function(e){var t=new kt.Datum(this,e);return i&&i(t)&&(t.isNull=!0),r&&!r(t)?null:t},this);I.call(this,o,{isAdditive:s,doAtomGC:!0})},clearVirtuals:function(){var t=this._datums,n=t.length;if(n>0){this._sumAbsCache=null;for(var r,i=0;n>i;){var s=t[i];s.isVirtual?(U.call(this,s),n--,r=!0):i++}if(r){if(!t.length&&this.parent)return void this.dispose();var o=this.childNodes;if(o){i=0,n=o.length;for(;n>i;){var u=o[i];u.clearVirtuals(),u.parent?i++:n--}}this._linkChildren&&this._linkChildren.forEach(function(e){e.clearVirtuals()})}}e.eachOwn(this._dimensions,function(e){S.call(e)})},add:function(e){P.call(this),I.call(this,e,{isAdditive:!0,doAtomGC:!0})},_addDatumsSimple:function(e){this._addDatumsLocal(e),this._onDatumsAdded(e)},_onDatumsAdded:function(e){var t=this._linkChildren;if(t)for(var n=-1,r=t.length;++n<r;)t[n]._addDatumsSimple(e)},_addDatumsLocal:function(e){var t=this._datums,n=this._visibleNotNullDatums,r=this._selectedNotNullDatums,i=this._datumsById,s=this._datumsByKey,o=!!this._dimensions;this._sumAbsCache=null;for(var u=-1,a=e.length;++u<a;){var f=e[u],l=f.id;void 0===i[l]&&(t.push(f),i[l]=f,s[f.key]=f,o&&R.call(this,f,!0,!1),f.isNull||(r&&f.isSelected&&r.set(l,f),f.isVisible&&n.set(l,f)))}},groupBy:function(t,n){var r,i,s=new kt.GroupingOper(this,t,n),o=s.key;return o&&(r=this._groupByCache,i=r&&r[o]),i?e.debug>=7&&e.log("[GroupBy] Cache key hit '"+o+"'"):(e.debug>=7&&e.log("[GroupBy] "+(o?"Cache key not found : '"+o+"' on '"+this.id+"'":"No Cache key")),i=s.execute(),o&&((r||(this._groupByCache={}))[o]=i)),i},where:function(t,n){var r=t&&z.call(this,t),i=this._datums;i.length>0&&(r?i=$.call(this,r,n).array():n&&(i=W(e.query(i),n).array()));var s=(r||n)&&X(r,n);return new kt.FilteredData({linkParent:this,datums:i,where:s})},datums:function(t,n){if(0===this._datums.length)return e.query();if(!t)return n?W(e.query(this._datums),n):e.query(this._datums);var r=z.call(this,t);return $.call(this,r,n)},datum:function(e,t){return this.datums(e,t).first()||null},dimensionsSumAbs:function(e,t){var n=this.dimensionNumberValue(e,t).value;return null!==n&&0>n?-n:n},dimensionNumberValue:function(e,t){var n=this._createDimensionOperArgs(e,t);return this._dimensionNumberValue(n)},_createDimensionOperArgs:function(t,n){var r,i,s=null;"function"==typeof t?(r=t,i=e.get(n,"discrimPossibleDims")||null,s=e.get(n,"discrimKey")||null,null!==s&&(s="discrim:"+s)):(r=e.fun.constant(t),i=[t],s=t);var o=null;return null!==s&&(o=s+":"+y(n)+":"+(i||[]).join("|")),{discrimFun:r,discrimPossibleDimNames:i,cacheKey:o,keyArgs:n}},_dimensionNumberValue:function(t){var n,r=t.cacheKey;if(null===r||void 0===(n=e.getOwn(this._sumAbsCache,r)))n=this._dimensionNumberValueCore(t),null!==r&&((this._sumAbsCache||(this._sumAbsCache={}))[r]=n);return n},_dimensionNumberValueCore:function(t){var n,r=t.discrimFun(this,null!==t.discrimPossibleDimNames);if(0===this.childCount()){if(null!==r)return this.dimensions(r).valueAtom(t.keyArgs);n=e.query(t.discrimPossibleDimNames).select(function(e){return this.dimensions(e).valueAbsAtom(t.keyArgs).value},this).reduce(e.addPreservingNull,null)}else n=this.children().where(function(e){return!e._isFlattenGroup||e._isDegenerateFlattenGroup}).select(function(e){var n=e._dimensionNumberValue(t).value;return null!==n&&0>n?-n:n}).reduce(e.addPreservingNull,null);return null!==r?this.dimensions(r).read(n):null===n?this.type.nullNumberAtom:new kt.NumberAtom(this.type,n)},dimensionPercentValue:function(e,t){function n(e){return null===o?new kt.NumberAtom(this.type,e):o.read(e)}var r=this._createDimensionOperArgs(e,t),i=this._dimensionNumberValue(r),s=i.value;if(null===s)return i;var o=i.dimension;if(0===s)return n.call(this,0);var u=this.parent;if(null===u)return n.call(this,1);var a=u._dimensionNumberValue(r);return n.call(this,Math.abs(s)/a.value)}}).type().add({lca:function(e){var t,n,r,i,s=e.length,o=null;if(s){if(1===s)return e[0];var u=1;r=j(e[0]);do{n=e[u],i=j(n);if(!(o=F(r,i)))return null;t=n,r=i}while(++u<s)}return o}}),kt.querySpecPredicate=V,e.type("cdo.FilteredData",kt.Data).init(function(t){if(null==t||null!=t.parent||null==t.linkParent)throw e.error.argumentRequired("keyArgs.linkParent");this.base(t),this._wherePred=t.where||e.fail.argumentRequired("keyArgs.where")}).add({_addDatumsSimple:function(e){e=e.filter(this._wherePred),this.base(e)}}),e.type("cdo.GroupingData",kt.Data).init(function(t){if(null==t)throw e.error.argumentRequired("keyArgs");this.base(t),this.groupingOper=t.groupingOper||e.fail.argumentRequired("keyArgs.groupingOper"),this.groupingSpec=t.groupingSpec||null,this.groupingLevelSpec=t.groupingLevelSpec||null}),e.type("cdo.GroupingRootData",kt.GroupingData).init(function(t){if(null==t||null!=t.parent||null==t.linkParent)throw e.error.argumentRequired("keyArgs.linkParent");var n=t.groupingSpec;if(null==n)throw e.error.argumentRequired("keyArgs.groupingSpec");var r=t.groupingOper;if(r&&n.hasExtensionComplexTypes){t=Object.create(t);var i=t.atomsBase=Object.create(t.linkParent.atoms),s=r._extensionDataSetsMap;n.extensionDimensions().each(function(e){void 0===i[e.fullName]&&(i[e.fullName]=s[e.dataSetName].owner.atoms[e.name])})}this.base(t)}).add({_addDatumsSimple:function(e){e=this.groupingOper.executeAdd(this,e),this._onDatumsAdded(e)}}),e.type("cdo.GroupData",kt.GroupingData).init(function(t){if(null==t||null==t.parent)throw e.error.argumentRequired("keyArgs.parent");this.base(t)}),kt.Data.add({getInfo:function(){var t=["DATA SUMMARY",e.logSeparator,"  Dimension",e.logSeparator];return e.eachOwn(this.dimensions(),function(e,n){var r=e.count(),i=e.type,s=[];s.push(),s.push(i.valueTypeName),i.isComparable&&s.push("comparable"),i.isDiscrete||s.push("continuous"),i.isHidden&&s.push("hidden"),t.push("  "+n+' ("'+i.label+'", #'+r+")\n	"+e.atoms().slice(0,10).map(function(e){return e.label}).join(", ")+(r>10?"...":""))}),t.join("\n")},getValues:function(){return t.range(0,this.getCategoriesSize()).map(function(e){return this._getValuesForCategoryIndex(e)},this)},_getDimensionValues:function(e){return this.dimensions(e).atoms().map(function(e){return e.value})},_getDimensionVisibleValues:function(e){return this.dimensions(e).atoms({visible:!0}).map(function(e){return e.value})},getSeries:function(){return this._getDimensionValues("series")},getVisibleSeriesIndexes:function(){return this.dimensions("series").indexes({visible:!0})},getVisibleCategoriesIndexes:function(){return this.dimensions("category").indexes({visible:!0})},getVisibleSeries:function(){return this._getDimensionVisibleValues("series")},getCategories:function(){return this._getDimensionValues("category")},getVisibleCategories:function(){return this._getDimensionVisibleValues("category")},_getValuesForCategoryIndex:function(t){var n=this.dimensions("category").atoms()[t],r=this.datums({category:n}).uniqueIndex(function(e){return e.atoms.series.key});return this.dimensions("series").atoms().map(function(t){var n=e.getOwn(r,t.key);return n?n.atoms.value.value:null})},getSeriesSize:function(){var e=this.dimensions("series",{assertExists:!1});return e?e.count():0},getCategoriesSize:function(){var e=this.dimensions("category",{assertExists:!1});return e?e.count():0}}),e.type("cdo.DataOper").init(function(t){t||e.fail.argumentRequired("linkParent"),this._linkParent=t}).add({key:null,execute:e.abstractMethod}),e.type("cdo.GroupingOper",kt.DataOper).init(function(t,n,r){n||e.fail.argumentRequired("groupingSpecs"),n=e.array.as(n);if(0===n.length)throw e.error.argumentRequired("groupingSpecText");e.get(r,"inverted",!1)&&(n=n.slice().reverse()),this.base(t,r);var i=e.get(r,"where"),s=i&&e.get(r,"whereKey")||"",o=e.get(r,"visible",null),u=e.get(r,"selected",null);this._preFilter=X(null,{visible:o,selected:u,where:i});var a=e.get(r,"isNull",null);this._postFilter=X(null,{isNull:a});var f=null==u&&(!i||!!s),l=f?[]:null,c="",h=null,p=e.get(r,"extensionDataSetsMap",null),d=e.get(r,"reverse",!1);this._groupSpecs=n.map(function(n){if(n instanceof kt.GroupingSpec){if(n.complexType!==t.type)throw e.error.argumentInvalid("groupingSpecText","Invalid associated complex type.")}else n=kt.GroupingSpec.parse(n,t.type);if(n.isNull)throw e.error.argumentInvalid("groupingSpecText","Null grouping specification.");return n.flatteningMode===kt.FlatteningMode.SingleLevel&&(n=n.toSingleLevel()),d&&(n=n.reverse()),f&&l.push(n.key),null!==n.extensionComplexTypeNames&&n.extensionComplexTypeNames.forEach(function(t){var n;if(null===p||!(n=p[t]))throw e.error.operationInvalid("Grouping specification requires extension data set '{0}'.",[t]);null===h&&(h=Object.create(null)),h[t]=n,f&&(c+=t+":"+n.id+";")}),n}),this._extensionDataSetsMap=h,f&&(this.key=l.join("!!")+":"+[o,a,s,c].join(":"))}).add({_getExtensionDatumsMap:function(){var t=null,n=this._extensionDataSetsMap;if(n){t=Object.create(null);var r=this._linkParent.extensionDatums,i=e.query(Object.keys(n)).each(function(e){var i=n[e],s=i._datums;if(0===s.length)return!1;if(null!==r){var o=r[e];o&&(s=o.filter(function(e){return s.indexOf(e)>=0}))}return 0===s.length?!1:(t[e]=s,void 0)});if(i)return!1}return t},execute:function(){var t=this._linkParent._datums,n=e.query(t).where(this._preFilter),r=this._group(n);return this._generateData(r,null,this._linkParent,null)},executeAdd:function(t,n){var r=e.query(n).where(this._preFilter),i=this._group(r);return this._generateData(i,null,this._linkParent,t),i.datums},_group:function(t){var n={isRoot:!0,treeHeight:e.query(this._groupSpecs).select(function(e){return e.flatteningMode&kt.FlatteningMode.Dfs?1:e.depth}).reduce(e.add,0),datums:[],datumsById:{},groupSpec:this._groupSpecs[0],groupLevelSpec:this._groupSpecs[0].levels[0]},r=this._getExtensionDatumsMap();return r!==!1&&this._groupSpecRecursive(n,e.query(t).array(),r,0),n},_groupSpecRecursive:function(e,t,n,r){var i=this._groupSpecs[r];0!==(i.flatteningMode&kt.FlatteningMode.Dfs)?this._groupSpecRecursiveFlattened(e,t,n,i,r):this._groupSpecRecursiveNormal(e,t,n,i,r)},_groupSpecRecursiveNormal:function(e,t,n,r,i){function s(e,t,f,l){var c=o[l],h=l===u-1,p=a&&h;e.groupSpec=r,e.groupLevelSpec=c;for(var d=e.children=this._groupLevelDatums(c,e,t,f,!1),v=0,m=d.length;m>v;v++){var g=d[v];if(!p){var y=g.datums;g.datums=[],g.datumsById={},h?this._groupSpecRecursive(g,y,g.extensionDatumsMap,i+1):s.call(this,g,y,g.extensionDatumsMap,l+1)}this._addChildDatums(e.datums,e.datumsById,g.datums,n)}}var o=r.levels,u=o.length,a=i===this._groupSpecs.length-1;e.isRoot&&(e.label=r.rootLabel),s.call(this,e,t,n,0)},_addChildDatums:function(t,n,r,i){if(null===i)e.array.append(t,r);else for(var s=-1,o=r.length;++s<o;){var u=r[s];void 0===n[u.id]&&(n[u.id]=u,t.push(u))}},_groupSpecRecursiveFlattened:function(t,n,r,i,s){function o(t,n,i,p){for(var v=a[p],m=p===f-1,g=l&&m,y=this._groupLevelDatums(v,t,n,i,!0),b=l?t.datums:[],w=l?t.datumsById:{},E=0,S=y.length;S>E;E++){var x=y[E],T=x.datums;e.array.lazy(t,"_children").push(x);if(e.hasOwn(h,x.key))this._addChildDatums(b,w,T,r);else{var N=c.length;u||(d(x),t.isFlattenGroup=!0),g||(x.datums=[],x.datumsById={},m?this._groupSpecRecursive(x,T,i,s+1):o.call(this,x,T,i,p+1)),this._addChildDatums(b,w,x.datums,r),u&&(e.hasOwn(h,x.key)&&(x.isFlattenGroup||e.assert("Must be a parent for duplicate keys to exist."),1===x._children.length&&(c.splice(N,c.length-N),x.isDegenerateFlattenGroup=!0)),d(x),t.isFlattenGroup=!0)}}l||this._groupSpecRecursive(t,b,i,s+1)}var u=i.flatteningMode===kt.FlatteningMode.DfsPost,a=i.levels,f=a.length,l=s===this._groupSpecs.length-1,c=[],h={},p={key:"",absKey:"",atoms:{},datums:[],datumsById:{},label:i.rootLabel,dimNames:[]},d=function(e){c.push(e),h[e.key]=e};t.children=c,t.childrenByKey=h,u||d(p),o.call(this,p,n,r,0),u&&d(p),t.datums=p.datums},_groupLevelDatums:function(t,n,r,i,s){function o(r,i){var o=f.call(t,r,i),u=e.hasOwnProp.call(p,o)&&p[o];u?(!d||d(r))&&u.datums.push(r):(u=l.call(t,r,i),u.key=o,u.firstDatum=r,u.datums=!d||d(r)?[r]:[],u.extensionDatumsMap=i,s&&(null===v&&(v=r.owner.keySep),this._onNewChildNodeFlattened(o,v,u,t,n)),e.array.insert(h,u,c),p[o]=u)}function u(e,t){for(var n=-1,r=t.length;++n<r;)o.call(this,e,t[n])}function a(e,t,n){for(var r=y[t],s=r.dataSetName,o=i[s],u=-1,f=o.length,l=t+1,c=l>=y.length;++u<f;){var h=Object.create(n);h[s]=[o[u]],c?e.push(h):a(e,l,h)}}var f,l,c,h=[],p=Object.create(null),d=this._postFilter,v=null,m=-1,g=r.length,y=t.extensionDimensions;if(null!==y){f=t.buildKeyWithExtension,l=t.buildGroupNodeWithExtension,c=t.compareNodesWithExtension.bind(t);var b=[];a(b,0,i);for(;++m<g;)u.call(this,r[m],b)}else{f=t.buildKeyMain,l=t.buildGroupNodeMain,c=t.compareNodesMain.bind(t);for(;++m<g;)o.call(this,r[m],i)}if(d){m=h.length;for(;m--;)0===h[m].datums.length&&h.splice(m,1)}return h},_onNewChildNodeFlattened:function(t,n,r,i,s){e.copy(r.atoms,s.atoms),r.dimNames=i.accAllDimensionNames();if(s.dimNames.length){var o=s.absKey+n+t;r.absKey=o,r.key=kt.Complex.rightTrimKeySep(o,n)}else r.absKey=t},_generateData:function(t,n,r,i){var s=null,o=!1;if(t.isRoot)null!==i?(s=i,s._addDatumsLocal(t.datums)):(o=!0,s=new kt.GroupingRootData({groupingOper:this,groupingSpec:t.groupSpec,groupingLevelSpec:t.groupLevelSpec,linkParent:r,datums:t.datums,extensionDatums:t.extensionDatumsMap}),s.treeHeight=t.treeHeight);else{null!==i&&(s=r.child(t.key),null!==s&&s._addDatumsSimple(t.datums));if(null===s){o=!0;var u,a=null;null!==i&&(u=r.childNodes).length>0&&(a=~e.array.binarySearch(u,t.datums[0],n.groupLevelSpec.mainDatumComparer)),s=new kt.GroupData({groupingOper:this,groupingSpec:t.groupSpec,groupingLevelSpec:t.groupLevelSpec,parent:r,atoms:t.atoms,datums:t.datums,index:a,atomsDimNames:t.dimNames,extensionDatums:t.extensionDatumsMap})}}if(o){t.isFlattenGroup&&(s._isFlattenGroup=!0,s._isDegenerateFlattenGroup=!!t.isDegenerateFlattenGroup);var f=t.label;f&&(s.label+=f,s.absLabel+=f)}var l=t.children,c=l?l.length:0;if(c>0)for(var h=-1;++h<c;)this._generateData(l[h],t,s,i);else if(o&&!t.isRoot){var p=s.root._leafs;s.leafIndex=p.length,p.push(s)}return s}}),e.space("cdo").FlatteningMode=e.makeEnum(["SingleLevel","DfsPre","DfsPost"],{zero:"None",all:"AllMask"}),kt.FlatteningMode.Dfs=kt.FlatteningMode.DfsPre|kt.FlatteningMode.DfsPost,e.type("cdo.GroupingSpec").init(function(t,n,r,i){this.complexType=n||null,n=this.complexType;var s=null,o=[],u=[],a=[],f=!1,l=null;this.levels=e.query(t||void 0).where(function(e){return e.allDimensions.length>0}).select(function(e){return o.push(e.key),u.push.apply(u,e.dimensionNames()),e.allDimensions.forEach(function(e){e.dataSetName?(null===s&&(s=Object.create(null)),s[e.dataSetName]=!0,a.push(e.fullName)):a.push(e.name);if(null!==n&&!f){var t=e.dimensionType;t.isDiscrete?f=!0:null===l?l=t.valueType:l!==t.valueType&&(f=!0)}}),e._setAccAllDimNames(a.slice(0)),e}).array(),this.extensionComplexTypesMap=null,this.extensionComplexTypeNames=s&&Object.keys(s),null!==n&&s&&this._setExtensionComplexTypesMap(r),this._dimNames=u,this._allDimNames=a,this.depth=this.levels.length,this._isDiscrete=null!==n?f:void 0,this._singleContinuousValueType=null!==n?f?null:l:void 0,this.isSingleDimension=1===a.length,this.firstDimension=this.depth>0?this.levels[0].allDimensions[0]:null,this.lastDimension=this.depth>0?this.levels[this.depth-1].lastDimension():null,this.rootLabel=e.get(i,"rootLabel")||"",this.flatteningMode=e.get(i,"flatteningMode")||kt.FlatteningMode.None,this._cacheKey=this._calcCacheKey(),this.key=this._cacheKey+"##"+o.join("||")}).add({_calcCacheKey:function(t){return[e.get(t,"flatteningMode")||this.flatteningMode,e.get(t,"rootLabel")||this.rootLabel].join("#")},bind:function(t,n){this.complexType=t||e.fail.argumentRequired("complexType"),this._setExtensionComplexTypesMap(n),n=this.extensionComplexTypesMap;var r=!1,i=null;this.levels.forEach(function(e){e.bind(t,n);if(!r)for(var s=e.allDimensions,o=-1,u=s.length;++o<u;){var a=s[o].dimensionType;if(a.isDiscrete){r=!0;break}if(null===i)i=a.valueType;else if(i!==a.valueType){r=!0;break}}}),this._isDiscrete=r,this._singleContinuousValueType=r?null:i},get isBound(){return!!this.complexType},_setExtensionComplexTypesMap:function(t){if(this.hasExtensionComplexTypes){if(!t){var n=e.error.operationInvalid("Expects a map of extension types.");throw n.code="need-extension-map",n}this.extensionComplexTypesMap=e.copyProps(t,this.extensionComplexTypeNames)}else this.extensionComplexTypesMap=null},get isNull(){return 0===this.depth},get isSingleLevel(){return 1===this.depth},get hasExtensionComplexTypes(){return!!this.extensionComplexTypeNames},isDiscrete:function(){return this._isDiscrete},get singleContinuousValueType(){return this._singleContinuousValueType},get singleDimensionName(){if(this.isSingleDimension)return this.firstDimension.name;throw e.error.operationInvalid("Expected grouping to contain exactly one dimension.")},get singleDimensionType(){if(this.isSingleDimension)return this.firstDimension.dimensionType;throw e.error.operationInvalid("Grouping contains more than one dimension.")},dimensions:function(){return e.query(this.levels).prop("dimensions").selectMany()},allDimensions:function(){return e.query(this.levels).prop("allDimensions").selectMany()},extensionDimensions:function(){return e.query(this.levels).prop("extensionDimensions").selectMany()},dimensionNames:function(){return this._dimNames},get allDimensionNames(){return this._allDimNames},firstDimensionType:function(){var e=this.firstDimension;return e&&e.dimensionType},firstDimensionName:function(){var e=this.firstDimensionType();return e&&e.name},firstDimensionValueType:function(){var e=this.firstDimensionType();return e&&e.valueType},lastDimensionType:function(){var e=this.lastDimension;return e&&e.dimensionType},lastDimensionName:function(){var e=this.lastDimensionType();return e&&e.name},lastDimensionValueType:function(){var e=this.lastDimensionType();return e&&e.valueType},ensure:function(t){var n;if(t){var r=this._calcCacheKey(t);if(r!==this._cacheKey){var i=e.lazy(this,"_groupingCache");n=e.getOwn(i,r),n||(n=i[r]=this._ensure(t))}}return n||this},_ensure:function(t){return new kt.GroupingSpec(this.levels,this.complexType,this.extensionComplexTypesMap,{flatteningMode:e.get(t,"flatteningMode")||this.flatteningMode,rootLabel:e.get(t,"rootLabel")||this.rootLabel})},toSingleLevel:function(){if(this.isSingleLevel)return this;var e=this.allDimensions().array(),t=new kt.GroupingLevelSpec(e,this.complexType,this.extensionComplexTypesMap);return new kt.GroupingSpec([t],this.complexType,this.extensionComplexTypesMap,{flatteningMode:kt.FlatteningMode.SingleLevel,rootLabel:this.rootLabel})},reverse:function(){var e=this.levels.map(function(e){return e.reverse()});return new kt.GroupingSpec(e,this.complexType,this.extensionComplexTypesMap,{flatteningMode:this.flatteningMode,rootLabel:this.rootLabel})},view:function(e){var t=e instanceof kt.Datum?this.dimensionNames():this.allDimensionNames;return e.view(t)},toString:function(){return this.levels.map(String).join(", ")}}),e.type("cdo.GroupingLevelSpec").init(function(t){var n=[],r=[],i=[],s=[],o=null;this.dimensions=s,this.allDimensions=e.query(t).select(function(e){return n.push(e.key),e.dataSetName?(r.push(e.fullName),null===o&&(o=[]),o.push(e)):(r.push(e.name),i.push(e.name),s.push(e)),e}).array(),this.extensionDimensions=o,this._dimNames=i,this._allDimNames=r,this._accDimNames=null,this.depth=this.allDimensions.length,this.key=n.join(",")}).add({_setAccAllDimNames:function(e){this._accDimNames=e},accAllDimensionNames:function(){return this._accDimNames},dimensionNames:function(){return this._dimNames},get allDimensionNames(){return this._allDimNames},lastDimension:function(){return this.allDimensions[this.depth-1]},bind:function(e,t){this.allDimensions.forEach(function(n){n.bindComplexType(e,t)})},compareNodesMain:function(e,t){for(var n,r=this.dimensions,i=r.length,s=-1;++s<i;)if(0!==(n=r[s].compareDatums(e.firstDatum,t.firstDatum)))return n;return 0},compareNodesWithExtension:function(e,t){for(var n,r,i,s,o,u=this.allDimensions,a=u.length,f=-1;++f<a;){null!==(i=(r=u[f]).dataSetName)?(s=e.extensionDatumsMap[i][0],o=t.extensionDatumsMap[i][0]):(s=e.firstDatum,o=t.firstDatum);if(0!==(n=r.compareDatums(s,o)))return n}return 0},buildKeyMain:function(e){return kt.Complex.compositeKey(e,this._dimNames)},buildKeyWithExtension:function(e,t){for(var n,r="",i=this.allDimensions,s=i.length,o=-1,u=e.owner.keySep,a=e.atoms;++o<s;){var f=null!==(n=i[o]).dataSetName?t[n.dataSetName][0].atoms[n.name].key:a[n.name].key;o?r+=u+f:r=f}return r},buildGroupNodeMain:function(t){var n=this._dimNames;return{atoms:e.copyProps(t.atoms,n),dimNames:n}},buildGroupNodeWithExtension:function(e,t){for(var n,r={},i=this.allDimensions,s=i.length,o=e.atoms,u=-1;++u<s;)null!==(n=i[u]).dataSetName?r[n.fullName]=t[n.dataSetName][0].atoms[n.name]:r[n.name]=o[n.name];return{atoms:r,dimNames:this._allDimNames}},reverse:function(){var e=this.allDimensions.map(function(e){return e.reverse()});return new kt.GroupingLevelSpec(e,this.complexType,this.extensionComplexTypesMap)},toString:function(){return e.query(this.allDimensions).select(String).array().join("|")}}),e.type("cdo.GroupingDimensionSpec").init(function(e,t,n){this.fullName=e;var r=/^(?:(.+?)\.)?(.+)$/.exec(e);this.dataSetName=r&&r[1]||null,this.name=r?r[2]:e,this.isReversed=!!t,this.key=e+":"+(t?"0":"1"),this.dimensionType=null,n&&this.bind(n)}).add({bindComplexType:function(t,n){t||e.fail.argumentRequired("complexType");var r;if(null!==this.dataSetName){var i=e.get(n,this.dataSetName);if(!i)throw e.error.operationInvalid("The data set name '{0}' of dimension '{1}' is not defined.",[this.dataSetName,this.fullName]);r=i}else r=t;return this.bind(r.dimensions(this.name)),this},bind:function(t){this.dimensionType=t||e.fail.argumentRequired("dimensionType");if(t.isComparable){var n=t.atomComparer(this.isReversed),r=this.name;this.compareDatums=function(e,t){return n(e.atoms[r],t.atoms[r])}}else this.compareDatums=this.isReversed?function(e,t){return t.id-e.id}:function(e,t){return e.id-t.id};return this},compareDatums:function(){throw e.error.operationInvalid("Not Bound.")},reverse:function(){return new kt.GroupingDimensionSpec(this.fullName,!this.isReversed,this.dimensionType)},toString:function(){return this.fullName+(this.dimensionType?' ("'+this.dimensionType.label+'")':"")+(this.isReversed?" desc":"")}}),kt.GroupingSpec.parse=function(t,n,r){var i=null;if(t){var s=e.string.is(t)?t.split(/\s*,\s*/):e.array.as(t);i=e.query(s).select(function(e){var t=K(e,n,r);return new kt.GroupingLevelSpec(t,n,r)})}return new kt.GroupingSpec(i,n,r)};var _t=/^\s*(.+?)(?:\s+(asc|desc))?\s*$/i;e.type("cdo.LinearInterpolationOper").init(function(t,n,r,i,s,o,u,a){this._newDatums=[],this._data=r;var f=i.flatten(t).children(),l=s.isBound()?s.flatten(n,{visible:!0,isNull:!1}).children().array():[null],c=this._valDim=t.owner.dimensions(u),h={visible:!0,zeroIfNone:!1};this._isCatDiscrete=i.grouping.isDiscrete(),this._stretchEnds=a,this._catInfos=f.select(function(e,t){var n=r.child(e.key),i={data:n||e,value:e.value,isInterpolated:!1,serInfos:null,index:t};return i.serInfos=[],l.forEach(function(e){var t=n;t&&e&&(t=t.child(e.key));var r=o.getBoundDimensionName(t||e,!0);if(null===r||r===u){var s=t?t.dimensions(c.name).value(h):null;i.serInfos.push({data:e,group:t,value:s,isNull:null==s,catInfo:i})}}),i}).array(),this._serCount=l.length,this._serStates=e.range(0,this._serCount).select(function(e){return new kt.LinearInterpolationOperSeriesState(this,e)},this).array()}).add({interpolate:function(){for(var e;e=this._catInfos.shift();)e.serInfos.forEach(this._visitSeries,this);var t=this._newDatums;t.length&&this._data.owner.add(t)},_visitSeries:function(e,t){this._serStates[t].visit(e)},nextUnprocessedNonNullCategOfSeries:function(e){for(var t=0,n=this._catInfos.length;n>t;){var r=this._catInfos[t++],i=r.serInfos[e];if(!i.isNull)return i}}}),e.type("cdo.LinearInterpolationOperSeriesState").init(function(e,t){this.interpolation=e,this.index=t,this._lastNonNull(null)}).add({visit:function(e){e.isNull?this._interpolate(e):this._lastNonNull(e)},_lastNonNull:function(e){return arguments.length&&(this.__lastNonNull=e,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var t=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&t){var r=t.value,i=n.value,s=i-r;if(this.interpolation._isCatDiscrete){var o=n.catInfo.index-t.catInfo.index;o>=2||e.assert("Must have at least one interpolation point."),this._stepValue=s/o,this._middleIndex=~~(o/2);var u=o-1;this._isOdd=u%2>0}else{var a=+t.catInfo.value,f=+n.catInfo.value,l=f-a;this._steep=s/l,this._middleCat=(f+a)/2}}}},_interpolate:function(t){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var s,o,u=this.interpolation,a=t.catInfo;if(n&&r)if(u._isCatDiscrete){var f=a.index-r.catInfo.index;s=r.value+this._stepValue*f,o=(this._isOdd?f<this._middleIndex:f<=this._middleIndex)?r.group:n.group}else{var l=+a.value,c=+r.catInfo.value;s=r.value+this._steep*(l-c),o=l<this._middleCat?r.group:n.group}else{if(!u._stretchEnds)return;s=i.value,o=i.group}var h=Object.create(o.atoms);e.copyOwn(h,a.data.atoms);var p=u._valDim,d=p.intern(s,!0);h[p.name]=d;var v=u._datumDimNames;v||(u._datumDimNames=v=o.type.filterExtensionDimensionNames(e.keys(h))),u._newDatums.push(new kt.InterpolationDatum(o.owner,h,v,"linear",p.name))}}}),e.type("cdo.ZeroInterpolationOper").init(function(t,n,r,i,s,o,u,a){this._newDatums=[],this._data=r;var f=i.flatten(t).children(),l=s.isBound()?s.flatten(n,{visible:!0,isNull:!1}).children().array():[null],c=this._valDim=t.owner.dimensions(u),h={visible:!0,zeroIfNone:!1};this._isCatDiscrete=i.grouping.isDiscrete(),this._stretchEnds=a,this._catInfos=f.select(function(e,t){var n=r.child(e.key),i={data:n||e,value:e.value,isInterpolated:!1,serInfos:null,index:t};return i.serInfos=[],l.forEach(function(e){var t=n;t&&e&&(t=t.child(e.key));var r=o.getBoundDimensionName(t||e,!0);if(null===r||r===u){var s=t?t.dimensions(c.name).value(h):null;i.serInfos.push({data:e,group:t,value:s,isNull:null==s,catInfo:i})}}),i}).array(),this._serCount=l.length,this._serStates=e.range(0,this._serCount).select(function(e){return new kt.ZeroInterpolationOperSeriesState(this,e)},this).array()}).add({interpolate:function(){for(var e;e=this._catInfos.shift();)e.serInfos.forEach(this._visitSeries,this);var t=this._newDatums;t.length&&this._data.owner.add(t)},_visitSeries:function(e,t){this._serStates[t].visit(e)},nextUnprocessedNonNullCategOfSeries:function(e){for(var t=0,n=this._catInfos.length;n>t;){var r=this._catInfos[t++],i=r.serInfos[e];if(!i.isNull)return i}}}),e.type("cdo.ZeroInterpolationOperSeriesState").init(function(e,t){this.interpolation=e,this.index=t,this._lastNonNull(null)}).add({visit:function(e){e.isNull?this._interpolate(e):this._lastNonNull(e)},_lastNonNull:function(e){return arguments.length&&(this.__lastNonNull=e,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var t=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&t)if(this.interpolation._isCatDiscrete){var r=n.catInfo.index-t.catInfo.index;r>=2||e.assert("Must have at least one interpolation point."),this._middleIndex=~~(r/2);var i=r-1;this._isOdd=i%2>0}else{var s=+t.catInfo.value,o=+n.catInfo.value;this._middleCat=(o+s)/2}}},_interpolate:function(t){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var s,o=this.interpolation,u=t.catInfo;if(n&&r)if(o._isCatDiscrete){var a=u.index-r.catInfo.index;s=this._isOdd?a<this._middleIndex?r.group:n.group:a<=this._middleIndex?r.group:n.group}else{var f=+u.value;s=f<this._middleCat?r.group:n.group}else{if(!o._stretchEnds)return;s=i.group}var l=Object.create(s.atoms);e.copyOwn(l,u.data.atoms);var c=o._valDim,h=o._zeroAtom||(o._zeroAtom=c.intern(0,!0));l[c.name]=h;var p=o._datumDimNames;p||(o._datumDimNames=p=s.type.filterExtensionDimensionNames(e.keys(l))),o._newDatums.push(new kt.InterpolationDatum(s.owner,l,p,"zero",c.name))}}}),e.type("cdo.TranslationOper").init(function(t,n,r,i){this.complexTypeProj=t||e.fail.argumentRequired("complexTypeProj"),this.source=n||e.fail.argumentRequired("source"),this.metadata=r||e.fail.argumentRequired("metadata"),this.options=i||{},this._initType(),e.debug>=4&&(this._logLogicalRows=!0,this._logLogicalRowCount=0)}).add({_logLogicalRows:!1,logSource:e.abstractMethod,logLogicalRow:e.abstractMethod,_translType:"Unknown",logTranslatorType:function(){return this._translType+" data source translator"},logicalColumnCount:function(){return this.metadata.length},setSource:function(t){if(!t)throw e.error.argumentRequired("source");this.source=t},defReader:function(t){t||e.fail.argumentRequired("readerSpec");var n=e.string.is(t)?t:t.names;n=e.string.is(n)?n.split(/\s*\,\s*/):e.array.as(n);var r=e.array.as(t.indexes);r&&r.forEach(this._userUseIndex,this);var i=!!n&&!!n.length,s=t.reader;if(s)i||e.fail.argumentRequired("reader.names","Required argument when a reader function is specified."),this._userRead(s,n);else{if(i)return this._userCreateReaders(n,r);r&&r.forEach(function(e){this._userIndexesToSingleDim[e]=null},this)}return r},configureType:function(){this._configureTypeCore()},_configureTypeCore:e.abstractMethod,_initType:function(){this._userDimsReaders=[],this._userDimsReadersByDim={},this._userUsedIndexes={},this._userIndexesToSingleDim=[];var t=this.options.readers;t&&e.array.each(t,this.defReader,this);var n=e.parseDistinctIndexArray(this.options.multiChartIndexes);n&&(this._multiChartIndexes=this.defReader({names:"multiChart",indexes:n}))},_userUseIndex:function(t){t=+t;if(0>t)throw e.error.argumentInvalid("index","Invalid reader index: '{0}'.",[t]);if(e.hasOwn(this._userUsedIndexes,t))throw e.error.argumentInvalid("index","Column '{0}' of the logical table is already assigned.",[t]);return this._userUsedIndexes[t]=!0,t},_userCreateReaders:function(t,n){n?n.forEach(function(e,t){n[t]=+e}):n=[];var r,i=n.length,s=t.length;if(s>i){var o=i>0?n[i-1]+1:0;do o=this._getNextFreeLogicalColumnIndex(o),n[i]=o,this._userUseIndex(o),i++;while(s>i)}for(var u,a=i===s?s:s-1,f=0;a>f;f++)r=t[f],u=n[f],this._userIndexesToSingleDim[u]=r,this._userRead(this._propGet(r,u),r);if(s>a)for(var l=e.splitIndexedId(t[s-1]),c=l[0],h=e.nullyTo(l[1],0),p=a;i>p;p++,h++)r=e.indexedId(c,h),u=n[p],this._userIndexesToSingleDim[u]=r,this._userRead(this._propGet(r,u),r);return n},_userRead:function(t,n){e.fun.is(t)||e.fail.argumentInvalid("reader","Reader must be a function."),e.array.is(n)?n.forEach(function(e){this._readDim(e,t)},this):this._readDim(n,t),this._userDimsReaders.push(t)},_readDim:function(t,n){var r,i,s=this._userIndexesToSingleDim.indexOf(t);if(s>=0){r=this._logicalRowInfos[s];if(r&&!this.options.ignoreMetadataLabels){var o=r.label||r.name&&e.titleFromName(r.name);o&&(i={label:o})}}this.complexTypeProj.readDim(t,i),this._userDimsReadersByDim[t]=n},execute:function(e){return this.data=e,this._executeCore()},_executeCore:function(){var t=this._getDimensionsReaders();return e.query(this._getLogicalRows()).select(function(e){return this._readLogicalRow(e,t)},this)},_getLogicalRows:function(){return this.source},_getDimensionsReaders:function(){return this._userDimsReaders.slice().reverse()},_readLogicalRow:function(e,t){for(var n=this._logLogicalRows&&this._logLogicalRowBefore(e),r=t.length,i=this.data,s={};r--;)t[r].call(i,e,s);return n&&this._logLogicalRowAfter(s),s},_logLogicalRowBefore:function(t){return this._logLogicalRowCount<10?(e.log("logical row ["+this._logLogicalRowCount++ +"]: "+e.describe(t)),!0):(e.log("..."),this._logLogicalRows=!1)},_logLogicalRowAfter:function(t){var n={};for(var r in t){var i=t[r];e.object.is(i)&&(i="v"in i?i.v:"value"in i?i.value:"..."),n[r]=i}e.log("-> read: "+e.describe(n))},_propGet:function(e,t){function n(n,r){r[e]=n[t]}return n},_getNextFreeLogicalColumnIndex:function(t,n){null==t&&(t=0),null==n&&(n=1/0);for(;n>t&&e.hasOwn(this._userUsedIndexes,t);)t++;return n>t?t:-1},_getPhysicalGroupStartIndex:function(t){return e.getOwn(this._logicalRowPhysicalGroupIndex,t)},_getPhysicalGroupLength:function(t){return e.getOwn(this._logicalRowPhysicalGroupsLength,t)},_configureTypeByPhysicalGroup:function(t,n,r,i){var s=this._logicalRowPhysicalGroupIndex[t],o=this._logicalRowPhysicalGroupsLength[t],u=s+o-1,a=s;r=null==r?o:Math.min(o,r);if(r&&u>=a){n||(n=t),i||(i=1/0);for(var f,l=0;r&&i>l;){f=e.indexedId(n,l++);if(!this.complexTypeProj.isReadOrCalc(f)){a=this._getNextFreeLogicalColumnIndex(a);if(a>u)return a;this.defReader({names:f,indexes:a}),a++,r--}}}return a},_configureTypeByOrgLevel:function(e,t){var n=[],r=[];this._logicalRowInfos.forEach(function(e,t){if(!this[t]){var i=1===e.type?n:r;i&&i.push(t)}},this._userUsedIndexes),this._configureTypeByDimGroups(r,this._processDimGroupSpecs(e,!0,1/0)),this._configureTypeByDimGroups(n,this._processDimGroupSpecs(t,!1,1))},_processDimGroupSpecs:function(t,n,r){return t.map(function(t){return e.string.is(t)?{name:t,greedy:n,maxCount:r}:e.setDefaults(t,{greedy:n,maxCount:r})})},_configureTypeByDimGroups:function(e,t){if(t)for(var n,r=-1,i=t.length;++r<i&&(n=e.length);){var s=t[r],o=Math.min(s.maxCount,n),u=this._getFreeDimGroupNames(s.name,o,s.greedy);u&&(u.length,this.defReader({names:u,indexes:e.splice(0,u.length)}))}},_getFreeDimGroupNames:function(t,n,r){if(!t)return null;var i=[],s=0;null==n&&(n=1);for(;n;){var o=e.indexedId(t,s++);this.complexTypeProj.isReadOrCalc(o)?r||n--:(i.push(o),n--)}return i.length?i:null}}),e.type("cdo.MatrixTranslationOper",kt.TranslationOper).add({_initType:function(){this.J=this.metadata.length,this.I=this.source.length,this._processMetadata(),this.base()},setSource:function(e){this.base(e),this.I=this.source.length},_knownContinuousColTypes:{numeric:1,number:1,integer:1},_processMetadata:function(){var t,n=this.options.typeCheckingMode,r=this._knownContinuousColTypes;if("none"===n)t=e.query(this.metadata).select(function(e,t){e.colIndex=t;var n=e.colType;return n&&1===r[n.toLowerCase()]?1:0}).array();else{var i="extended"===n,s=e.query(this.metadata).select(function(e,t){return e.colIndex=t,e}).where(function(e){var t=e.colType;return!t||1!==r[t.toLowerCase()]}).select(function(e){return e.colIndex}).array(),o=this.I,u=this.source,a=s.length;t=e.array.create(this.J,1);for(var f=0;o>f&&a>0;f++)for(var l=u[f],c=0;a>c;){var h=s[c],p=l[h];null!=p?(t[h]=this._getSourceValueType(p,i),s.splice(c,1),a--):c++}}this._columnTypes=t},_buildLogicalColumnInfoFromMetadata:function(e){var t=this.metadata[e];return{type:this._columnTypes[e],name:t.colName,label:t.colLabel}},_getSourceValueType:function(e,t){switch(typeof e){case"number":return 1;case"string":return t&&""!==e&&!isNaN(+e)?1:0;case"object":return e instanceof Date?1:0}return 0},logSource:function(){var t=kt.previewRowsMax,n=kt.previewColsMax,r=this.metadata,i=r.length,s=e.array.prepend;i>n&&(r=r.slice(0,n),r.push({colName:"("+n+"/"+i+")",colType:"..."}));var o=e.textTable(r.length+1).rowSep().row.apply(o,s(r.map(function(e){return e.colName}),["Name"])).rowSep().row.apply(o,s(r.map(function(e){return e.colLabel?'"'+e.colLabel+'"':""}),["Label"])).rowSep().row.apply(o,s(r.map(function(e){return e.colType}),["Type"])).rowSep();return e.query(this.source).take(t).each(function(t,r){i>n&&(t=t.slice(0,n)),o.row.apply(o,s(t.map(function(t){return e.describe(t)}),[r+1]))}),o.rowSep().row("("+Math.min(t,this.I)+"/"+this.I+")").rowSep(!0),"DATA SOURCE SUMMARY\n"+o()+"\n"},_logLogicalRow:function(t,n){var r=e.textTable(6).rowSep().row("Index","Kind","Type","Name","Label","Dimension").rowSep(),i=0;return t.forEach(function(e){for(var t=0,s=n[e];s>t;t++){var o=this._logicalRowInfos[i];r.row(i,e,o.type?"number":"string",o.name||"",o.label||"",this._userIndexesToSingleDim[i]||""),i++}},this),r.rowSep(!0),"LOGICAL TABLE\n"+r()+"\n"},_createPlot2SeriesKeySet:function(t,n){var r=null,i=n.length;return e.query(t).each(function(t){var s=+t;if(isNaN(s))throw e.error.argumentInvalid("plot2SeriesIndexes","Element is not a number '{0}'.",[t]);if(0>s){if(-i>=s)throw e.error.argumentInvalid("plot2SeriesIndexes","Index is out of range '{0}'.",[s]);s=i+s}else if(s>=i)throw e.error.argumentInvalid("plot2SeriesIndexes","Index is out of range '{0}'.",[s]);r||(r={}),r[n[s]]=!0}),r},_dataPartGet:function(t){function n(t,n){n[a]=e.hasOwn(i,t)?o||(o=r.intern("1")):s||(s=r.intern("0"))}var r,i,s,o,u=this,a=this.options.dataPartDimName,f=function(){i=t(),r=u.data.dimensions(a),e.debug>=3&&i&&e.log("Second axis series values: "+e.describe(e.keys(i))),f=null};this.complexTypeProj.setCalc({names:a,calculation:function(e,t){f&&f(),n(e.atoms.series.value,t)}})},_configureTypeCore:function(){["series","category","value"].forEach(function(e){this._configureTypeByPhysicalGroup(e)},this)}}),kt.previewRowsMax=15,kt.previewColsMax=6,e.type("cdo.CrosstabTranslationOper",kt.MatrixTranslationOper).add({_translType:"Crosstab",logicalColumnCount:function(){return this.R+this.C+this.M},_executeCore:function(){function t(e,t){for(var n=s[e],r=0,u=o[e];u-->0;)i[n++]=t[r++]}function n(e,t){for(var n=s.M,r=o._colGroupsIndexes[t],u=o.M,a=0;u>a;a++){var f=r[a];i[n++]=null!=f?e[f]:null}}if(!this.metadata.length)return e.query();var r=this._getDimensionsReaders(),i=new Array(this.logicalColumnCount()),s=this._logicalRowCrossGroupIndex,o=this,u=e.query(this.source);if(this._colGroups&&this._colGroups.length){var a=function(s){return t("R",s),e.query(this._colGroups).select(function(e,o){return t("C",e),n(s,o),this._readLogicalRow(i,r)},this)};return u.selectMany(a,this)}return u.select(function(e){return t("R",e),this._readLogicalRow(i,r)},this)},_processMetadata:function(){this.base(),this._separator=this.options.separator||"~";var t=this.R=1;this.C=1,this.M=1,this.measuresDirection=null;var n=this.options.seriesInRows,r=this.metadata,i=this.options.compatVersion<=1,s=function(){var e=n?function(e){return e.colName}:i?function(e){return{v:e.colName}}:function(e){return{v:e.colName,f:e.colLabel}};return r.map(e)}(),o=this._logicalRowCrossGroupInfos={};if(this.options.isMultiValued){var u=e.get(this.options,"measuresInColumns",!0);if(u||null==this.options.measuresIndex){t=this.R=this._getCategoriesCount();var a=s.slice(t),f=a.length;f>0?(u?(this.measuresDirection="columns",this._processEncodedColGroups(a)):(this._colGroups=a,this._colGroupsIndexes=[],this._colGroups.forEach(function(e,t){this._colGroups[t]=this._splitEncodedColGroupCell(e),this._colGroupsIndexes[t]=[this.R+t]},this),o.M=[this._buildLogicalColumnInfoFromMetadata(t)]),this.C=this._colGroups[0].length,o.C=e.range(0,this.C).select(function(){return{type:0}}).array()):(this.C=this.M=0,o.M=[],o.C=[])}else{this.measuresDirection="rows",this.R=+this.options.measuresIndex;var l=this.options.measuresCount;null==l&&(l=1),this.M=l,this._colGroups=s.slice(this.R+1),this._colGroups.forEach(function(e,t){this._colGroups[t]=[e]},this)}}else t=this.R=this._getCategoriesCount(),this._colGroups=s.slice(t),this._colGroupsIndexes=new Array(this._colGroups.length),this._colGroups.forEach(function(e,n){this._colGroups[n]=[e],this._colGroupsIndexes[n]=[t+n]},this),o.C=[{type:0}],o.M=[{type:this._columnTypes[t]}];o.R=e.range(0,this.R).select(this._buildLogicalColumnInfoFromMetadata,this).array();var c=this._logicalRowCrossGroupIndex={C:n?this.R:0,R:n?0:this.C,M:this.C+this.R},h=this._logicalRowInfos=new Array(this.logicalColumnCount());e.eachOwn(c,function(e,t){o[t].forEach(function(t,n){h[e+n]=t})}),this._logicalRowPhysicalGroupsLength={series:n?this.R:this.C,category:n?this.C:this.R,value:this.M},this._logicalRowPhysicalGroupIndex={series:0,category:this._logicalRowPhysicalGroupsLength.series,value:this.C+this.R}},logLogicalRow:function(){return this._logLogicalRow(["C","R","M"],{C:this.C,R:this.R,M:this.M})},_getCategoriesCount:function(){var t=this.options.categoriesCount;return null!=t&&(!isFinite(t)||0>t)&&(t=null),null==t&&(t=e.query(this._columnTypes).whayl(function(e){return 0===e}).count(),t||(t=1)),t},_splitEncodedColGroupCell:function(e){var t,n=e.v;return null==n?n=[]:(n=n.split(this._separator),t=e.f,t&&(t=t.split(this._separator))),n.map(function(e,n){return{v:e,f:t&&t[n]}})},_processEncodedColGroups:function(t){for(var n,r=t.length||e.assert("Must have columns"),i=this.R,s=[],o={},u=[],a=0;r>a;a++){var f,l,c,h,p=t[a],d=p.v,v=p.f,m=d.lastIndexOf(this._separator);0>m?(f=d,l=v,d="",c=[]):(f=d.substring(m+1),d=d.substring(0,m),c=d.split(this._separator),null!=v&&(h=v.split(this._separator),l=h.pop()),c.forEach(function(e,t){var n=h&&h[t];c[t]={v:e,f:n}})),n&&n.encValues===d?n.measureNames.push(f):(n={startIndex:a,encValues:d,values:c,measureNames:[f]},s.push(n));var g=a-n.startIndex,y=e.getOwn(o,f);y?g>y.groupIndex&&(y.groupIndex=g):(o[f]=y={name:f,label:l,type:this._columnTypes[i+a],groupIndex:g,index:a},u.push(y))}u.sort(function(t,n){return e.compare(t.groupIndex,n.groupIndex)||e.compare(t.index,n.index)}),u.forEach(function(e,t){e.groupIndex=t});var b=s.length,w=new Array(b),E=new Array(b),S=u.length;s.map(function(e,t){w[t]=e.values;var n=e.startIndex,r=E[t]=new Array(S);e.measureNames.forEach(function(e,t){var s=o[e].groupIndex;r[s]=i+n+t})}),this._colGroups=w,this._colGroupsIndexes=E,this._logicalRowCrossGroupInfos.M=u,this.M=S},configureType:function(){if("rows"===this.measuresDirection)throw e.error.notImplemented();var t=this.options.dataPartDimName;if(t&&1===this.C&&!this.complexTypeProj.isReadOrCalc(t)){var n=this.options.plot2DataSeriesIndexes;if(null!=n){var r=this._colGroups.map(function(e){return""+e[0].v});this._plot2SeriesKeySet=this._createPlot2SeriesKeySet(n,r)}}this.base();if(this._plot2SeriesKeySet){var i=this._userDimsReadersByDim.series;if(i){var s=e.fun.constant(this._plot2SeriesKeySet);this._dataPartGet(s)}}}}),e.type("cdo.RelationalTranslationOper",kt.MatrixTranslationOper).add({M:0,C:0,S:0,_translType:"Relational",_processMetadata:function(){this.base();var t,n,r,i,s=this.metadata,o=this.J,u=this.options.categoriesCount;null!=u&&(!isFinite(u)||0>u)&&(u=0),this.options.isMultiValued&&(n=e.parseDistinctIndexArray(this.options.measuresIndexes,0,o-1),r=n?n.length:0);if(null==r)if(o>0&&3>=o&&(null==u||1===u))r=1,n=[o-1],u=o>=2?1:0,t=o>=3?1:0,i=u+t;else if(null!=u&&u>=o)i=u=o,t=r=0;else{var a=null!=u?o-u:1/0;n=e.query(s).where(function(e,t){return 0!==this._columnTypes[t]},this).select(function(e){return e.colIndex}).take(a).array(),r=n.length}null==i&&(i=o-r,0===i?t=u=0:null!=u?u>i?(u=i,t=0):t=i-u:(t=i>1?1:0,u=i-t));var f=this.options.seriesInRows,l=[];i&&(t&&!f&&l.push({name:"S",count:t}),u&&l.push({name:"C",count:u}),t&&f&&l.push({name:"S",count:t})),r&&l.push({name:"M",count:r});var c=e.range(0,o).array();n&&n.slice().sort(e.descending).forEach(function(e){c.splice(e,1)});var h={};l.forEach(function(e){var t=e.count,r=e.name;h[r]=e,e.indexes=n&&"M"===r?n:c.splice(0,t)}),this.M=r,this.S=t,this.C=u;var p=[];["S","C","M"].forEach(function(t){var n=h[t];n&&e.array.append(p,n.indexes)}),this._logicalRowInfos=p.map(this._buildLogicalColumnInfoFromMetadata,this),this._logicalRowPerm=p,this._logicalRowPhysicalGroupsLength={series:this.S,category:this.C,value:this.M},this._logicalRowPhysicalGroupIndex={series:0,category:this._logicalRowPhysicalGroupsLength.series,value:this.S+this.C}},logLogicalRow:function(){return this._logLogicalRow(["S","C","M"],{S:this.S,C:this.C,M:this.M})},configureType:function(){this.base();var e=this.options.dataPartDimName;if(e&&!this.complexTypeProj.isReadOrCalc(e)){var t=this.options.plot2DataSeriesIndexes;if(null!=t){var n=this._userDimsReadersByDim.series;n&&Q.call(this,t,n)}}},_executeCore:function(){var n=this._getDimensionsReaders(),r=this._logicalRowPerm;return e.query(this._getLogicalRows()).select(function(e){return e=t.permute(e,r),this._readLogicalRow(e,n)},this)}});var Dt=kt.numberFormatStyle=function(e,t){return new Ht(e,t)},Pt=e.priv.key().property(),Ht=Dt.of=e("cdo.NumberFormatStyle",e.FieldsBase.extend({init:function(){e.classify(this,Dt)},fields:{decimal:{cast:String,fail:e.falsy},group:{cast:String},groupSizes:{fail:e.array.empty},negativeSign:{cast:String,fail:e.falsy},currency:{cast:String,fail:e.falsy},integerPad:{cast:String,fail:e.falsy},fractionPad:{cast:String,fail:e.falsy},abbreviations:{fail:e.array.empty}},methods:{tryConfigure:function(t){if(e.is(t,Dt))return!!this.integerPad(t.integerPad()).fractionPad(t.fractionPad()).decimal(t.decimal()).group(t.group()).groupSizes(t.groupSizes()).negativeSign(t.negativeSign()).currency(t.currency()).abbreviations(t.abbreviations());if(e.string.is(t)){var n=Xt(t);if(n)return!!e.configure(this,n.number().style())}}}},{fieldsPrivProp:Pt}));e.classify(Ht.prototype,Dt),Dt.defaults=Dt({integerPad:"0",fractionPad:"0",decimal:".",group:",",groupSizes:[3],abbreviations:["k","m","b","t"],negativeSign:"-",currency:"$"});var Bt=kt.numberFormat=function(t,n){function r(e){return s||(s=Y(i.mask)),s(e,Pt(i.style))}var i,s;return r.format=r,r.tryConfigure=G,e.classify(r,Bt),i=e.instance(r,t,n,{mask:{cast:String,change:function(){s=null}},style:{cast:e.createAs(Ht),factory:Dt}}),r};Bt.defaults=Bt().style(Dt()),Bt.cacheLimit=20;var jt={},Ft=0,It=kt.dateFormat=function(t,n){function r(e){return s||(s=yt(i.mask)),s(e)}var i,s;return r.format=r,r.tryConfigure=gt,e.classify(r,It),i=e.instance(r,t,n,{mask:{cast:String,change:function(){s=null}}}),arguments.length&&e.configure(r,arguments[0]),r};It.defaults=It();var qt=kt.customFormat=function(t,n){function r(){var e=i.formatter;return String(e&&e.apply(null,arguments))}var i;return r.format=r,r.tryConfigure=bt,e.classify(r,qt),i=e.instance(r,t,n,{formatter:{cast:e.fun.as}}),r};qt.defaults=qt().formatter(wt);var Rt="en-us",Ut=kt.format=function(t,n){function r(){}r.tryConfigure=St;var i;if(!n&&e.string.is(t)){var s=Xt(t);i=s.languageCode,s&&(n=s,t=null)}return r.languageCode=i?i:Rt,e.classify(r,Ut),e.instance(r,t,n,{number:Et(Bt),percent:Et(Bt),date:Et(It),any:{cast:e.createAs(qt),factory:qt}}),r};Ut.defaults=Ut({number:"#,0.##",percent:"#,0.#%",date:"%Y/%m/%d",any:qt()});var zt={},Wt=zt[Rt]=Ut.defaults,Xt=kt.format.language=function(t,n){var r=arguments.length;if(!r)return Wt;if(1==r){if(void 0===t)throw e.error.operationInvalid("Undefined 'style' value.");if(null===t||""===t)t=Rt;else{if(e.is(t,Ut))return Wt=t;if("object"==typeof t){for(var i in t)xt(i,e.getOwn(t,i));return kt.format}}return Ct(t,!0)}if(2==r)return xt(t,n);throw e.error.operationInvalid("Wrong number of arguments")};return Xt({"en-gb":{number:{mask:"#,0.##",style:{integerPad:"0",fractionPad:"0",decimal:".",group:",",groupSizes:[3],abbreviations:["k","m","b","t"],negativeSign:"-",currency:""}},date:{mask:"%d/%m/%Y"}},"pt-pt":{number:{mask:"#,0.##",style:{integerPad:"0",fractionPad:"0",decimal:",",group:" ",groupSizes:[3],abbreviations:["k","m","b","t"],negativeSign:"-",currency:""}},date:{mask:"%d/%m/%Y"}}}),kt});var html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10},html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0},html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128},html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},html4.URIEFFECTS={},html4.LOADERTYPES={},typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=html4),exports.URI=html4):typeof window!="undefined"&&(window.html4=html4),define("cdf/lib/sanitizer/lib/html4",function(e){return function(){var t,n;return t||e.html4}}(this));var URI=function(){function e(e){var t=(""+e).match(p);return t?new c(h(t[1]),h(t[2]),h(t[3]),h(t[4]),h(t[5]),h(t[6]),h(t[7])):null}function t(e,t,s,o,u,a,f){var l=new c(r(e,d),r(t,d),n(s),o>0?o.toString():null,r(u,v),null,n(f));return a&&("string"==typeof a?l.setRawQuery(a.replace(/[^?&=0-9A-Za-z_\-~.%]/g,i)):l.setAllParameters(a)),l}function n(e){return"string"==typeof e?encodeURIComponent(e):null}function r(e,t){return"string"==typeof e?encodeURI(e).replace(t,i):null}function i(e){var t=e.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(t>>4&15)+"0123456789ABCDEF".charAt(t&15)}function s(e){return e.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}function f(e){if(e===null)return null;var t=s(e),n=u;for(var r;(r=t.replace(n,"$1"))!=t;t=r);return t}function l(e,t){var n=e.clone(),r=t.hasScheme();r?n.setRawScheme(t.getRawScheme()):r=t.hasCredentials(),r?n.setRawCredentials(t.getRawCredentials()):r=t.hasDomain(),r?n.setRawDomain(t.getRawDomain()):r=t.hasPort();var i=t.getRawPath(),s=f(i);if(r)n.setPort(t.getPort()),s=s&&s.replace(a,"");else{r=!!i;if(r){if(s.charCodeAt(0)!==47){var o=f(n.getRawPath()||"").replace(a,""),u=o.lastIndexOf("/")+1;s=f((u?o.substring(0,u):"")+f(i)).replace(a,"")}}else s=s&&s.replace(a,""),s!==i&&n.setRawPath(s)}return r?n.setRawPath(s):r=t.hasQuery(),r?n.setRawQuery(t.getRawQuery()):r=t.hasFragment(),r&&n.setRawFragment(t.getRawFragment()),n}function c(e,t,n,r,i,s,o){this.scheme_=e,this.credentials_=t,this.domain_=n,this.port_=r,this.path_=i,this.query_=s,this.fragment_=o,this.paramCache_=null}function h(e){return"string"==typeof e&&e.length>0?e:null}var o=new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),u=new RegExp(o),a=/^(?:\.\.\/)*(?:\.\.$)?/;c.prototype.toString=function(){var e=[];return null!==this.scheme_&&e.push(this.scheme_,":"),null!==this.domain_&&(e.push("//"),null!==this.credentials_&&e.push(this.credentials_,"@"),e.push(this.domain_),null!==this.port_&&e.push(":",this.port_.toString())),null!==this.path_&&e.push(this.path_),null!==this.query_&&e.push("?",this.query_),null!==this.fragment_&&e.push("#",this.fragment_),e.join("")},c.prototype.clone=function(){return new c(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},c.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},c.prototype.getRawScheme=function(){return this.scheme_},c.prototype.setScheme=function(e){return this.scheme_=r(e,d),this},c.prototype.setRawScheme=function(e){return this.scheme_=e?e:null,this},c.prototype.hasScheme=function(){return null!==this.scheme_},c.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},c.prototype.getRawCredentials=function(){return this.credentials_},c.prototype.setCredentials=function(e){return this.credentials_=r(e,d),this},c.prototype.setRawCredentials=function(e){return this.credentials_=e?e:null,this},c.prototype.hasCredentials=function(){return null!==this.credentials_},c.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},c.prototype.getRawDomain=function(){return this.domain_},c.prototype.setDomain=function(e){return this.setRawDomain(e&&encodeURIComponent(e))},c.prototype.setRawDomain=function(e){return this.domain_=e?e:null,this.setRawPath(this.path_)},c.prototype.hasDomain=function(){return null!==this.domain_},c.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},c.prototype.setPort=function(e){if(e){e=Number(e);if(e!==(e&65535))throw new Error("Bad port number "+e);this.port_=""+e}else this.port_=null;return this},c.prototype.hasPort=function(){return null!==this.port_},c.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},c.prototype.getRawPath=function(){return this.path_},c.prototype.setPath=function(e){return this.setRawPath(r(e,v))},c.prototype.setRawPath=function(e){return e?(e=String(e),this.path_=!this.domain_||/^\//.test(e)?e:"/"+e):this.path_=null,this},c.prototype.hasPath=function(){return null!==this.path_},c.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},c.prototype.getRawQuery=function(){return this.query_},c.prototype.setQuery=function(e){return this.paramCache_=null,this.query_=n(e),this},c.prototype.setRawQuery=function(e){return this.paramCache_=null,this.query_=e?e:null,this},c.prototype.hasQuery=function(){return null!==this.query_},c.prototype.setAllParameters=function(e){if(typeof e=="object"&&!(e instanceof Array)&&(e instanceof Object||Object.prototype.toString.call(e)!=="[object Array]")){var t=[],n=-1;for(var r in e){var i=e[r];"string"==typeof i&&(t[++n]=r,t[++n]=i)}e=t}this.paramCache_=null;var s=[],o="";for(var u=0;u<e.length;){var r=e[u++],i=e[u++];s.push(o,encodeURIComponent(r.toString())),o="&",i&&s.push("=",encodeURIComponent(i.toString()))}return this.query_=s.join(""),this},c.prototype.checkParameterCache_=function(){if(!this.paramCache_){var e=this.query_;if(!e)this.paramCache_=[];else{var t=e.split(/[&\?]/),n=[],r=-1;for(var i=0;i<t.length;++i){var s=t[i].match(/^([^=]*)(?:=(.*))?$/);n[++r]=decodeURIComponent(s[1]).replace(/\+/g," "),n[++r]=decodeURIComponent(s[2]||"").replace(/\+/g," ")}this.paramCache_=n}}},c.prototype.setParameterValues=function(e,t){typeof t=="string"&&(t=[t]),this.checkParameterCache_();var n=0,r=this.paramCache_,i=[];for(var s=0,o=0;s<r.length;s+=2)e===r[s]?n<t.length&&i.push(e,t[n++]):i.push(r[s],r[s+1]);while(n<t.length)i.push(e,t[n++]);return this.setAllParameters(i),this},c.prototype.removeParameter=function(e){return this.setParameterValues(e,[])},c.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},c.prototype.getParameterValues=function(e){this.checkParameterCache_();var t=[];for(var n=0;n<this.paramCache_.length;n+=2)e===this.paramCache_[n]&&t.push(this.paramCache_[n+1]);return t},c.prototype.getParameterMap=function(e){this.checkParameterCache_();var t={};for(var n=0;n<this.paramCache_.length;n+=2){var r=this.paramCache_[n++],i=this.paramCache_[n++];r in t?t[r].push(i):t[r]=[i]}return t},c.prototype.getParameterValue=function(e){this.checkParameterCache_();for(var t=0;t<this.paramCache_.length;t+=2)if(e===this.paramCache_[t])return this.paramCache_[t+1];return null},c.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},c.prototype.getRawFragment=function(){return this.fragment_},c.prototype.setFragment=function(e){return this.fragment_=e?encodeURIComponent(e):null,this},c.prototype.setRawFragment=function(e){return this.fragment_=e?e:null,this},c.prototype.hasFragment=function(){return null!==this.fragment_};var p=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),d=/[#\/\?@]/g,v=/[\#\?]/g;return c.parse=e,c.create=t,c.resolve=l,c.collapse_dots=f,c.utils={mimeTypeOf:function(t){var n=e(t);return/\.html$/.test(n.getPath())?"text/html":"application/javascript"},resolve:function(t,n){return t?l(e(t),e(n)).toString():""+n}},c}();typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=URI),exports.URI=URI):typeof window!="undefined"&&(window.URI=URI),define("cdf/lib/sanitizer/lib/uri",function(e){return function(){var t,n;return t||e.URI}}(this));if("I".toLowerCase()!=="i")throw"I/i problem";var html=function(e){function f(e){if(i.hasOwnProperty(e))return i[e];var t=e.match(s);if(t)return String.fromCharCode(parseInt(t[1],10));if(!(t=e.match(o))){if(a&&u.test(e)){a.innerHTML="&"+e+";";var n=a.textContent;return i[e]=n,n}return"&"+e+";"}return String.fromCharCode(parseInt(t[1],16))}function l(e,t){return f(t)}function h(e){return e.replace(c,"")}function v(e){return e?e.replace(p,l):e}function E(e){return e?(""+e).replace(m,"&amp;").replace(y,"&lt;").replace(b,"&gt;").replace(w,"&#34;"):e}function S(e){return e?e.replace(g,"&amp;$1").replace(y,"&lt;").replace(b,"&gt;"):e}function C(e){var t={cdata:e.cdata||e.cdata,comment:e.comment||e.comment,endDoc:e.endDoc||e.endDoc,endTag:e.endTag||e.endTag,pcdata:e.pcdata||e.pcdata,rcdata:e.rcdata||e.rcdata,startDoc:e.startDoc||e.startDoc,startTag:e.startTag||e.startTag};return function(e,n){return L(e,t,n)}}function L(e,t,n){var r,i,s,o=M(e),u={noMoreGT:!1,noMoreEndComments:!1};O(t,o,0,u,n)}function A(e,t,n,r,i){return function(){O(e,t,n,r,i)}}function O(t,n,r,i,s){try{t.startDoc&&r==0&&t.startDoc(s);var o,u,a;for(var f=r,l=n.length;f<l;){var c=n[f++],h=n[f];switch(c){case"&":d.test(h)?(t.pcdata&&t.pcdata("&"+h,s,k,A(t,n,f,i,s)),f++):t.pcdata&&t.pcdata("&amp;",s,k,A(t,n,f,i,s));break;case"</":(o=/^([-\w:]+)[^\'\"]*/.exec(h))?o[0].length===h.length&&n[f+1]===">"?(f+=2,a=o[1].toLowerCase(),t.endTag&&t.endTag(a,s,k,A(t,n,f,i,s))):f=_(n,f,t,s,k,i):t.pcdata&&t.pcdata("&lt;/",s,k,A(t,n,f,i,s));break;case"<":if(o=/^([-\w:]+)\s*\/?/.exec(h))if(o[0].length===h.length&&n[f+1]===">"){f+=2,a=o[1].toLowerCase(),t.startTag&&t.startTag(a,[],s,k,A(t,n,f,i,s));var p=e.ELEMENTS[a];if(p&N){var v={name:a,next:f,eflags:p};f=H(n,v,t,s,k,i)}}else f=D(n,f,t,s,k,i);else t.pcdata&&t.pcdata("&lt;",s,k,A(t,n,f,i,s));break;case"<!--":if(!i.noMoreEndComments){for(u=f+1;u<l;u++)if(n[u]===">"&&/--$/.test(n[u-1]))break;if(u<l){if(t.comment){var m=n.slice(f,u).join("");t.comment(m.substr(0,m.length-2),s,k,A(t,n,u+1,i,s))}f=u+1}else i.noMoreEndComments=!0}i.noMoreEndComments&&t.pcdata&&t.pcdata("&lt;!--",s,k,A(t,n,f,i,s));break;case"<!":if(!/^\w/.test(h))t.pcdata&&t.pcdata("&lt;!",s,k,A(t,n,f,i,s));else{if(!i.noMoreGT){for(u=f+1;u<l;u++)if(n[u]===">")break;u<l?f=u+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;!",s,k,A(t,n,f,i,s))}break;case"<?":if(!i.noMoreGT){for(u=f+1;u<l;u++)if(n[u]===">")break;u<l?f=u+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;?",s,k,A(t,n,f,i,s));break;case">":t.pcdata&&t.pcdata("&gt;",s,k,A(t,n,f,i,s));break;case"":break;default:t.pcdata&&t.pcdata(c,s,k,A(t,n,f,i,s))}}t.endDoc&&t.endDoc(s)}catch(g){if(g!==k)throw g}}function M(e){var t=/(<\/|<\!--|<[!?]|[&<>])/g;e+="";if(T)return e.split(t);var n=[],r=0,i;while((i=t.exec(e))!==null)n.push(e.substring(r,i.index)),n.push(i[0]),r=i.index+i[0].length;return n.push(e.substring(r)),n}function _(e,t,n,r,i,s){var o=B(e,t);return o?(n.endTag&&n.endTag(o.name,r,i,A(n,e,t,s,r)),o.next):e.length}function D(e,t,n,r,i,s){var o=B(e,t);return o?(n.startTag&&n.startTag(o.name,o.attrs,r,i,A(n,e,o.next,s,r)),o.eflags&N?H(e,o,n,r,i,s):o.next):e.length}function H(t,n,r,i,s,o){var u=t.length;P.hasOwnProperty(n.name)||(P[n.name]=new RegExp("^"+n.name+"(?:[\\s\\/]|$)","i"));var a=P[n.name],f=n.next,l=n.next+1;for(;l<u;l++)if(t[l-1]==="</"&&a.test(t[l]))break;l<u&&(l-=1);var c=t.slice(f,l).join("");if(n.eflags&e.eflags.CDATA)r.cdata&&r.cdata(c,i,s,A(r,t,l,o,i));else{if(!(n.eflags&e.eflags.RCDATA))throw new Error("bug");r.rcdata&&r.rcdata(S(c),i,s,A(r,t,l,o,i))}return l}function B(t,n){var r=/^([-\w:]+)/.exec(t[n]),i={};i.name=r[1].toLowerCase(),i.eflags=e.ELEMENTS[i.name];var s=t[n].substr(r[0].length),o=n+1,u=t.length;for(;o<u;o++){if(t[o]===">")break;s+=t[o]}if(u<=o)return void 0;var a=[];while(s!==""){r=x.exec(s);if(!r)s=s.replace(/^[\s\S][^a-z\s]*/,"");else{if(r[4]&&!r[5]||r[6]&&!r[7]){var f=r[4]||r[6],l=!1,c=[s,t[o++]];for(;o<u;o++){if(l){if(t[o]===">")break}else 0<=t[o].indexOf(f)&&(l=!0);c.push(t[o])}if(u<=o)break;s=c.join("");continue}var h=r[1].toLowerCase(),p=r[2]?j(r[3]):"";a.push(h,p),s=s.substr(r[0].length)}}return i.attrs=a,i.next=o+1,i}function j(e){var t=e.charCodeAt(0);if(t===34||t===39)e=e.substr(1,e.length-2);return v(h(e))}function F(t){var n,r,i=function(e,t){r||t.push(e)};return C({startDoc:function(e){n=[],r=!1},startTag:function(i,s,o){if(r)return;if(!e.ELEMENTS.hasOwnProperty(i))return;var u=e.ELEMENTS[i];if(u&e.eflags.FOLDABLE)return;var a=t(i,s);if(!a){r=!(u&e.eflags.EMPTY);return}if(typeof a!="object")throw new Error("tagPolicy did not return object (old API?)");if(!("attribs"in a))throw new Error("tagPolicy gave no attribs");s=a.attribs;var f,l;"tagName"in a?(l=a.tagName,f=e.ELEMENTS[l]):(l=i,f=u);if(u&e.eflags.OPTIONAL_ENDTAG){var c=n[n.length-1];c&&c.orig===i&&(c.rep!==l||i!==l)&&o.push("</",c.rep,">")}u&e.eflags.EMPTY||n.push({orig:i,rep:l}),o.push("<",l);for(var h=0,p=s.length;h<p;h+=2){var d=s[h],v=s[h+1];v!==null&&v!==void 0&&o.push(" ",d,'="',E(v),'"')}o.push(">"),u&e.eflags.EMPTY&&!(f&e.eflags.EMPTY)&&o.push("</",l,">")},endTag:function(t,i){if(r){r=!1;return}if(!e.ELEMENTS.hasOwnProperty(t))return;var s=e.ELEMENTS[t];if(!(s&(e.eflags.EMPTY|e.eflags.FOLDABLE))){var o;if(s&e.eflags.OPTIONAL_ENDTAG)for(o=n.length;--o>=0;){var u=n[o].orig;if(u===t)break;if(!(e.ELEMENTS[u]&e.eflags.OPTIONAL_ENDTAG))return}else for(o=n.length;--o>=0;)if(n[o].orig===t)break;if(o<0)return;for(var a=n.length;--a>o;){var f=n[a].rep;e.ELEMENTS[f]&e.eflags.OPTIONAL_ENDTAG||i.push("</",f,">")}o<n.length&&(t=n[o].rep),n.length=o,i.push("</",t,">")}},pcdata:i,rcdata:i,cdata:i,endDoc:function(e){for(;n.length;n.length--)e.push("</",n[n.length-1].rep,">")}})}function q(e,t,n,r,i){if(!i)return null;try{var s=URI.parse(""+e);if(s)if(!s.hasScheme()||I.test(s.getScheme())){var o=i(s,t,n,r);return o?o.toString():null}}catch(u){return null}return null}function R(e,t,n,r,i){n||e(t+" removed",{change:"removed",tagName:t});if(r!==i){var s="changed";r&&!i?s="removed":!r&&i&&(s="added"),e(t+"."+n+" "+s,{change:s,tagName:t,attribName:n,oldValue:r,newValue:i})}}function U(e,t,n){var r;return r=t+"::"+n,e.hasOwnProperty(r)?e[r]:(r="*::"+n,e.hasOwnProperty(r)?e[r]:void 0)}function z(t,n){return U(e.ATTRIBS,t,n)}function W(t,n){return U(e.LOADERTYPES,t,n)}function X(t,n){return U(e.URIEFFECTS,t,n)}function V(r,i,s,o,u){for(var a=0;a<i.length;a+=2){var f=i[a],l=i[a+1],c=l,h=null,p;if((p=r+"::"+f,e.ATTRIBS.hasOwnProperty(p))||(p="*::"+f,e.ATTRIBS.hasOwnProperty(p)))h=e.ATTRIBS[p];if(h!==null)switch(h){case e.atype.NONE:break;case e.atype.SCRIPT:l=null,u&&R(u,r,f,c,l);break;case e.atype.STYLE:if("undefined"==typeof t){l=null,u&&R(u,r,f,c,l);break}var d=[];t(l,{declaration:function(t,r){var i=t.toLowerCase();n(i,r,s?function(t){return q(t,e.ueffects.SAME_DOCUMENT,e.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:i},s)}:null),r.length&&d.push(i+": "+r.join(" "))}}),l=d.length>0?d.join(" ; "):null,u&&R(u,r,f,c,l);break;case e.atype.ID:case e.atype.IDREF:case e.atype.IDREFS:case e.atype.GLOBAL_NAME:case e.atype.LOCAL_NAME:case e.atype.CLASSES:l=o?o(l):l,u&&R(u,r,f,c,l);break;case e.atype.URI:l=q(l,X(r,f),W(r,f),{TYPE:"MARKUP",XML_ATTR:f,XML_TAG:r},s),u&&R(u,r,f,c,l);break;case e.atype.URI_FRAGMENT:l&&"#"===l.charAt(0)?(l=l.substring(1),l=o?o(l):l,l!==null&&l!==void 0&&(l="#"+l)):l=null,u&&R(u,r,f,c,l);break;default:l=null,u&&R(u,r,f,c,l)}else l=null,u&&R(u,r,f,c,l);i[a+1]=l}return i}function $(t,n,r){return function(i,s){if(!(e.ELEMENTS[i]&e.eflags.UNSAFE))return{attribs:V(i,s,t,n,r)};r&&R(r,i,undefined,undefined,undefined)}}function J(e,t){var n=[];return F(t)(e,n),n.join("")}function K(e,t,n,r){var i=$(t,n,r);return J(e,i)}var t,n,r;"undefined"!=typeof window&&(t=window.parseCssDeclarations,n=window.sanitizeCssProperty,r=window.cssSchema);var i={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:""},s=/^#(\d+)$/,o=/^#x([0-9A-Fa-f]+)$/,u=/^[A-Za-z][A-za-z0-9]+$/,a="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,c=/\0/g,p=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,d=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,m=/&/g,g=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,y=/[<]/g,b=/>/g,w=/\"/g,x=new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),T="a,b".split(/(,)/).length===3,N=e.eflags.CDATA|e.eflags.RCDATA,k={},P={},I=/^(?:https?|mailto)$/i,Q={};return Q.escapeAttrib=Q.escapeAttrib=E,Q.makeHtmlSanitizer=Q.makeHtmlSanitizer=F,Q.makeSaxParser=Q.makeSaxParser=C,Q.makeTagPolicy=Q.makeTagPolicy=$,Q.normalizeRCData=Q.normalizeRCData=S,Q.sanitize=Q.sanitize=K,Q.sanitizeAttribs=Q.sanitizeAttribs=V,Q.sanitizeWithPolicy=Q.sanitizeWithPolicy=J,Q.unescapeEntities=Q.unescapeEntities=v,Q}(html4),html_sanitize=html.sanitize;typeof window!="undefined"&&(window.html=html,window.html_sanitize=html_sanitize);var Sanitizer={};Sanitizer.escapeAttrib=html.escapeAttrib,Sanitizer.makeHtmlSanitizer=html.makeHtmlSanitizer,Sanitizer.makeSaxParser=html.makeSaxParser,Sanitizer.makeTagPolicy=html.makeTagPolicy,Sanitizer.normalizeRCData=html.normalizeRCData,Sanitizer.sanitizeAttribs=html.sanitizeAttribs,Sanitizer.sanitizeWithPolicy=html.sanitizeWithPolicy,Sanitizer.unescapeEntities=html.unescapeEntities,Sanitizer.escape=html.escapeAttrib,Sanitizer.sanitize=function(e,t,n,r){return typeof e=="string"&&(e=e.replace(/<([a-zA-Z]+)([^>]*)\/>/g,"<$1$2></$1>")),e?html.sanitize(e,t,n,r):e},typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=Sanitizer),exports.Sanitizer=Sanitizer):this.Sanitizer=Sanitizer,define("cdf/lib/sanitizer",["cdf/lib/sanitizer/lib/html4","cdf/lib/sanitizer/lib/uri"],function(e){return function(){var t,n;return t||e.Sanitizer}}(this)),define("cdf/dashboard/Utils",["../Logger","amd!../lib/underscore","../lib/moment","../lib/CCC/cdo","../lib/jquery","amd!../lib/queryParser","../lib/sanitizer"],function(e,t,n,r,i){function a(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n][0]]=e[n][1]);return t}function f(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t}var s={},o=undefined,u=undefined;return s.escapeHtml=function(t){return typeof t!="string"?(e.warn("escapeHtml expects string values, returning an empty string"),""):t.replace(/&(?!#([0-9][0-9]?[0-9]?[0-9]?[0-9]?);)(?!([a-zA-Z]{2,8});)(?!#x[A-F0-9][A-F0-9][A-F0-9]?[A-F0-9]?;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")},s.sanitizeHtml=function(e){return e=e.replace(/<iframe\b[^>]*>/gi,"<script>").replace(/<\/iframe>/gi,"</script>"),e=Sanitizer.sanitize(e),e},s.getPathParameter=function(e){e=e||window.location.pathname,e=decodeURIComponent(e);var t=e.match("/:(.[^/]+)(.*)/");if(t&&t.length>1)return(":"+t[1]).replace(/:/g,"/")},s.getLocationSearchString=function(){return window.location.search},s.getQueryParameter=function(e){return u===undefined&&(u=i.parseQuery(this.getLocationSearchString())),u[e]||""},s.numberFormat=function(e,t,n){o===undefined&&(o=r.format.language().createChild());if(n!=null){var i=r.format.language(n).createChild();return i.number({mask:t}),i.number()(e)}return o.number({mask:t}),o.number()(e)},s.configLanguage=function(e,t){var i=t.dateLocale||{},s=n.locale();delete t.dateLocale,r.format.language(e,t),n.locale(e,i),n.locale(s)},s.dateFormat=function(e,t,r){var i=n(e);return i.isValid()?(r!=null&&(n.localeData(r)===null&&(r="en-US"),i.locale(r)),i.format(t)):i.toDate()},s.dateParse=function(e,t){return n(e,t).toDate()},s.propertiesArrayToObject=function(e){return t.isArray(e)&&a(e)||t.isObject(e)&&e||undefined},s.objectToPropertiesArray=function(e){return t.isArray(e)&&e||t.isObject(e)&&f(e)||undefined},s.getURLParameters=function(e){if(e.indexOf("?")>0){var t=e.split("?"),n=t[1].split("&"),r=[];for(var i=0;i<n.length;i++){var s=n[i].split("=");if(s[0].indexOf("param",0)==0){var o=[s[0].substring(5,s[0].length),unescape(s[1])];r.push(o)}}}return r},s.toFormatedString=function(e){e+="";var t=e.split("."),n=t[0],r=t.length>1?"."+t[1]:"",i=/(\d+)(\d{3})/;while(i.test(n))n=n.replace(i,"$1,$2");return n+r},s.doCsvQuoting=function(e,t,n){var r='"';if(t==null)return e;if(e==null)return null;e.indexOf(r)>=0&&(e=e.replace(r,r.concat(r)));if(n||e.indexOf(t)>=0)e=r.concat(e,r);return e},s.ev=function(e){return typeof e=="function"?e():e},s.post=function(e,t){var n='<form action="'+e+'" method="post">';for(var r in t){var o=s.ev(t[r]);typeof o=="string"&&(o=o.replace(/"/g,"'")),n+='"<input type="hidden" name="'+r+'" value="'+o+'"/>'}n+="</form>",i(n).appendTo("body").submit().remove()},s.clone=function(e){var t=e instanceof Array?[]:{};for(var n in e){var r=e[n];if(typeof r=="object")if(r instanceof Array){t[n]=[];for(var i=0;i<r.length;i++)typeof r[i]!="object"?t[n].push(r[i]):t[n].push(this.clone(r[i]))}else t[n]=this.clone(r);else t[n]=r}return t},s.addArgs=function(e){e!=undefined&&(this.args=getURLParameters(e))},s.getArgValue=function(e){for(var t=0;t<this.args.length;t++)if(this.args[t][0]==e)return this.args[t][1];return undefined},s.eachValuesArray=function(e,t,n,r){typeof t=="function"&&(r=n,n=t,t=null);var i=!!t&&!!t.valueAsId;for(var s=0,o=0,u=e.length;s<u;s++){var a=e[s];if(a&&a.length){var f=a[0],l,c,h=undefined;a.length>1?(i&&(h=f),c=""+a[1],l=i||f==null?c:""+f):l=c=""+f;if(n.call(r,l,c,h,o,s)===!1)return!1;o++}}return!0},s.parseMultipleValues=function(e){if(e!=null&&e!==""){if(this.isArray(e))return e;if(typeof e=="string")return e.split("|")}return null},s.normalizeValue=function(e){return e===""||e==null?null:this.isArray(e)&&!e.length?null:e},s.isArray=function(e){return!!e&&(e instanceof Array||typeof e=="object"&&e.join&&e.length!=null)},s.isFunction=function(e){return typeof e=="function"},s.isString=function(e){return typeof e=="string"||e instanceof String},s.isNumber=function(e){return typeof e=="number"&&isFinite(e)},s.equalValues=function(e,t){e=this.normalizeValue(e),t=this.normalizeValue(t);if(e===t)return!0;if(this.isArray(e)&&this.isArray(t)){var n=e.length;if(n!==t.length)return!1;while(n--)if(!this.equalValues(e[n],t[n]))return!1;return!0}return e==t},s.hsvToRgb=function(e,t,n){n/=100,t/=100;var r=e%360/60,i=n*t,s=n-i,o=Math.abs(r%2-1),u=n*(1-t*o),a=n,f;switch(~~r){case 0:f=[a,u,s];break;case 1:f=[u,a,s];break;case 2:f=[s,a,u];break;case 3:f=[s,u,a];break;case 4:f=[u,s,a];break;case 5:f=[a,s,u]}return f.forEach(function(e,t){f[t]=Math.min(255,Math.round(e*256))}),"rgb("+f.join(",")+")"},s}),define("cdf/components/BaseComponent",["../lib/Base","../lib/jquery","amd!../lib/underscore","amd!../lib/backbone","../Logger","../dashboard/Utils"],function(e,t,n,r,i,s){return e.extend(r.Events).extend({name:undefined,type:undefined,htmlObject:undefined,visible:!0,isManaged:!0,timerStart:0,timerSplit:0,elapsedSinceSplit:-1,elapsedSinceStart:-1,logColor:undefined,isDisposed:!1,constructor:function(e){this.extend(e)},placeholder:function(e){var n=this.htmlObject;return n?t("#"+n+(e?" "+e:"")):t()},focus:function(){try{this.placeholder("*:first").focus()}catch(e){}},_doAutoFocus:function(){this.autoFocus&&(delete this.autoFocus,this.focus())},clear:function(){this.placeholder().empty()},copyEvents:function(e,t){n.each(t,function(t,n){var r=t,i=t.tail;while((r=r.next)!==i)e.on(n,r.callback,r.context)})},clone:function(e,n,r){this._throwIfDisposed();var i,s,o;return s=this.dashboard,o=this._events,delete this.dashboard,delete this._events,i=t.extend(!0,{},this),i.dashboard=this.dashboard=s,this._events=o,this.copyEvents(i,o),i.parameters&&(i.parameters=i.parameters.map(function(t){return t[1]in e?[t[0],e[t[1]]]:t})),i.components&&(i.components=i.components.map(function(e){return e in n?n[e]:e})),i.htmlObject=i.htmlObject?r[i.htmlObject]:undefined,i.listeners&&(i.listeners=i.listeners.map(function(t){return t in e?e[t]:t})),i.parameter&&i.parameter in e&&(i.parameter=e[i.parameter]),i},getAddIn:function(e,t){if(!this.dashboard)return i.warn("dashboard not yet defined, can't call getAddIn"),!1;var n=typeof this.type=="function"?this.type():this.type;return this.dashboard.getAddIn(n,e,t)},hasAddIn:function(e,t){if(!this.dashboard)return i.warn("dashboard not yet defined, can't call hasAddIn"),!1;var n=typeof this.type=="function"?this.type():this.type;return this.dashboard.hasAddIn(n,e,t)},getValuesArray:function(){var e;if(typeof this.valuesArray=="undefined"||this.valuesArray.length==0){if(typeof this.queryDefinition!="undefined"){var n=this.queryDefinition.queryType=="sql"?"sql":"none";this.queryDefinition.queryType=="mdx"&&!this.valueAsId?n="mdx":this.queryDefinition.dataAccessId!==undefined&&!this.valueAsId&&(n="cda"),QueryComponent.makeQuery(this);var r=new Array;for(s in this.result)if(this.result.hasOwnProperty(s))switch(n){case"sql":r.push([this.result[s][0],this.result[s][1]]);break;case"mdx":r.push([this.result[s][1],this.result[s][0]]);break;case"cda":r.push([this.result[s][0],this.result[s][1]]);break;default:r.push([this.result[s][0],this.result[s][0]])}return r}if(!this.dashboard)return i.warn("dashboard not yet defined, returning an empty array"),[];var s=new Array(this.parameters?this.parameters.length:0);for(var o=0,u=s.length;o<u;o++){var a=this.parameters[o][0],f=this.parameters[o][1]==""||this.parameters[o][1]=="NIL"?this.parameters[o][2]:this.dashboard.getParameterValue(this.parameters[o][1]);s[o]=[a,f]}var l=this;if(this.url){var c={};t.each(s,function(e,t){c[t[0]]=t[1]}),e=this.dashboard.parseXActionResult(l,this.dashboard.urlAction(this.url,c))}else e=this.dashboard.callPentahoAction(l,this.solution,this.path,this.action,s,null);return this.parseArray(e,!1)}return this.valuesArray},parseArray:function(e,n){if(e===null)return[];if(t(e).find("CdaExport").size()>0)return this.parseArrayCda(e,n);var r=new Array,i=t(e).find("COLUMN-HDR-ITEM");if(n&&i.size()>0){var s=new Array;i.each(function(){s.push(t(this).text())}),r.push(s)}var o=t(e).find("DATA-ROW");return o.each(function(){var e=new Array;t(this).children("DATA-ITEM").each(function(){e.push(t(this).text())}),r.push(e)}),r},parseArrayCda:function(e,n){var r=new Array,i=t(e).find("ColumnMetaData");if(i.size()>0&&n){var s=new Array;i.each(function(){s.push(t(this).attr("name"))}),r.push(s)}var o=t(e).find("Row");return o.each(function(){var e=new Array;t(this).children("Col").each(function(){e.push(t(this).text())}),r.push(e)}),r},setAddInDefaults:function(e,t,n){i.log("BaseComponent.setAddInDefaults was removed. You should call setAddInOptions or dashboard.setAddInDefaults")},setAddInOptions:function(e,t,n){this.addInOptions||(this.addInOptions={}),this.addInOptions[e]||(this.addInOptions[e]={}),this.addInOptions[e][t]=n},getAddInOptions:function(e,t){var n=null;try{n=this.addInOptions[e][t]}catch(r){}return n||{}},dispose:function(){if(this.isDisposed)return;this.isDisposed=!0,this.dashboard!=null?this.dashboard.removeComponent(this):this._unlink(),this._disposeCore()},onWillRemove:function(){this._unlink()},_unlink:function(){this.query!=null&&(this.query.dispose(),this.query=null),this.placeholder().off()},_disposeCore:function(){},_throwIfDisposed:function(){if(this.isDisposed)throw new Error("Invalid operation. The component has been disposed.")},startTimer:function(){this.timerStart=new Date,this.timerSplit=new Date},splitTimer:function(){(this.elapsedSinceStart===-1||this.elapsedSinceSplit===-1)&&this.startTimer();var e=new Date;return this.elapsedSinceStart=e.getTime()-this.timerStart.getTime(),this.elapsedSinceSplit=e.getTime()-this.timerSplit.getTime(),this.timerSplit=e,this.getTimerInfo()},formatTimeDisplay:function(e){return Math.log(e)/Math.log(10)>=3?Math.round(e/100)/10+"s":e+"ms"},getTimerInfo:function(){return{timerStart:this.timerStart,timerSplit:this.timerSplit,elapsedSinceStart:this.elapsedSinceStart,elapsedSinceStartDesc:this.formatTimeDisplay(this.elapsedSinceStart),elapsedSinceSplit:this.elapsedSinceSplit,elapsedSinceSplitDesc:this.formatTimeDisplay(this.elapsedSinceSplit)}},getLogColor:function(){if(this.logColor)return this.logColor;var e=function(e){var t=0;if(e.length==0)return t;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t},t=e(this.name).toString(),n=t.substr(t.length-6,2)||0,r=t.substr(t.length-2,2)||0,i=t.substr(t.length-4,2)||0;return this.logColor=s.hsvToRgb(3.6*n,.75*r,45+.35*i),this.logColor}})}),define("cdf/dashboard/RefreshEngine",["amd!../lib/underscore"],function(e){return function(e){var t=0,n=new Array,r=null,i=t,s=null,o=function(){return{nextRefresh:0,component:null}},u=function(n){s!=null&&(clearInterval(s),s=null),i=n>0?n:t,i!=t&&(s=setInterval(e.refreshEngine.fireGlobalRefresh,i*1e3))},a=function(e){for(var t=0;t<n.length;t++)n[t].component==e&&(n.splice(t,1),t--)},f=function(){n.length>0&&n.splice(0,n.length)},l=function(e,t){var n=e.length-1,r=0,i;while(r<=n){i=parseInt((r+n)/2);if(e[i].nextRefresh>t.nextRefresh)n=i-1;else{if(!(e[i].nextRefresh<t.nextRefresh))return i;r=i+1}}return r},c=function(e,t){var n=l(e,t);e.splice(n,0,t)},h=function(){r!=null&&(clearTimeout(r),r=null)},p=function(){h(),e.refreshEngine.fireRefresh()},d=function(){return(new Date).getTime()},v=function(e){return n.length>0&&n[0].component==e},m=function(t){e.update(t)},g=function(e){var r=d();e.refreshPeriod>0||(e.refreshPeriod=t);if(e.refreshPeriod!=t){var i=new o;i.nextRefresh=r+e.refreshPeriod*1e3,i.component=e,c(n,i)}},y=function(e){a(e),g(e)};return{registerComponent:function(e,n){if(!e)return!1;e.refreshPeriod=n>0?n:t;var r=v(e);return a(e),r&&p(),!0},unregisterComponent:function(e){if(!e)return;a(e)},getRefreshPeriod:function(e){return e&&e.refreshPeriod>0?e.refreshPeriod:t},processComponent:function(e){return y(e),v(e)&&p(),!0},processComponents:function(){f();for(var t=0;t<e.components.length;t++)g(e.components[t]);return p(),!0},fireRefresh:function(){r=null;var t=d(),i=null;while(n.length>0&&n[0].nextRefresh<=t){var s=n.shift();i=s.component,e.isComponentUpdating(i)?g(i):m(i)}n.length>0&&(r=setTimeout(e.refreshEngine.fireRefresh,n[0].nextRefresh-t))},fireGlobalRefresh:function(){for(var t=0;t<e.components.length;t++){var n=e.components[t];!(n.refreshPeriod>0)&&n.type!="select"&&m(n)}},setGlobalRefresh:function(e){u(e)},getQueue:function(){return n},stopTimer:h,clearQueue:f,dispose:function(){this.stopTimer(),this.setGlobalRefresh(0),this.clearQueue()}}}}),define("pentaho/util/requireJSConfig",[],function(){return{load:function(e,t,n,r){n(r)}}}),define("pentaho/util/has",[],function(){"use strict";function s(t){return e.call(i,t)&&!!i[t]}var e=Object.prototype.hasOwnProperty,t=!1;if(typeof URL!="undefined")try{var n=new URL("b","http://a");n.pathname="c%20d",t=n.href==="http://a/c%20d"}catch(r){}var i={"Object.setPrototypeOf":Object.setPrototypeOf!=null,"Object.prototype.__proto__":{}.__proto__!=null,URL:t};return s}),define("pentaho/util/url",["./has"],function(e){"use strict";function t(t){if(!t)return null;if(e("URL"))return new URL(t,document.location);var i=n(t)||n(t=r(t))||[t,"",null,"",null,t],s=i[1]||"",o=i[2]?i[2].slice(0,-1).split(":"):"",u=i[3]||"",a=i[4]?i[4].substring(1):"",f=i[5]||"";return{href:t,protocol:s,username:o.length>0?o[0]:"",password:o.length>1?o[1]:"",hostname:u,host:u+":"+a,port:a,origin:s+"//"+u+":"+a,pathname:f,toString:function(){return t}}}function n(e){return/^\s*([^:\/?#]+:)\/\/([^@]*@)?([^:\/?#]*)(:\d*)?(\/[^?#]*)+/.exec(e)}function r(e){var t=document.createElement("a");return t.href=e,t.href}return{create:t,parse:n}}),define("pentaho/environment/impl/Environment",["pentaho/util/url"],function(e){"use strict";function t(t,n){t||(t={}),this.application=r(t,"application",n),this.theme=r(t,"theme",n);var i=r(t,"locale",n);this.locale=i&&i.toLowerCase();var s=r(t,"user"),o=r(n,"user");this.user=Object.freeze({id:r(s,"id",o),home:r(s,"home",o)}),s=r(t,"server"),o=r(n,"server"),this.server=Object.freeze({root:e.create(r(s,"root",o)),packages:e.create(r(s,"packages",o)),services:e.create(r(s,"services",o))}),this.reservedChars=r(t,"reservedChars",n),Object.freeze(this)}function r(e,t,n){return e&&e[t]||n&&n[t]||null}var n=t.prototype={createChild:function(e){return new t(e,this.toSpec())},toSpec:function(){return{application:this.application,theme:this.theme,locale:this.locale,user:{id:this.user.id,home:this.user.home},server:{root:this.server.root&&this.server.root.href,packages:this.server.packages&&this.server.packages.href,services:this.server.services&&this.server.services.href},reservedChars:this.reservedChars}}};return n.toJSON=n.toSpec,t}),define("pentaho/environment/main",["pentaho/util/requireJSConfig!","./impl/Environment"],function(e,t){"use strict";var n=e.config["pentaho/environment"]||null;return new t(n)}),define("pentaho/environment",["pentaho/environment/main"],function(e){return e}),define("common-ui/util/require-css/css!cdf/lib/impromptu/jquery-impromptu",[],function(){}),Object.create||(Object.create=function(){function n(n){e.prototype=n||{};var r=new e;return e.prototype=t,r}var e=function(){},t=e.prototype;return n}()),Function.prototype.method=Function.prototype.method||function(e,t){return this.prototype[e]=t,this},String.prototype.endsWith||(String.prototype.endsWith=function(e){return this.match(e+"$")==e}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)e.call(i,o)&&s.push(o);if(t)for(var u=0;u<r;u++)e.call(i,n[u])&&s.push(n[u]);return s}}()),Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));var i=r>=0?Math.min(r,n-1):n-Math.abs(r);for(;i>=0;i--)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n,r=this.length,i;if(typeof t!="function")throw new TypeError("First argument is not callable");if((r==0||r===null)&&arguments.length<=1)throw new TypeError("Array length is 0 and no second argument");arguments.length<=1?(i=this[0],n=1):i=arguments[1];for(n=n||0;n<r;++n)n in this&&(i=t.call(undefined,i,this[n],n,this));return i}),Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Date.now||(Date.now=function(){return(new Date).valueOf()}),define("cdf/lib/shims",function(){}),define("cdf/dashboard/Dashboard",["../lib/Base","../Logger","./RefreshEngine","pentaho/environment","amd!../lib/underscore","amd!../lib/backbone","../lib/jquery","module","amd!../lib/jquery.impromptu","../lib/shims"],function(e,t,n,r,i,s,o,u){return e.extend({constructor:function(e){function f(e,n){typeof e=="function"?(t.info("Calling init method of module: "+n),e.apply(u)):t.warn("Not calling init method of module: "+n)}function l(){var e=this;typeof o=="function"?(o.ajaxSetup({type:"POST",async:!1,traditional:!0,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=UTF-8",dataFilter:function(t,n){return e.lastServerResponse=Date.now?Date.now():(new Date).getTime(),t}}),o.prompt&&typeof o.prompt.setDefaults=="function"?o.prompt.setDefaults({prefix:"jqi",show:"slideDown"}):t.log("$.prompt plugin not loaded!!"),typeof o.blockUI=="function"?(o.blockUI.defaults.fadeIn=0,o.blockUI.defaults.message='<div class="blockUIDefaultImg"></div>',o.blockUI.defaults.css.left="50%",o.blockUI.defaults.css.top="40%",o.blockUI.defaults.css.marginLeft="-16px",o.blockUI.defaults.css.width="32px",o.blockUI.defaults.css.background="none",o.blockUI.defaults.overlayCSS={backgroundColor:"#FFFFFF",opacity:.8,cursor:"wait"},o.blockUI.defaults.css.border="none"):t.log("$.blockUI plugin not loaded!!")):t.log("jQuery plugin not loaded!!")}var u=this;e&&(e.context&&(this.context=e.context),e.storage&&(!this.context||this.context.user!=="anonymousUser")&&(this.storage=e.storage),e.view&&(this.view=e.view),this.isSilent=!!e.isSilent),i.extend(this,s.Events),l.call(u);var a=r.server.root;a!=null&&(this.webAppPath=a.toString()),this.webAppPath==null&&(this.webAppPath="/"+window.location.pathname.split("/")[1]),this.webAppPath.endsWith("/")&&(this.webAppPath=this.webAppPath.substr(0,this.webAppPath.length-1)),f(this._initContext,"Context"),f(this._initStorage,"Storage"),f(this._initViews,"Views"),f(this._initParameters,"Parameters"),f(this._initBookmarkables,"Bookmarkables"),f(this._initI18n,"I18n"),f(this._initComponents,"Components"),f(this._initLifecycle,"Lifecycle"),f(this._initNotifications,"Notifications"),f(this._initDataSources,"DataSources"),f(this._initQuery,"Query"),f(this._initAddIns,"AddIns"),f(this._throwIfDisposed,"Lifecycle"),this.refreshEngine=new n(this)},refreshEngine:undefined,globalContext:!1,contextObj:u.config().context||{},storageObj:u.config().storage||{},viewObj:u.config().view,legacyPriority:-1e3,logLifecycle:!0,args:[],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],isSilent:!1,registerEvent:function(e,t){typeof this.events=="undefined"&&(this.events={}),this.events[e]=t},debug:1,isDisposed:!1,syncDebugLevel:function(){var e=1;try{var t=function(e){return e&&/\bdebug=true\b/.test(e)?e:null},n=t(window.location.href)||t(window.top.location.href);if(n){var r=/\bdebugLevel=(\d+)/.exec(n);e=r?+r[1]:3}}catch(i){}return this.debug=e},setGlobalContext:function(e){this.globalContext=e},getWebAppPath:function(){return this.webAppPath},getWcdfSettings:function(){return t.info("getWcdfSettings was not overridden, returning empty object"),{}},normalizeId:function(e){return e},dispose:function(){if(this.isDisposed)return;this.isDisposed=!0,this.refreshEngine&&this.refreshEngine.dispose(),this.events&&(this.events={}),this._disposeComponents(),this._disposeStorage(),this._disposeParameters(),this._disposeViews()}})}),define("dojo/has",["require","module"],function(e,t){var n=e.has||function(){};if(!n("dojo-has-api")){var r=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location==location&&window.document==document,i=this,s=r&&document,o=s&&s.createElement("DiV"),u=t.config&&t.config()||{};n=function(e){return typeof u[e]=="function"?u[e]=u[e](i,s,o):u[e]},n.cache=u,n.add=function(e,t,r,i){return(typeof u[e]=="undefined"||i)&&(u[e]=t),r&&n(e)},n.add("host-browser",r),n.add("dom",r),n.add("dojo-dom-ready-api",1),n.add("dojo-sniff",1)}if(n("host-browser")){n.add("dom-addeventlistener",!!document.addEventListener),n.add("touch","ontouchstart"in document||window.navigator.msMaxTouchPoints>0),n.add("device-width",screen.availWidth||innerWidth);var a=document.createElement("form");n.add("dom-attributes-explicit",a.attributes.length==0),n.add("dom-attributes-specified-flag",a.attributes.length>0&&a.attributes.length<40)}return n.clearElement=function(e){return e.innerHTML="",e},n.normalize=function(e,t){var r=e.match(/[\?:]|[^:\?]*/g),i=0,s=function(e){var t=r[i++];return t==":"?0:r[i++]=="?"?!e&&n(t)?s():(s(!0),s(e)):t||0};return e=s(),e&&t(e)},n.load=function(e,t,n){e?t([e],n):n()},n}),define("dojo/_base/config",["../has","require"],function(e,t){var n={};if(e("dojo-config-api")){var r=t.rawConfig,i;for(i in r)n[i]=r[i]}else{var s=function(t,n,r){for(i in t)i!="has"&&e.add(n+i,t[i],0,r)},o=function(){return this}();n=e("dojo-loader")?t.rawConfig:o.dojoConfig||o.djConfig||{},s(n,"config",1),s(n.has,"",1)}return!n.locale&&typeof window!="undefined"&&window.SESSION_LOCALE&&(n.locale=window.SESSION_LOCALE.toLowerCase().replace("_","-")),!n.locale&&typeof navigator!="undefined"&&(n.locale=(navigator.language||navigator.userLanguage).toLowerCase()),n}),define("dojo/_base/kernel",["../has","./config","require","module"],function(e,t,n,r){var i,s,o=function(){return this}(),u={},a={},f={config:t,global:o,dijit:u,dojox:a},l={dojo:["dojo",f],dijit:["dijit",u],dojox:["dojox",a]},c=n.map&&n.map[r.id.match(/[^\/]+/)[0]],h;for(s in c)l[s]?l[s][0]=c[s]:l[s]=[c[s],{}];for(s in l)h=l[s],h[1]._scopeName=h[0],t.noGlobals||(o[h[0]]=h[1]);f.scopeMap=l,f.baseUrl=f.config.baseUrl=n.baseUrl,f.isAsync=!e("dojo-loader")||n.async,f.locale=t.locale;var p="$Rev: f774568 $".match(/[0-9a-f]{7,}/);f.version={major:1,minor:9,patch:2,flag:"",revision:p?p[0]:NaN,toString:function(){var e=f.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},e.add("extend-dojo",1),Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(f),e("host-rhino")?f.exit=function(e){quit(e)}:f.exit=function(){},e.add("dojo-guarantee-console",1);if(e("dojo-guarantee-console")){typeof console!="undefined"||(console={});var d=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"],v;i=0;while(v=d[i++])console[v]||function(){var e=v+"";console[e]="log"in console?function(){var t=Array.apply({},arguments);t.unshift(e+":"),console.log(t.join(" "))}:function(){},console[e]._fake=!0}()}e.add("dojo-debug-messages",!!t.isDebug),f.deprecated=f.experimental=function(){},e("dojo-debug-messages")&&(f.deprecated=function(e,t,n){var r="DEPRECATED: "+e;t&&(r+=" "+t),n&&(r+=" -- will be removed in version: "+n),console.warn(r)},f.experimental=function(e,t){var n="EXPERIMENTAL: "+e+" -- APIs subject to change without notice.";t&&(n+=" "+t),console.warn(n)}),e.add("dojo-modulePaths",1);if(e("dojo-modulePaths")&&t.modulePaths){f.deprecated("dojo.modulePaths","use paths configuration");var m={};for(s in t.modulePaths)m[s.replace(/\./g,"/")]=t.modulePaths[s];n({paths:m})}return e.add("dojo-moduleUrl",1),e("dojo-moduleUrl")&&(f.moduleUrl=function(e,t){f.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var r=null;return e&&(r=n.toUrl(e.replace(/\./g,"/")+(t?"/"+t:"")+"/*.*").replace(/\/\*\.\*/,"")+(t?"":"/")),r}),f._hasResource={},f}),define("dojo/sniff",["./has"],function(e){if(e("host-browser")){var t=navigator,n=t.userAgent,r=t.appVersion,i=parseFloat(r);e.add("air",n.indexOf("AdobeAIR")>=0),e.add("msapp",parseFloat(n.split("MSAppHost/")[1])||undefined),e.add("khtml",r.indexOf("Konqueror")>=0?i:undefined),e.add("webkit",parseFloat(n.split("WebKit/")[1])||undefined),e.add("chrome",parseFloat(n.split("Chrome/")[1])||undefined),e.add("safari",r.indexOf("Safari")>=0&&!e("chrome")?parseFloat(r.split("Version/")[1]):undefined),e.add("mac",r.indexOf("Macintosh")>=0),e.add("quirks",document.compatMode=="BackCompat");if(n.match(/(iPhone|iPod|iPad)/)){var s=RegExp.$1.replace(/P/,"p"),o=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",u=parseFloat(o.replace(/_/,".").replace(/_/g,""));e.add(s,u),e.add("ios",u)}e.add("android",parseFloat(n.split("Android ")[1])||undefined),e.add("bb",(n.indexOf("BlackBerry")>=0||n.indexOf("BB10")>=0)&&parseFloat(n.split("Version/")[1])||undefined),e.add("trident",parseFloat(r.split("Trident/")[1])||undefined),e.add("svg",typeof SVGAngle!="undefined");if(!e("webkit")){n.indexOf("Opera")>=0&&e.add("opera",i>=9.8?parseFloat(n.split("Version/")[1])||i:i),n.indexOf("Gecko")>=0&&!e("khtml")&&!e("webkit")&&!e("trident")&&e.add("mozilla",i),e("mozilla")&&e.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||undefined);if(document.all&&!e("opera")){var a=parseFloat(r.split("MSIE ")[1])||undefined,f=document.documentMode;f&&f!=5&&Math.floor(a)!=f&&(a=f),e.add("ie",a)}e.add("wii",typeof opera!="undefined"&&opera.wiiremote)}}return e}),define("dojo/_base/lang",["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",function(){for(var e in{toString:1})return 0;return 1});var n=t("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],r=n.length,i=function(t,n,r){var i,s=0,o=e.global;if(!r){if(!t.length)return o;i=t[s++];try{r=e.scopeMap[i]&&e.scopeMap[i][1]}catch(u){}r=r||(i in o?o[i]:n?o[i]={}:undefined)}while(r&&(i=t[s++]))r=i in r?r[i]:n?r[i]={}:undefined;return r},s=Object.prototype.toString,o=function(e,t,n){return(n||[]).concat(Array.prototype.slice.call(e,t||0))},u=/\{([^\}]+)\}/g,a={_extraNames:n,_mixin:function(e,i,s){var o,u,a,f={};for(o in i){u=i[o];if(!(o in e)||e[o]!==u&&(!(o in f)||f[o]!==u))e[o]=s?s(u):u}if(t("bug-for-in-skips-shadowed")&&i)for(a=0;a<r;++a){o=n[a],u=i[o];if(!(o in e)||e[o]!==u&&(!(o in f)||f[o]!==u))e[o]=s?s(u):u}return e},mixin:function(e,t){e||(e={});for(var n=1,r=arguments.length;n<r;n++)a._mixin(e,arguments[n]);return e},setObject:function(e,t,n){var r=e.split("."),s=r.pop(),o=i(r,!0,n);return o&&s?o[s]=t:undefined},getObject:function(e,t,n){return i(e.split("."),t,n)},exists:function(e,t){return a.getObject(e,!1,t)!==undefined},isString:function(e){return typeof e=="string"||e instanceof String},isArray:function(e){return e&&(e instanceof Array||typeof e=="array")},isFunction:function(e){return s.call(e)==="[object Function]"},isObject:function(e){return e!==undefined&&(e===null||typeof e=="object"||a.isArray(e)||a.isFunction(e))},isArrayLike:function(e){return e&&e!==undefined&&!a.isString(e)&&!a.isFunction(e)&&(!e.tagName||e.tagName.toLowerCase()!="form")&&(a.isArray(e)||isFinite(e.length))},isAlien:function(e){return e&&!a.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e,t){for(var n=1,r=arguments.length;n<r;n++)a._mixin(e.prototype,arguments[n]);return e},_hitchArgs:function(t,n){var r=a._toArray(arguments,2),i=a.isString(n);return function(){var s=a._toArray(arguments),o=i?(t||e.global)[n]:n;return o&&o.apply(t||this,r.concat(s))}},hitch:function(t,n){if(arguments.length>2)return a._hitchArgs.apply(e,arguments);n||(n=t,t=null);if(a.isString(n)){t=t||e.global;if(!t[n])throw['lang.hitch: scope["',n,'"] is null (scope="',t,'")'].join("");return function(){return t[n].apply(t,arguments||[])}}return t?function(){return n.apply(t,arguments||[])}:n},delegate:function(){function e(){}return function(t,n){e.prototype=t;var r=new e;return e.prototype=null,n&&a._mixin(r,n),r}}(),_toArray:t("ie")?function(){function e(e,t,n){var r=n||[];for(var i=t||0;i<e.length;i++)r.push(e[i]);return r}return function(t){return(t.item?e:o).apply(this,arguments)}}():o,partial:function(t){var n=[null];return a.hitch.apply(e,n.concat(a._toArray(arguments)))},clone:function(e){if(!e||typeof e!="object"||a.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,n,r;if(a.isArray(e)){t=[];for(n=0,r=e.length;n<r;++n)n in e&&t.push(a.clone(e[n]))}else t=e.constructor?new e.constructor:{};return a._mixin(t,e,a.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,n){return e.replace(n||u,a.isFunction(t)?t:function(e,n){return a.getObject(n,!1,t)})}};return t("extend-dojo")&&a.mixin(e,a),a}),define("dojo/_base/array",["./kernel","../has","./lang"],function(e,t,n){function s(e){return r[e]=new Function("item","index","array",e)}function o(e){var t=!e;return function(n,i,o){var u=0,a=n&&n.length||0,f;a&&typeof n=="string"&&(n=n.split("")),typeof i=="string"&&(i=r[i]||s(i));if(o)for(;u<a;++u){f=!i.call(o,n[u],u,n);if(e^f)return!f}else for(;u<a;++u){f=!i(n[u],u,n);if(e^f)return!f}return t}}function u(e){var t=1,n=0,r=0;return e||(t=n=r=-1),function(s,o,u,f){if(f&&t>0)return a.lastIndexOf(s,o,u);var l=s&&s.length||0,c=e?l+r:n,h;u===i?h=e?n:l+r:u<0?(h=l+u,h<0&&(h=n)):h=u>=l?l+r:u,l&&typeof s=="string"&&(s=s.split(""));for(;h!=c;h+=t)if(s[h]==o)return h;return-1}}var r={},i,a={every:o(!1),some:o(!0),indexOf:u(!0),lastIndexOf:u(!1),forEach:function(e,t,n){var i=0,o=e&&e.length||0;o&&typeof e=="string"&&(e=e.split("")),typeof t=="string"&&(t=r[t]||s(t));if(n)for(;i<o;++i)t.call(n,e[i],i,e);else for(;i<o;++i)t(e[i],i,e)},map:function(e,t,n,i){var o=0,u=e&&e.length||0,a=new(i||Array)(u);u&&typeof e=="string"&&(e=e.split("")),typeof t=="string"&&(t=r[t]||s(t));if(n)for(;o<u;++o)a[o]=t.call(n,e[o],o,e);else for(;o<u;++o)a[o]=t(e[o],o,e);return a},filter:function(e,t,n){var i=0,o=e&&e.length||0,u=[],a;o&&typeof e=="string"&&(e=e.split("")),typeof t=="string"&&(t=r[t]||s(t));if(n)for(;i<o;++i)a=e[i],t.call(n,a,i,e)&&u.push(a);else for(;i<o;++i)a=e[i],t(a,i,e)&&u.push(a);return u},clearCache:function(){r={}}};return t("extend-dojo")&&n.mixin(e,a),a}),define("dojo/io-query",["./_base/lang"],function(e){var t={};return{objectToQuery:function(r){var i=encodeURIComponent,s=[];for(var o in r){var u=r[o];if(u!=t[o]){var a=i(o)+"=";if(e.isArray(u))for(var f=0,l=u.length;f<l;++f)s.push(a+i(u[f]));else s.push(a+i(u))}}return s.join("&")},queryToObject:function(n){var r=decodeURIComponent,i=n.split("&"),s={},o,u;for(var a=0,f=i.length,l;a<f;++a){l=i[a];if(l.length){var c=l.indexOf("=");c<0?(o=r(l),u=""):(o=r(l.slice(0,c)),u=r(l.slice(c+1))),typeof s[o]=="string"&&(s[o]=[s[o]]),e.isArray(s[o])?s[o].push(u):s[o]=u}}return s}}}),define("common-ui/util/URLEncoder",["dojo/_base/lang","dojo/_base/array","dojo/io-query"],function(e,t,n){function i(e){return e.replace(/%5C/g,"%255C").replace(/%2F/g,"%252F")}function s(e){return e.replace(/\\/g,"%5C").replace(/\//g,"%2F")}var r=e.getObject("pho.Encoder",!0);return r.encode=function(r,i,s){"use strict";if(typeof i=="undefined")return r;typeof i=="string"&&(i=[i]);var o=r.split("?")[0],u=(o.match(/\{[\d]+\}/g)||[]).length;i=t.map(i,function(e,t){var n=encodeURIComponent(String(e));return t<u&&(n=n.replace(/%5C/g,"%255C").replace(/%2F/g,"%252F")),n});var a=e.replace(r,i);return s&&(a+=a.indexOf("?")>-1?"&":"?",a+=n.objectToQuery(s)),a},r.encodeRepositoryPath=function(e){"use strict";var t=String(e).replace(new RegExp(":","g"),"	").replace(new RegExp("[\\\\/]","g"),":");return t},r.decodeRepositoryPath=function(e){return String(e).replace(new RegExp(":","g"),"/").replace(new RegExp("\\t","g"),":")},r}),require(["common-ui/util/URLEncoder"]),define("cdf/dashboard/Dashboard.ext",["common-ui/util/URLEncoder","pentaho/environment"],function(e,t){return{pluginName:"pentaho-cdf",samplesBasePath:"/public/plugin-samples/",getPluginBase:function(e){return t.server.root+"plugin/"+e+"/api"},getPluginWebsocketBase:function(e){return this.httpUrlToWebSocketUrl(""+t.server.root)+e+"/websocket"},getCdfBase:function(){return this.getPluginBase(this.pluginName)},getFilePathFromUrl:function(){var e=window.location.pathname;e.indexOf("/:")==-1&&(e=decodeURIComponent(window.location.pathname));if(e.indexOf("/:")>0){var t=e.match("(/:)(.*)(/)");if(t[2])return"/"+t[2].replace(new RegExp(":","g"),"/")}},getTimestamp:function(){return"ts="+(new Date).getTime()},getFullPath:function(e,t){e=e||"",t=t||"";var n=e.indexOf(this.pluginName)==0?this.samplesBasePath+e:e;return n+=(t?"/"+t:"").replace(/\/\//g,"/"),n},composePath:function(e){var t=function(e){return e.charAt(0)=="/"&&(e=e.substring(1,e.length)),e.charAt(e.length-1)=="/"&&(e=e.substring(0,e.length-1)),e},n="/";return e.solution&&(n+=t(e.solution)+"/"),e.path&&(n+=t(e.path)),e.action&&(n+="/"+t(e.action)),n},getSettings:function(e,t){return t?this.getCdfBase()+"/settings/"+e+"?"+$.param({key:t}):this.getCdfBase()+"/settings/"+e},getServiceAction:function(n,r,i,s){var o={};return o.wrapper=!1,o.action=s,o.url=e.encode(t.server.root+"api/repos/{0}/generatedContent",e.encodeRepositoryPath(this.getFullPath(i,s))),o},getStaticResource:function(e){return this.getCdfBase()+"/resources/"+e},getCaptifyZoom:function(){return this.getStaticResource("js/lib/captify/zoom.html")},getExport:function(){return this.getCdfBase()+"/export"},getPluginEndpoint:function(e,t){return this.getPluginBase(e)+"/"+t},getJSONSolution:function(){return this.getCdfBase()+"/getJSONSolution"},getRenderHTML:function(){return this.getCdfBase()+"/RenderHtml"},httpUrlToWebSocketUrl:function(e){return e.replace(/(http)(s)?\:\/\//i,"ws$2://")}}}),define("cdf/dashboard/Dashboard.context.ext",["./Dashboard.ext"],function(e){return{getContext:function(){return e.getCdfBase()+"/context/get"}}}),define("cdf/dashboard/Dashboard.context",["../lib/jquery","./Dashboard","./Dashboard.ext","./Dashboard.context.ext"],function(e,t,n,r){t.implement({context:undefined,_initContext:function(){this.context||(this.context={},e.extend(this.context,this.contextObj))}})}),define("cdf/dashboard/Container",[],function(){function e(e,t,r){var i;r||(r="instance"),this.build=function(n,s){if(i&&!s)return i;var o=t(e,n);return!s&&r==="singleton"&&(i=o),o},this.dispose=function(){i&&(n(i),i=null)}}function t(e,t,r){r||(r="external"),this.build=function(){return t},this.dispose=function(){t&&(r==="singleton"&&n(t),t=null)}}function n(e){typeof e.dispose=="function"&&e.dispose()}function i(e){for(var t in e)if(r.call(e,t))return!1;return!0}var r=Object.prototype.hasOwnProperty;return function(){function r(e,t){if(!e)throw new Error("Argument 'type' is required.");if(typeof e!="string")throw new Error("Argument 'type' must be a string.");var r=n[e];if(!t&&(!r||i(r)))throw new Error("There are no registrations for type '"+e+"'.");return r}function s(e,t,n){var i,s=r(e,n);if(s){i=s[t||""];if(!i&&!n)throw new Error("There is no registration for type '"+e+"'"+(t?" and name '"+t+"'":"")+".")}return i}function o(e,t,n,r,i){typeof t!="string"&&(n=t,t="");var o=s(e,t,i);return n?r=!0:r||(n={}),o?o.build(n,r):null}function u(e,t){var n=r(e,t),i=[];for(var s in n)i.push(n[s].build({},!1));return i}this.register=function(r,i,s,o){if(!r)throw new Error("Argument 'type' is required.");if(typeof r!="string")throw new Error("Argument 'type' must be a string.");i!=null&&(typeof i!="string"?(o=s,s=i,i=null):i||(i=null));if(!s)throw new Error("Argument 'what' is required.");var u;switch(typeof s){case"function":u=new e(this,s,o);break;case"object":u=new t(this,s,o);break;default:throw new Error("Argument 'what' is of an invalid type.")}i||(i="");var a=n[r]||(n[r]={}),f=a[i];f&&f.dispose(),a[i]=u},this.has=function(e,t){return!!s(e,t,!0)},this.canNew=function(t,n){return s(t,n,!1)instanceof e},this.get=function(e,t){return o(e,t,null,!1,!1)},this.tryGet=function(e,t){return o(e,t,null,!1,!0)},this.getNew=function(e,t,n){return o(e,t,n,!0,!1)},this.tryGetNew=function(e,t,n){return o(e,t,n,!0,!0)},this.getAll=function(e){return u(e,!1)},this.tryGetAll=function(e){return u(e,!0)},this.listType=function(e){return r(e,!1)},this.tryListType=function(e){return r(e,!0)},this.dispose=function(){if(n){for(var e in n){var t=n[e];for(var r in t)t[r].dispose()}n=null}};var n={}}}),define("cdf/dashboard/Dashboard.addIns",["./Dashboard","./Container","./Utils"],function(e,t,n){function i(e,t){return e.indexOf("Component",e.length-"Component".length)!==-1&&(e=e.substring(0,e.length-"Component".length)),e=e.charAt(0).toUpperCase()+e.substring(1),t&&(e+="."+t),e}var r=new t;e.registerGlobalAddIn=function(e,t,n){var e=i(e,t),s=n.getName?n.getName():null;r.register(e,s,n)},e.implement({addIns:undefined,_initAddIns:function(){this.addIns=n.clone(r)},registerGlobalAddIn:function(t,n,r){e.registerGlobalAddIn(t,n,r)},registerAddIn:function(e,t,n){var e=i(e,t),r=n.getName?n.getName():null;this.addIns.register(e,r,n)},hasAddIn:function(e,t,n){var e=i(e,t);return Boolean(this.addIns&&this.addIns.has(e,n))},getAddIn:function(e,t,n){var e=i(e,t);try{var r=this.addIns.get(e,n);return r}catch(s){return null}},setAddInDefaults:function(e,t,n,r){var i=this.getAddIn(e,t,n);i&&i.setDefaults(r)},listAddIns:function(e,t){var e=i(e,t),n=[];try{return this.addIns.listType(e)}catch(r){return[]}}})}),define("cdf/dashboard/Dashboard.bookmarkable",["./Dashboard","../Logger","./Utils","../lib/jquery"],function(e,t,n,r){e.implement({_initBookmarkables:function(){this.bookmarkables={}},getHashValue:function(e){var t=window.location.hash,n;try{n=JSON.parse(t.slice(1))}catch(r){n={}}return arguments.length===0?n:n[e]},setHashValue:function(e,t){var n;arguments.length==1?n=e:(n=this.getHashValue(),n[e]=t);var r=JSON.stringify(n);r!="{}"?window.location.hash=r:window.location.hash&&(window.location.hash="")},deleteHashValue:function(e){if(arguments.length===0)window.location.hash="";else{var t=this.getHashValue();delete t[e],this.setHashValue(t)}},setBookmarkable:function(e,t){arguments.length===1?this.bookmarkables[e]=!0:this.bookmarkables[e]=t},isBookmarkable:function(e){return Boolean(this.bookmarkables[e])},generateBookmarkState:function(){var e={},t=this.bookmarkables;for(var n in t)t.hasOwnProperty(n)&&t[n]&&(e[n]=this.getParameterValue(n));return e},persistBookmarkables:function(e){if(!this.bookmarkables[e])return;if(!this.finishedInit)return;this.setBookmarkState({impl:"client",params:this.generateBookmarkState()})},setBookmarkState:function(e){if(window.history&&window.history.replaceState){var t=window.location.pathname.split("/").pop(),i=window.location.search.slice(1).split("&").map(function(e){var t=e.split("=");return t[1]=decodeURIComponent(t[1]),t}),s;i=n.propertiesArrayToObject(i),i.bookmarkState=JSON.stringify(e),s=t+"?"+r.param(i),window.history.replaceState({},"",s),this.deleteHashValue("bookmark")}else this.setHashValue("bookmark",e)},getBookmarkState:function(){if(window.location.hash.length>1)try{return this.getHashValue("bookmark")||{}}catch(e){}var t=window.location.search.slice(1).split("&").map(function(e){var t=e.split("=");return t[1]=decodeURIComponent(t[1]),t}),r=n.propertiesArrayToObject(t);return r.bookmarkState?JSON.parse(decodeURIComponent(r.bookmarkState.replace(/\+/g," ")))||{}:{}},restoreBookmarkables:function(){var e;try{e=this.getBookmarkState().params;for(var n in e)e.hasOwnProperty(n)&&this.setParameter(n,e[n])}catch(r){t.log(r,"error")}}})}),function(t,n){typeof exports=="object"&&exports&&typeof exports.nodeName!="string"?n(exports):typeof define=="function"&&define.amd?define("cdf/lib/mustache",["exports"],n):(t.Mustache={},n(t.Mustache))}(this,function(t){function i(e){return typeof e=="function"}function s(e){return r(e)?"array":typeof e}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function u(e,t){return e!=null&&typeof e=="object"&&t in e}function f(e,t){return a.call(e,t)}function c(e){return!f(l,e)}function p(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return h[t]})}function b(e,n){function l(){if(a&&!f)while(u.length)delete s[u.pop()];else u=[];a=!1,f=!1}function x(e){typeof e=="string"&&(e=e.split(v,2));if(!r(e)||e.length!==2)throw new Error("Invalid tags: "+e);h=new RegExp(o(e[0])+"\\s*"),p=new RegExp("\\s*"+o(e[1])),b=new RegExp("\\s*"+o("}"+e[1]))}if(!e)return[];var i=[],s=[],u=[],a=!1,f=!1,h,p,b;x(n||t.tags);var T=new S(e),N,C,k,L,A,O;while(!T.eos()){N=T.pos,k=T.scanUntil(h);if(k)for(var M=0,_=k.length;M<_;++M)L=k.charAt(M),c(L)?u.push(s.length):f=!0,s.push(["text",L,N,N+1]),N+=1,L==="\n"&&l();if(!T.scan(h))break;a=!0,C=T.scan(y)||"name",T.scan(d),C==="="?(k=T.scanUntil(m),T.scan(m),T.scanUntil(p)):C==="{"?(k=T.scanUntil(b),T.scan(g),T.scanUntil(p),C="&"):k=T.scanUntil(p);if(!T.scan(p))throw new Error("Unclosed tag at "+T.pos);A=[C,k,N,T.pos],s.push(A);if(C==="#"||C==="^")i.push(A);else if(C==="/"){O=i.pop();if(!O)throw new Error('Unopened section "'+k+'" at '+N);if(O[1]!==k)throw new Error('Unclosed section "'+O[1]+'" at '+N)}else C==="name"||C==="{"||C==="&"?f=!0:C==="="&&x(k)}O=i.pop();if(O)throw new Error('Unclosed section "'+O[1]+'" at '+T.pos);return E(w(s))}function w(e){var t=[],n,r;for(var i=0,s=e.length;i<s;++i)n=e[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function E(e){var t=[],n=t,r=[],i,s;for(var o=0,u=e.length;o<u;++o){i=e[o];switch(i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":s=r.pop(),s[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function S(e){this.string=e,this.tail=e,this.pos=0}function x(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function T(){this.cache={}}var n=Object.prototype.toString,r=Array.isArray||function(t){return n.call(t)==="[object Array]"},a=RegExp.prototype.test,l=/\S/,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},d=/\s*/,v=/\s+/,m=/\s*=/,g=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/;S.prototype.eos=function(){return this.tail===""},S.prototype.scan=function(t){var n=this.tail.match(t);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},S.prototype.scanUntil=function(t){var n=this.tail.search(t),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r},x.prototype.push=function(t){return new x(t,this)},x.prototype.lookup=function(t){var n=this.cache,r;if(n.hasOwnProperty(t))r=n[t];else{var s=this,o,a,f=!1;while(s){if(t.indexOf(".")>0){r=s.view,o=t.split("."),a=0;while(r!=null&&a<o.length)a===o.length-1&&(f=u(r,o[a])),r=r[o[a++]]}else r=s.view[t],f=u(s.view,t);if(f)break;s=s.parent}n[t]=r}return i(r)&&(r=r.call(this.view)),r},T.prototype.clearCache=function(){this.cache={}},T.prototype.parse=function(t,n){var r=this.cache,i=r[t];return i==null&&(i=r[t]=b(t,n)),i},T.prototype.render=function(t,n,r){var i=this.parse(t),s=n instanceof x?n:new x(n);return this.renderTokens(i,s,r,t)},T.prototype.renderTokens=function(t,n,r,i){var s="",o,u,a;for(var f=0,l=t.length;f<l;++f)a=undefined,o=t[f],u=o[0],u==="#"?a=this.renderSection(o,n,r,i):u==="^"?a=this.renderInverted(o,n,r,i):u===">"?a=this.renderPartial(o,n,r,i):u==="&"?a=this.unescapedValue(o,n):u==="name"?a=this.escapedValue(o,n):u==="text"&&(a=this.rawValue(o)),a!==undefined&&(s+=a);return s},T.prototype.renderSection=function(t,n,s,o){function l(e){return u.render(e,n,s)}var u=this,a="",f=n.lookup(t[1]);if(!f)return;if(r(f))for(var c=0,h=f.length;c<h;++c)a+=this.renderTokens(t[4],n.push(f[c]),s,o);else if(typeof f=="object"||typeof f=="string"||typeof f=="number")a+=this.renderTokens(t[4],n.push(f),s,o);else if(i(f)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");f=f.call(n.view,o.slice(t[3],t[5]),l),f!=null&&(a+=f)}else a+=this.renderTokens(t[4],n,s,o);return a},T.prototype.renderInverted=function(t,n,i,s){var o=n.lookup(t[1]);if(!o||r(o)&&o.length===0)return this.renderTokens(t[4],n,i,s)},T.prototype.renderPartial=function(t,n,r){if(!r)return;var s=i(r)?r(t[1]):r[t[1]];if(s!=null)return this.renderTokens(this.parse(s),n,r,s)},T.prototype.unescapedValue=function(t,n){var r=n.lookup(t[1]);if(r!=null)return r},T.prototype.escapedValue=function(n,r){var i=r.lookup(n[1]);if(i!=null)return t.escape(i)},T.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.2.1",t.tags=["{{","}}"];var N=new T;t.clearCache=function(){return N.clearCache()},t.parse=function(t,n){return N.parse(t,n)},t.render=function(t,n,r){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+s(t)+'" was given as the first '+"argument for mustache#render(template, view, partials)");return N.render(t,n,r)},t.to_html=function(n,r,s,o){var u=t.render(n,r,s);if(!i(o))return u;o(u)},t.escape=p,t.Scanner=S,t.Context=x,t.Writer=T}),define("cdf/dashboard/Dashboard.components",["./Dashboard","amd!../lib/backbone","../lib/mustache","../Logger","../lib/jquery"],function(e,t,n,r,i){e.implement({components:[],_initComponents:function(){this.components=[]},getComponent:function(e){if(!e||typeof e!="string"){r.warn("getComponent: invalid component name");return}for(var t in this.components)if(this.components[t].name===e)return this.components[t]},getComp:function(e){return this.getComponent(e)},getComponentByName:function(e){return this.getComponent(e)},addComponents:function(e){if(!i.isArray(e)){r.warn("addComponents: components in a structure other than an array will not be added");return}e.forEach(function(e){this.addComponent(e)},this)},addComponent:function(e,t){if(!e||!e.name)throw r.error("addComponent: invalid component"),new Error("addComponent: invalid component");e._throwIfDisposed();var n=this.getComponentByName(e.name);if(n){if(n!==e)throw r.error("addComponent: duplicate component name '"+e.name+"'"),new Error("addComponent: duplicate component name '"+e.name+"'");return this}this._bindControl(e);var i=t&&t.index,s=this.components.length;return i==null||i<0||i>=s?this.components.push(e):this.components.splice(i,0,e),this},getComponentIndex:function(e){if(e!=null)switch(typeof e){case"string":for(var t=0,n=this.components,r=n.length;t<r;t++)if(n[t].name===e)return t;break;case"number":if(e>=0&&e<this.components.length)return e;break;default:return this.components.indexOf(e)}return-1},removeComponent:function(e){var t=this.getComponentIndex(e);if(t===-1){r.warn("removeComponent: component not found");return}var n=this.components[t];return this.refreshEngine&&this.refreshEngine.unregisterComponent(this),n.onWillRemove(),n.clear(),this.components.splice(t,1),n.dashboard=null,n.off("cdf:postExecution"),n.off("cdf:preExecution"),n.off("cdf:error"),n.off("all"),n},_disposeComponents:function(){this.components.forEach(function(e){e.dashboard=null,e.dispose()}),this.components=[]},_bindControl:function(e){return e.dashboard||(e.dashboard=this,this._addLogLifecycleToControl(e)),e},_bindExistingControl:function(e){if(!e.dashboard){e.dashboard=this,delete e.initInstance,typeof e.off=="function"&&e.off("all"),e.on||i.extend(e,t.Events),this._addLogLifecycleToControl(e);if(e.priority==null||e.priority==="")e.priority=this.legacyPriority++}return e},_castControlToClass:function(e,t){if(!(e instanceof t)){var n=this._makeInstance(t);i.extend(e,n)}},_getControlClass:function(e){var t=e.type;typeof t=="function"&&(t=t.call(e));var n=t.substring(0,1).toUpperCase()+t.substring(1),r=[n+"Component",t,n];for(var i=0,s=r.length;i<s;i++){var o=window[r[i]];if(o&&typeof o=="function")return o}},_makeInstance:function(e,t){var n=Object.create(e.prototype);return t?e.apply(n,t):e.apply(n),n},_castControlToComponent:function(e,t){if(!(e instanceof BaseComponent)&&(!t||!(t.prototype instanceof BaseComponent))){var n=BaseComponent.prototype;for(var r in n)if(n.hasOwnProperty(r)&&e[r]===undefined&&typeof n[r]=="function")switch(r){case"base":break;default:e[r]=n[r]}}},_addLogLifecycleToControl:function(e){e.on("all",function(e){var t=this.dashboard;if(t&&t.logLifecycle&&e!=="cdf"&&this.name!=="PostInitMarker"&&typeof console!="undefined"){var i,s=e.substr(4);switch(s){case"preExecution":i=">Start";break;case"postExecution":i="<End  ";break;case"error":i="!Error";break;default:i="      "}var o=n.render("Timing: {{elapsedSinceStartDesc}} since start, {{elapsedSinceStartDesc}} since last event",this.splitTimer());r.log("          [Lifecycle "+i+"] "+this.name+" ["+this.type+"]"+" (P: "+this.priority+" ): "+s+" "+o+" (Running: "+this.dashboard.runningCalls+")","log","color: "+this.getLogColor())}})}})}),define("cdf/lib/cdf.jquery.i18n",["../lib/jquery","amd!./jquery.i18n"],function(e){var t,n=e.i18n.properties;e.i18n.properties=function(e){e.language=i(e),t&&o(e)};var r=e.i18n.browserLang;e.i18n.browserLang=function(){return null};var i=function(n){if(n.language==null||n.language==="")n.language=r();n.language==null&&(n.language="");var i=n.encoding!=null?n.encoding:"UTF-8",o=n.path!=null?n.path:"",u=o+n.name+"_supported_languages.properties",a;return e.ajax({type:"GET",url:u,async:!1,xhrFields:{withCredentials:!0},cache:n.cache,contentType:"text/plain;charset="+i,dataType:"text",success:function(e){a=s(e,n.language),t=!0},error:function(e){t=!1;var r=e.status===404;r&&(a=n.language)}}),a},s=function(e,t){var n;t.length>=2&&(n=t.substring(0,2));var r;t.length>=5&&(r=t.substring(0,5));if(e!=null){var i=null,s=e.split(/\n/);for(var o=0;o<s.length;o++){var u=s[o],a=u.substr(0,u.indexOf("="));a===n&&i==null&&(i=n),a===r&&(i=r)}return i==null&&(i=""),i}},o=function(t){e.ajaxSetup({type:"GET",xhrFields:{withCredentials:!0}}),n(t),e.ajaxSetup({type:"POST",xhrFields:{withCredentials:!0}})};return e}),define("cdf/dashboard/Dashboard.i18n",["../Logger","./Dashboard","./Dashboard.ext","pentaho/environment","../lib/moment","../lib/CCC/cdo","../lib/cdf.jquery.i18n"],function(e,t,n,r,i,s,o){var u="i18n support wasn't properly initiated. Is the file messages_supported_languages.properties present?";t.implement({_i18nSupport:undefined,set i18nSupport(e){o.extend(this._i18nSupport,e)},get i18nSupport(){return this._i18nCurrentLanguageCode},_i18nCurrentLanguageCode:undefined,set i18nCurrentLanguageCode(e){this._i18nCurrentLanguageCode=e},get i18nCurrentLanguageCode(){return this._i18nCurrentLanguageCode},_initI18n:function(){this.setI18nSupport(undefined,{prop:function(t){return e.warn(u),t}});var t=this.__normalizeLocale(),r={name:"messages",mode:"map",language:t,path:n.getStaticResource("resources/languages/"),callback:this.__initI18nCallback.bind(this,t)};o.i18n.properties(r);var a=s.format.language(t);s.format.language(a),i.locale(t)},__initI18nCallback:function(e){var t={name:"messages",mode:"map",type:"GET",language:e,path:this.getMessagesPath(),callback:this.setI18nSupport.bind(this,e,o.i18n)};o.i18n.properties(t)},__normalizeLocale:function(){var e=r.locale;return e!=null?e.split("-").join("_"):null},setI18nSupport:function(e,t){this.i18nCurrentLanguageCode=e,this.i18nSupport=t},getMessagesPath:function(){}})}),define("cdf/queries/CdaQuery.ext",["../dashboard/Dashboard.ext","../lib/jquery"],function(e,t){return{getDoQuery:function(){return e.getPluginBase("cda")+"/doQuery?"},getWebsocketQuery:function(){return e.getPluginWebsocketBase("cda")+"/query"},getUnwrapQuery:function(n){return e.getPluginBase("cda")+"/unwrapQuery?"+t.param(n)}}}),define("cdf/components/XactionComponent.ext",["../dashboard/Utils","../dashboard/Dashboard.ext","common-ui/util/URLEncoder","../lib/jquery"],function(e,t,n,r){return{getCdfXaction:function(i,s,o,u){if(u){var a={};for(var f in u)u.hasOwnProperty(f)&&(a[f]=e.ev(u[f]));return n.encode(t.getCdfBase()+"/viewAction",null,r.extend({path:t.getFullPath(i,s),ts:(new Date).getTime()},a))}return n.encode(t.getCdfBase()+"/viewAction",null,{path:t.getFullPath(i,s),ts:(new Date).getTime()})}}}),define("common-ui/util/require-css/css!cdf/dashboard/Dashboard.legacy",[],function(){}),define("cdf/dashboard/Dashboard.legacy",["../queries/CdaQuery.ext","../components/XactionComponent.ext","./Dashboard.ext","./Dashboard","../Logger","../lib/jquery","css!./Dashboard.legacy.css"],function(e,t,n,r,i,s){r.implement({callPentahoAction:function(e,t,n,r,i,s){var o=this;return typeof s=="function"?o.pentahoAction(t,n,r,i,function(t){s(o.parseXActionResult(e,t))}):o.parseXActionResult(e,o.pentahoAction(t,n,r,i,s))},urlAction:function(e,t,n){return this.executeAjax("xml",e,t,n)},executeAjax:function(e,t,n,r){var o=this;if(typeof r=="function")return s.ajax({url:t,type:"POST",traditional:!0,dataType:e,async:!0,data:n,complete:function(e,t){r(e.responseXML)},error:function(e,t,n){i.error("Found error: "+e+" - "+t+", Error: "+n)}});var u=s.ajax({url:t,type:"POST",dataType:e,async:!1,data:n,error:function(e,t,n){i.error("Found error: "+e+" - "+t+", Error: "+n)}});return e=="xml"?u.responseXML:u.responseText},pentahoAction:function(e,t,n,r,i){return this.pentahoServiceAction("ServiceAction","xml",e,t,n,r,i)},pentahoServiceAction:function(e,t,r,i,o,u,a){var f=n.getServiceAction(e,r,i,o),l=f.url;return delete f.url,s.each(u,function(e,t){f[t[0]]=t[1]}),this.executeAjax(t,l,f,a)},CDF_ERROR_DIV:"cdfErrorDiv",createAndCleanErrorDiv:function(){s("#"+this.CDF_ERROR_DIV).length==0&&s("body").append("<div id='"+this.CDF_ERROR_DIV+"'></div>"),s("#"+this.CDF_ERROR_DIV).empty()},showErrorTooltip:function(){s(function(){s.tooltip&&s(".cdf_error").tooltip({delay:0,track:!0,fade:250,showBody:" -- "})})},parseXActionResult:function(e,t){var n=s(t),r=n.find("SOAP-ENV\\:Fault");if(r.length==0)return n;var i="Error executing component "+e.name,o=new Array;o[0]=" Error details for component execution "+e.name+" -- ",o[1]=r.find("SOAP-ENV\\:faultstring").find("SOAP-ENV\\:Text:eq(0)").text(),r.find("SOAP-ENV\\:Detail").find("message").each(function(){o.push(s(this).text())}),o.length>8&&(o=o.slice(0,7),o.push("..."));var u="<table class='errorMessageTable' border='0'><tr><td class='errorIcon'></td><td><span class='cdf_error' title=\""+o.join("<br/>").replace(/"/g,"'")+'" >'+i+" </span></td></tr></table>";return e.visible==0?s("#"+this.CDF_ERROR_DIV).append("<br />"+u):s("#"+e.htmlObject).html(u),null},setSettingsValue:function(e,t){var r={method:"set",key:e,value:JSON.stringify(t)};s.post(n.getSettings("set",null),r,function(){})},getSettingsValue:function(e,t){s.ajax({type:"GET",dataType:"json",url:n.getSettings("get",e),data:args,async:!0,xhrFields:{withCredentials:!0}}).done(typeof t=="function"?t:function(e){t=e})},fetchData:function(t,n,r){i.warn("Dashboard fetchData() is deprecated. Use Query objects instead");if(t!=undefined&&t.dataAccessId!=undefined){for(var o in n)t["param"+n[o][0]]=this.getParameterValue(n[o][1]);s.post(e.getDoQuery(),t,function(e){r(e)},"json").error(this.handleServerError)}else r([])}})}),define("cdf/components/UnmanagedComponent",["./BaseComponent","amd!../lib/underscore","../lib/jquery","../Logger"],function(e,t,n,r){return e.extend({isManaged:!1,isRunning:!1,isDataPush:!1,preExec:function(){this.runCounter==null&&(this.runCounter=0);var e=!0;if(typeof this.preExecution=="function")try{var t=this.preExecution();t!==undefined&&!t&&(e=!1)}catch(n){e=!1,this.failExec(n)}return this.trigger("cdf cdf:preExecution",this,e),e},postExec:function(){typeof this.postExecution=="function"&&this.postExecution(),this.trigger("cdf cdf:postExecution",this)},postFetchData:function(e){if(typeof this.postFetch=="function"){var t=this.postFetch(e);e=t===undefined?e:t,this.trigger("cdf cdf:postFetch",this,e)}return e},drawTooltip:function(){this.htmlObject&&this.tooltip&&(this._tooltip=typeof this.tooltip=="function"?this.tooltip():this.tooltip)},showTooltip:function(){var e;this.htmlObject&&(e=this._tooltip)!==undefined&&this.placeholder().attr("title",e).tooltip({delay:0,track:!0,fade:250,content:e})},beginExec:function(e){e&&(this.isDataPush=!0);var t=this.preExec();return t?this._maybeBlock():this.isDataPush=!1,t},failExec:function(e){if(typeof e=="string")this.error(null,e);else if(e&&"responseText"in e){var t=this.dashboard.parseServerError.apply(this.dashboard,arguments);this.error(t.msg,t.error)}else this.error(null,e);this.isDataPush=!1},endExec:function(){try{this.drawTooltip(),this.postExec(),this.showTooltip(),this._maybeUnblock(),this.isDataPush=!1}catch(e){this.failExec(e)}},execute:function(e){if(this.beginExec())try{e.call(this)}catch(t){this.failExec(t)}},synchronous:function(e,n){function r(){try{e.call(this,n||[])}catch(t){this.failExec(t);return}this.endExec()}if(!this.beginExec())return;setTimeout(t.bind(r,this),10)},triggerQuery:function(e,t,n){this.beginQuery(e,function(e){t(e),this.endExec()},n)},beginQuery:function(e,t,n){this.execute(function(){var r=this._setQuery(this._resolveQueryDefinition(e),n);r.fetchData(this.parameters,this.getSuccessHandler(t,undefined,this._maybeUnblock),this.getErrorHandler())})},_resolveQueryDefinition:function(e){var n;return t.isFunction(this.getQueryDefinition)&&(n=this.getQueryDefinition()),this.dashboard.isValidQueryDefinition(n)?n:t.isFunction(e)?e():e},getQueryDefinition:function(){return this.queryDefinition||this.chartDefinition||this.trafficDefinition},triggerAjax:function(e,r,i,s){var o=n.extend({},s);typeof i!="function"?(i=r,t.extend(o,e)):t.extend(o,{url:e,data:r}),this.beginAjax(o,function(e){i.call(this,e),this.trigger("cdf cdf:render",this,e),this.endExec()})},beginAjax:function(e,t){this.execute(function(){var r=n.extend({async:!0},e,{success:this.getSuccessHandler(t,undefined,this._maybeUnblock),error:this.getErrorHandler()});n.ajax(r)})},_setQuery:function(e,n){this.query&&this.query.dispose();var r=this.queryState=this.query=this.dashboard.getQuery(e),i={async:!0};return n&&n.ajax&&t.extend(i,n.ajax),r.setAjaxOptions(i),n&&n.pageSize&&r.setPageSize(n.pageSize),r},callCounter:function(){return++this.runCounter},getSuccessHandler:function(e,n,r,i){function s(t,s){if(s&&!this.beginExec(!0))return;var o;if(e>=this.runCounter)try{o=this.postFetchData(t),n.call(this,o)}catch(u){this.failExec(u)}else i&&i.call(this,t);return typeof r=="function"&&r.call(this),o}return arguments.length===1?(n=e,e=this.callCounter()):typeof e=="function"&&(i=r,r=n,n=e,e=this.callCounter()),t.bind(s,this)},getErrorHandler:function(){function e(e,t,n,r){if(r&&!this.beginExec(!0))return;this.failExec(e,t,n)}return t.bind(e,this)},error:function(e,t){e||(e=this.dashboard.getErrorObj("COMPONENT_ERROR").msg),this._maybeUnblock(),this.errorNotification({msg:e,error:t}),this.trigger("cdf cdf:error",this,e,t||null),t&&r.log(t,"error")},errorNotification:function(e,t){t||(t=this.htmlObject?this.placeholder():undefined);var n=this.name.replace("render_","");e.msg=e.msg+" ("+n+")",this.dashboard.errorNotification(e,t)},block:function(){this.isRunning||(this.dashboard.incrementRunningCalls(),this.isRunning=!0)},unblock:function(){this.isRunning&&(this.dashboard.decrementRunningCalls(),this.isRunning=!1)},isSilent:function(){return!!this.lifecycle&&!!this.lifecycle.silent},_maybeBlock:function(){this.isSilent()||this.block()},_maybeUnblock:function(){this.isSilent()||this.unblock()}})}),define("cdf/dashboard/Dashboard.lifecycle",["./Dashboard","../Logger","amd!../lib/underscore","../components/UnmanagedComponent","../lib/jquery"],function(e,t,n,r,i){e.implement({initCounter:undefined,runningCalls:undefined,lastServerResponse:undefined,serverCheckResponseTimeout:undefined,_initLifecycle:function(){this.initCounter=0,this.runningCalls=0,this.lastServerResponse=Date.now?Date.now():(new Date).getTime(),this.serverCheckResponseTimeout=Infinity},_throwIfDisposed:function(){if(this.isDisposed)throw new Error("Invalid operation. The dashboard has been disposed.")},resetRunningCalls:function(){this.runningCalls=0,setTimeout(n.bind(function(){this.hideProgressIndicator()},this),10)},getRunningCalls:function(){return this.runningCalls},incrementRunningCalls:function(){this.runningCalls++,this.showProgressIndicator(),t.log("+Running calls incremented to: "+this.getRunningCalls())},decrementRunningCalls:function(){this.runningCalls--,t.log("-Running calls decremented to: "+this.getRunningCalls()),setTimeout(n.bind(function(){this.runningCalls<=0&&(this.hideProgressIndicator(),this.runningCalls=0)},this),10)},init:function(e){var r=this;r._throwIfDisposed();var s=r.initCounter++;t.log("InitInstance "+s),s==0&&(r.syncDebugLevel(),r.initialStorage?n.extend(r.storage,r.initialStorage):r.loadStorage(),r.context!=null&&r.context.sessionTimeout!=null&&(r.serverCheckResponseTimeout=r.context.sessionTimeout*900),r.restoreBookmarkables(),r.restoreView(),r.syncParametersInit()),n.isArray(e)&&r.addComponents(e),n.chain(r.components).filter(function(e){return typeof e.initInstance=="undefined"}).each(function(e){e.initInstance=s}),i(function(){r._initEngine(s)})},_initEngine:function(e){var s=this;s.waitingForInit&&s.waitingForInit.length&&t.log("Overlapping initEngine!","warn");var o=e!=null?n.where(s.components,{initInstance:e}):s.components;(!s.waitingForInit||s.waitingForInit.length===0)&&!s.finishedInit&&s.incrementRunningCalls(),t.log("          [Lifecycle >Start] Init["+e+"] (Running: "+s.getRunningCalls()+")","log","color: #ddd"),s.createAndCleanErrorDiv(),typeof s.preInit=="function"&&s.preInit(),s.trigger("cdf cdf:preInit",s),i(window).trigger("cdfAboutToLoad");var s=s,u=[],a;for(a=0;a<o.length;a++)o[a].executeAtStart&&u.push(o[a]);if(!u.length){s._handlePostInit();return}if(!s.getComponent("PostInitMarker")){var f=new r({name:"PostInitMarker",type:"unmanaged",lifecycle:{silent:!0},executeAtStart:!0,priority:999999999});s.addComponent(f),u.push(f)}s.waitingForInit=u.slice();var l=function(t,r){if(arguments.length==2&&r)return;s.waitingForInit=n(s.waitingForInit).without(t),t.off("cdf:postExecution",l),t.off("cdf:preExecution",l),t.off("cdf:error",l),s._handlePostInit(e)};for(var a=0,c=u.length;a<c;a++){var h=u[a];h.on("cdf:postExecution cdf:preExecution cdf:error",l,s)}s.updateAll(u),o.length>0&&s._handlePostInit(e)},_handlePostInit:function(e){var r=this,s=function(){var e=n.filter(r.components,function(e){return e.type=="duplicate"}),t={},s=r.getBookmarkState().params||{};n.map(n.filter(Object.keys(s),function(e){return/(_[0-9]+)+$/.test(e)}),function(e){var n=e.match(/(.*?)((_[0-9]+)+)$/),r=n[1],i=n[2];return t[i]||(t[i]={}),t[i][r]=s[e],e});for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];i.each(e,function(e,t){var n;for(n=0;n<t.parameters.length;n++)if(!s.hasOwnProperty(t.parameters[n])&&r.isBookmarkable(t.parameters[n]))return;t.duplicate(s)})}};(!r.waitingForInit||r.waitingForInit.length===0)&&!r.finishedInit&&(r.trigger("cdf cdf:postInit",r),i(window).trigger("cdfLoaded"),typeof r.postInit=="function"&&r.postInit(),s(),r.finishedInit=!0,r.decrementRunningCalls(),t.log("          [Lifecycle <End  ] Init["+e+"] (Running: "+r.getRunningCalls()+")","log","color: #ddd"))},updateLifecycle:function(e){var r=e.lifecycle?!!e.lifecycle.silent:!1;if(e.disabled)return;r||this.incrementRunningCalls();var s=n.bind(function(){try{var n;typeof e.preExecution!="undefined"&&(n=e.preExecution.apply(e)),n=typeof n!="undefined"?!!n:!0,e.trigger("cdf cdf:preExecution",e,n);if(!n)return;e.tooltip!=undefined&&(e._tooltip=typeof e["tooltip"]=="function"?e.tooltip():e.tooltip),e.update!=undefined&&typeof e["update"]=="function"&&(e.update(),this.refreshEngine.processComponent(e)),typeof e.postExecution!="undefined"&&e.postExecution.apply(e),e._tooltip!=undefined&&i("#"+e.htmlObject).attr("title",e._tooltip).tooltip({delay:0,track:!0,fade:250})}catch(s){var o=e.htmlObject?i("#"+e.htmlObject):undefined,u=this.getErrorObj("COMPONENT_ERROR").msg+" ("+e.name.replace("render_","")+")";this.errorNotification({msg:u},o),t.error("Error updating "+e.name+":"),t.exception(s)}finally{r||this.decrementRunningCalls()}e.trigger("cdf cdf:postExecution",e)},this);setTimeout(s,1)},updateAll:function(e){var t=function(e,t){if(!t)return;for(var r in t)t.hasOwnProperty(r)&&(n.isArray(e[r])?e[r]=n.union(e[r],t[r]):e[r]=t[r])};this.updating||(this.updating={tiers:{},current:null,updatingInFlight:[]});if(e&&n.isArray(e)&&!n.isArray(e[0])){var r={};n.each(e,function(e){if(e){var t=e.priority||0;r[t]||(r[t]=[]),r[t].push(e)}}),e=r}t(this.updating.tiers,e);var i=this.updating.current,s=!1;if(i===null||i.components.length==0||(s=this.othersAwaitExecution(n.clone(this.updating.tiers),this.updating.current))){var o=this.getFirstTier(this.updating.tiers);if(!o)return;if(s){var u=this.updating.tiers;u[i.priority]=n.difference(u[i.priority],i.components),o.components=n.union(u[i.priority],this.getFirstTier(u).components)}this.updating.current=o;var a=function(e,t){if(arguments.length==2&&typeof t=="boolean"&&t)return;e.off("cdf:postExecution",a),e.off("cdf:preExecution",a),e.off("cdf:error",a);var r=this.updating.current;r.components=n.without(r.components,e);var i=this.updating.tiers;i[r.priority]=n.without(i[r.priority],e),this.updating.updatingInFlight=n.without(this.updating.updatingInFlight,e),this.updateAll()},r=this.updating.current.components.slice();for(var f=0;f<r.length;f++){var l=r[f];l.startTimer(),l.on("cdf:postExecution cdf:preExecution cdf:error",a,this),this.updateComponent(l),this.updating.updatingInFlight.indexOf(l)==-1&&this.updating.updatingInFlight.push(l)}}},update:function(e){this.updateQueue||(this.updateQueue=[]),this.updateQueue.push(e),this.updateTimeout&&clearTimeout(this.updateTimeout);var t=n.bind(function(){this.updateAll(this.updateQueue),delete this.updateQueue},this);this.updateTimeout=setTimeout(t,5)},updateComponent:function(e){if((Date.now?Date.now():(new Date).getTime())-this.lastServerResponse>this.serverCheckResponseTimeout&&!this.checkServer())throw this.hideProgressIndicator(),this.loginAlert(),"not logged in";e.isManaged===!1&&e.update?(e.update(),this.refreshEngine.processComponent(e)):this.updateLifecycle(e)},getFirstTier:function(e){var t=n.keys(e).sort(function(e,t){return parseInt(e,10)-parseInt(t,10)}),r;for(var i=0;i<t.length;i++){r=e[t[i]];if(r.length>0)return{priority:t[i],components:r.slice()}}return null},resetAll:function(){this.createAndCleanErrorDiv();var e=this.components.length;for(var t=0,n=this.components.length;t<n;t++)this.components[t].clear();var e=this.components.length;for(var t=0,n=this.components.length;t<n;t++)this.components[t].executeAtStart&&this.update(this.components[t])},processChange:function(e){var t=this.getComponentByName(e),n=t.parameter,r;typeof t["getValue"]=="function"&&(r=t.getValue());if(r==null)return;if(typeof t.preChange!="undefined"){var i=t.preChange(r);r=i!=undefined?i:r}n&&this.fireChange(n,r),typeof t.postChange!="undefined"&&t.postChange(r)},fireChange:function(e,t){var r=this;r.createAndCleanErrorDiv(),r.setParameter(e,t,!0),r.trigger("cdf "+e+":fireChange",{parameter:e,value:t});var i=[],s=!1;for(var o=0,u=r.components.length;o<u;o++)if(n.isArray(r.components[o].listeners))for(var a=0;a<r.components[o].listeners.length;a++){var f=r.components[o];if(f.listeners[a]==e&&!f.disabled){i.push(f);break}}r.updateAll(i)},othersAwaitExecution:function(e,t){if(!e||!t||!t.components)return!1;e[t.priority]=n.difference(e[t.priority],t.components);var r=this.getFirstTier(e);return!r||!r.components||r.components.length==0?!1:parseInt(r.priority)>parseInt(t.priority)?!1:!0},isComponentUpdating:function(e){if(this.updateQueue&&this.updateQueue.indexOf(e)!=-1)return!0;if(this.updating){if(this.updating.current&&this.updating.current.components){var t=n.some(this.updating.current.components,function(t){if(t===e)return!0});if(t)return t}if(this.updating.tiers){var r=n.some(this.updating.tiers,function(t){return n.some(t,function(t){return t===e})});if(r)return r}if(this.updating.updatingInFlight)return n.some(this.updating.updatingInFlight,function(t){return t===e})}return!1}})}),define("cdf/dashboard/Dashboard.notifications.ext",["./Dashboard.ext"],function(e){return{getPing:function(){return e.getCdfBase()+"/ping"}}}),define("common-ui/util/require-css/css!cdf/lib/theme/cupertino/jquery-ui-1.10.4.custom",[],function(){}),define("common-ui/util/require-css/css!cdf/dashboard/Popups",[],function(){}),define("cdf/dashboard/Popups",["../lib/mustache","amd!../lib/underscore","../lib/jquery","amd!../lib/jquery.blockUI","css!./Popups.css"],function(e,t,n){return{okPopup:{_firstRender:!0,template:"<div class='cdfPopup'>  <div class='cdfPopupHeader'>{{{header}}}</div>  <div class='cdfPopupBody'>    <div class='cdfPopupDesc'>{{{desc}}}</div>    <div class='cdfPopupButton'>{{{button}}}</div>  </div></div>",defaults:{header:"Title",desc:"Description Text",button:"Button Text",callback:function(){return!0}},$el:undefined,show:function(e){(e||this._firstRender)&&this.render(e),this.$el.show()},hide:function(){this.$el.hide()},render:function(r){var i=t.extend({},this.defaults,r),s=this;this._firstRender&&(this.$el=n("<div/>").addClass("cdfPopupContainer").hide().appendTo("body"),this._firstRender=!1),this.$el.empty().html(e.render(this.template,i)),this.$el.find(".cdfPopupButton").click(function(){i.callback(),s.hide()})}},notificationsComponent:{template:"<div class='cdfNotification component {{#isSmallComponent}}small{{/isSmallComponent}}'>  <div class='cdfNotificationBody'>    <div class='cdfNotificationImg'>&nbsp;</div>    <div class='cdfNotificationTitle' title='{{title}}'>{{{title}}}</div>    <div class='cdfNotificationDesc' title='{{desc}}'>{{{desc}}}</div>  </div></div>",defaults:{title:"Component Error",desc:"Error processing component."},render:function(r,i){var s=t.extend({},this.defaults,i);s.isSmallComponent=n(r).width()<300,n(r).empty().html(e.render(this.template,s));var o=n(r).find(".cdfNotification");o.css({"line-height":o.height()+"px"})}},notificationsGrowl:{_firstRender:!0,template:"<div class='cdfNotification growl'>  <div class='cdfNotificationBody'>    <h1 class='cdfNotificationTitle' title='{{title}}'>{{{title}}}</h1>    <h2 class='cdfNotificationDesc' title='{{desc}}'>{{{desc}}}</h2>  </div></div>",defaults:{title:"Title",desc:"Default CDF notification.",timeout:4e3,onUnblock:function(){return!0},css:n.extend({},n.blockUI.defaults.growlCSS,{position:"absolute",width:"100%",top:"10px"}),showOverlay:!1,fadeIn:700,fadeOut:1e3,centerY:!1},render:function(r){var i=t.extend({},this.defaults,r),s=n(e.render(this.template,i)),o=this;i.message=s;var u=i.onUnblock;i.onUnblock=function(){o.$el.hide(),u.call(this)},this._firstRender&&(this.$el=n("<div/>").addClass("cdfNotificationContainer").hide().appendTo("body"),this._firstRender=!1),this.$el.show().block(i)}}}}),define("common-ui/util/require-css/css!cdf/dashboard/Dashboard.notifications",[],function(){}),define("cdf/dashboard/Dashboard.notifications",["./Dashboard","./Dashboard.notifications.ext","./Popups","../Logger","amd!../lib/underscore","../lib/jquery","amd!../lib/jquery.blockUI","css!./Dashboard.notifications.css"],function(e,t,n,r,i,s){e.implement({ERROR_CODES:{QUERY_TIMEOUT:{msg:"Query timeout reached"},COMPONENT_ERROR:{msg:"Error processing component"}},_initNotifications:function(){},blockUiOptions:undefined,_setBlockUiOptions:function(e){if(typeof s.blockUI=="function"){this.blockUiOptions=s.extend({},s.blockUI.defaults);for(var t in e)this.blockUiOptions[t]=e[t]}},blockUIwithDrag:function(){if(this.isSilent)return;typeof this.i18nSupport!="undefined"&&this.i18nSupport!=null&&(s.blockUI.defaults.message='<div class="img blockUIDefaultImg" style="padding: 0px;"></div>'),s.blockUI(this.blockUiOptions);var e=s('<div id="blockUIDragHandle"></div>');s("div.blockUI.blockMsg").prepend(e),s("div.blockUI.blockMsg").draggable({handle:"#blockUIDragHandle"})},showProgressIndicator:function(){if(this.isSilent)return;s.blockUI&&this.blockUIwithDrag()},hideProgressIndicator:function(e){if(this.isSilent)return;e&&this.resetRunningCalls(),s.unblockUI&&s.unblockUI(),this.showErrorTooltip()},getErrorObj:function(e){return this.ERROR_CODES[e]||{}},parseServerError:function(e,t,n){var r=[{match:/Query timeout/,msg:this.getErrorObj("QUERY_TIMEOUT").msg}],o={msg:this.getErrorObj("COMPONENT_ERROR").msg,error:n,errorStatus:t},u=s("<div/>").html(e.responseText).find("h1").text();return i.find(r,function(e){return u.match(e.match)?(o.msg=e.msg,!0):!1}),o},handleServerError:function(){this.errorNotification(this.parseServerError.apply(this,arguments)),this.trigger("cdf cdf:serverError",this),this.resetRunningCalls()},errorNotification:function(e,t){if(this.isSilent)return;t?n.notificationsComponent.render(s(t),{title:e.msg,desc:""}):n.notificationsGrowl.render({title:e.msg,desc:""})},loginAlert:function(e){if(this.isSilent)return;var t={header:"Warning",desc:"You are no longer logged in or the connection to the server timed out",button:"Click to reload this page",callback:function(){window.location.reload(!0)}};t=i.extend({},t,e),n.okPopup.show(t),this.trigger("cdf cdf:loginError",this)},checkServer:function(){s.ajax({type:"POST",async:!1,dataType:"json",url:t.getPing(),success:function(e){return e&&e.ping=="ok"},error:function(){return!1}})}})}),define("cdf/dashboard/Dashboard.parameters",["./Dashboard","../Logger","amd!../lib/backbone","./Utf8Encoder"],function(e,t,n,r){e.implement({parameters:undefined,parameterModel:undefined,chains:undefined,syncedParameters:undefined,escapeParameterValues:!1,flatParameters:!1,LEGACY_STORAGE:"Dashboards.storage.",STORAGE:"storage.",_initParameters:function(){this.parameters=[],this.parameterModel=new n.Model,this.chains=[],this.syncedParameters={},this.escapeParameterValues=!1},_isParameterInModel:function(e,t){return this._getValueFromContext(e,t)!==undefined},_getValueFromContext:function(e,t){if(!e)return;if(this.flatParameters)return e[t];if(t!=null){var n,r;if(t instanceof Array)n=t;else{if(t.indexOf(".")<0)return e[t];n=t.split(".")}r=n.length;for(var i=0;i<r;i++){if(!e)return;var s=n[i],o=e[s];if(o===undefined)return;e=o}}return e},_setValueInContext:function(e,t,n){if(!e||t==null||n===undefined)return;if(this.flatParameters)e[t]=n;else{var r,i;if(t instanceof Array)r=t,i=r.pop();else{if(t.indexOf(".")<0)return e[t]=n,e;r=t.split("."),i=r.pop()}e=this._getValueFromContext(e,r),e&&(e[i]=n)}return e},_getParameterStore:function(e){var n;return e.indexOf(this.LEGACY_STORAGE)==0?(t.warn("Legacy storage access for "+e+". Please use storage instead"),e=e.substr(this.LEGACY_STORAGE.length),n=this.storage):e.indexOf(this.STORAGE)==0?(e=e.substr(this.STORAGE.length),n=this.storage):n=this.parameters,{store:n,name:e}},_disposeParameters:function(){this.parameters=[],this.parameterModel=undefined,this.chains=[],this.syncedParameters={}},addParameter:function(e,n){if(e==undefined||e=="undefined"){t.warn("Dashboard addParameter: trying to add undefined!!");return}var r=this._getParameterStore(e);return this._isParameterInModel(r.store,r.name)&&(n=this.getParameterValue(r.name)),this.setParameter(e,n),n},getParameterValue:function(e){if(e==undefined||e=="undefined"){t.warn("Dashboard.getParameterValue: trying to get undefined!!");return}var n=this._getParameterStore(e);return this._getValueFromContext(n.store,n.name)},getParam:function(e){return this.getParameterValue(e)},setParameter:function(e,n,i){if(e==undefined||e=="undefined"){t.warn("Dashboard.setParameter: trying to set undefined!!");return}var s=this._getParameterStore(e);this.escapeParameterValues?this._setValueInContext(s.store,s.name,r.encode_prepare_arr(n)):this._setValueInContext(s.store,s.name,n),this._setValueInContext(s.store,s.name,n)!==undefined&&(this.parameterModel.set(s.name,n,{notify:i}),this.persistBookmarkables(s.name))},setParam:function(e,t,n){this.setParameter(e,t,n)},syncParameters:function(e,t){this.setParameter(t,this.getParameterValue(e)),this.parameterModel.on("change:"+e,function(e,n,r){this[r.notify?"fireChange":"setParameter"](t,n)},this),this.parameterModel.on("change:"+t,function(t,n,r){this[r.notify?"fireChange":"setParameter"](e,n)},this)},syncParametersOnInit:function(e,t){var n=this.syncedParameters,r,i,s,o;n[e]||(n[e]=[]),n[e].push(t);for(var u=0;u<this.chains.length;u++)r=this.chains[u],r.indexOf(e)>-1&&(i=r),r.indexOf(t)>-1&&(s=r,o=u);if(s&&i){if(i!=s){var a=s.slice();a.unshift(0),a.unshift(i.length),[].splice.apply(i,a),this.chains.splice(o,1)}}else s?s.unshift(e):i?i.push(t):this.chains.push([e,t])},syncParametersInit:function(){var e=this.syncedParameters,t,n,r,i,s;for(r=0;r<this.chains.length;r++)for(i=0;i<this.chains[r].length;i++){t=this.chains[r][i];if(!e[t])continue;for(s=0;s<e[t].length;s++)n=e[t][s],this.syncParameters(t,n)}}})}),define("cdf/dashboard/Dashboard.storage.ext",["./Dashboard.ext"],function(e){return{getStorage:function(t){return e.getCdfBase()+"/storage/"+t}}}),define("cdf/dashboard/Dashboard.storage",["./Dashboard","../Logger","../lib/jquery","./Dashboard.storage.ext"],function(e,t,n,r){e.implement({storage:undefined,initialStorage:undefined,_initStorage:function(){this.storage||(this.storage={},n.extend(this.storage,this.storageObj)),this.initialStorage=this.storage},_disposeStorage:function(){this.storage={},this.initialStorage={}},loadStorage:function(){var e=this;if(this.context&&this.context.user==="anonymousUser")return;var t={user:this.context.user,action:"read",ts:Date.now?Date.now():(new Date).getTime()};n.ajax({type:"GET",dataType:"json",url:r.getStorage(t.action),data:t,async:!0,xhrFields:{withCredentials:!0},success:function(t){n.extend(e.storage,t)}})},saveStorage:function(){if(this.context&&this.context.user==="anonymousUser")return;var e={user:this.context.user,action:"store",storageValue:JSON.stringify(this.storage),ts:Date.now?Date.now():(new Date).getTime()};n.ajax({type:"GET",dataType:"json",url:r.getStorage(e.action),data:e,async:!0,xhrFields:{withCredentials:!0}}).done(function(e){e.result!=1&&t.log("Error saving storage","error")})},cleanStorage:function(){this.storage={};if(this.context&&this.context.user==="anonymousUser")return;var e={user:this.context.user,action:"delete"};n.ajax({type:"GET",dataType:"json",url:r.getStorage(e.action),data:e,async:!0,xhrFields:{withCredentials:!0}}).done(function(e){e.result!=1&&t.log("Error deleting storage","error")})}})}),define("cdf/dashboard/Dashboard.dataSources",["./Dashboard","../Logger","amd!../lib/underscore"],function(e,t,n){e.implement({dataSources:undefined,_initDataSources:function(){this.dataSources={}},_getDataSourceName:function(e){var r;n.isObject(e)?r=e.dataSource:r=e;if(n.isString(r)&&!n.isEmpty(r))return r;t.warn("Invalid data source name")},addDataSource:function(e,r,i){n.isObject(e)&&(i=r,r=e,e=r.name);if(!n.isObject(r)){t.error("Invalid data source object");return}if(!n.isString(e)||!!n.isEmpty(e)){t.error("Invalid data source name");return}if(this.dataSources[e]){if(!this.dataSources.hasOwnProperty(e)){t.error("Data source name '"+e+"' is invalid, overwrites an inherited property");return}if(!i){t.warn("Data source name '"+e+"' is already defined, set force flag to true to overwrite it");return}}var s=n.extend({},r);s.name&&delete s.name,this.dataSources[e]=s},getDataSource:function(e){var t=this._getDataSourceName(e);if(t&&this.dataSources.hasOwnProperty(t))return this.dataSources[t]},getDataSourceQuery:function(e){var r=this.getDataSource(e);if(!n.isEmpty(r))return this.getQuery(r);t.error("Invalid data source")},setDataSource:function(e,t){n.isObject(e)?this.addDataSource(e,!0):this.addDataSource(e,t,!0)},removeDataSource:function(e){var n;if(!(n=this._getDataSourceName(e))){t.warn("Invalid data source name");return}n in this.dataSources&&this.dataSources.hasOwnProperty(n)?delete this.dataSources[n]:t.warn("Data source name '"+n+"' not found")}})}),define("cdf/dashboard/Dashboard.query",["../Logger","../lib/Base","./Dashboard","./Container","amd!../lib/underscore","./Utils"],function(e,t,n,r,i,s){var o=t,u=new r;return n.implement({queryFactories:undefined,_initQuery:function(){this.queryFactories=s.clone(u)},getBaseQuery:function(){return o},registerQuery:function(e,t){var n=this.getBaseQuery();if(!i.isFunction(t)&&i.isObject(t)){var r={};i.each(n.prototype.deepProperties,function(e){r[e]=i.extend({},n.prototype[e],t[e])})}var s=i.isFunction(t)&&t||i.isObject(t)&&n.extend(i.extend({},t,r));this.queryFactories.register("Query",e,function(e,t){return new s(t)})},hasQuery:function(e){return Boolean(this.queryFactories&&this.queryFactories.has("Query",e))},detectQueryType:function(t){if(t){if(i.isString(t.dataSource)&&!i.isEmpty(t.dataSource)){var n=this.getDataSource(t.dataSource);if(!!i.isUndefined(n)){e.error("Invalid data source name '"+t.dataSource+"'");return}t=n}var r=t.queryType?t.queryType:t.query?"legacy":t.path&&t.dataAccessId?"cda":undefined;return t.queryType=r,this.hasQuery(r)?r:undefined}},getQuery:function(t,n){i.isUndefined(t)?t="cda":i.isObject(t)&&(n=t,t=undefined);if(i.isString(n.dataSource)&&!i.isEmpty(n.dataSource)){var r=this.getDataSource(n.dataSource);if(!!i.isUndefined(r)){e.error("Invalid data source name '"+n.dataSource+"'");return}n=i.extend({},r,n),delete n.dataSource}t=t||n.queryType||"cda";var s=this.queryFactories.getNew("Query",t,n);return s.dashboard=this,s},isValidQueryDefinition:function(e){return this.detectQueryType(e)!==undefined},listQueries:function(){return i.keys(this.queryFactories.listType("Query"))}}),{setBaseQuery:function(e){i.isFunction(e)&&e.extend&&(o=e)},registerGlobalQuery:function(e,t){var n=o;if(!i.isFunction(t)&&i.isObject(t)){var r={};i.each(n.prototype.deepProperties,function(e){r[e]=i.extend({},n.prototype[e],t[e])})}var s=i.isFunction(t)&&t||i.isObject(t)&&n.extend(i.extend({},t,r));u.register("Query",e,function(e,t){return new s(t)})}}});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=Base64._utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}};define("cdf/lib/base64",function(e){return function(){var t,n;return t||e.Base64}}(this)),define("cdf/dashboard/Dashboard.views.ext",["./Dashboard.ext"],function(e){return{getView:function(t){return e.getCdfBase()+"/views/"+t},getViewFromUrl:function(){var e=window.location.search;if(e.indexOf("view")==-1)return"";var t=e.match("[?|&]view=([^&]+)");if(t[1])return t[1]}}}),define("cdf/dashboard/Dashboard.views",["./Dashboard","../lib/base64","./Dashboard.views.ext","../lib/jquery"],function(e,t,n,r){e.implement({viewParameters:undefined,view:undefined,viewFlags:{UNUSED:"unused",UNBOUND:"unbound",VIEW:"view"},_initViews:function(){this.viewParameters={},!this.view&&this.viewObj&&(this.view={},r.extend(this.view,this.viewObj))},_disposeViews:function(){this.viewParameters={},this.view={}},restoreView:function(){var e,n;if(!this.view||!this.view.params)return;n=JSON.parse(t.decode(this.view.params));if(!n)return;if(r.isEmptyObject(n))this.view.params=n;else for(e in n)n.hasOwnProperty(e)&&this.setParameter(e,n[e])},setParameterViewMode:function(e,t){arguments.length===1?this.viewParameters[e]=this.viewFlags.VIEW:this.viewParameters[e]=t},isViewParameter:function(e){return this.viewParameters[e]},getViewParameters:function(){var e=this.viewParameters,t={};for(var n in e)e.hasOwnProperty(n)&&(e[n]==this.viewFlags.VIEW||e[n]==this.viewFlags.UNBOUND)&&(t[n]=this.getParameterValue(n));return t},getUnboundParameters:function(){var e=this.viewParameters,t=[];for(var n in e)if(e.hasOwnProperty(n))return e[n]==this.viewFlags.UNBOUND&&t.push(n),t}})}),define("cdf/dashboard/OptionsManager",["./Utils","amd!../lib/underscore","../lib/jquery"],function(e,t,n){function r(e,t,n,r){return e&&e[t]&&e[t].hasOwnProperty(n)?e[t][n]:r||undefined}function i(e,t,n,r){e&&t&&n&&(e[t]=e[t]||{},e[t][n]=r)}return function(s){function u(e,t){t=t||{},h(e,t.reader),p(e,t.writer),d(e,t.validator)}function a(e){return r(o._interfaces,e,"reader",o._libraries.mappers.identity)}function f(e){return r(o._interfaces,e,"writer",o._libraries.mappers.identity)}function l(e){return r(o._interfaces,e,"validator",o._libraries.predicates.tautology)}function c(e){return r(o._options,e,"value")}function h(e,n){var r=o._libraries.mappers;return n=t.isFunction(n)&&n||t.isString(n)&&r[n]||a(e)||r.identity,i(o._interfaces,e,"reader",n)}function p(e,n){var r=o._libraries.mappers;return n=t.isFunction(n)&&n||t.isString(n)&&r[n]||f(e)||r.identity,i(o._interfaces,e,"writer",n)}function d(e,n){var r=o._libraries.predicates;return n=t.isFunction(n)&&n||t.isString(n)&&r[n]||l(e)||r.tautology,i(o._interfaces,e,"validator",n)}function v(e,t){return i(o._options,e,"value",t)}var o=this;this._options={},this._interfaces={},this._libraries={predicates:{tautology:function(e){return!0},isFunction:t.isFunction,isPositive:function(e){return t.isNumber(e)&&e>0},isObjectOrPropertiesArray:function(e){return t.isArray(e)||t.isObject(e)},isObject:t.isObject,isArray:t.isArray},mappers:{identity:t.identity,propertiesObject:function(n){return t.isArray(n)?e.propertiesArrayToObject(n):n}}},this.mixin=function(e){e.getOption=this.getOption,e.setOption=this.setOption},this.init=function(e,r,i){var s=this;e=n.extend(!0,{},e),r=n.extend(!0,{},r),this._libraries=n.extend(!0,{},this._libraries,i),t.each(r,function(e,t){u(t,e)}),t.each(e,function(e,t){var n=r&&r[t]||{};u(t,n),v(t,e)})},this.setOption=function(e,t,n){u(e,n);var r=a(e),i=l(e);if(i(t))return t=r(t),v(e,t),!0;throw new Error("Invalid Option "+e.charAt(0).toUpperCase()+e.slice(1))},this.getOption=function(e){var t=f(e),n=c(e);return t(n)},this.init(s.defaults,s.interfaces,s.libraries)}}),define("cdf/queries/BaseQuery",["../lib/jquery","../lib/Base","amd!../lib/underscore","../Logger","../dashboard/Utils","../dashboard/OptionsManager","../dashboard/Dashboard.query"],function(e,t,n,r,i,s,o){var u=t.extend({_name:"baseQuery",get name(){return this._name},_label:"Base Query",get label(){return this._label},deepProperties:["defaults","interfaces"],dashboard:undefined,defaults:{successCallback:function(){r.log("Query success callback not defined. Override.")},errorCallback:function(e,t,n){if(this.dashboard&&i.isFunction(this.dashboard.handleServerError)){this.dashboard.handleServerError(e,t,n);return}r.log("Query error callback not defined. Override.")},lastResultSet:null,lastProcessedResultSet:null,page:0,pageSize:0,params:{},pushEnabled:!1,ajaxOptions:{async:!1,type:"POST"},url:""},interfaces:{params:{reader:"propertiesObject",validator:"isObjectOrPropertiesArray"},successCallback:{validator:"isFunction"},errorCallback:{validator:"isFunction"},pageSize:{validator:"isPositive"}},constructor:function(e){this._optionsManager=new s(this),this._optionsManager.mixin(this),this.init(e)},getOption:function(e){return this.defaults[e]},setOption:function(e,t){this.defaults[e]=t},init:function(e){},buildQueryDefinition:function(e){},getSuccessHandler:function(t){var n=this;return function(r){n.setOption("lastResultSet",r);var i=e.extend(!0,{},n.getOption("lastResultSet"));n.setOption("lastProcessedResultSet",i),r=t(i),r!==undefined&&r!==i&&n.setOption("lastProcessedResultSet",r)}},getErrorHandler:function(e){return function(t,n,r){e&&e(t,n,r)}},doQuery:function(t,r){if(!i.isFunction(this.getOption("successCallback")))throw"QueryNotInitialized";var s=n.extend({},this.getAjaxOptions(),{data:this.buildQueryDefinition(),url:this.getOption("url"),success:this.getSuccessHandler(t?t:this.getOption("successCallback")),error:this.getErrorHandler(r?r:n.bind(this.getOption("errorCallback"),this))});e.ajax(s)},exportData:function(){},setAjaxOptions:function(e){this.setOption("ajaxOptions",n.extend({},this.getOption("ajaxOptions"),e))},getAjaxOptions:function(){var t=this.getOption("ajaxOptions"),n=t.async==null?e.ajaxSettings.async:t.async;return!n&&t.xhrFields&&t.xhrFields.withCredentials&&(r.log("Cross-domain requests are deprecated for synchronous operations."),delete t.xhrFields.withCredentials),t},setSortBy:function(e){},sortBy:function(e,t){},fetchData:function(e,t,r){var s=arguments[0],o=arguments[1],u=arguments[2];switch(arguments.length){case 0:if(this.getOption("params")&&this.getOption("successCallback"))return this.doQuery();break;case 1:if(i.isFunction(s))return this.doQuery(s);if(!n.isEmpty(s)&&(n.isObject(s)||Array.isArray(s)))return this.setParameters(s||{}),this.doQuery();break;case 2:return i.isFunction(s)?(this.setCallback(s),i.isFunction(o)&&this.setErrorCallback(o)):(this.setParameters(s||{}),this.setCallback(o)),this.doQuery();default:return e&&this.setParameters(e),i.isFunction(o)&&this.setCallback(t),i.isFunction(u)&&this.setErrorCallback(r),this.doQuery()}throw"InvalidInput"},lastResults:function(){if(this.getOption("lastResultSet")!==null)return e.extend(!0,{},this.getOption("lastResultSet"));throw"NoCachedResults"},lastProcessedResults:function(){if(this.getOption("lastProcessedResultSet")!==null)return e.extend(!0,{},this.getOption("lastProcessedResultSet"));throw"NoCachedResults"},reprocessLastResults:function(t){if(this.getOption("lastResultSet")!==null){var n=e.extend(!0,{},this.getOption("lastResultSet")),r=t||this.getOption("successCallback");this.setOption("lastProcessedResultSet",n);var i=r(n);return i!==undefined&&i!==n&&this.setOption("lastProcessedResultSet",i),i}throw"NoCachedResults"},reprocessResults:function(e){return this.reprocessLastResults(e)},setParameters:function(e){this.setOption("params",e)},setCallback:function(e){this.setOption("successCallback",e)},setErrorCallback:function(e){this.setOption("errorCallback",e)},setSearchPattern:function(e){this.setOption("searchPattern",e)},nextPage:function(e){var t=this.getOption("page"),n=this.getOption("pageSize");if(n>0)return t+=n,this.setOption("page",t),this.doQuery(e);throw"InvalidPageSize"},previousPage:function(e){var t=this.getOption("page"),n=this.getOption("pageSize");if(t>n)return t-=n,this.setOption("page",t),this.doQuery(e);if(n>0)return this.setOption("page",0),this.doQuery(e);throw"AtBeginning"},getPage:function(e,t){var n=this.getOption("page"),r=this.getOption("pageSize");if(e*r==n)return!1;if(i.isNumber(e)&&e>=0)return this.setOption("page",e*r),this.doQuery(t);throw"InvalidPage"},setPageStartingAt:function(e){if(e==this.getOption("page"))return!1;if(!(i.isNumber(e)&&e>=0))throw"InvalidPage";this.setOption("page",e)},pageStartingAt:function(e,t){return this.setPageStartingAt(e)!==!1?this.doQuery(t):!1},setPageSize:function(e){this.setOption("pageSize",e)},initPage:function(e,t){if(e==this.getOption("pageSize")&&this.getOption("page")==0)return!1;if(i.isNumber(e)&&e>0)return this.setOption("page",0),this.setOption("pageSize",e),this.doQuery(t);throw"InvalidPageSize"},dispose:function(){},__getDashboardParameterValue:function(e,t){var s;try{s=this.dashboard.getParameterValue(t)}catch(o){var u=!n.isObject(t)||i.isFunction(t)?t:JSON.stringify(t);r.log("BuildQueryDefinition detected static parameter "+e+"="+u+". "+"The parameter will be used instead the parameter value")}return s!==undefined?s:t}});return o.setBaseQuery(u),u}),define("cdf/queries/CpkQuery",["../dashboard/Dashboard.ext","./BaseQuery","../dashboard/Dashboard.query","amd!../lib/underscore","../dashboard/Utils","../Logger","../lib/jquery"],function(e,t,n,r,i,s,o){"use strict";var u="cpk",a={_name:u,get name(){return this._name},_label:"CPK Query",get label(){return this._label},defaults:{url:"",pluginId:"",endpoint:"",systemParams:{},ajaxOptions:{dataType:"json",type:"POST",async:!0,xhrFields:{withCredentials:!0}}},init:function(t){r.isString(t.pluginId)&&r.isString(t.endpoint)&&(this.setOption("pluginId",t.pluginId),this.setOption("endpoint",t.endpoint),this.setOption("url",e.getPluginEndpoint(t.pluginId,t.endpoint))),this.setOption("kettleOutput",t.kettleOutput),this.setOption("stepName",t.stepName),this.setOption("systemParams",t.systemParams||{}),this.setAjaxOptions(t.ajaxOptions);var n=this.getOption("ajaxOptions");n.dataType==="json"&&(n.mimeType="application/json; charset utf-8",this.setAjaxOptions(n))},buildQueryDefinition:function(e){var t={kettleOutput:this.getOption("kettleOutput"),stepName:this.getOption("stepName")};t=o.extend(!0,{},t,this.getOption("systemParams")),e=Array.isArray(e)?i.propertiesArrayToObject(e):e||{};var n=this.getOption("params"),s=o.extend({},n,e);return r.each(s,function(e,n){var s=this.__getDashboardParameterValue(n,e);i.isFunction(s)?s=s():r.isObject(s)&&(s=JSON.stringify(s)),t["param"+n]=s},this),t},getSuccessHandler:function(e){var t=this;return function(n){t.setOption("lastResultSet",n);if(n&&n.result==0){var r=t.getErrorHandler(t.getOption("errorCallback"));r(i)}else{var i=o.extend(!0,{},t.getOption("lastResultSet"));t.setOption("lastProcessedResultSet",i),n=e(i),n!==undefined&&n!==i&&t.setOption("lastProcessedResultSet",n)}}}};n.registerGlobalQuery(u,a)}),define("cdf/queries/CdaQuery",["./CdaQuery.ext","./BaseQuery","../dashboard/Dashboard.query","amd!../lib/underscore","../dashboard/Utils","../Logger","../lib/jquery"],function(e,t,n,r,i,s,o){"use strict";var u="cda",a={_name:u,get name(){return this._name},_label:"CDA Query",get label(){return this._label},defaults:{url:e.getDoQuery(),websocketUrl:e.getWebsocketQuery(),file:"",id:"",outputIdx:"1",sortBy:"",pushEnabled:!1,ajaxOptions:{async:!0,xhrFields:{withCredentials:!0}},searchPattern:""},init:function(e){if(typeof e.path=="undefined"||typeof e.dataAccessId=="undefined")throw"InvalidQuery";this.setOption("file",e.path),this.setOption("id",e.dataAccessId),i.isString(e.sortBy)&&e.sortBy.match("^(?:[0-9]+[adAD]?,?)*$")&&this.setSortBy(e.sortBy),e.pageSize!=null&&this.setPageSize(e.pageSize),e.outputIndexId!=null&&this.setOption("outputIdx",e.outputIndexId),e.pushEnabled!=null&&this.setOption("pushEnabled",e.pushEnabled)},buildQueryDefinition:function(e){var t={};e=Array.isArray(e)?i.propertiesArrayToObject(e):e||{};var n=this.getOption("params"),s=o.extend({},n,e);return r.each(s,function(e,n){var r=this.__getDashboardParameterValue(n,e);Array.isArray(r)&&r.length===1&&String(r[0]).indexOf(";")>=0&&(r=i.doCsvQuoting(r[0],";")),i.isFunction(r)&&(r=r()),t["param"+n]=r},this),t.path=this.getOption("file"),t.dataAccessId=this.getOption("id"),t.outputIndexId=this.getOption("outputIdx"),t.pageSize=this.getOption("pageSize"),t.pageStart=this.getOption("page"),t.sortBy=this.getOption("sortBy"),t.paramsearchBox=this.getOption("searchPattern"),t},exportData:function(t,n,r){r=r!=null?r:{};var i=this.buildQueryDefinition(n);i.outputType=t,t==="csv"&&r.separator&&(i.settingcsvSeparator=r.separator),r.filename&&(i.settingattachmentName=r.filename),t==="xls"&&r.template&&(i.settingtemplateName=r.template),r.columnHeaders&&(i.settingcolumnHeaders=r.columnHeaders),r.exportPage===!1&&(i.pageSize=0,i.pageStart=0),r.dtFilter!=null&&(i.settingdtFilter=r.dtFilter,r.dtSearchableColumns!=null&&(i.settingdtSearchableColumns=r.dtSearchableColumns)),i.wrapItUp="true",o.ajax({type:"POST",dataType:"text",async:!0,data:i,url:this.getOption("url"),xhrFields:{withCredentials:!0}}).done(function(t){var n=o('<iframe style="display:none">');n.detach(),n[0].src=e.getUnwrapQuery({path:i.path,uuid:t}),n.appendTo(o("body"))}).fail(function(e,t,n){s.log("Request failed: "+e.responseText+" :: "+t+" ::: "+n)})},setSortBy:function(e){var t,n=this;if(e===null||e===undefined||e==="")t="";else if(i.isString(e)){if(!e.match("^(?:[0-9]+[adAD]?,?)*$"))throw"InvalidSortExpression";t=e.toUpperCase().split(",").filter(function(e){return e!==""})}else if(Array.isArray(e)){t=e.map(function(e){return e.toUpperCase()});var r=t.filter(function(e){return!e.match("^[0-9]+[adAD]?,?$")});if(r.length>0)throw"InvalidSortExpression"}var s;return Array.isArray(t)?(s=t.length!=n.getOption("sortBy").length,o.each(t,function(e,t){s=s&&t==n.getOption("sortBy")[e];if(!s)return!1})):s=t===this.getOption("sortBy"),this.setOption("sortBy",t),!s},sortBy:function(e,t){var n=this.setSortBy(e);if(!n)return!1;if(this.getOption("successCallback")!==null)return this.doQuery(t)},doQuery:function(e,t){if(!i.isFunction(this.getOption("successCallback")))throw"QueryNotInitialized";var n=e?e:this.getOption("successCallback"),s=t?t:r.bind(this.getOption("errorCallback"),this),u=this.buildQueryDefinition(),a=!0;if(this.getOption("pushEnabled")){var f=this;this.websocket=new WebSocket(this.getOption("websocketUrl"),"JSON-CDA-query"),this.websocket.onopen=function(e){f.websocket.send(JSON.stringify(u))},this.websocket.onmessage=function(e){var t=!a;a=!1,f.getSuccessHandler(function(e){return n(e,t)})(JSON.parse(e.data))},this.websocket.onerror=function(e){var t=!a;a=!1,f.getErrorHandler(function(e,n,r){s(e,n,r,t)})(e.data)},this.websocket.onclose=function(e){if(e.code===1011){var t=!a;a=!1,f.getErrorHandler(function(e,n,r){s(e,n,r,t)})(e.reason)}}}else{var l=r.extend({},this.getAjaxOptions(),{data:u,url:this.getOption("url"),success:this.getSuccessHandler(n),error:this.getErrorHandler(s)});o.ajax(l)}},dispose:function(){this.websocket&&(this.websocket.close(1e3),this.websocket=null)}};n.registerGlobalQuery(u,a)}),define("cdf/queries/XmlaQuery.ext",["pentaho/environment"],function(e){return{getXmla:function(){return e.server.root+"Xmla"}}}),define("cdf/queries/XmlaQuery",["amd!../lib/xmla","./XmlaQuery.ext","../lib/Base","./BaseQuery","../dashboard/Dashboard.query","../Logger","../lib/jquery"],function(e,t,n,r,i,s,o){var u=n.extend({xmla:null,datasource:null,catalogs:null,getDataSources:function(){var t=[],n=this.xmla.discoverDataSources();if(!n){s.warn("XML/A DISCOVER_DATASOURCES request failed");return}if(n.hasMoreRows()){t=n.fetchAllAsObject(),this.datasource=t[0];var r=this.datasource[e.PROP_DATASOURCENAME];r&&r.length>0&&(this.datasource[e.PROP_DATASOURCEINFO]=r),n.close()}},getCatalogs:function(){var t={},n={};if(!this.datasource||!this.datasource[e.PROP_DATASOURCEINFO]){s.warn("XML/A DBSCHEMA_CATALOGS request failed, missing "+e.PROP_DATASOURCEINFO);return}t[e.PROP_DATASOURCEINFO]=this.datasource[e.PROP_DATASOURCEINFO];var r=this.xmla.discoverDBCatalogs({properties:t});if(!r){s.warn("XML/A DISCOVER_DATASOURCES request failed");return}if(r.hasMoreRows()){this.catalogs=[];while(n=r.fetchAsObject())this.catalogs[this.catalogs.length]=n;r.close()}},discover:function(t){var n={},r=t.query();n[e.PROP_DATASOURCEINFO]=this.datasource[e.PROP_DATASOURCEINFO],t.catalog&&(n[e.PROP_CATALOG]=t.catalog);var i=this.xmla.discover({properties:n,requestType:r});return i},execute:function(t){for(var n=0,r=a.catalogs.length;n<r;n++)if(a.catalogs[n]["CATALOG_NAME"]==t.catalog){var i={};i[e.PROP_DATASOURCEINFO]=a.datasource[e.PROP_DATASOURCEINFO],i[e.PROP_CATALOG]=t.catalog,i[e.PROP_FORMAT]=a.PROP_FORMAT||e.PROP_FORMAT_TABULAR;var s=this.xmla.execute({statement:t.query(),properties:i});return s}throw new Error("Catalog: "+t.catalog+" was not found on Pentaho server.")}}),a=new u,f={name:"xmla",label:"XML/A Query",queryDefinition:{},defaults:{url:t.getXmla()},init:function(t){this.queryDefinition=o.extend({},this.getOption("params"),t),a.xmla==null&&(a.xmla=new e({async:!1,url:this.getOption("url")})),a.datasource==null&&a.getDataSources(),a.catalogs==null&&a.getCatalogs()},transformXMLAResults:function(t){var n,r,i,s={resultset:[],metadata:[]};t instanceof e.Rowset?(n=t.fetchAllAsArray(),r=t.getFields()):t instanceof e.Dataset;for(var o=0,u=r.length;o<u;o++){i=r[o],s.metadata[o]={colIndex:i.index,colName:i.label};switch(i.jsType){case"string":s.metadata[o].colType="string";break;case"number":s.metadata[o].colType="numeric";break;default:s.metadata[o].colType="string"}}return s.resultset=n,t.close(),s},doQuery:function(e){var t=this.getOption("url"),n=e?e:this.getOption("successCallback"),r=this.getOption("errorCallback");try{var i=this.transformXMLAResults(this._executeQuery());this.setOption("lastResultSet",i);var u=o.extend(!0,{},this.getOption("lastResultSet"));this.setOption("lastProcessedResultSet",u),i=n(u),i!==undefined&&i!==u&&this.setOption("lastProcessedResultSet",i)}catch(a){s.error("unable to execute the XML/A query: "+a+" :")}},_executeQuery:function(){return a.execute(this.queryDefinition)}};i.registerGlobalQuery("xmla",f);var l={name:"xmlaDiscover",label:"XML/A Discover Query",queryDefinition:{},defaults:{url:t.getXmla()},init:function(t){this.queryDefinition=o.extend({},this.getOption("params"),t),a.xmla==null&&(a.xmla=new e({async:!1,url:this.getOption("url")})),a.datasource==null&&a.getDataSources()},transformXMLADiscoverResults:function(e){var t=e.getFields(),n,r={resultset:[],metadata:[]};for(var i=0,s=t.length;i<s;i++){n=t[i],r.metadata[i]={colIndex:n.index,colName:n.label};switch(n.jsType){case"string":r.metadata[i].colType="string";break;case"number":r.metadata[i].colType="numeric";break;default:r.metadata[i].colType="string"}}return r.resultset=e.fetchAllAsArray(),e.close(),r},doQuery:function(e){var t=this.getOption("url"),n=e?e:this.getOption("successCallback"),r=this.getOption("errorCallback");try{var i=this.transformXMLADiscoverResults(this._executeDiscoverQuery());this.setOption("lastResultSet",i);var u=o.extend(!0,{},this.getOption("lastResultSet"));this.setOption("lastProcessedResultSet",u),i=n(u),i!==undefined&&i!==u&&this.setOption("lastProcessedResultSet",i)}catch(a){s.error("unable to execute the XML/A query: "+a+" :")}},_executeDiscoverQuery:function(){return a.discover(this.queryDefinition)}};i.registerGlobalQuery("xmlaDiscover",l)}),define("cdf/queries/SolrQuery",["./BaseQuery","../dashboard/Dashboard.query","../dashboard/Utils","../Logger","../lib/jquery"],function(e,t,n,r,i){"use strict";var s="param",o="solr",u={endpoint:"",collection:"",requestHandler:"select",q:"*:*",fq:null,fl:null,df:null,start:0,rows:10,wt:"json",rawQueryParameters:"",schemaColumnNames:[],schemaColumnTypes:[],schemaColumnPaths:[],ajaxOptions:{async:!0,type:"GET",xhrFields:{withCredentials:!0}}},a=["q","fq","fl","df","wt","start","rows"],f={_name:o,get name(){return this._name},_label:"Apache Solr Query",get label(){return this._label},_defaults:u,get defaults(){return this._defaults},getParameterMacros:function(e){var t={},r=this.getOption("params"),s=i.extend({},r,e);for(var o in s)if(s.hasOwnProperty(o)){var u=this.__getDashboardParameterValue(o,s[o]);n.normalizeValue(u)!==null&&(n.isString(u)&&(u=u.split(/\s*,\s*/)),t[o]=u)}return t},getSolrQueryParameters:function(){var e={},t=this.getOption("rawQueryParameters");return n.normalizeValue(t)!==null&&t.split("&").forEach(function(t){var n=t.split("="),r=n[0],i=n[1];r!=null&&i!=null&&(e[r]=i)}),a.forEach(function(t){var r=this.getOption(t);if(n.normalizeValue(r)!==null){var i=t==="q";i&&(r=this.__expandQueryMacros(r)),e[t]=r}},this),e},init:function(e){if(e.endpoint==null||e.collection==null)throw"InvalidQuery";for(var t in e)e.hasOwnProperty(t)&&this.setOption(t,e[t]);this.setOption("url",this.__buildSolrUrl())},exportData:function(e,t,r){r.exportType=e,n.normalizeValue(e)!==null&&this.setOption("wt",e);var s=this.getAjaxOptions();s.url=this.getOption("url"),s.data=this.buildQueryDefinition(t),s.success=this.__exportDataSuccess.bind(this,r),s.error=this.getErrorHandler(this.getOption("errorCallback").bind(this)),i.ajax(s)},buildQueryDefinition:function(e){var t=i.extend({},this.getSolrQueryParameters());e=Array.isArray(e)?n.propertiesArrayToObject(e):e||{};var r=this.getParameterMacros(e);for(var s in r)if(r.hasOwnProperty(s)){var o=r[s],u=Array.isArray(o);if(u){var a=o.length,f=a>1;for(var l=0;l<a;l++){var c=f?"_"+l:"";t[s+c]=o[l]}}t[s]=u?o.join(","):o}return t},getSuccessHandler:function(e){var t=this.base(e),n=this;return function(i){var s=null;try{s=JSON.parse(i)}catch(o){r.error("Could not parse json result "+i,o)}var u=[],a=[],f={};if(s){var l=s.response,c=l?l.docs:[],h=n.__buildSchema();f.totalRows=String(c.length),u=h.columnNames.map(function(e,t){var n=h.columnTypes[t];return{colName:e,colType:n,colIndex:t}}),a=c.map(function(e){return h.columnPaths.map(function(t){return n.__search(e,t)})})}t({metadata:u,resultset:a,queryInfo:f})}},__exportDataSuccess:function(e,t){var n=typeof Blob!="undefined";e.exportType==="json"&&(t=JSON.stringify(t,null,2));var r;if(n){var i=new Blob([t],{type:"octet/stream"});r=window.URL.createObjectURL(i)}else r=this.getOption("url");this.__exportDataDownload(r,e),n&&window.URL.revokeObjectURL(r)},__exportDataDownload:function(e,t){var n=document.createElement("a"),i=n.download!=null;i?(n.setAttribute("href",e),n.setAttribute("download",this.__getExportDataName(t)),n.setAttribute("type",this.__getExportMineType(t)),n.setAttribute("style","visibility: hidden;"),document.body.appendChild(n),n.click(),document.body.removeChild(n)):r.warn("Can not export the query data on this browser!")},__replaceSchemaMacros:function(e){var t=this.getOption(e);if(!n.normalizeValue(t))return t;var r=this.getParameterMacros();return t.map(function(e){return e.replace(/\${(\w+)}/g,function(e,t){return r[t]})})},__expandQueryMacros:function(e){var t=new RegExp("(\\w+):\\${(\\w+)(?::[^}]+)?}","g"),n=this.getParameterMacros();return e.replace(t,function(e,t,r){var i=n[r];if(!Array.isArray(i))return e;var s=i.length,o=s>1,u="";for(var a=0;a<s;a++){u!==""&&(u+=" OR ");var f=o?"_"+a:"";u+=t+":${"+r+f+"}"}return o&&(u="("+u+")"),u})},__search:function(e,t){var n=e[t];return Array.isArray(n)&&(n=n[0]),n!==undefined?n:null},__buildSchema:function(){var e=this.__replaceSchemaMacros("schemaColumnNames"),t=this.__replaceSchemaMacros("schemaColumnTypes"),n=this.__replaceSchemaMacros("schemaColumnPaths");return{columnNames:e,columnTypes:t,columnPaths:n.length?n:e}},__buildSolrUrl:function(){var e=this.getOption("endpoint");e.endsWith("/")&&(e=e.slice(0,-1));var t=this.getOption("collection"),n=this.getOption("requestHandler");return e+"/"+t+"/"+n},__getExportMineType:function(e){switch(e.exportType){case"csv":return"text/csv";case"json":return"application/json";case"xml":return"application/xml";default:return"text/plain"}},__getExportDataName:function(e){var t=e.filename;return n.normalizeValue(t)===null&&(t="solr-export."+e.exportType),t}};t.registerGlobalQuery(o,f)}),define("cdf/Dashboard",["./dashboard/Dashboard","./dashboard/Dashboard.context","./dashboard/Dashboard.addIns","./dashboard/Dashboard.bookmarkable","./dashboard/Dashboard.components","./dashboard/Dashboard.i18n","./dashboard/Dashboard.legacy","./dashboard/Dashboard.lifecycle","./dashboard/Dashboard.notifications","./dashboard/Dashboard.parameters","./dashboard/Dashboard.storage","./dashboard/Dashboard.dataSources","./dashboard/Dashboard.query","./dashboard/Dashboard.views","./queries/BaseQuery","./queries/CpkQuery","./queries/CdaQuery","./queries/XmlaQuery","./queries/SolrQuery","./components/BaseComponent","./components/UnmanagedComponent","css!./Dashboard"],function(e){return e}),define("cdf/Dashboard.Clean",["./Dashboard"],function(e){return e}),define("cdf/components/InputBaseComponent",["./UnmanagedComponent","amd!../lib/underscore","../dashboard/Utils"],function(e,t,n){return e.extend({update:function(){var e=this.queryDefinition;if(this.valuesArray&&this.valuesArray.length>0){var n=t.bind(function(){this.draw(this.valuesArray)},this);this.synchronous(n)}else if(e){var n=t.bind(function(e){var t;this.valueAsId?t=e.resultset.map(function(e){return[e[0],e[0]]}):t=e.resultset,this.draw(t)},this);this.triggerQuery(e,n)}else{var n=t.bind(function(){var e=this.getValuesArray();this.draw(e)},this);this.synchronous(n)}},_getParameterValue:function(){return n.normalizeValue(n.ev(this.dashboard.getParameterValue(this.parameter)))}})}),define("common-ui/util/require-css/css!cdf/lib/chosen/chosen",[],function(){}),define("common-ui/util/require-css/css!cdf/lib/hynds/jquery.multiselect",[],function(){}),define("common-ui/util/require-css/css!cdf/lib/select2/select2",[],function(){}),define("cdf/components/SelectBaseComponent",["./InputBaseComponent","../Logger","../lib/jquery","amd!../lib/underscore","../dashboard/Utils","amd!../lib/jquery.chosen","amd!../lib/jquery.multiselect","amd!../lib/jquery.select2"],function(e,t,n,r,i){return e.extend({visible:!1,draw:function(e){var s=this.placeholder();if(s.length===0)return t.warn("Placeholder not in DOM - Will not draw"),!1;var o=this.name,u="<select",a=this._allowMultipleValues();a&&(u+=" multiple");var f=this._getPlaceholderText();f&&(u+=" data-placeholder='"+f+"'");var l=this._getListSize(e);l!=null&&(u+=" size='"+l+"'",e.length>l&&(u+=" style='overflow-y: scroll;' "));var c=this.externalPlugin;switch(c){case"chosen":u+=" class='chzn-select'";break;case"hynds":u+=" class='hynds-select'";break;case"select2":u+=" class='select2-container'"}u+=">";var h=this._getParameterValue(),p=i.parseMultipleValues(!r.isNaN(h)&&r.isNumber(h)?h+"":h),d={},v;i.eachValuesArray(e,{valueAsId:this.valueAsId},function(e,t,n,r){u+="<option value = '"+i.escapeHtml(e)+"' >"+i.escapeHtml(t)+"</option>",r||(v=e),d[e]=!0},this),u+="</select>",s.html(u);var m=!0;if(p!=null){var g=p.length;while(g--)d[p[g]]!==!0&&(m=!1,p.splice(g,1));p.length||(p=null)}var y=p==null,b=!m;y&&this.useFirstValue&&v!=null&&(p=[v],b=!0),n("select",s).val(p==null?[]:p),a&&(this.autoTopValue!=null?(this.topValue(this.autoTopValue),delete this.autoTopValue):this.autoTopIndex!=null&&(this.topIndex(this.autoTopIndex),delete this.autoTopIndex)),this._doAutoFocus(),b&&(this.dashboard.setParameter(this.parameter,p),this.dashboard.processChange(o));switch(c){case"chosen":var w=n.browser;n.browser="",s.find("select.chzn-select").chosen(this._readExtraOptions()),n.browser=w;break;case"hynds":s.find("select.hynds-select").multiselect({multiple:a});break;case"select2":var E=this._readExtraOptions()||{};typeof E.dropdownAutoWidth=="undefined"&&(E.dropdownAutoWidth=!0),E.width||(E.width="off");var S=i.clone(E);S.dropdownParentId&&(S.dropdownParent=n("#"+S.dropdownParentId)),s.find("select.select2-container").select2(S)}this._listenElement(s)},_allowMultipleValues:function(){return!1},_getPlaceholderText:function(){var e=this.placeholderText;return r.isString(e)&&!r.isEmpty(e)&&e||!1},_getListSize:function(e){return this.size},_readExtraOptions:function(){if(this.externalPlugin&&this.extraOptions)return i.propertiesArrayToObject(this.extraOptions)},_listenElement:function(e){var t=this,r=t.getValue(),s,o=function(){s&&s();var e=t.dashboard;if(e){var n=t.getValue();i.equalValues(r,n)||(r=n,e.processChange(t.name))}},u=n("select",e);u.keypress(function(e){e.which===13&&o()});var a=this._getChangeMode();if(a!=="timeout-focus")u.on(t._changeTrigger(),o);else{var f=t.changeTimeoutScrollFraction;f=Math.max(0,f!=null?f:1);var l=t.changeTimeoutChangeFraction;l=Math.max(0,l!=null?l:5/8);var c=Math.max(100,t.changeTimeout||2e3),h=f*c,p=l*c,d;s=function(){d!=null&&(clearTimeout(d),d=null)};var v=function(e){s(),t.dashboard&&(d=setTimeout(o,e||c))};u.change(function(){v(p)}).scroll(function(){v(h)}).focusout(o)}},_getChangeMode:function(){var e=this.changeMode;if(e){e=e.toLowerCase();switch(e){case"immediate":case"focus":return e;case"timeout-focus":if(/android|ipad|iphone/i.test(navigator.userAgent))return"focus";return e;default:t.log("Invalid 'changeMode' value: '"+e+"'.","warn")}}return"immediate"},_changeTrigger:function(){return this._getChangeMode()==="immediate"?"change":/android/i.test(navigator.userAgent)?"change":"focusout"}})}),define("cdf/components/SelectComponent",["./SelectBaseComponent"],function(e){return e.extend({useFirstValue:!0,getValue:function(){return this.placeholder("select").val()}})}),define("cdf/components/SelectMultiComponent",["./SelectBaseComponent","../lib/jquery"],function(e,t){return e.extend({getValue:function(){var e=this.placeholder("select"),t=e.val();return t==null?[]:t},_allowMultipleValues:function(){return this.isMultiple==null||!!this.isMultiple},_getListSize:function(e){var t=this.base(e);return t==null&&(this._allowMultipleValues()||(t=e.length)),t},topIndex:function(e){var t=this.placeholder("select"),n=t[0],r=n.length;if(!r)return arguments.length?this:0;var i=Math.max(1,n.scrollHeight),s=Math.max(1,i/r);if(arguments.length){var o=+e;return o=isNaN(o)?0:Math.max(0,Math.min(o,r-1)),t.scrollTop(Math.ceil(o*s)),this}return Math.round(t.scrollTop()/s)},indexOf:function(e){if(e!=null){var t=this.placeholder("select option"),n=t.length;if(n){e=String(e);for(var r=0;r<n;r++)if(t[r].value===e)return r}}return-1},valueAt:function(e){if(e>=0)return this.placeholder("select :nth-child("+(e+1)+")").val()},topValue:function(e){if(arguments.length){var t=this.indexOf(e);return t>=0&&this.topIndex(t),this}return this.valueAt(this.topIndex())}})}),define("cdf/components/ToggleButtonBaseComponent",["../lib/jquery","./InputBaseComponent","../dashboard/Utils"],function(e,t,n){return t.extend({draw:function(t){var r=this,i=r.dashboard.getParameterValue(r.parameter);i=typeof i=="function"?i():i;var s=!1,o=[];i==null||i==undefined?o=[]:i instanceof Array||typeof i=="object"&&i.join?o=i:typeof i=="string"&&(o=i.split("|"));var u=r.valueAsId==0?0:1,a=!1;e:for(var f=0;f<o.length;f++)for(var l=0;l<t.length;l++)if(o[f]==t[l][u]){a=!0;break e}!a&&r.useFirstValue&&(o=[t[0][u]],r.currentVal=o,r.dashboard.setParameter(r.parameter,o),r.dashboard.processChange(r.name));var c=r.verticalOrientation?"toggleGroup vertical":"toggleGroup horizontal",h=e("<ul/>").attr({"class":c});for(var f=0,p=t.length;f<p;f++){var d=e("<li/>").attr({"class":c}),v=e("<input/>").click(function(){r.callAjaxAfterRender(r,r.name)});s=!1;for(var m=0,g=o.length;m<g;m++){s=o[m]==t[f][u];if(s)break}r.type=="radio"||r.type.toLowerCase()=="radiocomponent"?((f==0&&!a||a&&t[f][u]==i)&&v.prop("checked",!0),v.attr({type:"radio"})):((f==0&&!a&&r.useFirstValue||a&&s)&&v.prop("checked",!0),v.attr({type:"checkbox"})),v.attr({"class":r.name,name:r.name,id:r.name+f,value:t[f][u]}),v.appendTo(d);var y=n.sanitizeHtml(t[f][1]);d.append(e("<label/>").attr({"for":r.name+f}).html(y)),h.append(d).append(r.separator==undefined||r.separator==null||r.separator=="null"?"":r.separator)}r.placeholder().html(h),r.currentVal=null,r._doAutoFocus()},callAjaxAfterRender:function(e,t){var n=e;setTimeout(function(){n.dashboard.processChange(t)},1)}})}),define("cdf/components/RadioComponent",["./ToggleButtonBaseComponent","../lib/jquery"],function(e,t){return e.extend({getValue:function(){return this.currentVal!="undefined"&&this.currentVal!=null?this.currentVal:this.placeholder("."+this.name+":checked").val()}})}),define("cdf/components/CheckComponent",["../lib/jquery","./ToggleButtonBaseComponent"],function(e,t){return t.extend({getValue:function(){if(this.currentVal!="undefined"&&this.currentVal!=null)return this.currentVal;var t=new Array;return this.placeholder("."+this.name+":checked").each(function(n,r){t.push(e(this).val())}),t}})}),define("common-ui/util/require-css/css!cdf/components/MultiButtonComponent",[],function(){}),define("cdf/components/MultiButtonComponent",["../lib/jquery","./ToggleButtonBaseComponent","../dashboard/Utils","css!./MultiButtonComponent.css"],function(e,t,n){function r(e){return"pentaho-toggle-button pentaho-toggle-button-up "+(e?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")}function i(e){return"pentaho-toggle-button pentaho-toggle-button-down "+(e?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")}function s(e){return"pentaho-toggle-button pentaho-toggle-button-up "+(e?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")}function o(e,t,n){return e==0&&t==1?" pentaho-toggle-button-single":e==0?n?" pentaho-toggle-button-vertical-first":" pentaho-toggle-button-horizontal-first":e==t-1?n?" pentaho-toggle-button-vertical-last":" pentaho-toggle-button-horizontal-last":""}function u(){return"pentaho-toggle-button"}function a(){return"pentaho-toggle-button-up-hovering"}return t.extend({indexes:[],draw:function(t){this.cachedArray=t;var i=this,s=r(i.verticalOrientation),f="",l,c=i.valueAsId?1:0,h=1;i.isMultiple==undefined&&(i.isMultiple=!1);var p=e("<div>");p.appendTo(i.placeholder().empty());for(var d=0,v=t.length;d<v;d++){var m=t[d][c],g=t[d][h],y=s+o(d,v,i.verticalOrientation),b;m=m==null?null:m.replace('"',"&quot;"),g=g==null?null:g.replace('"',"&quot;"),d==0&&(l=m),f="<div class='"+y+"'><button type='button' name='"+i.name+"'>"+g+"</button  >"+"</div>",b=e(f),function(e){b.click(function(){i.clickButton(i.htmlObject,i.name,e,i.isMultiple,i.verticalOrientation)})}(d),p.append(b);var w=i.separator;w!=undefined&&w!=null&&w!="null"&&d!=t.length-1&&p.append(w)}var E=n.ev(i.dashboard.getParameterValue(i.parameter)),S=!1,x;E==null||E==undefined?x=[]:E instanceof Array||typeof E=="object"&&E.join?x=E:x=E.toString().split("|");var T=!1;i.clearSelections(i.htmlObject,i.name,i.verticalOrientation);for(var d=0;d<t.length;d++){S=!1;for(var N=0,C=x.length;N<C;N++){S=x[N]==t[d][c];if(S)break}if(e.isArray(E)&&S||S||t[d][c]==E||t[d][h]==E){i.clickButton(i.htmlObject,i.name,d,i.isMultiple,i.verticalOrientation,!0),T=!0;if(!i.isMultiple)break}}(!T&&!i.isMultiple||!T&&i.isMultiple&&i.useFirstValue)&&t.length>0&&((E==null||E==""||E!==l&&t.length==1||typeof E=="object"&&E.length==0)&&i.parameter&&i.dashboard.fireChange(i.parameter,i.isMultiple?[l]:l),i.clickButton(i.htmlObject,i.name,0,i.isMultiple,i.verticalOrientation,!0)),e("."+u()).hover(function(){e(i).addClass(a())},function(){e(i).removeClass(a())}),e("."+u()+" button").hover(function(){e(i).parent().addClass(a())},function(){}),i._doAutoFocus()},getValue:function(){var e=this;if(e.isMultiple){var t=e.getSelectedIndex(e.name),n=new Array;if(t.length==undefined)n.push(e.getValueByIdx(t));else for(var r=0;r<t.length;r++)n.push(e.getValueByIdx(t[r]));return n}return e.getValueByIdx(e.getSelectedIndex(e.name))},getValueByIdx:function(e){return this.cachedArray[e][this.valueAsId?1:0]},clickButton:function(t,n,r,u,a,f){var l=s(a),c=i(a),h=e("#"+t+" button");if(u){this.indexes[n]==undefined?this.indexes[n]=[]:e.isArray(this.indexes[n])||(this.indexes[n]=[this.indexes[n]]);var p=!1;for(var d=0;d<this.indexes[n].length;++d)if(this.indexes[n][d]==r){p=!0,this.indexes[n].splice(d,1);break}p?h[r].parentNode.className=l+o(r,h.length,a):(h[r].parentNode.className=c+o(r,h.length,a),this.indexes[n].push(r))}else{if(this.indexes[n]===r)return!1;this.clearSelections(t,n,a),this.indexes[n]=r,h[r].parentNode.className=c+o(r,h.length,a)}f||this.callAjaxAfterRender(this,n)},clearSelections:function(t,n,r){var i=e("#"+t+" button"),u=s(r);for(var a=0;a<i.length;a++)i[a].parentNode.className=u+o(a,i.length,r);this.indexes[n]=[]},getSelectedIndex:function(e){return this.indexes[e]}})}),define("cdf/components/TextInputComponent",["../lib/jquery","./BaseComponent","../Logger"],function(e,t,n){return t.extend({update:function(){var t=this;t._addHtmlToPlaceholder();var n=e("#"+t.name);n.val(t.dashboard.getParameterValue(t.parameter)),n.change(function(){t.dashboard.getParameterValue(t.parameter)!==n.val()&&t.dashboard.processChange(t.name)}).keyup(function(e){e.keyCode==13&&t.dashboard.getParameterValue(t.parameter)!==n.val()&&t.dashboard.processChange(t.name)}),t._doAutoFocus()},getValue:function(){return e("#"+this.name).val()},_addHtmlToPlaceholder:function(){function r(e){var t=[];for(prop in e)e.hasOwnProperty(prop)&&e[prop]!=null&&t.push(prop+'="'+e[prop]+'"');return t.join(" ")}var e={type:"text",id:this.name,name:this.name,size:this.size||this.charWidth||undefined,maxlength:this.maxLength||this.maxChars||undefined},t="<input "+r(e)+">";this.size&&n.warn("Attribute 'size' is deprecated"),this.maxLength&&n.warn("Attribute 'maxLength' is deprecated"),this.placeholder().html(t)}})}),define("dojo/_base/window",["./kernel","./lang","../sniff"],function(e,t,n){var r={global:e.global,doc:this.document||null,body:function(t){return t=t||e.doc,t.body||t.getElementsByTagName("body")[0]},setContext:function(t,n){e.global=r.global=t,e.doc=r.doc=n},withGlobal:function(t,n,i,s){var o=e.global;try{return e.global=r.global=t,r.withDoc.call(null,t.document,n,i,s)}finally{e.global=r.global=o}},withDoc:function(t,i,s,o){var u=r.doc,a=n("quirks"),f=n("ie"),l,c,h;try{return e.doc=r.doc=t,e.isQuirks=n.add("quirks",e.doc.compatMode=="BackCompat",!0,!0),n("ie")&&(h=t.parentWindow)&&h.navigator&&(l=parseFloat(h.navigator.appVersion.split("MSIE ")[1])||undefined,c=t.documentMode,c&&c!=5&&Math.floor(l)!=c&&(l=c),e.isIE=n.add("ie",l,!0,!0)),s&&typeof i=="string"&&(i=s[i]),i.apply(s,o||[])}finally{e.doc=r.doc=u,e.isQuirks=n.add("quirks",a,!0,!0),e.isIE=n.add("ie",f,!0,!0)}}};return n("extend-dojo")&&t.mixin(e,r),r}),define("dijit/main",["dojo/_base/kernel"],function(e){return e.dijit}),define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(e,t,n,r){var i={},s={},o={length:0,add:function(e){if(s[e.id])throw new Error("Tried to register widget with id=="+e.id+" but that id is already registered");s[e.id]=e,this.length++},remove:function(e){s[e]&&(delete s[e],this.length--)},byId:function(e){return typeof e=="string"?s[e]:e},byNode:function(e){return s[e.getAttribute("widgetId")]},toArray:function(){var e=[];for(var t in s)e.push(s[t]);return e},getUniqueId:function(e){var t;do t=e+"_"+(e in i?++i[e]:i[e]=0);while(s[t]);return r._scopeName=="dijit"?t:r._scopeName+"_"+t},findWidgets:function(e,t){function r(e){for(var i=e.firstChild;i;i=i.nextSibling)if(i.nodeType==1){var o=i.getAttribute("widgetId");if(o){var u=s[o];u&&n.push(u)}else i!==t&&r(i)}}var n=[];return r(e),n},_destroyAll:function(){r._curFocus=null,r._prevFocus=null,r._activeStack=[],e.forEach(o.findWidgets(n.body()),function(e){e._destroyed||(e.destroyRecursive?e.destroyRecursive():e.destroy&&e.destroy())})},getEnclosingWidget:function(e){while(e){var t=e.nodeType==1&&e.getAttribute("widgetId");if(t)return s[t];e=e.parentNode}return null},_hash:s};return r.registry=o,o}),define("common-ui/util/require-css/css!common-ui/prompting/components/DojoDateTextBoxComponent",[],function(){}),define("common-ui/prompting/components/DojoDateTextBoxComponent",["cdf/components/BaseComponent","dojo/date/locale","dijit/form/DateTextBox","dijit/registry","amd!cdf/lib/jquery.ui","css!./DojoDateTextBoxComponent.css"],function(e,t,n,r,i){return e.extend({localeFormatter:t,clear:function(){this.onChangeHandle&&this.onChangeHandle.remove();var e=r.byId(this.dijitId);e&&e.destroyRecursive()},_parseDate:function(e){return this.transportFormatter?this.transportFormatter.parse(e):this.localeFormatter.parse(e,{datePattern:this.dateFormat,selector:"date"})},update:function(){this.dijitId==undefined&&(this.dijitId=this.htmlObject+"_input"),this.clear();var e=this,t=this.dashboard.getParameterValue(this.parameter),r=undefined;this._isLegacyDateFormat()&&this._convertFormat(),t?(i.isArray(t)&&(t=t.length==0?undefined:t.length==1?t[0]:t),t?r=this._parseDate(t):r=null):r=null,i("#"+this.htmlObject).html(i("<input/>").attr("id",this.dijitId));var s={datePattern:this._getDateFormat(),selector:"date",formatLength:"medium"};e.startDate=="TODAY"?s.min=new Date:e.startDate&&(s.min=this._parseDate(e.startDate)),e.endDate=="TODAY"?s.max=new Date:e.endDate&&(s.max=this._parseDate(e.endDate));var o=new n({name:this.name,constraints:s,onChange:function(){e.dashboard.processChange(e.name)}},this.dijitId);this._getDateFormat().match(/(^|(?!y).)(y{2}(?!y))/)&&(o.constraints.fullYear=!1),o.set("value",r),this._doAutoFocus()},getValue:function(){var e=r.byId(this.dijitId).get("value");return this._getFormattedDate(e)},_getFormattedDate:function(e){return this.transportFormatter?this.transportFormatter.format(e):this.localeFormatter.format(e,{datePattern:this._getDateFormat(),selector:"date"})},_isLegacyDateFormat:function(){var e,t=this._getDateFormat();if(t.match(/o/))return!0;try{e=this.localeFormatter.format(new Date,{datePattern:t,selector:"date"})}catch(n){return!0}return t.match(/(G|qQ|w|E|a|h|H|K|k|s|S|vz|Z)/)?!1:e==i.datepicker.formatDate(t,new Date)},_convertFormat:function(){var e=this;e.dateFormat=this._getDateFormat();var t=[[/(^|(?!y).)(y{1}(?!y))/,"$1yy"],[/(^|(?!y).)(y{2}(?!y))/,"$1yyyy"]],n=[[/(^|(?!M).)(M{1}(?!M))/,"$1MMM"],[/(^|(?!M).)(M{2}(?!M))/,"$1MMMM"]],r=[[/(^|(?!m).)(m{1}(?!m))/,"$1M"],[/(^|(?!m).)(m{2}(?!m))/,"$1MM"]],s=[[/(^|(?!D).)(D{1}(?!D))/,"$1EEE"],[/(^|(?!D).)(D{2}(?!D))/,"$1EEEE"]],o=[[/(^|(?!o).)(o{1}(?!o))/,"$1D"],[/(^|(?!o).)(o{2}(?!o))/,"$1DD"],[/(^|(?!o).)(o{3}(?!o))/,"$1DDD"]],u=function(t,n){if(n[0].test(e.dateFormat))return e.dateFormat=e.dateFormat.replace(n[0],n[1]),!1};i.each(t,u),i.each(n,u),i.each(r,u),i.each(s,u),i.each(o,u)},_getDateFormat:function(){return this.dateFormat?this.dateFormat:this.param&&this.param.attributes["data-format"]?this.param.attributes["data-format"]:"yyyy-MM-dd"}})});var jsonDebug=!1,trace=null;define("dashboards/pentaho-json",function(){}),define("dashboards/pentaho-dashboard-controller",["cdf/components/BaseComponent","cdf/Dashboard.Clean","amd!cdf/lib/backbone","cdf/components/SelectComponent","cdf/components/SelectMultiComponent","cdf/components/RadioComponent","cdf/components/CheckComponent","cdf/components/MultiButtonComponent","cdf/components/TextInputComponent","common-ui/prompting/components/DojoDateTextBoxComponent","amd!cdf/lib/jquery.blockUI","dashboards/oss-module","dashboards/pentaho-json"],function(BaseComponent,CdfDashboard,Backbone,SelectComponent,SelectMultiComponent,RadioComponent,CheckComponent,MultiButtonComponent,TextInputComponent,DojoDateTextBoxComponent,$){function isInMobile(){return typeof inMobile!="undefined"&&inMobile===!0}function getScrollWidth(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),t-r}function getHead(e){return e.getElementsByTagName("head").item(0)}function getBase(e){return getHead(e).getElementsByTagName("base").item(0)}function getBaseUri(e){var t=e.document,n=getBase(t),r;return n?r=n.href:t.baseURI?r=t.baseURI:r=e.location.href,r}function getUriParts(e){var t=/^((\w+):\/\/([^\/:]+)(:[^\/]+)?)?(\/?([^\/\?#]+\/)+)?([^\/\?#]+)?(\?[^#]*)?(#.+)?$/,n=t.exec(e);if(n[5]){var r=n[5].split("/");n[5]=[];for(var i=0,s=r.length;i<s;i++)n[5][i]=decodeURIComponent(r[i])}if(n[8]){var o=n[8].substr(1).split("&"),u;n[8]={};for(var i=0,s=o.length;i<s;i++)u=o[i].split("="),n[8][u[0]]=u.length>1?decodeURIComponent(u[1]):""}return{protocol:n[2],host:n[3],port:n[4]?parseInt(n[4].substr(1),10):null,path:n[5],resource:n[7],query:n[8],hash:n[9]}}function getStylesheetAsCssText(e){var t="";if(e.cssText)t=e.cssText;else{var n=e.cssRules||e.rules,r=n.length,i,s,o;for(i=0;i<r;i++)s=n.item(i),o=s.cssText,o.indexOf("@import")===-1?t+="\n"+o:t+=getStylesheetAsCssText(s.styleSheet,styles,usedStyles)}return t}function getStyles(e,t,n){var r=e.document,i=r.styleSheets,s=i.length,o,u,a,f,l,c,h,p,d,v=getBaseUri(e),m=getUriParts(v);rewriteBaseUri(m);for(u=0;u<s;u++){o=i.item(u);if(o.type!=="text/css"||o.disabled)continue;var d=o.href;if(d){var g=o.ownerNode||o.owningElement;if(g&&g.rel!=="stylesheet")continue;d=makeAbsoluteUris(d,m);if(t[d])continue;t[d]=d}else{var l=getStylesheetAsCssText(o),h,p=n.length,y=!0;for(h=0;h<p;h++)if(n[h]===l){y=!1;break}y&&n.push(l)}}}function restoreStyles(e,t){var n="",r,i=t.length,s,o=0,u='<style type="text/css">',a="</style>";for(r=0;r<i;r++)n+="\n"+t[r];n=u+n+a,n+=u;for(s in e)r=s.indexOf(CONTEXT_PATH),r===-1?console&&console.log&&console.log("unrewriteable uri: "+s):(s=s.substr(r+CONTEXT_PATH.length),s=FULL_QUALIFIED_URL+s),o++,o===30&&(n+=a+u,o=0),n+="\n@import url("+s+");";return n+=a,n}function stripLink(e){return stripTags(e,"link")}function stripStyle(e){return stripTags(e,"style")}function stripScript(e){return stripTags(e,"script")}function stripObject(e){return stripTags(e,"object")}function stripMeta(e){return stripTags(e,"meta")}function stripTitle(e){return stripTags(e,"title")}function stripAll(e){return e=stripScript(e),e=stripObject(e),e=stripLink(e),e=stripStyle(e),e=stripImages(e),e}function stripTags(e,t){var n=e.toUpperCase(),r=t.toUpperCase(),i,s,o,u,a,f="</"+r+">",l=f.length,c;do{i=n.indexOf("<"+r);if(i===-1)break;o=e.substr(0,i),u=e.substr(i),a=n.substr(i),s=a.indexOf(f),s===-1?(c=a.indexOf(">"),e=o+u.substr(c+1),n=o+a.substr(c+1)):(e=o+u.substr(s+l),n=o+a.substr(s+l))}while(!0);return e}function stripImages(e){var t=/src=("[^"]*"|'[^']*')/mgi,n,r;while(r=t.exec(e)){n=r[1],n=n.substr(1,n.length-2);var i=/^\s*data:/;if(i.test(n))continue;i=/\/getImage/;if(i.test(n))continue;e=e.replace(n,"")}return e}function rewriteBaseUri(e){var t=FULL_QUALIFIED_URL,n,r,i=e.path,s=i?i.length:0,o;n=getUriParts(t),r=n.path,r[r.length-1]===""&&(r=r.slice(0,r.length-1)),e.protocol=n.protocol,e.port=n.port;for(o=0;o<s;o++){if(i[o]!=="content")continue;e.path=n.path.concat(i.slice(o));break}}function makeAbsoluteUris(e,t){try{var n=/\s+(src|href)=(('[^']*')|("[^"]*"))/ig,r,i,s=t.path,o=s?s.length:0,u,a=[],f=t.protocol+"://"+t.host+(t.port?":"+t.port:""),l;for(u=0;u<o;u++)a.push(encodeURIComponent(s[u]));l=f+a.join("/");while(r=n.exec(e)){i=r[2].substr(1,r[2].length-2);if(i===""||i==="#"||i.indexOf("data:")===0)continue;uriParts=getUriParts(i);if(uriParts.protocol)continue;i=(i.indexOf("/")?l:f)+i;var c=r[2].charAt(0);i=" "+r[1]+"="+c+i+c,e=e.substr(0,r.index)+i+e.substr(r.index+r[0].length),n.lastIndex=r.index+i.length}n=/\b:\s*url\((('[^']*')|("[^"]*"))\)/ig;while(r=n.exec(e)){if(r[2]==="''"||r[3]==='""')continue;i=r[1].substr(1,r[1].length-2),uriParts=getUriParts(i);if(uriParts.protocol)continue;i=(i.indexOf("/")?l:f)+i;var c=r[1].charAt(0);i=":url("+c+i+c+")",e=e.substr(0,r.index)+i+e.substr(r.index+r[0].length),n.lastIndex=r.index+i.length}}catch(h){debugger}return e}var cdfDashboard,DASHBOARD_DESIGNER_APP_ID="pentaho-dashboards";currentWidget=null,typeof printVisible=="undefined"&&(printVisible=!1),isRunningIFrameInSameOrigin=null;try{var ignoredCheckCanReachOutToTop=window.top.mantle_initialized;isRunningIFrameInSameOrigin=!0}catch(ignoredSameOriginPolicyViolation){isRunningIFrameInSameOrigin=!1}mantle_enabled=!1;try{mantle_enabled=window.parent!=null&&window.parent.mantle_initialized==1}catch(ignored){}typeof pho=="undefined"&&(pho={}),typeof pho.dashboards=="undefined"&&(pho.dashboards={}),pho.dashboards.waitCursorTimerId=null,pho.dashboards.enableWaitCursor=function(e){e?(document.body.style.cursor="wait",clearTimeout(pho.dashboards.waitCursorTimerId),pho.dashboards.waitCursorTimerId=setTimeout('document.body.style.cursor = "default"',3e4)):(document.body.style.cursor="default",clearTimeout(pho.dashboards.waitCursorTimerId))},window.refreshSolution=function(){mantle_enabled&&window.refreshRequired&&(window.parent.mantle_refreshRepository(),refreshRequired=!1,pho.dashboards.enableWaitCursor(!1))};var editContentToggledListeners=[];return pho.dashboards.addEditContentToggledListener=function(e){editContentToggledListeners.push(e)},pho.dashboards.removeEditContentToggledListener=function(e){for(var t=0;t<editContentToggledListeners.length;t++)if(editContentToggledListeners[t]==e){editContentToggledListeners.splice(t,1);return}},getRectangle=function(e,t){var n={x:0,y:0,width:0,height:0};n.width+=e.offsetWidth,n.height+=e.offsetHeight;while(e&&e.tagName!=="BODY"){if(e===t)break;n.x+=parseInt(e.offsetLeft),n.y+=parseInt(e.offsetTop),n.y-=parseInt(e.scrollTop),n.x-=parseInt(e.scrollLeft),e=e.parentNode}return n},pentahoDashboardEditor=null,ResizeHandleCache={},PentahoDashboardController=function(){this.widgets=new Array,this.windowWidth=0,this.windowHeight=0,this.clientWidth=0,this.clientHeight=0,this.widgetAreaTop=0,this.widgetAreaLeft=0,this.widgetAreaWidth=0,this.widgetAreaHeight=0,this.dashboardSettings={},this.elementSettings={},this.cdfDashboard=new CdfDashboard,this.dashboard=null,this.templateXul=null,this.adjustForWidgetAreaScroll=!0,this.initialResizeDone=!1,this.objectProperties={},this.maximizedId=null,this.maximizedBoxes=null,this.initialExpand=!0,this.scrollWidth=0,this._glassPaneCallbackRegistration=null,this._parentGlassPaneCallbackRegistration=null,this._parentChartEditorGlassPaneCallbackRegistration=null,this._handlerRegistration=null,cdfDashboard=this.cdfDashboard,this.initRefreshEngine=function(){this.setGlobalRefresh(this.getGlobalRefresh()),this.cdfDashboard.refreshEngine.processComponents()},this.setGlobalParameter=function(e,t,n){var r;for(r=0;r<this.widgets.length;r++)if(this.widgets[r].isParam&&this.widgets[r].isParam(t)){var i=this.widgets[r].setParameter(e,t,n);i&&this.widgets[r].update()}},this.povPanelDisplay=function(e){var t=xulDomJson.window.items;this.setXulDomProperty("FilterPanel","hidden",""+!e),this.initialExpand=!1,this.resizeDashboard(!0),highlightWidgetArea(e?"FilterPanel":null)},this.isPovPanelShown=function(){var e=this.findXulItemById("FilterPanel",xulDomJson.window.items);if(e==null)return!0;var t=e.properties.hidden;return""+t=="undefined"||t=="false"},this.resizeTimer=null,this.resizeDashboard=function(e){this.resizeTimer&&clearTimeout(this.resizeTimer);var t=document.getElementById("FilterPanel"),n,r;this.isPovPanelShown()?(n="block",r="false"):(n="none",r="true"),t.style.display=n,this.setXulDomProperty("FilterPanel","hidden",r),this.resizeTimer=setTimeout("pentahoDashboardController.innerResizeFunction("+e+")",document.all?100:1)},this.innerResizeFunction=function(e){var t=this.windowHeight,n=this.windowWidth,r,i,s=this.dashboardSettings,o=s.dashboardMarginLeft,u=s.dashboardMarginRight,a=s.dashboardMarginTop,f=s.dashboardMarginBottom;if(isInMobile())try{var l=window.parent.document.getElementsByTagName("IFRAME");for(var c=0;c<l.length;c++)if(l[c].contentWindow==window){var h=l[c];i=parseInt(h.getAttribute("width")),i=i||h.clientWidth,r=parseInt(h.getAttribute("height")),r=r||h.clientHeight}}catch(p){}else{try{i=window.innerWidth,r=window.innerHeight}catch(p){}if(typeof i!="number"||isNaN(i))try{var d=document.documentElement;d=d.offsetHeight?d:document.body,i=d.offsetWidth,r=d.offsetHeight}catch(p){}}i==0&&r==0&&(i=n,r=t),this.windowWidth=i,this.windowHeight=r,this.clientWidth=i-o-u,this.clientHeight=r-a-f;if(!xulDomJson)return;var v=xulDomJson.window,m=v.items;this.resizeList(v,m,!0,this.clientWidth,this.clientHeight,o,a,null),this.resizeTimer=null;if(pentahoDashboardEditor)try{pentahoDashboardEditor.resize(e)}catch(p){}window.highlightedWidget&&highlightWidgetArea(window.highlightedWidget),this.setEditLabelVisibility(editEnabled),this.resizeAllWidgets(),this.initialResizeDone=!0},this.resizeList=function(e,t,n,r,i,s,o,u){var a=0,f=0,l=0,c,h=t.length,p,d,v,m=r;for(c=0;c<h;c++){p=t[c];for(d in p)break;v=p[d].properties;if(v.hidden==="true")continue;v.flex&&(a+=v.flex),v.width&&(l+=v.width),v.height&&(f+=v.height)}var g=(n?i-f:r-l)/a,y=0,b,w,E,S,x,T,N,C,k,L,A=0,O=0,M=0,_=0,D=0,P=this.maximizedBoxes,H,B,j=P==null?0:P.length;for(c=0;c<h;c++){p=t[c];for(d in p)break;p=p[d],v=p.properties,w=v.hidden,b=v.id,E=v.type,this.scrollWidth||(this.scrollWidth=getScrollWidth()?getScrollWidth():15),r=m,b!="titlebar"&&b!="widget-area"&&(r=m-this.scrollWidth),S=0,x=0,T=0,N=0,C=0,k=30;if(w==="true"||u){this.setItemVisibility(b,!1);continue}v.flex?S=g*v.flex:n?S=v.height:S=v.width,n?(C=S,N=r,x=0,T=y):(C=i,N=S,x=y,T=0),this.objectProperties[b]={left:x,top:T,width:N,height:C},A=0,O=0,M=0,_=0,D=0;if(L=this.getElementSettings(d+(E&&E!==""?"-"+E:"")))L.padding&&(A=L.padding),L["padding-top"]&&(O=L["padding-top"]+A),L["padding-bottom"]&&(M=L["padding-bottom"]+A),L["padding-left"]&&(D=L["padding-left"]+A),L["padding-right"]&&(_=L["padding-right"]+A);this.overlayMode&&(b==="widget-area"||b==="titlebar")&&(_+=this.overlaySizeRight,D+=this.overlaySizeLeft,M+=this.overlaySizeBottom,O+=this.overlaySizeTop),N=N-D-_,C=C-O-M;for(B=0;B<j;B++){H=P[B];if(H.id!==b)continue;x=H.maxleft,T=H.maxtop,N=H.maxwidth,C=H.maxheight,k=40,B>0?(D=0,O=0):(N=N-D-D,C=C-O-O)}this.resizeItem(b,d,E,x,T,N,C,D,O,k);var F=c+1;if(pentahoDashboardEditor&&F<h&&(d=="vbox"||d=="hbox"||d=="box"&&b=="FilterPanel"||b.indexOf("Panel")==0)){F=t[c+1];var I;for(I in F)break;var q=b+"|"+F[I].properties.id;ResizeHandleCache[q]?ResizeHandleCache[q].update():ResizeHandleCache[q]=new ResizeHandle(n,e,t[c],F,x+D,T+O,N,C,s,o)}b==="widget-area"&&(this.adjustForWidgetAreaScroll&&!this.overlayMode&&(N-=0),this.widgetAreaTop=T,this.widgetAreaLeft=x,this.widgetAreaWidth=N,this.widgetAreaHeight=C),(d==="vbox"||d==="hbox")&&this.resizeList(p,p.items,d==="vbox"?!0:!1,N,C,x,T,!1),y+=S}},this.overlaySizeTop=6,this.overlaySizeLeft=6,this.overlaySizeRight=6,this.overlaySizeBottom=32,this.setOverlayMode=function(e){this.overlayMode=e},this.clearResizeCache=function(){ResizeHandleCache={},$(".resizeHandle").remove()},this.findXulItemById=function(e,t){t||(t=xulDomJson.window.items);var n,r=t.length,i,s;for(n=0;n<r;n++){i=t[n];for(s in i){s=i[s];if(s.properties&&s.properties.id===e)return s;if(s=s.items)if(s=this.findXulItemById(e,s))return s}}return null},this.getXulDomProperty=function(e,t){var n,r=this.findXulItemById(e);if(r)return r.properties[t]},this.setXulDomProperty=function(e,t,n){var r,i=this.findXulItemById(e);i&&(i.properties[t]=n)},this.getElementSettings=function(e){try{return this.elementSettings[e]}catch(t){return null}},this.setItemVisibility=function(e,t){var n;if(n=document.getElementById(e))n.style.display=t==1?"block":"none"},this.resizeItem=function(e,t,n,r,i,s,o,u,a,f){s=Math.abs(s),o=Math.abs(o);var l;!n||n==""?l=t:l=t+"-"+n;var c=document.getElementById(e);if(!c)return;var h=this.getElementSettings(l);c.style.left&&r+u>=0&&(c.style.left=""+(r+u)+"px"),c.style.top&&i+a>=0&&(c.style.top=""+(i+a)+"px"),c.style.width&&s>=0&&(c.style.width=""+s+"px"),c.style.height&&o>=0&&(c.style.height=""+o+"px"),c.style.zIndex&&f>=0&&(c.style.zIndex=""+f);var p="content-area-"+e,c=document.getElementById(p);if(!c)return;var d=0,v=0,m=0,g=0;h&&(h.offsetRight!==undefined&&(d=h.offsetRight),h.offsetLeft!==undefined&&(v=h.offsetLeft),h.offsetTop!==undefined&&(m=h.offsetTop),h.offsetBottom!==undefined&&(g=h.offsetBottom));var y=Math.abs(s-d-v),b=Math.abs(o),w=document.getElementById("wgtHead-"+e),E=document.getElementById("wgtFooter-"+e),S=w?w.offsetHeight:0;S==0&&(S=m);var x=E?E.offsetHeight:0,T=b-S-x,N=document.getElementById("dataContainer-"+e);c.style.top!="undefined"&&(c.style.top=""+m+"px"),c.style.left!="undefined"&&(c.style.left=""+v+"px"),c.style.width!="undefined"&&y>=0&&(c.style.width=""+y+"px"),c.style.height!="undefined"&&T>=0&&(c.style.height=""+T+"px",N&&(N.style.height=""+T+"px"))},this.selectedWidget=-1;var selectedWidgetListeners=[];this.addWidgetSelectionListener=function(e){selectedWidgetListeners.push(e)},this.removeWidgetSelectionListener=function(e){for(var t=0;t<selectedWidgetListeners.length;t++)if(selectedWidgetListeners[t]==e){selectedWidgetListeners.splice(t,1);return}},this.setSelectedWidget=function(e){if(e==undefined||isNaN(e))return;this.selectedWidget=e;for(var t=0;t<selectedWidgetListeners.length;t++)selectedWidgetListeners[t].onChange(this.selectedWidget)},this.getSelectedWidget=function(){return this.selectedWidget},this.panelTitleClick=function(e){if(!pentahoDashboardEditor||!pentahoDashboardEditor.isEditPanelVisible())return;var t;e==="FilterPanel"?t="povpanelitem":(e=e.substring("Panel_".length),t="widgetitem"+e,e="widget"+e),selectObjectList(t),showProperties(e)},this.panelTitleDoubleClick=function(e){if(e==="FilterPanel"||pentahoDashboardEditor&&pentahoDashboardEditor.isEditPanelVisible())return;this.toggleMaximizeWidget(e)},this.toggleFilterPanel=function(){var e=$("#FilterPanel"),t=$("#dataContainer-FilterPanel"),n=!this.getXulDomProperty("FilterPanel","collapsed")||this.getXulDomProperty("FilterPanel","collapsed")=="false";this.initialExpand?this.initialExpand=!1:n&&(this.previousFilterPanelHeight=this.getXulDomProperty("FilterPanel","height")),this.setFilterPanelCollapsed(n)},this.setFilterPanelCollapsed=function(e){var t=$("#FilterPanel"),n=document.getElementById("dataContainer-FilterPanel");if(e){n.style.display="none";var r=$("#wgtHead-FilterPanel"),i=$("#wgtFooter-FilterPanel");this.setXulDomProperty("FilterPanel","height",r.height()+i.height()),this.filterPanelCollapsed=!0,$("#filterArrow").addClass("collapsed"),this.setXulDomProperty("FilterPanel","collapsed","true")}else this.setXulDomProperty("FilterPanel","height",this.previousFilterPanelHeight||100),this.filterPanelCollapsed=!1,$("#filterArrow").removeClass("collapsed"),this.setXulDomProperty("FilterPanel","collapsed","false"),n.style.display="";this.resizeDashboard(!0)},this.setEditContentEnabled=function(e){this.setEditContentEnabledById(this.getSelectedWidget()+1,e)},this.setEditContentEnabledById=function(e,t){var n=document.getElementById("edit-btn-Panel_"+e);n.className=t?"edit-btn":"edit-btn-disabled"},this.ignoreClickCount=1,this.cancelDropDownByClick=function(){this.ignoreClickCount===0&&this.cancelContentDropDown(),this.ignoreClickCount--},this.cancelContentDropDown=function(){var e=document.getElementById("content-menu");e&&(e.style.display="none");return},this.showContentDropDown=function(e,t){var n=getRectangle(document.getElementById("widget-area")),r=n.width,i=n.height,s=document.getElementById("content-menu"),o,u,a,f=s.style,l=getRectangle(t),c=l.x,h=l.y,p=l.height,d=c,v=h+p;f.display="",o=getRectangle(s),u=o.width,a=o.height,v+a>i&&(v=h-a),d+u>r&&(d=r-u-20),f.left=d+"px",f.top=v+"px",s.contentWindow.notifyDashboardOfSize(),this.ignoreClickCount=1},this.setInsertContentSize=function(e,t){var n=document.getElementById("content-menu").style;n.width=e+"px",n.height=t+"px"};var widgetsWithToolbarShowing={};this.toggleEditToolbar=function(e){this.panelTitleClick(e);var t=parseInt(e.substring(e.length-1)),n="Panel_"+t,r=document.getElementById("content-area-toolbar-"+n),i=document.getElementById("content-area-"+n);if(widgetsWithToolbarShowing[""+t])this.hideEditToolbar(e);else{var s=document.getElementById("toolbar-edit-btn-"+e);s.className=typeof currentWidget=="undefined"||currentWidget.type!=="xaction"&&currentWidget.type!=="empty"?"edit-btn":"edit-btn-disabled",r.style.top=parseInt(i.style.top)+"px",r.style.height="40px",i.style.top=parseInt(i.style.top)+42+"px",i.style.height=parseInt(i.style.height)-42+"px",widgetsWithToolbarShowing[""+t]=trueXCC}},this.hideEditToolbar=function(e){},this.toggleMaximizeWidget=function(e){var t=this.objectProperties[e];if(!t)return;this.maximizedId===e?(e=null,this.maximizedBoxes=null):this.maximizeWidget(e,this.getXulDomProperty(e,"type")),this.maximizedId=e,this.resizeDashboard(!0)},this.maximizeWidget=function(e,t){var n=this.objectProperties[e];if(!n)return;var r=this.widgetAreaLeft,i=0,s=this.widgetAreaWidth,o=this.widgetAreaHeight,u=this.maximizedBoxes=[],a=document.getElementById(e),f;while(a!=null&&a.id!=="widget-area")f=a.style,u.push({id:a.id,top:f.top,left:f.left,width:f.width,height:f.height,zindex:f.zIndex,maxwidth:s,maxheight:o,maxtop:i,maxleft:r}),a=a.parentNode;if(a.id==="widget-area"){var l,c=u.length,h;for(l=1;l<c;l++){h=u[l],a=document.getElementById(h.id);if(a===null)continue;f=a.style,f.zIndex=40,f.top=i+"px",f.left=r+"px",f.width=s+"px",f.height=o+"px"}}},this.createComponent=function(e){var t=e.type;switch(t){case"AnalyzerComponent":return new window.AnalyzerComponent(e);case"PentahoChartComponent":return new PentahoChartComponent(e);case"PentahoPrptComponent":return new PentahoPrptComponent(e);case"PentahoGridComponent":return new PentahoGridComponent(e);case"PentahoUrlComponent":return new PentahoUrlComponent(e);case"DashboardXactionComponent":return new DashboardXactionComponent(e);case"select":return new SelectComponent(e);case"selectMultiComponent":return new SelectMultiComponent(e);case"radioComponent":return new RadioComponent(e);case"checkComponent":return new CheckComponent(e);case"multiButtonComponent":return new MultiButtonComponent(e);case"textInputComponent":return new TextInputComponent(e);case"dateInputComponent":return new DojoDateTextBoxComponent(e)}},this.addWidget=function(e){this.addComponents([e])},this.addWidgetAt=function(e,t){var n=this.createComponent(t);n&&this.addComponent(n,{index:e})},this.addComponent=function(e,t){e&&(this.cdfDashboard.removeComponent(e.name?e.name:e),this.cdfDashboard.addComponent(e,t))},this.addComponents=function(e){if(!$.isArray(e)){typeof console!="undefined"&&console.log("addComponents: components in a structure other than an array will not be added");return}e.forEach(function(e){this.addComponent(e)},this)},this.removeWidgetAt=function(e){var t=this.cdfDashboard.components[e];t.parameter&&this.cdfDashboard.parameters[t.parameter]&&delete this.cdfDashboard.parameters[t.parameter];if(OutputParametersHelper.hasOutputParameters(t)){var n=t.getOutputParameters();for(var r=0;r<n.length;r++){var i=n[r][OutputParametersHelper.OUT_PARAMS_ID_IDX];this.cdfDashboard.parameters[i]&&delete this.cdfDashboard.parameters[i]}}this.unlinkComponent(t.getGUID?t.getGUID():t.GUID),this.removeLocalWidget(e),this.cdfDashboard.components.splice(e,1)},this.removeLocalWidget=function(e){dashboardWidgets.splice(this.getLocalWidgetId(this.cdfDashboard.components[e]),1)},this.getLocalWidgetId=function(e){var t,n;for(t=0;t<dashboardWidgets.length;++t){n=dashboardWidgets[t];if(!!n&&n.name===e.name)return t}return-1},this.unlinkComponent=function(e){for(var t=0;t<this.cdfDashboard.components.length;t++){if($.isArray(this.cdfDashboard.components[t].listeners))for(var n=0;n<this.cdfDashboard.components[t].listeners.length;n++)if(OutputParametersHelper.isParameterFromComponent(this.cdfDashboard.components[t].listeners[n],e)){this.cdfDashboard.components[t].listeners.splice(n,1);break}if($.isArray(this.cdfDashboard.components[t].parameters))for(var n=0;n<this.cdfDashboard.components[t].parameters.length;n++)if(OutputParametersHelper.isParameterFromComponent(this.cdfDashboard.components[t].parameters[n][1],e)){var r=new Array(3);r[0]=this.cdfDashboard.components[t].parameters[n][0],r[1]="",r[2]="",this.cdfDashboard.components[t].parameters[n]=r}}},this.renameParameter=function(e,t){if(e==null||t==null)return;for(var n=0;n<this.cdfDashboard.components.length;n++){if($.isArray(this.cdfDashboard.components[n].listeners))for(var r=0;r<this.cdfDashboard.components[n].listeners.length;r++)if(this.cdfDashboard.components[n].listeners[r]==e){this.cdfDashboard.components[n].listeners.splice(r,1,t);break}if($.isArray(this.cdfDashboard.components[n].parameters))for(var r=0;r<this.cdfDashboard.components[n].parameters[r];r++)this.cdfDashboard.components[n].parameters[r][1]==e&&(this.cdfDashboard.components[n].parameters[r][1]=t)}typeof this.cdfDashboard.parameters[e]!="undefined"&&(this.cdfDashboard.parameters[t]=this.cdfDashboard.parameters[e],delete this.cdfDashboard.parameters[e])},this.setWidgetWithId=function(e,t){var n;for(n=0;n<this.widgets.length;n++){var r=this.widgets[n];r.id==e&&(this.widgets[n]=t)}},this.getWidgetFromId=function(e){return this.cdfDashboard.getComponent(e)},this.getWidgetCount=function(){return this.cdfDashboard.components.length},this.getWidget=function(e){return e>=0&&e<this.cdfDashboard.components.length?this.cdfDashboard.components[e]:null},this.updateDashboardHeading=function(e){var t=this.dashboardSettings.titleContainerId,n;n=this.getDashboardHeading(),n?(typeof e=="undefined"&&(e=!pho.dashboards.editMode),e&&(n=this.replaceParametersInDashboardHeading(n))):n="",$("#"+t).text(n)},this.glassPaneCallback={glassPaneShown:function(){pentahoDashboardEditor&&pentahoDashboardEditor.displayWidgetContents(!1)},glassPaneHidden:function(){pentahoDashboardEditor&&pentahoDashboardEditor.displayWidgetContents(!0)}};var editEnabled=!1;this.setEditEnabled=function(e){editEnabled!==e&&pentahoDashboardEditor&&pentahoDashboardEditor.toggleEditorPanel(e),this.setEditLabelVisibility(e),editEnabled=e,this.updateDashboardHeading(!e),this.replaceParametersInWidgetTitles(!e)},this.setEditLabelVisibility=function(e){var t=e?"":"none";$("div[class=editLabel]").each(function(){this.style.display=t})},this.addOnLoadScript=function(e){this.onloadFunctions||(this.onloadFunctions=[]),this.onloadFunctions.push(e)},this.printDashboard=function(){pentahoDashboardController.doPrint()},this.printWidget=function(e){var t=e.substr("Panel_".length),n=this.getWidgetFromId("widget"+t);if(n){if(typeof n.print=="function")try{var r=document.getElementById("panel-title-Panel_"+t).innerHTML;n.print(r);return}catch(i){console&&console.log&&console.log(i)}}else console&&console.log&&console.log("Couldn't find component "+t);pentahoDashboardController.doPrint(t)},this.doPrint=function(e){var t=pentahoDashboardController.getDashboardHTML(e),n,r=window.open(""),i=r.document,s=window.location.href.substr(0,window.location.href.lastIndexOf("/"))+"/print",o,u;if(typeof e=="undefined")n=pentahoDashboardController.getDashboardHeading(),typeof window.innerWidth!="undefined"?(o=window.innerWidth+20,u=window.innerHeight+20):typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0?(o=document.documentElement.clientWidth+20,u=document.documentElement.clientHeight+40):(o=document.body.clientWidth+20,u=document.body.clientHeight+40);else{n=document.getElementById("panel-title-Panel_"+e).innerHTML;var a="Panel_"+e,f=document.getElementById(a).parentNode;o=f.clientWidth,u=f.clientHeight}i.open(),i.write('<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Preparing Print Preview</title><style media="all">html, body { font-family: Tahoma, Helvetica, Arial, sans-serif; font-size: 14px; margin: 0; padding: 0; background-color:#999999;}#wrapper{ margin-right: auto; margin-left: auto; margin-top: 10%; text-align: center; padding: 0px; position:relative; width:100%;}#progress_panel { padding: 0px; margin-top: 0px; width: 400px; display: inline-block; background-color: #333; border: 1px solid black; -webkit-border-radius: 5px; border-radius: 5px; -moz-box-shadow: 0px 2px 3px 0px #333, 0 0 1px 1px rgba(255, 255, 255, .2) inset; -webkit-box-shadow: 0px 2px 3px 0px #333, 0 0 1px 1px rgba(255, 255, 255, .2) inset; box-shadow: 0px 2px 3px 0px #33, 0 0 1px 1px rgba(255, 255, 255, .2) inset;}.message{ margin: 4px; padding: 50px; color: #fff;}</style></head><body><!-- created progress message styling --><div id="wrapper"><div id="progress_panel"><p class="message">'+window.pho_messages.getMessage("printpreview.waitmessage","Preparing print preview, please wait.")+"</p>"+"</div>"+"</div>"+'<form method="POST" id="printForm" action="'+s+'" name="printform">'+'<input type="hidden" id="command" name="command" value="print"/>'+'<input type="hidden" id="dashboard" name="dashboard"/>'+'<input type="hidden" id="width" name="width"/>'+'<input type="hidden" id="height" name="height"/>'+'<input type="hidden" id="title" name="title"/>'+'<input type="hidden" id="CONTEXT_PATH" name="CONTEXT_PATH"/>'+'<input type="hidden" id="active_theme" name="active_theme"/>'+'<input type="hidden" id="module_theme_tree" name="module_theme_tree"/>'+'<input type="hidden" id="core_theme_tree" name="core_theme_tree"/>'+"</form>"+"</body>"+"</html>"),i.close(),i.getElementById("dashboard").value=t,i.getElementById("width").value=o,i.getElementById("height").value=u,i.getElementById("title").value=n,i.getElementById("CONTEXT_PATH").value=CONTEXT_PATH,i.getElementById("active_theme").value=active_theme,i.getElementById("module_theme_tree").value=JSON.stringify(module_theme_tree),i.getElementById("core_theme_tree").value=JSON.stringify(core_theme_tree),i.getElementById("printForm").submit()},this.getDashboardHTML=function(e){var t=document,n,r=this.cdfDashboard.components,i,s=r.length,o,u,a,f,l,c,h,p,d,v,m,g,y,b=getHead(t),w=b.innerHTML,E,S,x=getBaseUri(window),T=getUriParts(x),N,C={},k=[],L,A={};if(typeof e=="undefined")E=t.body,L=pentahoDashboardController.getDashboardHeading();else{var O="Panel_"+e;E=document.getElementById(O),L=document.getElementById("panel-title-"+O).innerHTML}S=E.innerHTML,w=stripAll(w),rewriteBaseUri(T),w=makeAbsoluteUris(w,T),S=stripAll(S),S=makeAbsoluteUris(S,T),getStyles(window,C,k);for(n=0;n<s;n++){i=r[n];if(typeof e!="undefined"&&i.name!=="widget"+e)continue;i.type==="PentahoChartComponent"&&typeof i.maskFlashContentWithImage=="function"&&i.maskFlashContentWithImage(),o=t.getElementById(i.htmlObject),l=o.getElementsByTagName("IFRAME");if(!l.length)continue;l=l.item(0),c=l.contentWindow,h=c.document,getStyles(c,C,k),p=getBaseUri(c),d=getUriParts(p),m=h.body,y=m.innerHTML,y=stripAll(y),rewriteBaseUri(d),y=makeAbsoluteUris(y,d),v=getHead(h),g=v.innerHTML,g=stripAll(g),g=stripMeta(g),g=stripTitle(g),g=makeAbsoluteUris(g,d),w+=g;var M=S.indexOf('id="'+l.id+'"');if(M===-1){M=S.indexOf("id="+l.id);if(M===-1)continue}var _=S.substr(0,M).lastIndexOf("<");if(_===-1)continue;var D=S.substr(M).indexOf(">");if(D===-1)continue;var P=M+D+1,H=S.substr(P);H.toUpperCase().indexOf("</IFRAME>")===0&&(H=H.substr("</iframe>".length));if(i.type==="AnalyzerComponent"){M=y.indexOf("reportContent");if(M!==-1){var B=y.substr(0,M).lastIndexOf("<"),j=y.substr(B).indexOf(">"),F=B+y.substr(B).indexOf("style"),I=F+y.substr(F).indexOf('"'),q=y.substr(I+1).indexOf('"'),R=y.substr(I+1,q);q+=I+1,R=R.replace(/position\s*:\s*absolute/ig,""),R="position: relative; "+R,y=y.substr(0,I+1)+R+y.substr(q)}var U=c.cv.getActiveReport(),z=U.visualizationController;if(z){var W=z.currentViz,X=z.chart,V=X._vizOptions,$=JSON.stringify(z.dataTable.jsonTable),J=JSON.stringify([{args:W.args,visualizationId:W.id}]),K=W.id,Q=V.width,G=V.height,Y=[{nodeValue:"CIRCLE",nodeName:"lineShape"},{nodeValue:"2",nodeName:"lineWidth"}],V=z.userDefinedOptions,Z,et;for(Z in V)Y.push({nodeName:Z,nodeValue:V[Z]});Y=JSON.stringify(Y);var tt='\n<div class="analyzer-chart-ccgPrint-params" style="display: none">\n <span class="json">'+$+"</span>"+'\n <span class="jsonConfig">'+J+"</span>"+'\n <span class="vizId">'+K+"</span>"+'\n <span class="chartWidth">'+Q+"</span>"+'\n <span class="chartHeight">'+G+"</span>"+'\n <span class="chartOptionsJSON">'+Y+"</span>"+"\n</div>",nt=y.indexOf("<",y.indexOf("visualPanelElement-0"));y=y.substr(0,nt)+tt+y.substr(nt)}}S=S.substr(0,_)+"<div"+S.substring(_+"<iframe".length,P)+'<div style="'+m.style.cssText+'" class="'+m.className+'">'+y+"</div>"+"</div>"+H}for(n=0;n<s;n++){i=r[n];if(typeof e!="undefined"&&i.name!=="widget"+e)continue;i.type==="PentahoChartComponent"&&typeof i.maskFlashContentWithImage=="function"&&i.removeMaskImage()}w+=restoreStyles(C,k),w+='<style type="text/css"> .widget-area {overflow:hidden;} .dijitTooltipData {display: none} .resizeHandle {display: none} #refreshSummary {display: none;} .hidden {display: none !important;} .databar-wrapper {text-align: left !important; height: 100% !important} .databar-wrapper div {left: 0px !important;} .pivotTable .pivotTableRowLabelContainer {overflow-x: visible !important} .povdiv {border-style: none !important; white-space: nowrap !important;} .pentaho-toggle-button-up BUTTON {color: white} </style>',w=w.replace(/<title>[^<]*<\/title>/g,"<title>"+L+"</title>");var rt=E.style.cssText.replace(/(top|left)[^;]+;/ig,"");return N='<html><head><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" />'+w+"</head>"+'<body style="'+rt+'" class="'+E.className+' pentaho-page-background">'+S+"</body>"+"</html>",N=N.replace(/\son\w+\s*=/ig," _no="),N=N.replace(/<iframe[^<]*<\/iframe>/gi,""),N},this.onTabCloseEvent=function(e){e.eventSubType=="tabClosing"&&e.stringParam==window.frameElement.id&&this.dispose()},this.init=function(){isRunningIFrameInSameOrigin&&window.top.mantle_addHandler&&(this._handlerRegistration=window.top.mantle_addHandler("GenericEvent",this.onTabCloseEvent.bind(this))),window.onbeforeunload=this.dispose.bind(this),window.beforeAnalyzerLoad||(window.beforeAnalyzerLoad=function(e,t){e.applicationId=DASHBOARD_DESIGNER_APP_ID});if(typeof createBundle=="undefined"){window.messageBundleAttempts=0;var localThis=this,bundleCreationFunct=function(){typeof createBundle!="undefined"?(window.pho_messages=createBundle("resources/gwt/dashboarddesigner/messages","dashboards",function(){localThis.init()}),window.dashboard_messages=createBundle("resources/messages","messages",function(){})):messageBundleAttempts<15?(window.messageBundleAttempts++,setTimeout(bundleCreationFunct,1e3)):(alert("Error loading dashboard messages.\n\nCommunication to server may have be lost due to inactivity."),window.pho_messages={},window.pho_messages.getMessage=function(e,t){return t?t:e},window.dashboard_messages={},window.dashboard_messages.getMessage=function(e,t){return t?t:e},window.createBundle=function(e,t,n){return n(),pho_messages},localThis.init())};bundleCreationFunct();return}window.pho_messages=createBundle("resources/gwt/dashboarddesigner/messages","dashboards",function(){}),window.dashboard_messages=createBundle("resources/messages","messages",function(){});var funct;while(delayedFunctions.length>0)delayedFunctions.pop()();while(this.onloadFunctions&&this.onloadFunctions.length>0)funct=this.onloadFunctions.pop(),funct();var idx;try{this.setDashboardSettings(dashboardSettings),this.elementSettings=elementSettings}catch(e){}try{xulDomJson&&dashboardJson&&getJsonObjectType(dashboardJson)=="object"&&(this.dashboard=createObject("Dashboard",dashboardJson.Dashboard))}catch(e){alert(e.message)}try{typeof dashboardOnLoad!="undefined"&&dashboardOnLoad()}catch(e){alert(e.message)}typeof PentahoDashboardEditor=="function"?(pentahoDashboardEditor=new PentahoDashboardEditor,pentahoDashboardEditor.pageLoaded()):this.resizeDashboard(!1);var parent=window.parent;if(mantle_enabled&&parent&&parent.enableContentEdit){parent.mantle_setDashboardsFilter(PentahoDashboardController.getComponentFileTypes()),window.toggleBrowser=function(e){var t=pho.dashboards.editMode;typeof e!="undefined"&&e!=null&&(t=e),t?parent.mantle_isNavigatorShowing()||parent.executeCommand("ShowBrowserCommand"):parent.mantle_isNavigatorShowing()&&parent.executeCommand("CollapseBrowserCommand")},window.editContentToggled=function(e){toggleBrowser(e);for(var t=0;t<editContentToggledListeners.length;t++)try{editContentToggledListeners[t].call(null,e)}catch(n){typeof console!="undefined"&&console.log(n.name+": "+n.message)}if(pho.dashboards.editMode)pentahoDashboardController.setEditEnabled(!editEnabled);else{var r=window.location.href;r=r.replace(/\/viewer\b/g,"/editor"),pentahoDashboardController.beforeTabsUnload(),window.location.href=r}},parent.enableContentEdit(!0);var editSelected=!1;pentahoDashboardEditor&&(editSelected=!0),toggleBrowser(editSelected),this._parentGlassPaneCallbackRegistration=parent.addGlassPaneListener(this.glassPaneCallback),this._parentChartEditorGlassPaneCallbackRegistration=parent.addChartEditorGlassPaneListener(this.glassPaneCallback)}typeof addGlassPaneListener=="function"&&(this._glassPaneCallbackRegistration=addGlassPaneListener(this.glassPaneCallback));var widgetArea=document.getElementById("widget-area"),collapsed=this.getXulDomProperty("FilterPanel","collapsed");collapsed=collapsed==1,collapsed||(this.previousFilterPanelHeight=this.getXulDomProperty("FilterPanel","height")),this.setFilterPanelCollapsed(collapsed),isRunningIFrameInSameOrigin&&(!window.parent||!window.parent.mantle_initialized)&&$("body").addClass("pentaho-page-background"),isRunningIFrameInSameOrigin&&window.parent&&window.parent.PentahoMobile&&(this.setXulDomProperty("titlebar","hidden","true"),$("#filterArrow").hide(),$("#titlebar").hide(),$(".povContainer .wgtHead").attr("onclick","pentahoDashboardController.toggleFilterPanel()")),this.initialResizeDone||this.resizeDashboard(!0),widgetArea.style.display="block",this.initializeCDF(),this.initRefreshEngine(),this.updateDashboardHeading(),this.displayWidgetPrintButtons(),pentahoDashboardEditor&&function(){var e=10,t=function(){e--;if(window.pho_messages.getMessage("Bundle.Loaded","")!="Do_Not_Translate"){if(e==0){window.alert("The Dashboard Module failed to load.");return}setTimeout(t,1001);return}var n=/\b((\/editor)|(command=new))\b/g.test(document.location.href);if(n==1){var r=document.getElementById("wrapper");r.className="wrapper drag_and_drop_label"}pentahoDashboardEditor.startupInEditMode(n),n&&pentahoDashboardEditor.showEditorPanel();var i,s=cdfDashboard.components,o,u=s.length;for(i=0;i<u;i++)o=s[i],o.refreshParameters&&o.refreshParameters();pho.dashboards.init(),pentahoDashboardEditor.initDND()};t()}();var _onresize=window.onresize,_onunload=window.onunload,_onkeyup=window.onkeyup,_onmouseup=window.onmouseup,_onmousemove=window.onmousemove,_onmousedown=window.onmousedown;window.onresize=function(e){_onresize&&_onresize(e),pentahoDashboardController.resizeDashboard(!1)},window.onunload=function(e){_onunload&&_onunload(e),pentahoDashboardController.unload(e)},document.onmouseup=function(e){pentahoDashboardController.mouseUp(e)},document.onmousemove=function(e){pentahoDashboardController.mouseMove(e)};var outerThis=this,onKeyUpFunct=function(e){document.all&&(e=window.event),pentahoDashboardController.keyUp(e),e.keyCode==="27"&&outerThis.cancelContentDropDown()};document.all&&(document.body.onkeyup=onKeyUpFunct),window.onkeyup=onKeyUpFunct;if(document.all){var tempForm=document.createElement("form");tempForm.name="tempForm";with(tempForm.style)height="0px",padding="0px",margin="0px",width="0px";document.getElementById("wrapper").appendChild(tempForm);var placeHolderField=document.createElement("input");placeHolderField.setAttribute("type","text"),placeHolderField.setAttribute("id","focusInput");with(placeHolderField.style)height="0px",padding="0px",margin="0px",width="0px";tempForm.appendChild(placeHolderField),document.getElementById("focusInput").focus()}},this.updateAllWidgets=function(){this.cdfDashboard.updateAll(this.cdfDashboard.components)},this.resizeAllWidgets=function(){var e,t,n=this.cdfDashboard.components,r=n.length;for(e=0;e<r;e++)t=n[e],t.resize&&t.resize(),t.removeMaskImage&&t.removeMaskImage()},this.getWidgetId=function(e){var t;return typeof e=="number"?e:(e.name?t=e.name:typeof e=="string"&&(t=e),parseInt(t.substr("widget".length),10))},this.getWidgetXulId=function(e){return e.htmlObject!=undefined?e.htmlObject.substr("content-area-".length):""},this.beforeTabsUnload=function(e){for(var t=0;t<pentahoDashboardController.cdfDashboard.components.length;t++){var n=pentahoDashboardController.cdfDashboard.components[t];n.type==="PentahoPrptComponent"&&n.clear()}},this.getComponentParameterValue=function(e){var t=e[0],n=e[1],r=e[2],i;return r==="NIL"&&(r=""),n===""||n==="NIL"?i=r||"":i=this.cdfDashboard.getParameterValue(n),i==="NIL"&&(i=r),i||(i=""),i},this.replaceParametersInWidgetTitle=function(e,t){var n=this.getWidgetXulId(e),r=this.getXulDomProperty(n,"title");if(!r)return;typeof t=="undefined"&&(t=!pentahoDashboardEditor||!pentahoDashboardEditor.isEditPanelVisible());if(t){var i=e.parameters;if(!i)return;var s=i.length;if(!s)return;var o,u,a,f,l={},c;for(o=0;o<s;o++)u=i[o],a=u[0],(c=l[a])||(l[a]=c={regexp:new RegExp("\\$?\\{"+a+"\\}","g"),values:[]}),f=this.getComponentParameterValue(u),$.isArray(f)&&(f=f.join("|")),c.values.push(f);for(a in l)c=l[a],f=c.values.join("|"),f===""&&(f="<default>"),r=r.replace(c.regexp,f)}$("#panel-title-"+n).text(r).attr("title",r)},this.replaceParametersInWidgetTitles=function(e){var t,n,r=dashboardWidgets,i=r.length,s,o,u;for(t=0;t<i;t++){n=r[t];if(n.name.indexOf("widget")!==0)continue;this.replaceParametersInWidgetTitle(n,e)}},this.replaceParametersInDashboardHeading=function(e){var t,n,r=dashboardWidgets,i=r.length,s,o,u;for(t=0;t<i;t++){n=r[t];if(!(s=n.parameter))continue;o=new RegExp("\\$?\\{"+n.title+"\\}","g"),u=this.cdfDashboard.getParameterValue(s),$.isArray(u)&&(u=u.join("|")),u===""&&(u="&lt;none&gt;"),e=e.replace(o,u)}return e},this.setWidgetHooks=function(e){var t=e.localizedName;t!=null&&(e.localizedName=t);if(e.name.indexOf("widget")===0)e.postExecution=function(){pentahoDashboardController.replaceParametersInWidgetTitle(this)};else{e.postChange=function(){pentahoDashboardController.updateDashboardHeading()};if(e.type.toLowerCase().indexOf("select")===0&&e.useFirstValue===!0){var n=this.cdfDashboard;e.preExecution=function(){var e=this.parameter,t=n.getParameterValue(e);if(t===""){var r=this.getValuesArray(),i,s=!!this.valueAsId,o;for(var u=0,a=r.length;u<a;u++){if(r[u]==null||!r[u].length)continue;i=s||r[u][0]==null,o=r[u].length>1?r[u][i?1:0]:r[u][0];if(o===t)break}o!==t&&n.setParameter(e,undefined)}this._defaultValueInitialized=!0,this.preExecution=undefined}}else if(e.type.toLowerCase().indexOf("multibutton")===0&&e.useFirstValue===!0){var n=this.cdfDashboard;e.preExecution=function(){var e=this.parameter,t=n.getParameterValue(e);typeof t=="undefined"&&n.setParameter(e,"")}}}},this.parseMultivaluedParam=function(e){var t=/\s*(("([^"]*)")|[^|]*)\s*\|/g,n,r=0,i=[];e+="|";while(n=t.exec(e)){if(n.index!==r)throw"Unexpected token in parameter list";i.push(n[2]?n[3]:n[1].replace(/^\s+|\s+$/,"")),r+=n[0].length}return i},this.initializeCDF=function(){var e=this;this.cdfDashboard.flatParameters=!0,this.cdfDashboard.escapeParameterValues=!1,this.cdfDashboard.pentahoRoot="../",this.cdfDashboard.setI18nSupport(SESSION_LOCALE,jQuery.i18n);if($.isArray(dashboardWidgets)){var t,n=dashboardWidgets.length,r,i,s,o={},u={},a,f,l;for(t=0;t<n;t++){r=dashboardWidgets[t];if(!r)continue;l=r.getGUID?r.getGUID():r.GUID,r.type==="select"&&!r.title&&(r.title=r.parameter),this.setWidgetHooks(r),i=r.name,s=null;if(i.indexOf("widget")===0){var c,h,p,d;s=pentahoDashboardController.getXulDomProperty(pentahoDashboardController.getWidgetXulId(r),"title"),c=r.outputParameters;if(c&&(h=c.length))for(d=0;d<h;d++){p=c[d];if(!p[1])continue;o[s+" - "+p[0]]=l+"$"+p[2]}c=r.parameters;if(c&&(h=c.length))for(d=0;d<h;d++)p=c[d],f=p[0],(a=u[f])||(u[f]=a={}),a[i]=r}else i.indexOf("pov_widget")===0&&(o[r.title]=r.parameter)}}var v=document.location.search,m=v.substr(1).split("&"),g,y,b,w,E,S={},x,T={},N={},C,k={debug:!0,ts:!0};n=v===""?0:m.length;for(t=0;t<n;t++){g=m[t].split("="),y=decodeURIComponent(g[0]),b=decodeURIComponent(g[1]);if(k[y]||!b.length)continue;w=null;if(w=o[y])(E=S[w])?E.push(b):S[w]=[b];a=null;if(a=u[y])(x=T[y])?x.push(b):T[y]=[b];!w&&!a&&((C=N[y])?C.push(b):N[y]=[b])}var L="";for(C in N)L.length&&(L+=", "),L+='"'+C+'"';L.length&&(L="The following parameters were passed in the url, but not recognized: "+L,typeof console!="undefined"&&console.log(L));if(dashboardParameters){n=dashboardParameters.length;for(t=0;t<n;t++){E=dashboardParameters[t],y=E[0],b=E[1];if(E=S[y])b=E.length===1?E[0]:'"'+E.join('"|"')+'"',delete S[y];typeof b=="string"&&b.indexOf("|")!==-1&&(b=pentahoDashboardController.parseMultivaluedParam(b)),this.cdfDashboard.setParameter(y,b)}}L="";for(E in S){b=S[E];for(y in o){if(o[y]!==E)continue;L.length&&(L+=", "),L+='name: "'+y+'"; parameter: "'+E+'"; value: "'+b+'"'}}L.length&&(L="The following dashboard parameters were passed in the url, but not recognized: "+L,typeof console!="undefined"&&console.log(L));var A,O;for(y in T){x=T[y],b=x.length===1?x[0]:'"'+x.join('"|"')+'"',typeof b=="string"&&b.indexOf("|")!==-1&&(b=pentahoDashboardController.parseMultivaluedParam(b)),$.isArray(b)||(b=[b]),n=b.length,a=u[y];for(i in a){r=a[i],c=r.parameters,h=c.length,A=[];for(d=0;d<h;d++)p=c[d],f=p[0],f===y?O=p[1]:A.push(p);for(d=0;d<n;d++)A.push([y,O,b[d]]);r.parameters=A}}var M=[];dashboardWidgets.forEach(function(t){t&&M.push(e.createComponent(t))}),dashboardWidgets=M;var _=dashboardWidgets.map(function(e){return e.localizedName});_.forEach(function(e,t){e!=null&&(dashboardWidgets[t].localizedName=e)}),this.addComponents(dashboardWidgets),this.cdfDashboard.blockUIwithDrag=function(){$.blockUI.defaults.message="",$.blockUI.defaults.css.left="0%",$.blockUI.defaults.css.top="0%",$.blockUI.defaults.css.marginLeft="85px",$.blockUI.defaults.css.width="100%",$.blockUI.defaults.css.height="100%",$.blockUI.defaults.css.opacity="1",$.blockUI.defaults.css.backgroundColor="#ffffcc",$.blockUI.defaults.css["-webkit-border-radius"]="10px",$.blockUI.defaults.css["-moz-border-radius"]="10px",$.blockUI.defaults.overlayCSS.backgroundColor="transparent",$.blockUI.defaults.overlayCSS.opacity="0.6",$.blockUI.defaults.overlayCSS.cursor="wait",$.blockUI.defaults.showOverlay=!1,$.blockUI()},this.cdfDashboard._initEngine(),this.cdfDashboard.init(),Ext.BLANK_IMAGE_URL="../dashboards/resources/ext/images/default/s.gif"},this.unload=function(){try{dashboardOnUnload&&dashboardOnUnload()}catch(e){}},this.dispose=function(){this._glassPaneCallbackRegistration&&typeof removeGlassPaneListenerById=="function"&&removeGlassPaneListenerById(this._glassPaneCallbackRegistration);if(isRunningIFrameInSameOrigin){var e=window.parent;e&&(e.mantle_setDashboardsFilter&&e.mantle_setDashboardsFilter(null),this._parentGlassPaneCallbackRegistration&&e.removeGlassPaneListenerById&&e.removeGlassPaneListenerById(this._parentGlassPaneCallbackRegistration),this._parentChartEditorGlassPaneCallbackRegistration&&e.removeGlassPaneListenerById&&e.removeChartEditorGlassPaneListenerById(this._parentChartEditorGlassPaneCallbackRegistration),top.mantle_removeHandler&&this._handlerRegistration&&top.mantle_removeHandler(this._handlerRegistration))}},this.initValuesArray=function(e){e.valuesArray=[]},this.addToValuesArray=function(e,t,n){e.valuesArray.push([n,t])},this.setDashboardSettings=function(e){this.dashboardSettings=e},this.setElementSettings=function(e,t){this.elementSettings[e]=t},this.getDashboardHeading=function(){return this.dashboard?this.dashboard.getHeading():null},this.setDashboardHeading=function(e){this.dashboard.setHeading(e)},this.getGlobalRefresh=function(){return this.dashboard.getGlobalRefresh()},this.setGlobalRefresh=function(e){this.dashboard.setGlobalRefresh(e),this.cdfDashboard.refreshEngine.setGlobalRefresh(e)},this.setEnableWidgetPrinting=function(e){this.dashboard.setEnableWidgetPrinting(e),this.displayWidgetPrintButtons(e)},this.displayWidgetPrintButtons=function(e){typeof e=="undefined"&&(e=this.dashboard.getEnableWidgetPrinting()),e=e&&printVisible;var t=0,n="print-btn-Panel_",r;while(r=document.getElementById(n+ ++t))r.style.display=e?"":"none"},this.setParameterAndDefaultValue=function(e,t,n){this.cdfDashboard.parameters[e]!=null&&delete this.cdfDashboard.parameters[e],n==null&&(n=""),this.cdfDashboard.setParameter(t,n);var r=new DashboardParameter;r.setName(t),r.setDefaultValue(n);var i,s=this.dashboard.dashboardParameters.dashboardParameters;for(i=s.length-1;i>=0;i--)s[i].name==e&&s.splice(i,1);s.push(r)},this.getDashboardXml=function(){return this.dashboard.asXml(this.cdfDashboard)},this.getDashboard=function(){return this.dashboard},this.keyUp=function(e){e.keyCode=="27"&&this.cancelContentDropDown()},this.mousedown=function(e){},this.mouseUp=function(e){this.cancelContentDropDown()},this.mouseMove=function(e){},this.povChanged=function(e,t){this.setGlobalParameter(e,e,t)}},PentahoDashboardController.onload=function(){/\b((\/editor)|(command=new))\b/g.test(window.location.href)||pentahoDashboardController.init()},PentahoDashboardController.xmlDecode=function(e){return e?e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"'):e},PentahoDashboardController.xmlEncode=function(e){var t=PentahoDashboardController.xmlDecode(e);return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"):t},PentahoDashboardController.typeMap={},PentahoDashboardController.getComponentByFileType=function(e){return PentahoDashboardController.typeMap[e]},PentahoDashboardController.getComponentFileTypes=function(){var e=[];for(type in PentahoDashboardController.typeMap)e.push(type);return e},PentahoDashboardController.registerComponentForFileType=function(e,t){PentahoDashboardController.typeMap[e]=t},PentahoDashboardController.widgetTypeMap={},PentahoDashboardController.getWidgetType=function(e){return PentahoDashboardController.widgetTypeMap[e]},PentahoDashboardController.getWidgetTypeNames=function(){var e=[];for(type in PentahoDashboardController.widgetTypeMap)e.push(type);return e},PentahoDashboardController.getWidgetTypes=function(){var e=[];for(type in PentahoDashboardController.widgetTypeMap)e.push(PentahoDashboardController.getWidgetType(type));return e},PentahoDashboardController.registerWidgetType=function(e){PentahoDashboardController.widgetTypeMap[e.type]=e},pentahoDashboardController=new PentahoDashboardController,printWindow=window.print,window.print=pentahoDashboardController.printDashboard,PentahoEmptyWidget=BaseComponent.extend({constructor:function(e){this.base(),this.name=e,this.htmlObject="content-area-Panel_"+pentahoDashboardController.getWidgetId(e),this.localizedName=window.dashboard_messages.getMessage("empty_widget_label")},type:"PentahoEmptyWidget",iframe:!0,executeAtStart:!0,parameters:[],isDirty:!1,setDirty:function(e){this.isDirty=e},update:function(){this.htmlObject&&(document.getElementById(this.htmlObject).innerHTML="<div class='drag_and_drop_label_wrapper'><div class='drag_and_drop_label_content'><div class='drag_and_drop_label_text'>"+window.dashboard_messages.getMessage("drag_and_drop.label")+"</div></div></div>")}}),CreateParametersStream=function(e){var t=new Array;for(var n=0,r=e.length;n<r;n++){var i=e[n][0],s=e[n][1]==""?e[n][2]:cdfDashboard.getParameterValue(e[n][1]),o;s=="NIL"&&(o=[e[n][2]]),typeof s=="undefined"||s==null||s=="NIL"?o=[]:typeof s=="string"?o=pentahoDashboardController.parseMultivaluedParam(s):typeof s=="array"||typeof s=="object"?o=s:o=[s];if(o.length==0&&e[n].length==2)t.push([i,new Array]);else if(o!=null)for(var u=0;u<o.length;u++)t.push([i,o[u]])}var a="";for(var f=0;f<t.length;f++)f>0&&(a+="<||>"),a+=t[f][0]+"::>"+t[f][1];return a},window.originAdjustmentLeft=0,window.originAdjustmentTop=0,window.setOriginAdjustment=function(e,t){window.originAdjustmentLeft=e,window.originAdjustmentTop=t},pentahoDashboardController}),define("dashboards/pentaho-dashboard-controls",["cdf/dashboard/Utf8Encoder","dashboards/pentaho-dashboard-controller","dashboards/oss-module"],function(Utf8Encoder,dashboardController){var dashboard=dashboardController.cdfDashboard;XActionHelper={},WidgetHelper={},OutputParametersHelper={},window.changeButtonState=function(e,t){var n=document.getElementById(e+"-left"),r=document.getElementById(e+"-right"),i=document.getElementById(e+"-slice"),s=document.getElementById(e+"-label"),o=document.getElementById(e);t=="hover"?(n.className="roundedbutton-left-over",r.className="roundedbutton-right-over",i.className="roundedbutton-slice-over",o.className="roundedbutton-over",s.className="roundedbutton-label-over"):t=="normal"?(n.className="roundedbutton-left",r.className="roundedbutton-right",i.className="roundedbutton-slice",o.className="roundedbutton",s.className="roundedbutton-label"):t=="disabled"&&(leftImg.src="../adhoc/images/button_left_disabled.png",labelTd.style.backgroundImage="url('../adhoc/images/button_middle_disabled.png')",rightImg.src="../adhoc/images/button_right_disabled.png",labelDiv.className="disabledLargeButtonTxt")},window.isButtonEnabled=function(e){var t=document.getElementById(e+"-label-div");return t.className!="disabledLargeButtonTxt"},WidgetHelper.assignedGUIDs={},WidgetHelper.generateGUID=function(){var e=function(){return Math.round(Math.random()*1e5)},t=e();while(WidgetHelper.assignedGUIDs[t])t=e();return WidgetHelper.assignedGUIDs[t]=!0,""+t},WidgetHelper.paramNamesEqual=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n][0]!=t[n][0])return!1;return!0},WidgetHelper.getJsonMqlConditions=function(e){var t=e.conditions["org.pentaho.commons.metadata.mqleditor.beans.Condition"];return t||(t=e.conditions[0]["org.pentaho.commons.metadata.mqleditor.beans.Condition"]),t.condition&&(t=[t]),t},WidgetHelper.getJsonMqlColumns=function(e){var t=e.cols["org.pentaho.commons.metadata.mqleditor.beans.Column"];return t||(t=e.cols[0]["org.pentaho.commons.metadata.mqleditor.beans.Column"]),t.column&&(t=[t]),t},WidgetHelper.parseParameters=function(e){var t=[],n,r=e.length,i,s,o,u=/\{[^\{\}]+\}/;for(n=0;n<r;n++)i=e[n].condition,s=i["@value"],u.test(s)&&(s=s.substr(1,s.length-2),o=i["@defaultValue"],t.push([s,"",o]));return t},WidgetHelper.assignParametersIfChanged=function(e,t){WidgetHelper.paramNamesEqual(e.parameters,t)||(e.parameters=t)},WidgetHelper.mergeParameters=function(e,t){var n=e.parameters||[];e.parameters=[];var r={},i={};for(var s=0;s<t.length;s++){var o=t[s][0];for(var u=0;u<n.length;u++)n[u][0]==o&&!r[""+u]&&(e.parameters.push(n[u]),r[""+u]=!0,i[o]=!0);i[o]||e.parameters.push(t[s])}},WidgetHelper.resolveOutParams=function(outputParameters){if(!outputParameters)return[];if(outputParameters.length)return outputParameters;var params=[],ok=!0,i=0;while(ok){var param=eval("outputParameters.parameter"+i);if(typeof param!="undefined"){ok=!0,i++;var id=param.name;typeof param.id!="undefined"&&(id=param.id),params.push([param.name,param.enabled,id])}else ok=!1}return params},WidgetHelper.mergeOutputParameters=function(e,t){var n=WidgetHelper.resolveOutParams(e.outputParameters),r=e.outputParameters||[];e.outputParameters=[],$("output-parameter",t).each(function(){var t=$(this).attr("id"),r=$(this).attr("displayName");if(r=="solution"||r=="path"||r=="name"||r.indexOf("::")==0)return;var i=$(this).attr("hidden");if(i&&i=="true")return;var s="false";for(var o=0;o<n.length;o++)if(n[o][0]==r){s=n[o][1];break}(new RegExp("^"+e.name)).test(t)==0&&(t=e.GUID+"$"+t),dashboard.getParameterValue(t)==undefined&&dashboard.setParameter(t,"NIL"),e.outputParameters.push([r,s,t])}),WidgetHelper.overlayOutputParameters(e,r)},WidgetHelper.overlayOutputParameters=function(e,t){for(var n=0;n<e.outputParameters.length;n++){var r=e.outputParameters[n][0];for(var i=0;i<t.length;i++)if(t[i][0]==r){e.outputParameters[n][1]=t[i][1],e.outputParameters[n][2]=t[i][2];break}}},OutputParametersHelper.OUT_PARAMS_TITLE_IDX=0,OutputParametersHelper.OUT_PARAMS_ENABLED_IDX=1,OutputParametersHelper.OUT_PARAMS_ID_IDX=2,OutputParametersHelper.INNER_PARAM_SEPARATOR="$",OutputParametersHelper.hasOutputParameters=function(e){return e&&typeof e.getOutputParameters=="function"&&typeof e.setOutputParameters=="function"},OutputParametersHelper.getOutParameterUID=function(e,t){return e.getGUID()+OutputParametersHelper.INNER_PARAM_SEPARATOR+t},OutputParametersHelper.getParameterInnerIdFromUID=function(e,t){var n=t.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR);return n>0?t.substring(n+1,t.length):t},OutputParametersHelper.isParameterFromComponent=function(e,t){var n=e==t||e.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR)>0&&e.substring(0,e.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR))==t;if(!n&&e.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR)<0){var r;for(var i in dashboard.components)if(dashboard.components[i].getGUID&&dashboard.components[i].getGUID()==t){r=dashboard.components[i];if(r.outputParameters){if(r.outputParameters.length==0)return!0;for(var s=0;s<r.outputParameters.length;s++){var o=r.outputParameters[s][2];n=o.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR)>0&&o.substring(0,o.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR))==t;if(n)return n}}}}return n},OutputParametersHelper.isParamEnabled=function(e){var t=e[OutputParametersHelper.OUT_PARAMS_ENABLED_IDX];return t=="true"||t==1},OutputParametersHelper.newParam=function(e,t,n){t&&t!="false"?t=!0:t=!1;var r=[];return r[this.OUT_PARAMS_TITLE_IDX]=e,r[this.OUT_PARAMS_ENABLED_IDX]=t,r[this.OUT_PARAMS_ID_IDX]=n,r},dashboardController.fireOutputParam=function(e,t,n){var r;for(var i in dashboard.components){var s=dashboard.components[i];$(document.getElementById(s.htmlObject)).find("iframe").each(function(t){if(this.contentWindow==e)return r=s,!1})}r==null?dashboard.fireChange(t,Utf8Encoder.encode_prepare(n)):dashboard.fireChange(r.getGUID()+"$"+t,Utf8Encoder.encode_prepare(n))}}),define("dashboards/pentaho-dashboard-main",function(){}),define("dashboards/pentaho-dashboard-xul",function(){}),define("dashboards/widget-chart",["cdf/components/BaseComponent","dashboards/pentaho-dashboard-controller","dashboards/oss-module"],function(e){function n(e,n,r,i){if(n==null){var s={onFinish:function(e,n){pho.dashboards.enableWaitCursor(!0);try{window.parent.pho.showMqlEditorDialog(e,n,new t.QueryEditorCallback)}catch(r){alert("ERROR-0017 - cannot show Mql Editor Dialog in an IFrame in different domain")}},onCancel:function(){},onReady:function(){pho.dashboards.enableWaitCursor(!1)}};pho.dashboards.enableWaitCursor(!0);try{window.parent.pho.showDatasourceSelectionDialog("dashboard-content",s)}catch(o){alert("ERROR-0017 - cannot show Datasource Selection Dialog embedded in an IFrame in different domain")}}else{pho.dashboards.enableWaitCursor(!0);try{window.parent.pho.showChartEditor(e,n,r,i,new t.ChartEditorCallback)}catch(o){alert("ERROR-0017 - cannot show Chart Editor embedded in an IFrame in different domain")}}}PentahoChartComponent=e.extend({isDirty:!1,setDirty:function(e){this.isDirty=e},resize:function(){this.update()},getOutputParameters:function(){return this.outputParameters||this.refreshParameters(),this.outputParameters},setOutputParameters:function(e){if(e.length==0)return;(!this.outputParameters||this.outputParameters.length!=e.length)&&this.refreshParameters();for(var t=0;t<this.outputParameters.length;t++)this.setColumnContentLinkStatus(t,OutputParametersHelper.isParamEnabled(e[t]))},refreshParameters:function(){var e=this.outputParameters||[];this.outputParameters=[],this.parameter=this.getGUID()+"$"+this.name,this.domainParameter=this.getGUID()+"$"+this.name+"_domain";var t=this.chartDataModel.domainColumn,n=this.chartDataModel.categoryColumn,r=t,i=n,s=WidgetHelper.getJsonMqlColumns(this.mqlQuery);if(typeof s.length!="undefined")for(var o=0;o<s.length;o++)s[o].id==t?r=s[o].name:s[o].id==n&&(i=s[o].name);return this.chartDataModel.domainColumn&&this.outputParameters.push(OutputParametersHelper.newParam(r,!1,this.parameter)),n&&n!="None"&&this.outputParameters.push(OutputParametersHelper.newParam(i,!1,this.domainParameter)),WidgetHelper.overlayOutputParameters(this,e),this.outputParameters},setColumnContentLinkStatus:function(e,t){if(this.outputParameters&&this.outputParameters.length>e){var n=this.outputParameters[e][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX];if(t&&!n){var r=this.outputParameters[e][OutputParametersHelper.OUT_PARAMS_ID_IDX];pentahoDashboardController.setParameterAndDefaultValue(null,r,null)}this.outputParameters[e][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]=t}},update:function(e){if(!document||!this.htmlObject)return;var t=document.getElementById(this.htmlObject);if(!t)return;document.getElementById("chartForm")||document.body.appendChild(window.chartForm.frm);var n=this.htmlObject+"_chart";t.innerHTML="<iframe style='width:100%;height:100%;border:0px' frameborder='0' border='0' id=\""+n+'" name="'+n+'" src=""/>';var r=document.getElementById(this.htmlObject),i=getRectangle(r);if(i.width==0){var s=this;e||(e=0),e<5&&setTimeout(function(){s.update(e++)},250)}window.chartForm.chartModel.value=JSON.stringify({chartModel:this.chartModel}),window.chartForm.mqlQuery.value=this.mqlQuery.query,window.chartForm.chartDataModel.value=JSON.stringify({chartDataModel:this.chartDataModel});var o=CreateParametersStream(this.parameters);try{typeof window.top.PentahoMobile!="undefined"&&(o.length>0&&(o+="<||>"),o+="renderEngine::>JFreeChart")}catch(u){}window.chartForm.parameters.value=o,window.chartForm.width.value=i.width>0?i.width-25:300,window.chartForm.height.value=i.height>0?i.height-20:225,this.outputParameters&&this.outputParameters.length>0&&(window.chartForm.paramName.value=this.outputParameters[0][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]===!0?this.parameter:"",window.chartForm.domainParamName.value=this.outputParameters[0][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]===!0?this.domainParameter:""),window.chartForm.frm.target=this.htmlObject+"_chart",document.getElementById("chartForm").submit();var a=this.htmlObject.substring(this.htmlObject.length-1);pentahoDashboardController.setEditContentEnabledById(a,!0)},createWidget:function(){n()},editWidget:function(){var e=JSON.stringify({chartModel:currentWidget.chartModel}),t=JSON.stringify({MQLQuery:currentWidget.mqlQuery}),r=JSON.stringify({chartDataModel:currentWidget.chartDataModel});if(currentWidget.type!=="PentahoChartComponent"){window.confirm("Current widget is not a chart. Replace it now?")&&n(e,t,r,null);return}if(currentWidget.parameter){var i=this.dashboard.getParameterValue(currentWidget.parameter);n(e,t,r,i)}else n(e,t,r,null)},getGUID:function(){return this.GUID==null&&(this.GUID=WidgetHelper.generateGUID()),this.GUID},getFlashElement:function(){var e=document.getElementById(this.htmlObject);if(!e)return null;var t=e.getElementsByTagName("IFRAME");if(!t.length)return null;t=t.item(0);var n=t.contentDocument?t.contentDocument:t.document,r=n.getElementsByTagName("OBJECT");typeof r!="undefined"&&r.length&&(r=r.item(0));if(typeof obj=="undefined"||typeof obj.get_img_binary!="function"){var i=n.getElementsByTagName("EMBED");if(!i.length)return r;r=i.item(0)}return r},removeMaskImage:function(){this.maskFlashContentWithImage(!0)},getJFreeImageUrl:function(){var e=null,t=CreateParametersStream(this.parameters);t.length>0&&(t+="<||>"),t+="renderEngine::>JFreeChart";var n=document.getElementById(this.htmlObject),r=getRectangle(n),i={command:"doChart",chartModel:JSON.stringify({chartModel:this.chartModel}),mqlQuery:this.mqlQuery.query,chartDataModel:JSON.stringify({chartDataModel:this.chartDataModel}),parameters:t,width:r.width>0?r.width:300,height:r.height>0?r.height:225};this.outputParameters&&this.outputParameters.length>0&&(i.paramName=this.outputParameters[0][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]===!0?this.parameter:"",i.domainParamName=this.outputParameters[0][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]===!0?this.domainParameter:"");var s=window.chartForm.frm;return $.ajax({async:!1,type:s.method,url:s.action,data:i,dataType:"html",success:function(t,n,r){var i;i=/<img\s[^>]+>/ig.exec(t);if(!i)return;i=/src="([^"]+)"/.exec(i[0]);if(!i)return;e=i[1].replace(/\/\//g,"/")},error:function(e,t,n){debugger}}),e},maskFlashContentWithImage:function(e){var t=this.name+"_image",n,r,i,s,o;n=this.getFlashElement();if(!n)return!1;r=n.parentNode,i=n.ownerDocument;if(!i)return!1;r&&r.tagName==="OBJECT"&&(r=r.parentNode),(s=i.getElementById(t))&&s.parentNode.removeChild(s);if(e)return;return s=i.createElement("img"),typeof n.get_img_binary=="function"?s.src="data:image/png;base64,"+n.get_img_binary():s.src=this.getJFreeImageUrl(),s.id=t,o=s.style,o.position="relative",o.left=n.clientLeft+"px",o.top=n.clientTop+"px",n.clientHeight!=0?o.height=n.clientHeight+"px":"",n.clientWidth!=0?o.width=n.clientWidth+"px":"",r.appendChild(s),!0},getImageData:function(){var e=this.getFlashElement();return e?e.get_img_binary():!1},type:"PentahoChartComponent",iconClass:"chartIcon",iconImgSrc:"../../themes/"+active_theme+"/images/chartIcon.png",localizedName:"chart_component_lbl",defaultLabel:"Chart"}),window.chartForm=new function(){this.frm=document.createElement("form"),this.frm.method="POST",this.frm.id="chartForm",this.frm.action="service",this.frm.target=this.htmlObject+"_chart",this.frm.style.display="none";var e=document.createElement("input");e.type="text",e.name="command",e.value="doChart",this.frm.appendChild(e),this.mqlQuery=document.createElement("input"),this.mqlQuery.type="text",this.mqlQuery.name="mqlQuery",this.frm.appendChild(this.mqlQuery),this.chartModel=document.createElement("input"),this.chartModel.type="text",this.chartModel.name="chartModel",this.frm.appendChild(this.chartModel),this.parameters=document.createElement("input"),this.parameters.type="text",this.parameters.name="parameters",this.frm.appendChild(this.parameters),this.width=document.createElement("input"),this.width.type="text",this.width.name="width",this.frm.appendChild(this.width),this.height=document.createElement("input"),this.height.type="text",this.height.name="height",this.frm.appendChild(this.height),this.chartDataModel=document.createElement("input"),this.chartDataModel.type="text",this.chartDataModel.name="chartDataModel",this.frm.appendChild(this.chartDataModel),this.paramName=document.createElement("input"),this.paramName.type="text",this.paramName.name="paramName",this.frm.appendChild(this.paramName),this.domainParamName=document.createElement("input"),this.domainParamName.type="text",this.domainParamName.name="domainParamName",this.frm.appendChild(this.domainParamName),this.urlTemplate=document.createElement("input"),this.urlTemplate.type="text",this.urlTemplate.name="urlTemplate",this.frm.appendChild(this.urlTemplate),this.submit=function(){this.frm.submit()}};var t={};t.newChart=function(){n()},t.editWidgetXXX=function(){var e=JSON.stringify({chartModel:currentWidget.chartModel}),t=JSON.stringify({MQLQuery:currentWidget.mqlQuery}),r=JSON.stringify({chartDataModel:currentWidget.chartDataModel});if(currentWidget.type!="PentahoChartComponent"){var i=window.confirm("Current widget is not a chart. Replace it now?");if(i){n(e,t,r,null);return}return}if(currentWidget.parameter){var s=currentWidget.dashboard.getParameterValue(currentWidget.parameter);n(e,t,r,s)}else n(e,t,r,null)},t.ChartEditorCallback=function(){this.onOK=function(e,t,n,r){var i=pentahoDashboardController.getSelectedWidget(),s="widget"+i,o=pentahoDashboardController.cdfDashboard.getComponentByName(s);o&&pentahoDashboardController.cdfDashboard.removeComponent(s);var u=new PentahoChartComponent;u.name=s,u.GUID=WidgetHelper.generateGUID(),u.parameters=currentWidget.parameters,u.type="PentahoChartComponent",u.image="../getImage?image=chartbeans.png",u.executeAtStart=!0,pentahoDashboardController.addComponent(u),u.hasOwnProperty("localizedName")||(u.localizedName=window.dashboard_messages.getMessage(u.localizedName,u.defaultLabel));var a=JSON.parse(e);u.chartModel=a.chartModel;var a=JSON.parse(t);u.mqlQuery=a.MQLQuery;var a=JSON.parse(n);u.chartDataModel=a.chartDataModel;var f=[];if(u.mqlQuery.conditions){var l=WidgetHelper.getJsonMqlConditions(u.mqlQuery);f=WidgetHelper.parseParameters(l)}u.parameters||(u.parameters=[]),WidgetHelper.assignParametersIfChanged(u,f),u.htmlObject=currentWidget.htmlObject,u.name=currentWidget.name,u.refreshParameters(),currentWidget=u,PropertiesPanelHelper.initPropertiesPanel()},this.onCancel=function(){},this.onReady=function(){pho.dashboards.enableWaitCursor(!1)}},t.QueryEditorCallback=function(){this.onFinish=function(e){pho.dashboards.enableWaitCursor(!0);try{window.parent.pho.showChartEditor(null,e,null,null,new t.ChartEditorCallback)}catch(n){alert("ERROR-0017 - cannot perform action embedded in an IFrame in different domain")}},this.onCancel=function(){},this.onReady=function(){pho.dashboards.enableWaitCursor(!1)}},window.pho.fireChartEvents=function(e){for(var t in e)pentahoDashboardController.cdfDashboard.setParameter(t,e[t]);for(var t in e)pentahoDashboardController.cdfDashboard.fireChange(t,e[t])},PentahoDashboardController.registerWidgetType(new PentahoChartComponent)}),define("cdf/components/PrptComponent.ext",["../dashboard/Dashboard.ext","common-ui/util/URLEncoder","pentaho/environment"],function(e,t,n){return{getReport:function(r,i,s){var o=typeof r=="string"||r instanceof String,u=n.server.root+"api/repos/{0}/"+i,a=t.encodeRepositoryPath(o?r:e.composePath(r));return t.encode(u,a,s)}}}),define("cdf/components/PrptComponent",["./PrptComponent.ext","../Logger","../lib/jquery","amd!../lib/underscore","./BaseComponent"],function(e,t,n,r,i){return i.extend({getIframeName:function(){return this.htmlObject+"_"+"prptFrame"},getIframe:function(){return'<iframe name="'+this.getIframeName()+'" style="width:100%;height:100%;border:0px" frameborder="0"/>'},setIframeUrl:function(e,t){e[0]&&(e[0].contentWindow.location=t)},startLoading:function(){this.loading||(this.loading=!0,this.dashboard.incrementRunningCalls())},stopLoading:function(){this.loading&&(this.loading=!1,this.dashboard.decrementRunningCalls())},update:function(){this.clear();var r=this.getOptions(),i=this.getParams(),s=this.getReportOptions();n.each(s,function(e,t){i[e]!=undefined&&delete e});var o={solution:r.solution,path:r.path,action:r.action};delete r.solution,delete r.path,delete r.action,delete s.solution,delete s.path,delete s.action;var u=this.downloadMode,a=r.showParameters?"viewer":"report";if(u==null){var f=r["output-target"];u=(f.indexOf("html")==-1||f.indexOf("mime-message")!=-1)&&f.indexOf("text")==-1}if(r["dashboard-mode"]){r.showParameters&&t.log("showParameters not supported with IFrame = False");var l=this.usePost?"POST":"GET",c=e.getReport(o,"report",{ts:(new Date).getTime()});n.each(s,function(e,t){i[e]==undefined&&(i[e]=t)});var h=this;n.ajax({url:c,type:l,data:i,dataType:"html",success:function(e){n("#"+h.htmlObject).html(e)}})}else{var p=n(this.getIframe()),d=n("#"+this.htmlObject);d.empty(),p=p.appendTo(d),this.autoResize&&(this._sHeight==null?(this._sHeight=d.height(),this._sWidth=d.width()):(d.height(this._sHeight),d.width(this._sWidth)));if(this.usePost){n.each(r,function(e,t){i[e]==undefined&&(i[e]=t)});var c=e.getReport(o,a,{ts:(new Date).getTime()});this._postToUrl(d,p,c,i,this.getIframeName())}else{n.extend(r,{ts:(new Date).getTime()});var c=e.getReport(o,a,r);r.showParameters&&this.autoResize&&(t.log("PrptComponent: autoResize disabled because showParameters=true"),this.autoResize=!1),this.startLoading();var h=this;p.load(function(){if(r.showParameters){var e=n(this.contentWindow.document.body),t=e.find("#reportContent");t.load(function(){h.autoResize&&h._resizeToReportFrame(t[0],d,r)})}h.stopLoading()}),this.setIframeUrl(p,c)}u&&this.stopLoading()}},getOptions:function(){var e={paginate:this.paginate||!1,showParameters:this.showParameters||!1,autoSubmit:this.autoSubmit||this.executeAtStart||!1,"dashboard-mode":this.iframe==undefined?!1:!this.iframe,solution:this.solution,path:this.path,action:this.action,renderMode:"REPORT",htmlProportionalWidth:!1};this.paginate?(e["output-target"]="table/html;page-mode=page",e["accept-page"]=0):(e["output-target"]="table/html;page-mode=stream",e["accept-page"]=-1);var t=this;return r.each(this.parameters,function(n,r){var i=t.extractParameter(n);e[i.name]=i.value}),e},getParams:function(){var e={};this.paginate?(e["output-target"]="table/html;page-mode=page",e["accept-page"]=0):(e["output-target"]="table/html;page-mode=stream",e["accept-page"]=-1);var t=this;return r.each(this.parameters,function(n,r){var i=t.extractParameter(n);e[i.name]=i.value}),e},extractParameter:function(e){var n=e[0],i=e[1],s;try{s=this.dashboard.getParameterValue(i)}catch(o){var u;!r.isObject(i)||r.isFunction(i)?u=i:u=JSON.stringify(i),t.log("extractParameter detected static parameter "+n+"="+u+". "+"The parameter will be used as value instead its value obtained from getParameterValue"),s=i}return s==null&&e.length==3?s=e[2]:s===undefined&&(s=i),r.isFunction(s)&&(s=s()),{name:n,value:s}},getReportOptions:function(){var e={paginate:this.paginate||!1,showParameters:this.showParameters||!1,autoSubmit:this.autoSubmit||this.executeAtStart||!1,"dashboard-mode":this.iframe==undefined?!1:!this.iframe,solution:this.solution,path:this.path,name:this.action,renderMode:"REPORT",htmlProportionalWidth:!1,"accepted-page":-1};return this.paginate?(e["output-target"]="table/html;page-mode=page",e["accept-page"]=0):(e["output-target"]="table/html;page-mode=stream",e["accept-page"]=-1),e},_postToUrl:function(e,t,n,r,i){this.startLoading();var s=this._getParamsAsForm(document,n,r,this.getIframeName());e[0].appendChild(s);var o=this;t.load(function(){o.autoResize&&o._resizeToReportFrame(t[0],e,r),o.stopLoading()}),s.submit()},_resizeToReportFrame:function(e,r,i){var s=i["output-target"],o=function(e){return e.indexOf("html")!=-1&&e.indexOf("mime")==-1},u=function(e){return e.indexOf("text")!=-1},a=function(e){return e.indexOf("xml")!=-1};try{var f=e.contentWindow.document;if(e.contentWindow.document){var l=null;o(s)||u(s)?l=f.body:a(s)&&(l=f.firstChild);if(l!=null){var c=0,h=0;if(o(s)){var p=n(l);c=p.outerHeight(!0)-p.outerHeight(!1),h=p.outerWidth(!0)-p.outerWidth(!1)}r.height(l.scrollHeight+c),r.width(l.scrollWidth+h)}}}catch(d){t.log(d)}},_getParamsAsForm:function(e,t,r,i){var s=e.createElement("form");s.setAttribute("method","post"),s.setAttribute("action",t),s.setAttribute("target",i);for(var o in r)if(r.hasOwnProperty(o)){var u=r[o];if(n.isArray(u))for(var a=0;a<u.length;a++){var f=e.createElement("input");f.setAttribute("type","hidden"),f.setAttribute("name",o),f.setAttribute("value",u[a]),s.appendChild(f)}else{var f=e.createElement("input");f.setAttribute("type","hidden"),f.setAttribute("name",o),f.setAttribute("value",u),s.appendChild(f)}}return s}})}),define("dashboards/widget-prpt",["cdf/components/PrptComponent","common-ui/util/URLEncoder","dashboards/oss-module","dashboards/pentaho-dashboard-controller"],function(PrptComponent,Encoder){var prptiIcon="../../../../../repos/pentaho-interactive-reporting/resources/images/prptiFileType.png";PentahoPrptComponent=PrptComponent.extend({staticParameters:!0,type:"PentahoPrptComponent",iconImgSrc:"../../../../../repos/reporting/reportviewer/images/prptFileType.png",executeAtStart:!0,options:{showParameters:!1},isDirty:!1,_iframe:null,setDirty:function(e){this.isDirty=e},getOutputParameters:function(){return this.outputParameters},setOutputParameters:function(e){for(var t=0;t<e.length;t++)this.setColumnContentLinkStatus(t,OutputParametersHelper.isParamEnabled(e[t]))},setColumnContentLinkStatus:function(e,t){if(this.outputParameters&&this.outputParameters.length>e){var n=this.outputParameters[e][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX];this.outputParameters[e][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]=t}},escapeCharacters:function(e){return e.toString().indexOf("~")!=-1&&(e=e.replace(new RegExp("~","g"),"%7E")),e.toString().indexOf("!")!=-1&&(e=e.replace(new RegExp("!","g"),"%21")),e.toString().indexOf("'")!=-1&&(e=e.replace(new RegExp("'","g"),"%27")),e},updateDashboardMode:function(e){var t=this.genXaction(),n=":"+t.replace(/\//g,":"),r=CONTEXT_PATH+"api/repos/reporting",i=this;$.ajax({url:r,data:e,dataType:"html",success:function(e){$("#"+i.htmlObject).html(e)}})},updateReportMode:function(e){var t=this.genXaction(),n=":"+Encoder.encodeRepositoryPath(t),r=this,i=Encoder.encode(CONTEXT_PATH+"api/repos/{0}/prpt.viewer",[n]),s=function(e,t){var n=[];for(var r=0;r<t.length;r++)n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[r]));return n},o=[];$.each(e,function(e,t){if(t!=null&&t!="NIL"){var n;if(typeof t=="object")n=s(e,t).join("&");else{if(e==="::cl")return;n=encodeURIComponent(e)+"="+r.escapeCharacters(encodeURIComponent(t))}o.push(n)}});var u=[],a=this.outputParameters,f=a?a.length:0,l,c,h,p;for(c=0;c<f;c++){l=a[c];if(l.length<3||!l[1])continue;h="::cl=",p=l[2],p.indexOf("$")>0&&(p=p.substring(p.indexOf("$")+1)),p&&p.length&&o.push(h+encodeURIComponent(p))}var d=i+"?"+o.join("&");setTimeout(function(){if(r._iframe&&r._iframe.contentWindow){var e=$(r._iframe);e.empty(),e.attr("src",d)}else{r._iframe=document.createElement("iframe");var e=$(r._iframe);e.attr("style","width:100%;height:100%;border:0px"),e.attr("frameborder","0"),e.attr("border","0"),e.attr("src",d),$("#"+r.htmlObject).html(e)}})},update:function(){this.clear();var e=this.getOptions();e.showParameters=!1,e["dashboard-mode"]?this.updateDashboardMode(e):this.updateReportMode(e)},print:function(e){var t=document.getElementById(this.htmlObject),n=t.getElementsByTagName("IFRAME").item(0),r=n.contentDocument,e=r.title;n=r.getElementsByTagName("IFRAME").item(0);var i=n.src;i=i.replace(/output-target=table%2Fhtml%3Bpage-mode%3Dpage/g,"output-target=table%2Fhtml%3Bpage-mode%3Dstream"),$.ajax({url:i,dataType:"html",success:function(t){t=t.replace(/<title>.+<\/title>/ig,"<title>"+e+"</title>"),t=t.replace(/<\/body>/g,'<script type="text/javascript">setTimeout("print();",100);</script></body>');var n=window.open("","_blank");r=n.document,r.open(),r.write(t),r.close()}})},setSolutionPathAction:function(e,t,n,r){this.solution=e,this.path=t,this.action=n;var i="",s="",o=this.genXaction(),u=this,a=":"+Encoder.encodeRepositoryPath(o);u.paramServiceUrl=Encoder.encode(CONTEXT_PATH+"api/repos/{0}/parameter?frameless=true&showParameters=false&renderMode=PARAMETER",[a]),r&&r.onfinish()},getOptions:function(){var e={"dashboard-mode":this.iframe==undefined?!1:!this.iframe,"output-target":"table/html;page-mode=stream",showParameters:!1};return $.map(this.parameters,function(t){if(t[0]=="dashboard-mode"||t[0]=="solution"||t[0]=="path"||t[0]=="action"||t[0]=="output-target"||t[0]=="showParameters")e[t[0]]=t[1]==""?t[2]:pentahoDashboardController.cdfDashboard.getParameterValue(t[1]),e[t[0]]=="NIL"&&(e[t[0]]=t[2]);else if(e[t[0]])if($.isArray(e[t[0]])){var n=t[1]==""?t[2]:pentahoDashboardController.cdfDashboard.getParameterValue(t[1]);n=="NIL"&&(n=t[2]),e[t[0]].push(n)}else{var r=[e[t[0]]],n=t[1]==""?t[2]:pentahoDashboardController.cdfDashboard.getParameterValue(t[1]);n=="NIL"&&(n=t[2]),r.push(n),e[t[0]]=r}else{var n=t[1]==""?t[2]:pentahoDashboardController.cdfDashboard.getParameterValue(t[1]);n=="NIL"&&(n=t[2]),e[t[0]]=n}}),e},genXaction:function(){var e=this.solution==null?"":this.solution;return this.path!=null&&(e.length>0&&e.substr(e.length-1,1)!="/"&&(e+="/"),e+=this.path),this.action!=null&&(e.length>0&&e.substr(e.length-1,1)!="/"&&(e+="/"),e+=this.action),e},resolveOutParams:function(outputParameters){if(!outputParameters)return[];if(outputParameters.length)return outputParameters;var params=[],ok=!0,i=0;while(ok){var param=eval("outputParameters.parameter"+i);if(typeof param!="undefined"){ok=!0,i++;var id=param.name;typeof param.id!="undefined"&&(id=param.id),params.push([param.name,param.enabled,id])}else ok=!1}return params},refreshParameters:function(){this.staticParameters=!0;var e=this;this.xactionPath.match(/prpti$/)&&(this.iconImgSrc=prptiIcon),this.paramExtraInfo=[];var t=!1,n=[];$.ajax({url:e.paramServiceUrl,success:function(r){$("parameter",r).each(function(){var r=$(this).find("attribute[name=hidden]").eq(0).attr("value");if(r&&r=="true"){var i=$(this).find("attribute").length,s=$(this).find("attribute[name=role]").length,o=$(this).find("attribute[name=role]").eq(0).attr("value"),u=$(this).find("attribute[name=parameter-render-type]").length;if(i!=s+u+1||o!="user")return}var a=$(this).attr("name");a=="output-target"&&(t=!0);var f=$(this).find("attribute[name=label]").eq(0).attr("value"),l=$(this).find("values").find("value[selected=true]"),c=$(this).attr("is-mandatory");if(l&&l.length>0)for(var h=0;h<l.length;h++){var p=$(this).find("values").find("value[selected=true]").eq(h).attr("value");p==undefined&&(p=""),a=="output-target"&&p==""&&(p="text/html"),n.push([a,"",p]),e.paramExtraInfo.push(new PrptHelper.ParameterExtraInfo(a,c))}else n.push([a,"",""]),e.paramExtraInfo.push(new PrptHelper.ParameterExtraInfo(a,c))}),t||n.push(["output-target","","table/html;page-mode=page"]),WidgetHelper.mergeParameters(e,n),WidgetHelper.mergeOutputParameters(e,r)},type:"GET",async:!1,mimeType:"text/xml",dataType:"xml"})},clear:function(){try{this._iframe&&this._iframe.contentWindow&&this._iframe.contentWindow.onbeforeunload&&(this._iframe.contentWindow.onbeforeunload(),this._iframe.contentWindow.onbeforeunload=null)}catch(e){}},getGUID:function(){return this.GUID==null&&(this.GUID=WidgetHelper.generateGUID()),this.GUID}}),PentahoPrptComponent.newInstance=function(e,t){try{var n=pentahoDashboardController.getSelectedWidget(),r="widget"+n,i=pentahoDashboardController.cdfDashboard.getComponentByName(r);i&&i.type=="PentahoPrptComponent"?(i.clear(),i.parameters=[]):(i&&pentahoDashboardController.cdfDashboard.removeComponent(i),i=new PentahoPrptComponent,i.GUID=WidgetHelper.generateGUID(),i.localizedName=t,i.type="PentahoPrptComponent",i.iframe=!0,i.autoSubmit=!0,i.parameters=[],i.name=r,i.htmlObject="content-area-Panel_"+n,pentahoDashboardController.addComponent(i));var s=XActionHelper.parseXaction(e);e.match(/prpti$/)&&(i.iconImgSrc=prptiIcon),i.xactionPath=e,i.setSolutionPathAction(s[0],s[1],s[2],new function(){this.onfinish=function(){i.refreshParameters(),currentWidget=i;var e=XActionHelper.genXaction(i.solution,i.path,i.action);PropertiesPanelHelper.initPropertiesPanel(e)}})}catch(o){alert(o)}},PrptHelper={},PrptHelper.ParameterExtraInfo=function(e,t){this.id=e,this.required=t},PentahoDashboardController.registerComponentForFileType("prpt",PentahoPrptComponent),PentahoDashboardController.registerComponentForFileType("prpti",PentahoPrptComponent)}),define("dashboards/widget-url",["cdf/components/BaseComponent","dashboards/oss-module","dashboards/pentaho-dashboard-controller"],function(e){PentahoUrlComponent=e.extend({outputParameters:[],update:function(){var e=document.getElementById(this.htmlObject);if(!e)return;this.url||(this.url="about:blank");var t=this.url;this.parameters||(this.parameters="");for(var n=0;n<this.parameters.length;n++){var r=this.parameters[n][0],i=this.parameters[n][1]==""?this.parameters[n][2]:this.dashboard.getParameterValue(this.parameters[n][1]);i=="NIL"&&(i=this.parameters[n][2]);var s=new RegExp("\\$?\\{"+r+"\\}","g");t=t.replace(s,encodeURIComponent(i+"").replace(/'/g,"%27"))}var o=this;pentahoGet("service","command=checkWhiteList&url="+t,function(n){n=="Bad"&&(alert(pho_messages.getMessage("DashboardWizard.URL_NOT_ALLOWED","URL not allowed. Please contact your administrator.")),t="about:blank"),e.innerHTML="<iframe style='width:100%;height:100%;border:0px' frameborder='0' border='0' src='"+t+"'/>"});var u=this.htmlObject.substring(this.htmlObject.length-1);pentahoDashboardController.setEditContentEnabledById(u,!0)},createWidget:function(){var e=this;window.gwtPrompt(pho_messages.getMessage("website_address")+": ",{onOk:function(t){e.createUrlWidgetWithUrl(t)},onCancel:function(){},onError:function(t){e.createUrlWidgetWithUrl(url)}},{title:"User Input Required"})},editWidget:function(){var e=this;window.gwtPrompt(pho_messages.getMessage("website_address")+": ",{onOk:function(t){e.createUrlWidgetWithUrl(t)},onCancel:function(){},onError:function(t){e.createUrlWidgetWithUrl(url)}},{title:"Enter URL",defaultValue:currentWidget.url||""})},createUrlWidgetWithUrl:function(e){if(!e)return;e.indexOf(".")===-1&&(e="http://www."+e+".com"),e.indexOf("http")!==0&&(e="http://"+e);var t=pentahoDashboardController.getSelectedWidget(),n="widget"+t,r=pentahoDashboardController.cdfDashboard.getComponentByName(n);r&&pentahoDashboardController.cdfDashboard.removeComponent(n);var i=new PentahoUrlComponent;i.GUID=WidgetHelper.generateGUID(),i.htmlObject=currentWidget.htmlObject,i.parameters=currentWidget.parameters,i.name=n,i.type="PentahoUrlComponent",currentWidget=i,pentahoDashboardController.addComponent(i),currentWidget.localizedName=window.dashboard_messages.getMessage(currentWidget.localizedName,currentWidget.defaultLabel),i.parameters||(i.parameters=[]);var s=[],o=e.match(/\$?\{([^\}]*)\}/g);if(o){var u,a=o.length,f;for(u=0;u<a;u++)f=o[u],s.push([f.substring(f.indexOf("{")+1,f.indexOf("}")),"",""])}WidgetHelper.assignParametersIfChanged(i,s),i.url=e,PropertiesPanelHelper.initPropertiesPanel(),currentWidget.update()},getGUID:function(){return this.GUID==null&&(this.GUID=WidgetHelper.generateGUID()),this.GUID},type:"PentahoUrlComponent",executeAtStart:!0,iconClass:"urlIcon",iconImgSrc:"../../themes/"+active_theme+"/images/urlIcon.png",localizedName:"url_component_lbl",defaultLabel:"URL"})}),define("cdf/components/XactionComponent",["./XactionComponent.ext","../lib/jquery","./BaseComponent"],function(e,t,n){return n.extend({update:function(){var n=this;try{if(typeof this.iframe=="undefined"||!this.iframe){var r=new Array(this.parameters?this.parameters.length:0);for(var i=0,s=r.length;i<s;i++){var o=this.parameters[i][0],u=this.parameters[i][1]==""?this.parameters[i][2]:this.dashboard.getParameterValue(this.parameters[i][1]);this.value=="NIL"&&(this.value=this.parameters[i][2]),r[i]=[o,u]}if(typeof this.serviceMethod=="undefined"||this.serviceMethod=="ServiceAction"){var a=this.dashboard.callPentahoAction(n,this.solution,this.path,this.action,r,null);a!=null&&t("#"+n.htmlObject).html(a.find("ExecuteActivityResponse:first-child").text())}else{var f=this.dashboard.pentahoServiceAction(this.serviceMethod,"html",this.solution,this.path,this.action,r,null);t("#"+n.htmlObject).html(f)}}else{var l='<iframe id="iframe_'+this.htmlObject+'"'+' frameborder="0"'+' height="100%"'+' width="100%" />',c=t(l),h=e.getCdfXaction(this.path,this.action,this.solution)+"&wrapper=false",r=new Array(this.parameters.length);for(var i=0,s=r.length;i<s;i++){var p="&"+encodeURIComponent(this.parameters[i][0])+"=",d="";this.parameters[i][1]==""?d=encodeURIComponent(this.parameters[i][2]):(d=encodeURIComponent(this.dashboard.getParameterValue(this.parameters[i][1])),d=="NIL"&&(d=encodeURIComponent(this.parameters[i][2]))),h+=p+d}this.loading||(this.loading=!0,this.dashboard.incrementRunningCalls()),c.load(function(){this.contentWindow.document.body.innerHTML&&(n.loading=!1,n.dashboard.decrementRunningCalls())}),t("#"+this.htmlObject).empty().append(c),c[0].contentWindow.location=h}}catch(v){}}})}),define("dashboards/widget-xaction",["cdf/components/XactionComponent","dashboards/pentaho-dashboard-controller","dashboards/oss-module"],function(e){DashboardXactionComponent=e.extend({iconImgSrc:"../../../../../repos/xaction/resources/images/xaction_file_image.png",contentLinkingCustomizationDisabled:!0,updateParameters:function(){},isDirty:!1,setDirty:function(e){this.isDirty=e},refreshParameters:function(){var e=null;try{document.body.style.cursor="wait";var t=pentahoGet("service","command=xactionparams&xactionref="+this.xactionPath,null,"text/text");e=JSON.parse("{"+t+"}")}catch(n){}document.body.style.cursor="default";var r=[],i=null,s=[],o=[];if(e){i=e.xaction.properties.contentLinkParameter,contentLinkParamDefault=e.xaction.properties.contentLinkParameterDefault;var u=e.xaction.properties.contentLinkParameters?e.xaction.properties.contentLinkParameters.items:null;if(u)for(var a=0;a<u.length;a++){var f=u[a].parameter.properties,l=OutputParametersHelper.getOutParameterUID(this,f.name),c=OutputParametersHelper.newParam(f.name,!0,l);s.push(c),o.push(f.value)}var h=e.xaction.properties.parameters.items,p;for(p=0;p<h.length;p++){var f=h[p].parameter.properties,d=f.name,v=f.value,m=!1;for(var a=0;a<r.length;a++)r[a][0]==d&&(m=!0);m||r.push([d,"",v])}}WidgetHelper.mergeParameters(this,r);if(s){this.outputParameters=s;for(var a=0;a<s.length;a++)if(o[a]!=null){var g=o[a],y=s[a][OutputParametersHelper.OUT_PARAMS_ID_IDX];pentahoDashboardController.setParameterAndDefaultValue(y,y,g)}}else if(i){var b=this.parameter;this.parameter=i,contentLinkParamDefault&&pentahoDashboardController.setParameterAndDefaultValue(b,i,contentLinkParamDefault)}},getOutputParameters:function(){return this.outputParameters},setOutputParameters:function(e){e&&e.length==this.outputParameters.length&&(this.outputParameters=e)},setColumnContentLinkStatus:function(e,t){if(this.outputParameters&&this.outputParameters.length>e){var n=this.outputParameters[e][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX];if(t&&!n){var r=this.outputParameters[e][OutputParametersHelper.OUT_PARAMS_ID_IDX],i=this.getValue(r);pentahoDashboardController.setParameterAndDefaultValue(null,r,i)}this.outputParameters[e][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]=t}},getGUID:function(){return this.GUID==null&&(this.GUID=WidgetHelper.generateGUID()),this.GUID}}),e.newInstance=function(e,t){if(e){var n=pentahoDashboardController.getSelectedWidget(),r="widget"+n,i=pentahoDashboardController.cdfDashboard.getComponentByName(r);i&&pentahoDashboardController.cdfDashboard.removeComponent(r),i=new DashboardXactionComponent,i.GUID=WidgetHelper.generateGUID(),e.indexOf("/pentaho-solutions/")==0&&(e=e.substring("/pentaho-solutions/".length)),i.xactionPath=e,i.localizedName=t,i.type="DashboardXactionComponent",i.iframe=!0,i.executeAtStart=!0;var s=XActionHelper.parseXaction(e);i.solution=s[0],i.path=e,i.action=s[2];var n=pentahoDashboardController.getSelectedWidget();i.name=r,i.htmlObject="content-area-Panel_"+n,i.refreshParameters(),pentahoDashboardController.addComponent(i),currentWidget=i;var o=XActionHelper.genXaction(i.solution,i.path,i.action);PropertiesPanelHelper.initPropertiesPanel(o),PropertiesPanelHelper.updateContentLinkingPanel(currentWidget.name),pentahoDashboardController.setEditContentEnabledById(n,!0)}},PentahoDashboardController.registerComponentForFileType("xaction",e),PentahoDashboardController.registerComponentForFileType("analysisview.xaction",e),PentahoDashboardController.registerComponentForFileType("waqr.xaction",e)}),define("dashboards/dashboard-module",["dashboards/oss-module","dashboards/pentaho-ajax","dashboards/pentaho-dashboard-controls","dashboards/pentaho-dashboard-main","dashboards/pentaho-dashboard-xul","dashboards/pentaho-json","dashboards/pentaho-ajax","dashboards/widget-chart","dashboards/widget-prpt","dashboards/widget-url","dashboards/widget-table","dashboards/widget-xaction"],function(){}),function(e){var t=document,n="appendChild",r="styleSheet",i=t.createElement("style");i.type="text/css",t.getElementsByTagName("head")[0][n](i),i[r]?i[r].cssText=e:i[n](t.createTextNode(e))}("/*! jQuery-Impromptu - v5.2.4 - 2014-05-26\n* http://trentrichardson.com/Impromptu\n* Copyright (c) 2014 Trent Richardson; Licensed MIT */\n.jqifade{\n	position: absolute; \n	background-color: #777777; \n}\ndiv.jqi{ \n	width: 400px; \n	max-width:90%;\n	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; \n	position: absolute; \n	background-color: #ffffff; \n	font-size: 11px; \n	text-align: left; \n	border: solid 1px #eeeeee;\n	border-radius: 6px;\n	-moz-border-radius: 6px;\n	-webkit-border-radius: 6px;\n	padding: 7px;\n}\ndiv.jqi .jqicontainer{ \n}\ndiv.jqi .jqiclose{ \n	position: absolute;\n	top: 4px; right: -2px; \n	width: 18px; \n	cursor: default; \n	color: #bbbbbb; \n	font-weight: bold; \n}\ndiv.jqi .jqistate{\n	background-color: #fff;\n}\ndiv.jqi .jqititle{\n	padding: 5px 10px;\n	font-size: 16px; \n	line-height: 20px; \n	border-bottom: solid 1px #eeeeee;\n}\ndiv.jqi .jqimessage{ \n	padding: 10px; \n	line-height: 20px; \n	color: #444444; \n}\ndiv.jqi .jqibuttons{ \n	text-align: right; \n	margin: 0 -7px -7px -7px;\n	border-top: solid 1px #e4e4e4; \n	background-color: #f4f4f4;\n	border-radius: 0 0 6px 6px;\n	-moz-border-radius: 0 0 6px 6px;\n	-webkit-border-radius: 0 0 6px 6px;\n}\ndiv.jqi .jqibuttons button{ \n	margin: 0;\n	padding: 15px 20px;\n	background-color: transparent;\n	font-weight: normal; \n	border: none;\n	border-left: solid 1px #e4e4e4; \n	color: #777; \n	font-weight: bold; \n	font-size: 12px; \n}\ndiv.jqi .jqibuttons button.jqidefaultbutton{\n	color: #489afe;\n}\ndiv.jqi .jqibuttons button:hover,\ndiv.jqi .jqibuttons button:focus{\n	color: #287ade;\n	outline: none;\n}\n.jqiwarning .jqi .jqibuttons{ \n	background-color: #b95656;\n}\n\n/* sub states */\ndiv.jqi .jqiparentstate::after{ \n	background-color: #777;\n	opacity: 0.6;\n	filter: alpha(opacity=60);\n	content: '';\n	position: absolute;\n	top:0;left:0;bottom:0;right:0;\n	border-radius: 6px;\n	-moz-border-radius: 6px;\n	-webkit-border-radius: 6px;\n}\ndiv.jqi .jqisubstate{\n	position: absolute;\n	top:0;\n	left: 20%;\n	width: 60%;\n	padding: 7px;\n	border: solid 1px #eeeeee;\n	border-top: none;\n	border-radius: 0 0 6px 6px;\n	-moz-border-radius: 0 0 6px 6px;\n	-webkit-border-radius: 0 0 6px 6px;\n}\ndiv.jqi .jqisubstate .jqibuttons button{\n	padding: 10px 18px;\n}\n\n/* arrows for tooltips/tours */\n.jqi .jqiarrow{ position: absolute; height: 0; width:0; line-height: 0; font-size: 0; border: solid 10px transparent;}\n\n.jqi .jqiarrowtl{ left: 10px; top: -20px; border-bottom-color: #ffffff; }\n.jqi .jqiarrowtc{ left: 50%; top: -20px; border-bottom-color: #ffffff; margin-left: -10px; }\n.jqi .jqiarrowtr{ right: 10px; top: -20px; border-bottom-color: #ffffff; }\n\n.jqi .jqiarrowbl{ left: 10px; bottom: -20px; border-top-color: #ffffff; }\n.jqi .jqiarrowbc{ left: 50%; bottom: -20px; border-top-color: #ffffff; margin-left: -10px; }\n.jqi .jqiarrowbr{ right: 10px; bottom: -20px; border-top-color: #ffffff; }\n\n.jqi .jqiarrowlt{ left: -20px; top: 10px; border-right-color: #ffffff; }\n.jqi .jqiarrowlm{ left: -20px; top: 50%; border-right-color: #ffffff; margin-top: -10px; }\n.jqi .jqiarrowlb{ left: -20px; bottom: 10px; border-right-color: #ffffff; }\n\n.jqi .jqiarrowrt{ right: -20px; top: 10px; border-left-color: #ffffff; }\n.jqi .jqiarrowrm{ right: -20px; top: 50%; border-left-color: #ffffff; margin-top: -10px; }\n.jqi .jqiarrowrb{ right: -20px; bottom: 10px; border-left-color: #ffffff; }\n\n/*!\n * Copyright 2002 - 2017 Webdetails, a Hitachi Vantara company. All rights reserved.\n *\n * This software was developed by Webdetails and is provided under the terms\n * of the Mozilla Public License, Version 2.0, or any later version. You may not use\n * this file except in compliance with the license. If you need a copy of the license,\n * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.\n *\n * Software distributed under the Mozilla Public License is distributed on an \"AS IS\"\n * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to\n * the license for the specific language governing your rights and limitations.\n */\n\n.errorMessageTable .errorIcon {\n  background-image: url('cdf/js/lib/images/error.png');\n  height:16px;\n  width:16px;\n  display:inline-block;\n}\n/*! jQuery UI - v1.10.4 - 2014-06-19\n* http://jqueryui.com\n* Includes: jquery.ui.core.css, jquery.ui.resizable.css, jquery.ui.selectable.css, jquery.ui.accordion.css, jquery.ui.autocomplete.css, jquery.ui.button.css, jquery.ui.datepicker.css, jquery.ui.dialog.css, jquery.ui.menu.css, jquery.ui.progressbar.css, jquery.ui.slider.css, jquery.ui.spinner.css, jquery.ui.tabs.css, jquery.ui.tooltip.css, jquery.ui.theme.css\n* To view and modify this theme, visit http://jqueryui.com/themeroller/?ffDefault=Lucida%20Grande%2CLucida%20Sans%2CArial%2Csans-serif&fwDefault=bold&fsDefault=1.1em&cornerRadius=6px&bgColorHeader=deedf7&bgTextureHeader=highlight_soft&bgImgOpacityHeader=100&borderColorHeader=aed0ea&fcHeader=222222&iconColorHeader=72a7cf&bgColorContent=f2f5f7&bgTextureContent=highlight_hard&bgImgOpacityContent=100&borderColorContent=dddddd&fcContent=362b36&iconColorContent=72a7cf&bgColorDefault=d7ebf9&bgTextureDefault=glass&bgImgOpacityDefault=80&borderColorDefault=aed0ea&fcDefault=2779aa&iconColorDefault=3d80b3&bgColorHover=e4f1fb&bgTextureHover=glass&bgImgOpacityHover=100&borderColorHover=74b2e2&fcHover=0070a3&iconColorHover=2694e8&bgColorActive=3baae3&bgTextureActive=glass&bgImgOpacityActive=50&borderColorActive=2694e8&fcActive=ffffff&iconColorActive=ffffff&bgColorHighlight=ffef8f&bgTextureHighlight=highlight_soft&bgImgOpacityHighlight=25&borderColorHighlight=f9dd34&fcHighlight=363636&iconColorHighlight=2e83ff&bgColorError=cd0a0a&bgTextureError=flat&bgImgOpacityError=15&borderColorError=cd0a0a&fcError=ffffff&iconColorError=ffffff&bgColorOverlay=eeeeee&bgTextureOverlay=diagonals_thick&bgImgOpacityOverlay=90&opacityOverlay=80&bgColorShadow=000000&bgTextureShadow=highlight_hard&bgImgOpacityShadow=70&opacityShadow=30&thicknessShadow=7px&offsetTopShadow=-7px&offsetLeftShadow=-7px&cornerRadiusShadow=8px\n* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */\n\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n	display: none;\n}\n.ui-helper-hidden-accessible {\n	border: 0;\n	clip: rect(0 0 0 0);\n	height: 1px;\n	margin: -1px;\n	overflow: hidden;\n	padding: 0;\n	position: absolute;\n	width: 1px;\n}\n.ui-helper-reset {\n	margin: 0;\n	padding: 0;\n	border: 0;\n	outline: 0;\n	line-height: 1.3;\n	text-decoration: none;\n	font-size: 100%;\n	list-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n	content: \"\";\n	display: table;\n	border-collapse: collapse;\n}\n.ui-helper-clearfix:after {\n	clear: both;\n}\n.ui-helper-clearfix {\n	min-height: 0; /* support: IE7 */\n}\n.ui-helper-zfix {\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	position: absolute;\n	opacity: 0;\n	filter:Alpha(Opacity=0);\n}\n\n.ui-front {\n	z-index: 100;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n	cursor: default !important;\n}\n\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n.ui-icon {\n	display: block;\n	text-indent: -99999px;\n	overflow: hidden;\n	background-repeat: no-repeat;\n}\n\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n.ui-widget-overlay {\n	position: fixed;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n}\n.ui-resizable {\n	position: relative;\n}\n.ui-resizable-handle {\n	position: absolute;\n	font-size: 0.1px;\n	display: block;\n}\n.ui-resizable-disabled .ui-resizable-handle,\n.ui-resizable-autohide .ui-resizable-handle {\n	display: none;\n}\n.ui-resizable-n {\n	cursor: n-resize;\n	height: 7px;\n	width: 100%;\n	top: -5px;\n	left: 0;\n}\n.ui-resizable-s {\n	cursor: s-resize;\n	height: 7px;\n	width: 100%;\n	bottom: -5px;\n	left: 0;\n}\n.ui-resizable-e {\n	cursor: e-resize;\n	width: 7px;\n	right: -5px;\n	top: 0;\n	height: 100%;\n}\n.ui-resizable-w {\n	cursor: w-resize;\n	width: 7px;\n	left: -5px;\n	top: 0;\n	height: 100%;\n}\n.ui-resizable-se {\n	cursor: se-resize;\n	width: 12px;\n	height: 12px;\n	right: 1px;\n	bottom: 1px;\n}\n.ui-resizable-sw {\n	cursor: sw-resize;\n	width: 9px;\n	height: 9px;\n	left: -5px;\n	bottom: -5px;\n}\n.ui-resizable-nw {\n	cursor: nw-resize;\n	width: 9px;\n	height: 9px;\n	left: -5px;\n	top: -5px;\n}\n.ui-resizable-ne {\n	cursor: ne-resize;\n	width: 9px;\n	height: 9px;\n	right: -5px;\n	top: -5px;\n}\n.ui-selectable-helper {\n	position: absolute;\n	z-index: 100;\n	border: 1px dotted black;\n}\n.ui-accordion .ui-accordion-header {\n	display: block;\n	cursor: pointer;\n	position: relative;\n	margin-top: 2px;\n	padding: .5em .5em .5em .7em;\n	min-height: 0; /* support: IE7 */\n}\n.ui-accordion .ui-accordion-icons {\n	padding-left: 2.2em;\n}\n.ui-accordion .ui-accordion-noicons {\n	padding-left: .7em;\n}\n.ui-accordion .ui-accordion-icons .ui-accordion-icons {\n	padding-left: 2.2em;\n}\n.ui-accordion .ui-accordion-header .ui-accordion-header-icon {\n	position: absolute;\n	left: .5em;\n	top: 50%;\n	margin-top: -8px;\n}\n.ui-accordion .ui-accordion-content {\n	padding: 1em 2.2em;\n	border-top: 0;\n	overflow: auto;\n}\n.ui-autocomplete {\n	position: absolute;\n	top: 0;\n	left: 0;\n	cursor: default;\n}\n.ui-button {\n	display: inline-block;\n	position: relative;\n	padding: 0;\n	line-height: normal;\n	margin-right: .1em;\n	cursor: pointer;\n	vertical-align: middle;\n	text-align: center;\n	overflow: visible; /* removes extra width in IE */\n}\n.ui-button,\n.ui-button:link,\n.ui-button:visited,\n.ui-button:hover,\n.ui-button:active {\n	text-decoration: none;\n}\n/* to make room for the icon, a width needs to be set here */\n.ui-button-icon-only {\n	width: 2.2em;\n}\n/* button elements seem to need a little more width */\nbutton.ui-button-icon-only {\n	width: 2.4em;\n}\n.ui-button-icons-only {\n	width: 3.4em;\n}\nbutton.ui-button-icons-only {\n	width: 3.7em;\n}\n\n/* button text element */\n.ui-button .ui-button-text {\n	display: block;\n	line-height: normal;\n}\n.ui-button-text-only .ui-button-text {\n	padding: .4em 1em;\n}\n.ui-button-icon-only .ui-button-text,\n.ui-button-icons-only .ui-button-text {\n	padding: .4em;\n	text-indent: -9999999px;\n}\n.ui-button-text-icon-primary .ui-button-text,\n.ui-button-text-icons .ui-button-text {\n	padding: .4em 1em .4em 2.1em;\n}\n.ui-button-text-icon-secondary .ui-button-text,\n.ui-button-text-icons .ui-button-text {\n	padding: .4em 2.1em .4em 1em;\n}\n.ui-button-text-icons .ui-button-text {\n	padding-left: 2.1em;\n	padding-right: 2.1em;\n}\n/* no icon support for input elements, provide padding by default */\ninput.ui-button {\n	padding: .4em 1em;\n}\n\n/* button icon element(s) */\n.ui-button-icon-only .ui-icon,\n.ui-button-text-icon-primary .ui-icon,\n.ui-button-text-icon-secondary .ui-icon,\n.ui-button-text-icons .ui-icon,\n.ui-button-icons-only .ui-icon {\n	position: absolute;\n	top: 50%;\n	margin-top: -8px;\n}\n.ui-button-icon-only .ui-icon {\n	left: 50%;\n	margin-left: -8px;\n}\n.ui-button-text-icon-primary .ui-button-icon-primary,\n.ui-button-text-icons .ui-button-icon-primary,\n.ui-button-icons-only .ui-button-icon-primary {\n	left: .5em;\n}\n.ui-button-text-icon-secondary .ui-button-icon-secondary,\n.ui-button-text-icons .ui-button-icon-secondary,\n.ui-button-icons-only .ui-button-icon-secondary {\n	right: .5em;\n}\n\n/* button sets */\n.ui-buttonset {\n	margin-right: 7px;\n}\n.ui-buttonset .ui-button {\n	margin-left: 0;\n	margin-right: -.3em;\n}\n\n/* workarounds */\n/* reset extra padding in Firefox, see h5bp.com/l */\ninput.ui-button::-moz-focus-inner,\nbutton.ui-button::-moz-focus-inner {\n	border: 0;\n	padding: 0;\n}\n.ui-datepicker {\n	width: 17em;\n	padding: .2em .2em 0;\n	display: none;\n}\n.ui-datepicker .ui-datepicker-header {\n	position: relative;\n	padding: .2em 0;\n}\n.ui-datepicker .ui-datepicker-prev,\n.ui-datepicker .ui-datepicker-next {\n	position: absolute;\n	top: 2px;\n	width: 1.8em;\n	height: 1.8em;\n}\n.ui-datepicker .ui-datepicker-prev-hover,\n.ui-datepicker .ui-datepicker-next-hover {\n	top: 1px;\n}\n.ui-datepicker .ui-datepicker-prev {\n	left: 2px;\n}\n.ui-datepicker .ui-datepicker-next {\n	right: 2px;\n}\n.ui-datepicker .ui-datepicker-prev-hover {\n	left: 1px;\n}\n.ui-datepicker .ui-datepicker-next-hover {\n	right: 1px;\n}\n.ui-datepicker .ui-datepicker-prev span,\n.ui-datepicker .ui-datepicker-next span {\n	display: block;\n	position: absolute;\n	left: 50%;\n	margin-left: -8px;\n	top: 50%;\n	margin-top: -8px;\n}\n.ui-datepicker .ui-datepicker-title {\n	margin: 0 2.3em;\n	line-height: 1.8em;\n	text-align: center;\n}\n.ui-datepicker .ui-datepicker-title select {\n	font-size: 1em;\n	margin: 1px 0;\n}\n.ui-datepicker select.ui-datepicker-month,\n.ui-datepicker select.ui-datepicker-year {\n	width: 49%;\n}\n.ui-datepicker table {\n	width: 100%;\n	font-size: .9em;\n	border-collapse: collapse;\n	margin: 0 0 .4em;\n}\n.ui-datepicker th {\n	padding: .7em .3em;\n	text-align: center;\n	font-weight: bold;\n	border: 0;\n}\n.ui-datepicker td {\n	border: 0;\n	padding: 1px;\n}\n.ui-datepicker td span,\n.ui-datepicker td a {\n	display: block;\n	padding: .2em;\n	text-align: right;\n	text-decoration: none;\n}\n.ui-datepicker .ui-datepicker-buttonpane {\n	background-image: none;\n	margin: .7em 0 0 0;\n	padding: 0 .2em;\n	border-left: 0;\n	border-right: 0;\n	border-bottom: 0;\n}\n.ui-datepicker .ui-datepicker-buttonpane button {\n	float: right;\n	margin: .5em .2em .4em;\n	cursor: pointer;\n	padding: .2em .6em .3em .6em;\n	width: auto;\n	overflow: visible;\n}\n.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {\n	float: left;\n}\n\n/* with multiple calendars */\n.ui-datepicker.ui-datepicker-multi {\n	width: auto;\n}\n.ui-datepicker-multi .ui-datepicker-group {\n	float: left;\n}\n.ui-datepicker-multi .ui-datepicker-group table {\n	width: 95%;\n	margin: 0 auto .4em;\n}\n.ui-datepicker-multi-2 .ui-datepicker-group {\n	width: 50%;\n}\n.ui-datepicker-multi-3 .ui-datepicker-group {\n	width: 33.3%;\n}\n.ui-datepicker-multi-4 .ui-datepicker-group {\n	width: 25%;\n}\n.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {\n	border-left-width: 0;\n}\n.ui-datepicker-multi .ui-datepicker-buttonpane {\n	clear: left;\n}\n.ui-datepicker-row-break {\n	clear: both;\n	width: 100%;\n	font-size: 0;\n}\n\n/* RTL support */\n.ui-datepicker-rtl {\n	direction: rtl;\n}\n.ui-datepicker-rtl .ui-datepicker-prev {\n	right: 2px;\n	left: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next {\n	left: 2px;\n	right: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-prev:hover {\n	right: 1px;\n	left: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next:hover {\n	left: 1px;\n	right: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane {\n	clear: right;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button {\n	float: left;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,\n.ui-datepicker-rtl .ui-datepicker-group {\n	float: right;\n}\n.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {\n	border-right-width: 0;\n	border-left-width: 1px;\n}\n.ui-dialog {\n	overflow: hidden;\n	position: absolute;\n	top: 0;\n	left: 0;\n	padding: .2em;\n	outline: 0;\n}\n.ui-dialog .ui-dialog-titlebar {\n	padding: .4em 1em;\n	position: relative;\n}\n.ui-dialog .ui-dialog-title {\n	float: left;\n	margin: .1em 0;\n	white-space: nowrap;\n	width: 90%;\n	overflow: hidden;\n	text-overflow: ellipsis;\n}\n.ui-dialog .ui-dialog-titlebar-close {\n	position: absolute;\n	right: .3em;\n	top: 50%;\n	width: 20px;\n	margin: -10px 0 0 0;\n	padding: 1px;\n	height: 20px;\n}\n.ui-dialog .ui-dialog-content {\n	position: relative;\n	border: 0;\n	padding: .5em 1em;\n	background: none;\n	overflow: auto;\n}\n.ui-dialog .ui-dialog-buttonpane {\n	text-align: left;\n	border-width: 1px 0 0 0;\n	background-image: none;\n	margin-top: .5em;\n	padding: .3em 1em .5em .4em;\n}\n.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {\n	float: right;\n}\n.ui-dialog .ui-dialog-buttonpane button {\n	margin: .5em .4em .5em 0;\n	cursor: pointer;\n}\n.ui-dialog .ui-resizable-se {\n	width: 12px;\n	height: 12px;\n	right: -5px;\n	bottom: -5px;\n	background-position: 16px 16px;\n}\n.ui-draggable .ui-dialog-titlebar {\n	cursor: move;\n}\n.ui-menu {\n	list-style: none;\n	padding: 2px;\n	margin: 0;\n	display: block;\n	outline: none;\n}\n.ui-menu .ui-menu {\n	margin-top: -3px;\n	position: absolute;\n}\n.ui-menu .ui-menu-item {\n	margin: 0;\n	padding: 0;\n	width: 100%;\n	/* support: IE10, see #8844 */\n	list-style-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);\n}\n.ui-menu .ui-menu-divider {\n	margin: 5px -2px 5px -2px;\n	height: 0;\n	font-size: 0;\n	line-height: 0;\n	border-width: 1px 0 0 0;\n}\n.ui-menu .ui-menu-item a {\n	text-decoration: none;\n	display: block;\n	padding: 2px .4em;\n	line-height: 1.5;\n	min-height: 0; /* support: IE7 */\n	font-weight: normal;\n}\n.ui-menu .ui-menu-item a.ui-state-focus,\n.ui-menu .ui-menu-item a.ui-state-active {\n	font-weight: normal;\n	margin: -1px;\n}\n\n.ui-menu .ui-state-disabled {\n	font-weight: normal;\n	margin: .4em 0 .2em;\n	line-height: 1.5;\n}\n.ui-menu .ui-state-disabled a {\n	cursor: default;\n}\n\n/* icon support */\n.ui-menu-icons {\n	position: relative;\n}\n.ui-menu-icons .ui-menu-item a {\n	position: relative;\n	padding-left: 2em;\n}\n\n/* left-aligned */\n.ui-menu .ui-icon {\n	position: absolute;\n	top: .2em;\n	left: .2em;\n}\n\n/* right-aligned */\n.ui-menu .ui-menu-icon {\n	position: static;\n	float: right;\n}\n.ui-progressbar {\n	height: 2em;\n	text-align: left;\n	overflow: hidden;\n}\n.ui-progressbar .ui-progressbar-value {\n	margin: -1px;\n	height: 100%;\n}\n.ui-progressbar .ui-progressbar-overlay {\n	background: url(\"cdf/js/lib/theme/cupertino/images/animated-overlay.gif\");\n	height: 100%;\n	filter: alpha(opacity=25);\n	opacity: 0.25;\n}\n.ui-progressbar-indeterminate .ui-progressbar-value {\n	background-image: none;\n}\n.ui-slider {\n	position: relative;\n	text-align: left;\n}\n.ui-slider .ui-slider-handle {\n	position: absolute;\n	z-index: 2;\n	width: 1.2em;\n	height: 1.2em;\n	cursor: default;\n}\n.ui-slider .ui-slider-range {\n	position: absolute;\n	z-index: 1;\n	font-size: .7em;\n	display: block;\n	border: 0;\n	background-position: 0 0;\n}\n\n/* For IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n	filter: inherit;\n}\n\n.ui-slider-horizontal {\n	height: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n	top: -.3em;\n	margin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n	top: 0;\n	height: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n	left: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n	right: 0;\n}\n\n.ui-slider-vertical {\n	width: .8em;\n	height: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n	left: -.3em;\n	margin-left: 0;\n	margin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n	left: 0;\n	width: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n	bottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n	top: 0;\n}\n.ui-spinner {\n	position: relative;\n	display: inline-block;\n	overflow: hidden;\n	padding: 0;\n	vertical-align: middle;\n}\n.ui-spinner-input {\n	border: none;\n	background: none;\n	color: inherit;\n	padding: 0;\n	margin: .2em 0;\n	vertical-align: middle;\n	margin-left: .4em;\n	margin-right: 22px;\n}\n.ui-spinner-button {\n	width: 16px;\n	height: 50%;\n	font-size: .5em;\n	padding: 0;\n	margin: 0;\n	text-align: center;\n	position: absolute;\n	cursor: default;\n	display: block;\n	overflow: hidden;\n	right: 0;\n}\n/* more specificity required here to override default borders */\n.ui-spinner a.ui-spinner-button {\n	border-top: none;\n	border-bottom: none;\n	border-right: none;\n}\n/* vertically center icon */\n.ui-spinner .ui-icon {\n	position: absolute;\n	margin-top: -8px;\n	top: 50%;\n	left: 0;\n}\n.ui-spinner-up {\n	top: 0;\n}\n.ui-spinner-down {\n	bottom: 0;\n}\n\n/* TR overrides */\n.ui-spinner .ui-icon-triangle-1-s {\n	/* need to fix icons sprite */\n	background-position: -65px -16px;\n}\n.ui-tabs {\n	position: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as \"fixed\") */\n	padding: .2em;\n}\n.ui-tabs .ui-tabs-nav {\n	margin: 0;\n	padding: .2em .2em 0;\n}\n.ui-tabs .ui-tabs-nav li {\n	list-style: none;\n	float: left;\n	position: relative;\n	top: 0;\n	margin: 1px .2em 0 0;\n	border-bottom-width: 0;\n	padding: 0;\n	white-space: nowrap;\n}\n.ui-tabs .ui-tabs-nav .ui-tabs-anchor {\n	float: left;\n	padding: .5em 1em;\n	text-decoration: none;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active {\n	margin-bottom: -1px;\n	padding-bottom: 1px;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {\n	cursor: text;\n}\n.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {\n	cursor: pointer;\n}\n.ui-tabs .ui-tabs-panel {\n	display: block;\n	border-width: 0;\n	padding: 1em 1.4em;\n	background: none;\n}\n.ui-tooltip {\n	padding: 8px;\n	position: absolute;\n	z-index: 9999;\n	max-width: 300px;\n	-webkit-box-shadow: 0 0 5px #aaa;\n	box-shadow: 0 0 5px #aaa;\n}\nbody .ui-tooltip {\n	border-width: 2px;\n}\n\n/* Component containers\n----------------------------------*/\n.ui-widget {\n	font-family: Lucida Grande,Lucida Sans,Arial,sans-serif;\n	font-size: 1.1em;\n}\n.ui-widget .ui-widget {\n	font-size: 1em;\n}\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n	font-family: Lucida Grande,Lucida Sans,Arial,sans-serif;\n	font-size: 1em;\n}\n.ui-widget-content {\n	border: 1px solid #dddddd;\n	background: #f2f5f7 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_highlight-hard_100_f2f5f7_1x100.png\") 50% top repeat-x;\n	color: #362b36;\n}\n.ui-widget-content a {\n	color: #362b36;\n}\n.ui-widget-header {\n	border: 1px solid #aed0ea;\n	background: #deedf7 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_highlight-soft_100_deedf7_1x100.png\") 50% 50% repeat-x;\n	color: #222222;\n	font-weight: bold;\n}\n.ui-widget-header a {\n	color: #222222;\n}\n\n/* Interaction states\n----------------------------------*/\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default {\n	border: 1px solid #aed0ea;\n	background: #d7ebf9 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_glass_80_d7ebf9_1x400.png\") 50% 50% repeat-x;\n	font-weight: bold;\n	color: #2779aa;\n}\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited {\n	color: #2779aa;\n	text-decoration: none;\n}\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus {\n	border: 1px solid #74b2e2;\n	background: #e4f1fb url(\"cdf/js/lib/theme/cupertino/images/ui-bg_glass_100_e4f1fb_1x400.png\") 50% 50% repeat-x;\n	font-weight: bold;\n	color: #0070a3;\n}\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited,\n.ui-state-focus a,\n.ui-state-focus a:hover,\n.ui-state-focus a:link,\n.ui-state-focus a:visited {\n	color: #0070a3;\n	text-decoration: none;\n}\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active {\n	border: 1px solid #2694e8;\n	background: #3baae3 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_glass_50_3baae3_1x400.png\") 50% 50% repeat-x;\n	font-weight: bold;\n	color: #ffffff;\n}\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n	color: #ffffff;\n	text-decoration: none;\n}\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n	border: 1px solid #f9dd34;\n	background: #ffef8f url(\"cdf/js/lib/theme/cupertino/images/ui-bg_highlight-soft_25_ffef8f_1x100.png\") 50% top repeat-x;\n	color: #363636;\n}\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n	color: #363636;\n}\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n	border: 1px solid #cd0a0a;\n	background: #cd0a0a url(\"cdf/js/lib/theme/cupertino/images/ui-bg_flat_15_cd0a0a_40x100.png\") 50% 50% repeat-x;\n	color: #ffffff;\n}\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n	color: #ffffff;\n}\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n	color: #ffffff;\n}\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n	font-weight: bold;\n}\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n	opacity: .7;\n	filter:Alpha(Opacity=70);\n	font-weight: normal;\n}\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n	opacity: .35;\n	filter:Alpha(Opacity=35);\n	background-image: none;\n}\n.ui-state-disabled .ui-icon {\n	filter:Alpha(Opacity=35); /* For IE8 - See #6059 */\n}\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n.ui-icon {\n	width: 16px;\n	height: 16px;\n}\n.ui-icon,\n.ui-widget-content .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_72a7cf_256x240.png\");\n}\n.ui-widget-header .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_72a7cf_256x240.png\");\n}\n.ui-state-default .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_3d80b3_256x240.png\");\n}\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_2694e8_256x240.png\");\n}\n.ui-state-active .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_ffffff_256x240.png\");\n}\n.ui-state-highlight .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_2e83ff_256x240.png\");\n}\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_ffffff_256x240.png\");\n}\n\n/* positioning */\n.ui-icon-blank { background-position: 16px 16px; }\n.ui-icon-carat-1-n { background-position: 0 0; }\n.ui-icon-carat-1-ne { background-position: -16px 0; }\n.ui-icon-carat-1-e { background-position: -32px 0; }\n.ui-icon-carat-1-se { background-position: -48px 0; }\n.ui-icon-carat-1-s { background-position: -64px 0; }\n.ui-icon-carat-1-sw { background-position: -80px 0; }\n.ui-icon-carat-1-w { background-position: -96px 0; }\n.ui-icon-carat-1-nw { background-position: -112px 0; }\n.ui-icon-carat-2-n-s { background-position: -128px 0; }\n.ui-icon-carat-2-e-w { background-position: -144px 0; }\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n.ui-icon-triangle-1-s { background-position: -64px -16px; }\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n.ui-icon-arrow-1-s { background-position: -64px -32px; }\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n.ui-icon-arrowthick-1-n { background-position: 0 -48px; }\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n.ui-icon-extlink { background-position: -32px -80px; }\n.ui-icon-newwin { background-position: -48px -80px; }\n.ui-icon-refresh { background-position: -64px -80px; }\n.ui-icon-shuffle { background-position: -80px -80px; }\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n.ui-icon-folder-open { background-position: -16px -96px; }\n.ui-icon-document { background-position: -32px -96px; }\n.ui-icon-document-b { background-position: -48px -96px; }\n.ui-icon-note { background-position: -64px -96px; }\n.ui-icon-mail-closed { background-position: -80px -96px; }\n.ui-icon-mail-open { background-position: -96px -96px; }\n.ui-icon-suitcase { background-position: -112px -96px; }\n.ui-icon-comment { background-position: -128px -96px; }\n.ui-icon-person { background-position: -144px -96px; }\n.ui-icon-print { background-position: -160px -96px; }\n.ui-icon-trash { background-position: -176px -96px; }\n.ui-icon-locked { background-position: -192px -96px; }\n.ui-icon-unlocked { background-position: -208px -96px; }\n.ui-icon-bookmark { background-position: -224px -96px; }\n.ui-icon-tag { background-position: -240px -96px; }\n.ui-icon-home { background-position: 0 -112px; }\n.ui-icon-flag { background-position: -16px -112px; }\n.ui-icon-calendar { background-position: -32px -112px; }\n.ui-icon-cart { background-position: -48px -112px; }\n.ui-icon-pencil { background-position: -64px -112px; }\n.ui-icon-clock { background-position: -80px -112px; }\n.ui-icon-disk { background-position: -96px -112px; }\n.ui-icon-calculator { background-position: -112px -112px; }\n.ui-icon-zoomin { background-position: -128px -112px; }\n.ui-icon-zoomout { background-position: -144px -112px; }\n.ui-icon-search { background-position: -160px -112px; }\n.ui-icon-wrench { background-position: -176px -112px; }\n.ui-icon-gear { background-position: -192px -112px; }\n.ui-icon-heart { background-position: -208px -112px; }\n.ui-icon-star { background-position: -224px -112px; }\n.ui-icon-link { background-position: -240px -112px; }\n.ui-icon-cancel { background-position: 0 -128px; }\n.ui-icon-plus { background-position: -16px -128px; }\n.ui-icon-plusthick { background-position: -32px -128px; }\n.ui-icon-minus { background-position: -48px -128px; }\n.ui-icon-minusthick { background-position: -64px -128px; }\n.ui-icon-close { background-position: -80px -128px; }\n.ui-icon-closethick { background-position: -96px -128px; }\n.ui-icon-key { background-position: -112px -128px; }\n.ui-icon-lightbulb { background-position: -128px -128px; }\n.ui-icon-scissors { background-position: -144px -128px; }\n.ui-icon-clipboard { background-position: -160px -128px; }\n.ui-icon-copy { background-position: -176px -128px; }\n.ui-icon-contact { background-position: -192px -128px; }\n.ui-icon-image { background-position: -208px -128px; }\n.ui-icon-video { background-position: -224px -128px; }\n.ui-icon-script { background-position: -240px -128px; }\n.ui-icon-alert { background-position: 0 -144px; }\n.ui-icon-info { background-position: -16px -144px; }\n.ui-icon-notice { background-position: -32px -144px; }\n.ui-icon-help { background-position: -48px -144px; }\n.ui-icon-check { background-position: -64px -144px; }\n.ui-icon-bullet { background-position: -80px -144px; }\n.ui-icon-radio-on { background-position: -96px -144px; }\n.ui-icon-radio-off { background-position: -112px -144px; }\n.ui-icon-pin-w { background-position: -128px -144px; }\n.ui-icon-pin-s { background-position: -144px -144px; }\n.ui-icon-play { background-position: 0 -160px; }\n.ui-icon-pause { background-position: -16px -160px; }\n.ui-icon-seek-next { background-position: -32px -160px; }\n.ui-icon-seek-prev { background-position: -48px -160px; }\n.ui-icon-seek-end { background-position: -64px -160px; }\n.ui-icon-seek-start { background-position: -80px -160px; }\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n.ui-icon-seek-first { background-position: -80px -160px; }\n.ui-icon-stop { background-position: -96px -160px; }\n.ui-icon-eject { background-position: -112px -160px; }\n.ui-icon-volume-off { background-position: -128px -160px; }\n.ui-icon-volume-on { background-position: -144px -160px; }\n.ui-icon-power { background-position: 0 -176px; }\n.ui-icon-signal-diag { background-position: -16px -176px; }\n.ui-icon-signal { background-position: -32px -176px; }\n.ui-icon-battery-0 { background-position: -48px -176px; }\n.ui-icon-battery-1 { background-position: -64px -176px; }\n.ui-icon-battery-2 { background-position: -80px -176px; }\n.ui-icon-battery-3 { background-position: -96px -176px; }\n.ui-icon-circle-plus { background-position: 0 -192px; }\n.ui-icon-circle-minus { background-position: -16px -192px; }\n.ui-icon-circle-close { background-position: -32px -192px; }\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n.ui-icon-circle-check { background-position: -208px -192px; }\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n\n/* Misc visuals\n----------------------------------*/\n\n/* Corner radius */\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n	border-top-left-radius: 6px;\n}\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n	border-top-right-radius: 6px;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n	border-bottom-left-radius: 6px;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n	border-bottom-right-radius: 6px;\n}\n\n/* Overlays */\n.ui-widget-overlay {\n	background: #eeeeee url(\"cdf/js/lib/theme/cupertino/images/ui-bg_diagonals-thick_90_eeeeee_40x40.png\") 50% 50% repeat;\n	opacity: .8;\n	filter: Alpha(Opacity=80);\n}\n.ui-widget-shadow {\n	margin: -7px 0 0 -7px;\n	padding: 7px;\n	background: #000000 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_highlight-hard_70_000000_1x100.png\") 50% top repeat-x;\n	opacity: .3;\n	filter: Alpha(Opacity=30);\n	border-radius: 8px;\n}\n/*!\n * Copyright 2002 - 2017 Webdetails, a Hitachi Vantara company. All rights reserved.\n *\n * This software was developed by Webdetails and is provided under the terms\n * of the Mozilla Public License, Version 2.0, or any later version. You may not use\n * this file except in compliance with the license. If you need a copy of the license,\n * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.\n *\n * Software distributed under the Mozilla Public License is distributed on an \"AS IS\"\n * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to\n * the license for the specific language governing your rights and limitations.\n */\n\n.cdfNotification.component * {\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-box-sizing:border-box;\n}\n\n.cdfNotification.component {\n  text-align:center;\n  padding:10px;\n  min-height:100%;\n}\n.cdfNotificationBody{\n  display:inline-block;\n  padding-left:33px;\n  text-align: left;\n  max-width:100%;\n  position:relative;\n  min-height:30px;\n}\n.cdfNotificationImg {\n  width:30px;\n  height:30px;\n  position:absolute;\n  top:0px;\n  left:0px;\n}\n.cdfNotificationTitle {\n  font-size:14px;\n  line-height:1.2;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.cdfNotificationDesc {\n  font-size:11px;\n  line-height:1.2;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n\n.cdfNotification.small {\n  padding:5px;\n}\n\n.cdfNotification.small .cdfNotificationBody{\n  display:inline-block;\n  padding-left:17px;\n  text-align: left;\n  min-height:15px;\n}\n\n.cdfNotification.small .cdfNotificationImg {\n  height:15px;\n  width:15px;\n}\n\n.cdfNotification.small .cdfNotificationTitle {\n  font-size:11px;\n  line-height:1.1;\n  white-space:nowrap;}\n\n.cdfNotification.small .cdfNotificationDesc {\n  font-size:9px;\n  line-height:1.1;\n  white-space:nowrap;\n}\n\n.cdfNotificationContainer {\n  z-index:2100;\n  position:fixed;\n  top:0px;\n  right:0px;\n  width:100%;\n}\n\n.cdfNotificationContainer .cdfNotification.growl {\n  float: right;\n}\n\n.img {\n  /* img class for divs posing as img ( TODO: use an alt-text replacement? ) */\n  display:inline-block;\n}\n\n\n\n.cdfPopupContainer * {\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-box-sizing:border-box;\n}\n.cdfPopupContainer {\n  position:fixed;\n  top: 30%;\n  left:50%;\n  z-index:2000;\n}\n.cdfPopup {\n  width: 390px;\n  margin-left: -195px;\n  background: #D0D0D1;\n  border:solid 2px #000000;\n  overflow:hidden;\n}\n.cdfPopupHeader {\n  height:42px;\n  line-height:42px;\n  width:100%;\n  text-align:center;\n  cursor:default;\n  font-size: 14px;\n  font-weight:bold;\n}\n.cdfPopupBody {\n  height:150px;\n  font-size:12px;\n}\n.cdfPopupDesc {\n  height: 90px;\n  padding-left:20px;\n  padding-right:20px;\n  text-align:center;\n  cursor:default;\n  text-overflow:ellipsis;\n  overflow:hidden;\n  white-space:pre;\n  margin-bottom:10px;\n}\n.cdfPopupButton {\n  height:35px;\n  line-height:35px;\n  border: solid 1px #000000;\n  border-radius: 2px;\n  margin-left:27px;\n  margin-right:27px;\n  text-align:center;\n  cursor:pointer;\n}\n.cdfPopupButton:hover {\n  background-color: #000000;\n  color: #FFFFFF;\n}\n\n/*!\n * Copyright 2002 - 2017 Webdetails, a Hitachi Vantara company. All rights reserved.\n *\n * This software was developed by Webdetails and is provided under the terms\n * of the Mozilla Public License, Version 2.0, or any later version. You may not use\n * this file except in compliance with the license. If you need a copy of the license,\n * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.\n *\n * Software distributed under the Mozilla Public License is distributed on an \"AS IS\"\n * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to\n * the license for the specific language governing your rights and limitations.\n */\n\n.blockUIDefaultImg {\n  background-image: url('cdf/js/lib/blockUI/images/processing_transparent.gif');\n  padding: 0px;\n  height:32px;\n  width:32px;\n  display:inline-block;\n}\n/* @group Base */\n.chzn-container {\n  font-size: 13px;\n  position: relative;\n  display: inline-block;\n  zoom: 1;\n  *display: inline;\n}\n.chzn-container .chzn-drop {\n  background: #fff;\n  border: 1px solid #aaa;\n  border-top: 0;\n  position: absolute;\n  top: 29px;\n  left: 0;\n  -webkit-box-shadow: 0 4px 5px rgba(0,0,0,.15);\n  -moz-box-shadow   : 0 4px 5px rgba(0,0,0,.15);\n  -o-box-shadow     : 0 4px 5px rgba(0,0,0,.15);\n  box-shadow        : 0 4px 5px rgba(0,0,0,.15);\n  z-index: 999;\n}\n/* @end */\n\n/* @group Single Chosen */\n.chzn-container-single .chzn-single {\n  background-color: #fff;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eeeeee), color-stop(0.5, white));\n  background-image: -webkit-linear-gradient(center bottom, #eeeeee 0%, white 50%);\n  background-image: -moz-linear-gradient(center bottom, #eeeeee 0%, white 50%);\n  background-image: -o-linear-gradient(top, #eeeeee 0%,#ffffff 50%);\n  background-image: -ms-linear-gradient(top, #eeeeee 0%,#ffffff 50%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#ffffff',GradientType=0 );\n  background-image: linear-gradient(top, #eeeeee 0%,#ffffff 50%);\n  -webkit-border-radius: 4px;\n  -moz-border-radius   : 4px;\n  border-radius        : 4px;\n  -moz-background-clip   : padding;\n  -webkit-background-clip: padding-box;\n  background-clip        : padding-box;\n  border: 1px solid #aaa;\n  display: block;\n  overflow: hidden;\n  white-space: nowrap;\n  position: relative;\n  height: 26px;\n  line-height: 26px;\n  padding: 0 0 0 8px;\n  color: #444;\n  text-decoration: none;\n}\n.chzn-container-single .chzn-single span {\n  margin-right: 26px;\n  display: block;\n  overflow: hidden;\n  white-space: nowrap;\n  -o-text-overflow: ellipsis;\n  -ms-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n}\n.chzn-container-single .chzn-single div {\n  -webkit-border-radius: 0 4px 4px 0;\n  -moz-border-radius   : 0 4px 4px 0;\n  border-radius        : 0 4px 4px 0;\n  -moz-background-clip   : padding;\n  -webkit-background-clip: padding-box;\n  background-clip        : padding-box;\n  background: #ccc;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #ccc), color-stop(0.6, #eee));\n  background-image: -webkit-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n  background-image: -moz-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n  background-image: -o-linear-gradient(bottom, #ccc 0%, #eee 60%);\n  background-image: -ms-linear-gradient(top, #cccccc 0%,#eeeeee 60%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cccccc', endColorstr='#eeeeee',GradientType=0 );\n  background-image: linear-gradient(top, #cccccc 0%,#eeeeee 60%);\n  border-left: 1px solid #aaa;\n  position: absolute;\n  right: 0;\n  top: 0;\n  display: block;\n  height: 100%;\n  width: 18px;\n}\n.chzn-container-single .chzn-single div b {\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 0 1px;\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.chzn-container-single .chzn-search {\n  padding: 3px 4px;\n  margin: 0;\n  white-space: nowrap;\n}\n.chzn-container-single .chzn-search input {\n  background: #fff url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px;\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, white), color-stop(0.99, #eeeeee));\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -webkit-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -moz-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -o-linear-gradient(bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  margin: 1px 0;\n  padding: 4px 20px 4px 5px;\n  outline: 0;\n  border: 1px solid #aaa;\n  font-family: sans-serif;\n  font-size: 1em;\n}\n.chzn-container-single .chzn-drop {\n  -webkit-border-radius: 0 0 4px 4px;\n  -moz-border-radius   : 0 0 4px 4px;\n  border-radius        : 0 0 4px 4px;\n  -moz-background-clip   : padding;\n  -webkit-background-clip: padding-box;\n  background-clip        : padding-box;\n}\n/* @end */\n\n/* @group Multi Chosen */\n.chzn-container-multi .chzn-choices {\n  background-color: #fff;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0.85, white), color-stop(0.99, #eeeeee));\n  background-image: -webkit-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background-image: -moz-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background-image: -o-linear-gradient(bottom, white 85%, #eeeeee 99%);\n  background-image: -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eeeeee',GradientType=0 );\n  background-image: linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  border: 1px solid #aaa;\n  margin: 0;\n  padding: 0;\n  cursor: text;\n  overflow: hidden;\n  height: auto !important;\n  height: 1%;\n  position: relative;\n}\n.chzn-container-multi .chzn-choices li {\n  float: left;\n  list-style: none;\n}\n.chzn-container-multi .chzn-choices .search-field {\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n}\n.chzn-container-multi .chzn-choices .search-field input {\n  color: #666;\n  background: transparent !important;\n  border: 0 !important;\n  padding: 5px;\n  margin: 1px 0;\n  outline: 0;\n  -webkit-box-shadow: none;\n  -moz-box-shadow   : none;\n  -o-box-shadow     : none;\n  box-shadow        : none;\n}\n.chzn-container-multi .chzn-choices .search-field .default {\n  color: #999;\n}\n.chzn-container-multi .chzn-choices .search-choice {\n  -webkit-border-radius: 3px;\n  -moz-border-radius   : 3px;\n  border-radius        : 3px;\n  -moz-background-clip   : padding;\n  -webkit-background-clip: padding-box;\n  background-clip        : padding-box;\n  background-color: #e4e4e4;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #e4e4e4), color-stop(0.7, #eeeeee));\n  background-image: -webkit-linear-gradient(center bottom, #e4e4e4 0%, #eeeeee 70%);\n  background-image: -moz-linear-gradient(center bottom, #e4e4e4 0%, #eeeeee 70%);\n  background-image: -o-linear-gradient(bottom, #e4e4e4 0%, #eeeeee 70%);\n  background-image: -ms-linear-gradient(top, #e4e4e4 0%,#eeeeee 70%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e4e4e4', endColorstr='#eeeeee',GradientType=0 );\n  background-image: linear-gradient(top, #e4e4e4 0%,#eeeeee 70%);\n  color: #333;\n  border: 1px solid #b4b4b4;\n  line-height: 13px;\n  padding: 3px 19px 3px 6px;\n  margin: 3px 0 3px 5px;\n  position: relative;\n}\n.chzn-container-multi .chzn-choices .search-choice span {\n  cursor: default;\n}\n.chzn-container-multi .chzn-choices .search-choice-focus {\n  background: #d4d4d4;\n}\n.chzn-container-multi .chzn-choices .search-choice .search-choice-close {\n  display: block;\n  position: absolute;\n  right: 5px;\n  top: 6px;\n  width: 8px;\n  height: 9px;\n  font-size: 1px;\n  background: url(cdf/js/lib/chosen/chosen-sprite.png) right top no-repeat;\n}\n.chzn-container-multi .chzn-choices .search-choice .search-choice-close:hover {\n  background-position: right -9px;\n}\n.chzn-container-multi .chzn-choices .search-choice-focus .search-choice-close {\n  background-position: right -9px;\n}\n/* @end */\n\n/* @group Results */\n.chzn-container .chzn-results {\n  margin: 0 4px 4px 0;\n  max-height: 190px;\n  padding: 0 0 0 4px;\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.chzn-container-multi .chzn-results {\n  margin: -1px 0 0;\n  padding: 0;\n}\n.chzn-container .chzn-results li {\n  line-height: 80%;\n  padding: 7px 7px 8px;\n  margin: 0;\n  list-style: none;\n}\n.chzn-container .chzn-results .active-result {\n  cursor: pointer;\n}\n.chzn-container .chzn-results .highlighted {\n  background: #3875d7;\n  color: #fff;\n}\n.chzn-container .chzn-results li em {\n  background: #feffde;\n  font-style: normal;\n}\n.chzn-container .chzn-results .highlighted em {\n  background: transparent;\n}\n.chzn-container .chzn-results .no-results {\n  background: #f4f4f4;\n}\n.chzn-container .chzn-results .group-result {\n  cursor: default;\n  color: #999;\n  font-weight: bold;\n}\n.chzn-container .chzn-results .group-option {\n  padding-left: 20px;\n}\n.chzn-container-multi .chzn-drop .result-selected {\n  display: none;\n}\n/* @end */\n\n/* @group Active  */\n.chzn-container-active .chzn-single {\n  -webkit-box-shadow: 0 0 5px rgba(0,0,0,.3);\n  -moz-box-shadow   : 0 0 5px rgba(0,0,0,.3);\n  -o-box-shadow     : 0 0 5px rgba(0,0,0,.3);\n  box-shadow        : 0 0 5px rgba(0,0,0,.3);\n  border: 1px solid #5897fb;\n}\n.chzn-container-active .chzn-single-with-drop {\n  border: 1px solid #aaa;\n  -webkit-box-shadow: 0 1px 0 #fff inset;\n  -moz-box-shadow   : 0 1px 0 #fff inset;\n  -o-box-shadow     : 0 1px 0 #fff inset;\n  box-shadow        : 0 1px 0 #fff inset;\n  background-color: #eee;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, white), color-stop(0.5, #eeeeee));\n  background-image: -webkit-linear-gradient(center bottom, white 0%, #eeeeee 50%);\n  background-image: -moz-linear-gradient(center bottom, white 0%, #eeeeee 50%);\n  background-image: -o-linear-gradient(bottom, white 0%, #eeeeee 50%);\n  background-image: -ms-linear-gradient(top, #ffffff 0%,#eeeeee 50%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eeeeee',GradientType=0 );\n  background-image: linear-gradient(top, #ffffff 0%,#eeeeee 50%);\n  -webkit-border-bottom-left-radius : 0;\n  -webkit-border-bottom-right-radius: 0;\n  -moz-border-radius-bottomleft : 0;\n  -moz-border-radius-bottomright: 0;\n  border-bottom-left-radius : 0;\n  border-bottom-right-radius: 0;\n}\n.chzn-container-active .chzn-single-with-drop div {\n  background: transparent;\n  border-left: none;\n}\n.chzn-container-active .chzn-single-with-drop div b {\n  background-position: -18px 1px;\n}\n.chzn-container-active .chzn-choices {\n  -webkit-box-shadow: 0 0 5px rgba(0,0,0,.3);\n  -moz-box-shadow   : 0 0 5px rgba(0,0,0,.3);\n  -o-box-shadow     : 0 0 5px rgba(0,0,0,.3);\n  box-shadow        : 0 0 5px rgba(0,0,0,.3);\n  border: 1px solid #5897fb;\n}\n.chzn-container-active .chzn-choices .search-field input {\n  color: #111 !important;\n}\n/* @end */\n\n/* @group Right to Left */\n.chzn-rtl { direction:rtl;text-align: right; }\n.chzn-rtl .chzn-single { padding-left: 0; padding-right: 8px; }\n.chzn-rtl .chzn-single span { margin-left: 26px; margin-right: 0; }\n.chzn-rtl .chzn-single div { \n  left: 0; right: auto; \n  border-left: none; border-right: 1px solid #aaaaaa;\n  -webkit-border-radius: 4px 0 0 4px;\n  -moz-border-radius   : 4px 0 0 4px;\n  border-radius        : 4px 0 0 4px; \n}\n.chzn-rtl .chzn-choices li { float: right; }\n.chzn-rtl .chzn-choices .search-choice { padding: 3px 6px 3px 19px; margin: 3px 5px 3px 0; }\n.chzn-rtl .chzn-choices .search-choice .search-choice-close { left: 5px; right: auto; background-position: right top;}\n.chzn-rtl.chzn-container-single .chzn-results { margin-left: 4px; margin-right: 0; padding-left: 0; padding-right: 4px; }\n.chzn-rtl .chzn-results .group-option { padding-left: 0; padding-right: 20px; }\n.chzn-rtl.chzn-container-active .chzn-single-with-drop div { border-right: none; }\n.chzn-rtl .chzn-search input {\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, #ffffff;\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, white), color-stop(0.99, #eeeeee));\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -webkit-linear-gradient(center bottom, white 85%, #eeeeee 99%);  \n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -moz-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -o-linear-gradient(bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  padding: 4px 5px 4px 20px;\n}\n/* @end */.ui-multiselect { padding:2px 0 2px 4px; text-align:left }\n.ui-multiselect span.ui-icon { float:right }\n.ui-multiselect-single .ui-multiselect-checkboxes input { position:absolute !important; top: auto !important; left:-9999px; }\n.ui-multiselect-single .ui-multiselect-checkboxes label { padding:5px !important }\n\n.ui-multiselect-header { margin-bottom:3px; padding:3px 0 3px 4px }\n.ui-multiselect-header ul { font-size:0.9em }\n.ui-multiselect-header ul li { float:left; padding:0 10px 0 0 }\n.ui-multiselect-header a { text-decoration:none }\n.ui-multiselect-header a:hover { text-decoration:underline }\n.ui-multiselect-header span.ui-icon { float:left }\n.ui-multiselect-header li.ui-multiselect-close { float:right; text-align:right; padding-right:0 }\n\n.ui-multiselect-menu { display:none; padding:3px; position:absolute; z-index:10000 }\n.ui-multiselect-checkboxes { position:relative /* fixes bug in IE6/7 */; overflow-y:scroll }\n.ui-multiselect-checkboxes label { cursor:default; display:block; border:1px solid transparent; padding:3px 1px }\n.ui-multiselect-checkboxes label input { position:relative; top:1px }\n.ui-multiselect-checkboxes li { clear:both; font-size:0.9em; padding-right:3px }\n.ui-multiselect-checkboxes li.ui-multiselect-optgroup-label { text-align:center; font-weight:bold; border-bottom:1px solid }\n.ui-multiselect-checkboxes li.ui-multiselect-optgroup-label a { display:block; padding:3px; margin:1px 0; text-decoration:none }\n\n/* remove label borders in IE6 because IE6 does not support transparency */\n* html .ui-multiselect-checkboxes label { border:none }\n.select2-container {\n  box-sizing: border-box;\n  display: inline-block;\n  margin: 0;\n  position: relative;\n  vertical-align: middle; }\n  .select2-container .select2-selection--single {\n    box-sizing: border-box;\n    cursor: pointer;\n    display: block;\n    height: 28px;\n    user-select: none;\n    -webkit-user-select: none; }\n    .select2-container .select2-selection--single .select2-selection__rendered {\n      display: block;\n      padding-left: 8px;\n      padding-right: 20px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap; }\n    .select2-container .select2-selection--single .select2-selection__clear {\n      position: relative; }\n  .select2-container[dir=\"rtl\"] .select2-selection--single .select2-selection__rendered {\n    padding-right: 8px;\n    padding-left: 20px; }\n  .select2-container .select2-selection--multiple {\n    box-sizing: border-box;\n    cursor: pointer;\n    display: block;\n    min-height: 32px;\n    user-select: none;\n    -webkit-user-select: none; }\n    .select2-container .select2-selection--multiple .select2-selection__rendered {\n      display: inline-block;\n      overflow: hidden;\n      padding-left: 8px;\n      text-overflow: ellipsis;\n      white-space: nowrap; }\n  .select2-container .select2-search--inline {\n    float: left; }\n    .select2-container .select2-search--inline .select2-search__field {\n      box-sizing: border-box;\n      border: none;\n      font-size: 100%;\n      margin-top: 5px;\n      padding: 0; }\n      .select2-container .select2-search--inline .select2-search__field::-webkit-search-cancel-button {\n        -webkit-appearance: none; }\n\n.select2-dropdown {\n  background-color: white;\n  border: 1px solid #aaa;\n  border-radius: 4px;\n  box-sizing: border-box;\n  display: block;\n  position: absolute;\n  left: -100000px;\n  width: 100%;\n  z-index: 1051; }\n\n.select2-results {\n  display: block; }\n\n.select2-results__options {\n  list-style: none;\n  margin: 0;\n  padding: 0; }\n\n.select2-results__option {\n  padding: 6px;\n  user-select: none;\n  -webkit-user-select: none; }\n  .select2-results__option[aria-selected] {\n    cursor: pointer; }\n\n.select2-container--open .select2-dropdown {\n  left: 0; }\n\n.select2-container--open .select2-dropdown--above {\n  border-bottom: none;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0; }\n\n.select2-container--open .select2-dropdown--below {\n  border-top: none;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0; }\n\n.select2-search--dropdown {\n  display: block;\n  padding: 4px; }\n  .select2-search--dropdown .select2-search__field {\n    padding: 4px;\n    width: 100%;\n    box-sizing: border-box; }\n    .select2-search--dropdown .select2-search__field::-webkit-search-cancel-button {\n      -webkit-appearance: none; }\n  .select2-search--dropdown.select2-search--hide {\n    display: none; }\n\n.select2-close-mask {\n  border: 0;\n  margin: 0;\n  padding: 0;\n  display: block;\n  position: fixed;\n  left: 0;\n  top: 0;\n  min-height: 100%;\n  min-width: 100%;\n  height: auto;\n  width: auto;\n  opacity: 0;\n  z-index: 99;\n  background-color: #fff;\n  filter: alpha(opacity=0); }\n\n.select2-hidden-accessible {\n  border: 0 !important;\n  clip: rect(0 0 0 0) !important;\n  height: 1px !important;\n  margin: -1px !important;\n  overflow: hidden !important;\n  padding: 0 !important;\n  position: absolute !important;\n  width: 1px !important; }\n\n.select2-container--default .select2-selection--single {\n  background-color: #fff;\n  border: 1px solid #aaa;\n  border-radius: 4px; }\n  .select2-container--default .select2-selection--single .select2-selection__rendered {\n    color: #444;\n    line-height: 28px; }\n  .select2-container--default .select2-selection--single .select2-selection__clear {\n    cursor: pointer;\n    float: right;\n    font-weight: bold; }\n  .select2-container--default .select2-selection--single .select2-selection__placeholder {\n    color: #999; }\n  .select2-container--default .select2-selection--single .select2-selection__arrow {\n    height: 26px;\n    position: absolute;\n    top: 1px;\n    right: 1px;\n    width: 20px; }\n    .select2-container--default .select2-selection--single .select2-selection__arrow b {\n      border-color: #888 transparent transparent transparent;\n      border-style: solid;\n      border-width: 5px 4px 0 4px;\n      height: 0;\n      left: 50%;\n      margin-left: -4px;\n      margin-top: -2px;\n      position: absolute;\n      top: 50%;\n      width: 0; }\n\n.select2-container--default[dir=\"rtl\"] .select2-selection--single .select2-selection__clear {\n  float: left; }\n\n.select2-container--default[dir=\"rtl\"] .select2-selection--single .select2-selection__arrow {\n  left: 1px;\n  right: auto; }\n\n.select2-container--default.select2-container--disabled .select2-selection--single {\n  background-color: #eee;\n  cursor: default; }\n  .select2-container--default.select2-container--disabled .select2-selection--single .select2-selection__clear {\n    display: none; }\n\n.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow b {\n  border-color: transparent transparent #888 transparent;\n  border-width: 0 4px 5px 4px; }\n\n.select2-container--default .select2-selection--multiple {\n  background-color: white;\n  border: 1px solid #aaa;\n  border-radius: 4px;\n  cursor: text; }\n  .select2-container--default .select2-selection--multiple .select2-selection__rendered {\n    box-sizing: border-box;\n    list-style: none;\n    margin: 0;\n    padding: 0 5px;\n    width: 100%; }\n    .select2-container--default .select2-selection--multiple .select2-selection__rendered li {\n      list-style: none; }\n  .select2-container--default .select2-selection--multiple .select2-selection__placeholder {\n    color: #999;\n    margin-top: 5px;\n    float: left; }\n  .select2-container--default .select2-selection--multiple .select2-selection__clear {\n    cursor: pointer;\n    float: right;\n    font-weight: bold;\n    margin-top: 5px;\n    margin-right: 10px; }\n  .select2-container--default .select2-selection--multiple .select2-selection__choice {\n    background-color: #e4e4e4;\n    border: 1px solid #aaa;\n    border-radius: 4px;\n    cursor: default;\n    float: left;\n    margin-right: 5px;\n    margin-top: 5px;\n    padding: 0 5px; }\n  .select2-container--default .select2-selection--multiple .select2-selection__choice__remove {\n    color: #999;\n    cursor: pointer;\n    display: inline-block;\n    font-weight: bold;\n    margin-right: 2px; }\n    .select2-container--default .select2-selection--multiple .select2-selection__choice__remove:hover {\n      color: #333; }\n\n.select2-container--default[dir=\"rtl\"] .select2-selection--multiple .select2-selection__choice, .select2-container--default[dir=\"rtl\"] .select2-selection--multiple .select2-selection__placeholder, .select2-container--default[dir=\"rtl\"] .select2-selection--multiple .select2-search--inline {\n  float: right; }\n\n.select2-container--default[dir=\"rtl\"] .select2-selection--multiple .select2-selection__choice {\n  margin-left: 5px;\n  margin-right: auto; }\n\n.select2-container--default[dir=\"rtl\"] .select2-selection--multiple .select2-selection__choice__remove {\n  margin-left: 2px;\n  margin-right: auto; }\n\n.select2-container--default.select2-container--focus .select2-selection--multiple {\n  border: solid black 1px;\n  outline: 0; }\n\n.select2-container--default.select2-container--disabled .select2-selection--multiple {\n  background-color: #eee;\n  cursor: default; }\n\n.select2-container--default.select2-container--disabled .select2-selection__choice__remove {\n  display: none; }\n\n.select2-container--default.select2-container--open.select2-container--above .select2-selection--single, .select2-container--default.select2-container--open.select2-container--above .select2-selection--multiple {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0; }\n\n.select2-container--default.select2-container--open.select2-container--below .select2-selection--single, .select2-container--default.select2-container--open.select2-container--below .select2-selection--multiple {\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0; }\n\n.select2-container--default .select2-search--dropdown .select2-search__field {\n  border: 1px solid #aaa; }\n\n.select2-container--default .select2-search--inline .select2-search__field {\n  background: transparent;\n  border: none;\n  outline: 0;\n  box-shadow: none;\n  -webkit-appearance: textfield; }\n\n.select2-container--default .select2-results > .select2-results__options {\n  max-height: 200px;\n  overflow-y: auto; }\n\n.select2-container--default .select2-results__option[role=group] {\n  padding: 0; }\n\n.select2-container--default .select2-results__option[aria-disabled=true] {\n  color: #999; }\n\n.select2-container--default .select2-results__option[aria-selected=true] {\n  background-color: #ddd; }\n\n.select2-container--default .select2-results__option .select2-results__option {\n  padding-left: 1em; }\n  .select2-container--default .select2-results__option .select2-results__option .select2-results__group {\n    padding-left: 0; }\n  .select2-container--default .select2-results__option .select2-results__option .select2-results__option {\n    margin-left: -1em;\n    padding-left: 2em; }\n    .select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option {\n      margin-left: -2em;\n      padding-left: 3em; }\n      .select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option {\n        margin-left: -3em;\n        padding-left: 4em; }\n        .select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option {\n          margin-left: -4em;\n          padding-left: 5em; }\n          .select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option {\n            margin-left: -5em;\n            padding-left: 6em; }\n\n.select2-container--default .select2-results__option--highlighted[aria-selected] {\n  background-color: #5897fb;\n  color: white; }\n\n.select2-container--default .select2-results__group {\n  cursor: default;\n  display: block;\n  padding: 6px; }\n\n.select2-container--classic .select2-selection--single {\n  background-color: #f7f7f7;\n  border: 1px solid #aaa;\n  border-radius: 4px;\n  outline: 0;\n  background-image: -webkit-linear-gradient(top, white 50%, #eeeeee 100%);\n  background-image: -o-linear-gradient(top, white 50%, #eeeeee 100%);\n  background-image: linear-gradient(to bottom, white 50%, #eeeeee 100%);\n  background-repeat: repeat-x;\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFFFF', endColorstr='#FFEEEEEE', GradientType=0); }\n  .select2-container--classic .select2-selection--single:focus {\n    border: 1px solid #5897fb; }\n  .select2-container--classic .select2-selection--single .select2-selection__rendered {\n    color: #444;\n    line-height: 28px; }\n  .select2-container--classic .select2-selection--single .select2-selection__clear {\n    cursor: pointer;\n    float: right;\n    font-weight: bold;\n    margin-right: 10px; }\n  .select2-container--classic .select2-selection--single .select2-selection__placeholder {\n    color: #999; }\n  .select2-container--classic .select2-selection--single .select2-selection__arrow {\n    background-color: #ddd;\n    border: none;\n    border-left: 1px solid #aaa;\n    border-top-right-radius: 4px;\n    border-bottom-right-radius: 4px;\n    height: 26px;\n    position: absolute;\n    top: 1px;\n    right: 1px;\n    width: 20px;\n    background-image: -webkit-linear-gradient(top, #eeeeee 50%, #cccccc 100%);\n    background-image: -o-linear-gradient(top, #eeeeee 50%, #cccccc 100%);\n    background-image: linear-gradient(to bottom, #eeeeee 50%, #cccccc 100%);\n    background-repeat: repeat-x;\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFEEEEEE', endColorstr='#FFCCCCCC', GradientType=0); }\n    .select2-container--classic .select2-selection--single .select2-selection__arrow b {\n      border-color: #888 transparent transparent transparent;\n      border-style: solid;\n      border-width: 5px 4px 0 4px;\n      height: 0;\n      left: 50%;\n      margin-left: -4px;\n      margin-top: -2px;\n      position: absolute;\n      top: 50%;\n      width: 0; }\n\n.select2-container--classic[dir=\"rtl\"] .select2-selection--single .select2-selection__clear {\n  float: left; }\n\n.select2-container--classic[dir=\"rtl\"] .select2-selection--single .select2-selection__arrow {\n  border: none;\n  border-right: 1px solid #aaa;\n  border-radius: 0;\n  border-top-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  left: 1px;\n  right: auto; }\n\n.select2-container--classic.select2-container--open .select2-selection--single {\n  border: 1px solid #5897fb; }\n  .select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow {\n    background: transparent;\n    border: none; }\n    .select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow b {\n      border-color: transparent transparent #888 transparent;\n      border-width: 0 4px 5px 4px; }\n\n.select2-container--classic.select2-container--open.select2-container--above .select2-selection--single {\n  border-top: none;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  background-image: -webkit-linear-gradient(top, white 0%, #eeeeee 50%);\n  background-image: -o-linear-gradient(top, white 0%, #eeeeee 50%);\n  background-image: linear-gradient(to bottom, white 0%, #eeeeee 50%);\n  background-repeat: repeat-x;\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFFFF', endColorstr='#FFEEEEEE', GradientType=0); }\n\n.select2-container--classic.select2-container--open.select2-container--below .select2-selection--single {\n  border-bottom: none;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  background-image: -webkit-linear-gradient(top, #eeeeee 50%, white 100%);\n  background-image: -o-linear-gradient(top, #eeeeee 50%, white 100%);\n  background-image: linear-gradient(to bottom, #eeeeee 50%, white 100%);\n  background-repeat: repeat-x;\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFEEEEEE', endColorstr='#FFFFFFFF', GradientType=0); }\n\n.select2-container--classic .select2-selection--multiple {\n  background-color: white;\n  border: 1px solid #aaa;\n  border-radius: 4px;\n  cursor: text;\n  outline: 0; }\n  .select2-container--classic .select2-selection--multiple:focus {\n    border: 1px solid #5897fb; }\n  .select2-container--classic .select2-selection--multiple .select2-selection__rendered {\n    list-style: none;\n    margin: 0;\n    padding: 0 5px; }\n  .select2-container--classic .select2-selection--multiple .select2-selection__clear {\n    display: none; }\n  .select2-container--classic .select2-selection--multiple .select2-selection__choice {\n    background-color: #e4e4e4;\n    border: 1px solid #aaa;\n    border-radius: 4px;\n    cursor: default;\n    float: left;\n    margin-right: 5px;\n    margin-top: 5px;\n    padding: 0 5px; }\n  .select2-container--classic .select2-selection--multiple .select2-selection__choice__remove {\n    color: #888;\n    cursor: pointer;\n    display: inline-block;\n    font-weight: bold;\n    margin-right: 2px; }\n    .select2-container--classic .select2-selection--multiple .select2-selection__choice__remove:hover {\n      color: #555; }\n\n.select2-container--classic[dir=\"rtl\"] .select2-selection--multiple .select2-selection__choice {\n  float: right; }\n\n.select2-container--classic[dir=\"rtl\"] .select2-selection--multiple .select2-selection__choice {\n  margin-left: 5px;\n  margin-right: auto; }\n\n.select2-container--classic[dir=\"rtl\"] .select2-selection--multiple .select2-selection__choice__remove {\n  margin-left: 2px;\n  margin-right: auto; }\n\n.select2-container--classic.select2-container--open .select2-selection--multiple {\n  border: 1px solid #5897fb; }\n\n.select2-container--classic.select2-container--open.select2-container--above .select2-selection--multiple {\n  border-top: none;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0; }\n\n.select2-container--classic.select2-container--open.select2-container--below .select2-selection--multiple {\n  border-bottom: none;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0; }\n\n.select2-container--classic .select2-search--dropdown .select2-search__field {\n  border: 1px solid #aaa;\n  outline: 0; }\n\n.select2-container--classic .select2-search--inline .select2-search__field {\n  outline: 0;\n  box-shadow: none; }\n\n.select2-container--classic .select2-dropdown {\n  background-color: white;\n  border: 1px solid transparent; }\n\n.select2-container--classic .select2-dropdown--above {\n  border-bottom: none; }\n\n.select2-container--classic .select2-dropdown--below {\n  border-top: none; }\n\n.select2-container--classic .select2-results > .select2-results__options {\n  max-height: 200px;\n  overflow-y: auto; }\n\n.select2-container--classic .select2-results__option[role=group] {\n  padding: 0; }\n\n.select2-container--classic .select2-results__option[aria-disabled=true] {\n  color: grey; }\n\n.select2-container--classic .select2-results__option--highlighted[aria-selected] {\n  background-color: #3875d7;\n  color: white; }\n\n.select2-container--classic .select2-results__group {\n  cursor: default;\n  display: block;\n  padding: 6px; }\n\n.select2-container--classic.select2-container--open .select2-dropdown {\n  border-color: #5897fb; }\n/*!\n * Copyright 2002 - 2017 Webdetails, a Hitachi Vantara company. All rights reserved.\n *\n * This software was developed by Webdetails and is provided under the terms\n * of the Mozilla Public License, Version 2.0, or any later version. You may not use\n * this file except in compliance with the license. If you need a copy of the license,\n * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.\n *\n * Software distributed under the Mozilla Public License is distributed on an \"AS IS\"\n * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to\n * the license for the specific language governing your rights and limitations.\n */\n\n.pentaho-toggle-button-up button {\n  background: #eee;\n  border: 1px outset white;\n}\n\n.pentaho-toggle-button-down button {\n  background: silver;\n  border: 1px inset gray;\n}\n\n\n.boxshadow .pentaho-toggle-button-up button {\n  background: #eee;\n  border: 1px solid gray;\n  box-shadow: inset 1px 1px 4px white,\n  inset -1px -1px 3px silver;\n  -webkit-box-shadow: inset 1px 1px 4px white,\n  inset -1px -1px 3px silver;\n  -moz-box-shadow: inset 1px 1px 4px white,\n  inset -1px -1px 3px silver;\n  -o-box-shadow: inset 1px 1px 4px white,\n  inset -1px -1px 3px silver;\n  -ms-box-shadow: inset 1px 1px 4px white,\n  inset -1px -1px 3px silver;\n}\n\n.boxshadow .pentaho-toggle-button-down button {\n  background: silver;\n  border: 1px solid black;\n  box-shadow: inset 1px 1px 1px gray;\n  -webkit-box-shadow: inset 1px 1px 1px gray;\n  -moz-box-shadow: inset 1px 1px 1px gray;\n  -o-box-shadow: inset 1px 1px 1px gray;\n  -ms-box-shadow: inset 1px 1px 1px gray;\n}\n.tundra input.dijitArrowButtonInner {\n  width: 16px;\n  margin: 0;\n}\n\n.dialog-content .dijitComboBox .dijitArrowButton,\ndiv.dijitDateTextBox.dijitComboBox .dijitArrowButton {\n  /* fallback color */\n  background: transparent;\n  /* Safari/Chrome */\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #AAA), color-stop(0.10, #888), color-stop(0.50, #3f3f3f), color-stop(0.55, #000), color-stop(0.90, #121212));\n  /* Firefox */\n  background: -moz-linear-gradient(#AAAAAA, #888888 10%, #3F3F3F 50%, #000000 55%, #121212 90%) repeat scroll 0 0 transparent;\n}\n"),define("dashboard-module",function(){});